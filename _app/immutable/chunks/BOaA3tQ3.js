import{a as Ju}from"./iLweqiqo.js";import{A as ju}from"./CG7iAfK8.js";function hg(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function cg(r,a){r.d(1),a.delete(r.key)}function fg(r,a,o,l,h,m,v,f,k,_,p,d){let E=r.length,w=m.length,S=E;const O={};for(;S--;)O[r[S].key]=S;const P=[],L=new Map,F=new Map,b=[];for(S=w;S--;){const q=d(h,m,S),$=o(q);let U=v.get($);U?b.push(()=>U.p(q,a)):(U=_($,q),U.c()),L.set($,P[S]=U),$ in O&&F.set($,Math.abs(S-O[$]))}const Y=new Set,A=new Set;function X(q){Ju(q,1),q.m(f,p),v.set(q.key,q),p=q.first,w--}for(;E&&w;){const q=P[w-1],$=r[E-1],U=q.key,nt=$.key;q===$?(p=q.first,E--,w--):L.has(nt)?!v.has(U)||Y.has(U)?X(q):A.has(nt)?E--:F.get(U)>F.get(nt)?(A.add(U),X(q)):(Y.add(nt),E--):(k($,v),E--)}for(;E--;){const q=r[E];L.has(q.key)||k(q,v)}for(;w;)X(P[w-1]);return ju(b),P}function Yn(r,a){return r==null||a==null?NaN:r<a?-1:r>a?1:r>=a?0:NaN}function to(r,a){return r==null||a==null?NaN:a<r?-1:a>r?1:a>=r?0:NaN}function Ks(r){let a,o,l;r.length!==2?(a=Yn,o=(f,k)=>Yn(r(f),k),l=(f,k)=>r(f)-k):(a=r===Yn||r===to?r:eo,o=r,l=r);function h(f,k,_=0,p=f.length){if(_<p){if(a(k,k)!==0)return p;do{const d=_+p>>>1;o(f[d],k)<0?_=d+1:p=d}while(_<p)}return _}function m(f,k,_=0,p=f.length){if(_<p){if(a(k,k)!==0)return p;do{const d=_+p>>>1;o(f[d],k)<=0?_=d+1:p=d}while(_<p)}return _}function v(f,k,_=0,p=f.length){const d=h(f,k,_,p-1);return d>_&&l(f[d-1],k)>-l(f[d],k)?d-1:d}return{left:h,center:v,right:m}}function eo(){return 0}function no(r){return r===null?NaN:+r}const io=Ks(Yn),ro=io.right;Ks(no).center;const so=Math.sqrt(50),ao=Math.sqrt(10),uo=Math.sqrt(2);function Zn(r,a,o){const l=(a-r)/Math.max(0,o),h=Math.floor(Math.log10(l)),m=l/Math.pow(10,h),v=m>=so?10:m>=ao?5:m>=uo?2:1;let f,k,_;return h<0?(_=Math.pow(10,-h)/v,f=Math.round(r*_),k=Math.round(a*_),f/_<r&&++f,k/_>a&&--k,_=-_):(_=Math.pow(10,h)*v,f=Math.round(r/_),k=Math.round(a/_),f*_<r&&++f,k*_>a&&--k),k<f&&.5<=o&&o<2?Zn(r,a,o*2):[f,k,_]}function oo(r,a,o){if(a=+a,r=+r,o=+o,!(o>0))return[];if(r===a)return[r];const l=a<r,[h,m,v]=l?Zn(a,r,o):Zn(r,a,o);if(!(m>=h))return[];const f=m-h+1,k=new Array(f);if(l)if(v<0)for(let _=0;_<f;++_)k[_]=(m-_)/-v;else for(let _=0;_<f;++_)k[_]=(m-_)*v;else if(v<0)for(let _=0;_<f;++_)k[_]=(h+_)/-v;else for(let _=0;_<f;++_)k[_]=(h+_)*v;return k}function qi(r,a,o){return a=+a,r=+r,o=+o,Zn(r,a,o)[2]}function lo(r,a,o){a=+a,r=+r,o=+o;const l=a<r,h=l?qi(a,r,o):qi(r,a,o);return(l?-1:1)*(h<0?1/-h:h)}function gg(r,a){let o;for(const l of r)l!=null&&(o<l||o===void 0&&l>=l)&&(o=l);return o}function mg(r,a){let o;for(const l of r)l!=null&&(o>l||o===void 0&&l>=l)&&(o=l);return o}var ho={value:()=>{}};function nr(){for(var r=0,a=arguments.length,o={},l;r<a;++r){if(!(l=arguments[r]+"")||l in o||/[\s.]/.test(l))throw new Error("illegal type: "+l);o[l]=[]}return new Xn(o)}function Xn(r){this._=r}function co(r,a){return r.trim().split(/^|\s+/).map(function(o){var l="",h=o.indexOf(".");if(h>=0&&(l=o.slice(h+1),o=o.slice(0,h)),o&&!a.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:l}})}Xn.prototype=nr.prototype={constructor:Xn,on:function(r,a){var o=this._,l=co(r+"",o),h,m=-1,v=l.length;if(arguments.length<2){for(;++m<v;)if((h=(r=l[m]).type)&&(h=fo(o[h],r.name)))return h;return}if(a!=null&&typeof a!="function")throw new Error("invalid callback: "+a);for(;++m<v;)if(h=(r=l[m]).type)o[h]=as(o[h],r.name,a);else if(a==null)for(h in o)o[h]=as(o[h],r.name,null);return this},copy:function(){var r={},a=this._;for(var o in a)r[o]=a[o].slice();return new Xn(r)},call:function(r,a){if((h=arguments.length-2)>0)for(var o=new Array(h),l=0,h,m;l<h;++l)o[l]=arguments[l+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(m=this._[r],l=0,h=m.length;l<h;++l)m[l].value.apply(a,o)},apply:function(r,a,o){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var l=this._[r],h=0,m=l.length;h<m;++h)l[h].value.apply(a,o)}};function fo(r,a){for(var o=0,l=r.length,h;o<l;++o)if((h=r[o]).name===a)return h.value}function as(r,a,o){for(var l=0,h=r.length;l<h;++l)if(r[l].name===a){r[l]=ho,r=r.slice(0,l).concat(r.slice(l+1));break}return o!=null&&r.push({name:a,value:o}),r}var zi="http://www.w3.org/1999/xhtml";const us={svg:"http://www.w3.org/2000/svg",xhtml:zi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function li(r){var a=r+="",o=a.indexOf(":");return o>=0&&(a=r.slice(0,o))!=="xmlns"&&(r=r.slice(o+1)),us.hasOwnProperty(a)?{space:us[a],local:r}:r}function go(r){return function(){var a=this.ownerDocument,o=this.namespaceURI;return o===zi&&a.documentElement.namespaceURI===zi?a.createElement(r):a.createElementNS(o,r)}}function mo(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function Qs(r){var a=li(r);return(a.local?mo:go)(a)}function vo(){}function ir(r){return r==null?vo:function(){return this.querySelector(r)}}function yo(r){typeof r!="function"&&(r=ir(r));for(var a=this._groups,o=a.length,l=new Array(o),h=0;h<o;++h)for(var m=a[h],v=m.length,f=l[h]=new Array(v),k,_,p=0;p<v;++p)(k=m[p])&&(_=r.call(k,k.__data__,p,m))&&("__data__"in k&&(_.__data__=k.__data__),f[p]=_);return new Ft(l,this._parents)}function _o(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function po(){return[]}function Js(r){return r==null?po:function(){return this.querySelectorAll(r)}}function ko(r){return function(){return _o(r.apply(this,arguments))}}function xo(r){typeof r=="function"?r=ko(r):r=Js(r);for(var a=this._groups,o=a.length,l=[],h=[],m=0;m<o;++m)for(var v=a[m],f=v.length,k,_=0;_<f;++_)(k=v[_])&&(l.push(r.call(k,k.__data__,_,v)),h.push(k));return new Ft(l,h)}function js(r){return function(){return this.matches(r)}}function ta(r){return function(a){return a.matches(r)}}var Eo=Array.prototype.find;function No(r){return function(){return Eo.call(this.children,r)}}function Io(){return this.firstElementChild}function wo(r){return this.select(r==null?Io:No(typeof r=="function"?r:ta(r)))}var So=Array.prototype.filter;function To(){return Array.from(this.children)}function Co(r){return function(){return So.call(this.children,r)}}function Ro(r){return this.selectAll(r==null?To:Co(typeof r=="function"?r:ta(r)))}function Lo(r){typeof r!="function"&&(r=js(r));for(var a=this._groups,o=a.length,l=new Array(o),h=0;h<o;++h)for(var m=a[h],v=m.length,f=l[h]=[],k,_=0;_<v;++_)(k=m[_])&&r.call(k,k.__data__,_,m)&&f.push(k);return new Ft(l,this._parents)}function ea(r){return new Array(r.length)}function Mo(){return new Ft(this._enter||this._groups.map(ea),this._parents)}function Wn(r,a){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=a}Wn.prototype={constructor:Wn,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,a){return this._parent.insertBefore(r,a)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function Oo(r){return function(){return r}}function bo(r,a,o,l,h,m){for(var v=0,f,k=a.length,_=m.length;v<_;++v)(f=a[v])?(f.__data__=m[v],l[v]=f):o[v]=new Wn(r,m[v]);for(;v<k;++v)(f=a[v])&&(h[v]=f)}function Ao(r,a,o,l,h,m,v){var f,k,_=new Map,p=a.length,d=m.length,E=new Array(p),w;for(f=0;f<p;++f)(k=a[f])&&(E[f]=w=v.call(k,k.__data__,f,a)+"",_.has(w)?h[f]=k:_.set(w,k));for(f=0;f<d;++f)w=v.call(r,m[f],f,m)+"",(k=_.get(w))?(l[f]=k,k.__data__=m[f],_.delete(w)):o[f]=new Wn(r,m[f]);for(f=0;f<p;++f)(k=a[f])&&_.get(E[f])===k&&(h[f]=k)}function Po(r){return r.__data__}function Do(r,a){if(!arguments.length)return Array.from(this,Po);var o=a?Ao:bo,l=this._parents,h=this._groups;typeof r!="function"&&(r=Oo(r));for(var m=h.length,v=new Array(m),f=new Array(m),k=new Array(m),_=0;_<m;++_){var p=l[_],d=h[_],E=d.length,w=Fo(r.call(p,p&&p.__data__,_,l)),S=w.length,O=f[_]=new Array(S),P=v[_]=new Array(S),L=k[_]=new Array(E);o(p,d,O,P,L,w,a);for(var F=0,b=0,Y,A;F<S;++F)if(Y=O[F]){for(F>=b&&(b=F+1);!(A=P[b])&&++b<S;);Y._next=A||null}}return v=new Ft(v,l),v._enter=f,v._exit=k,v}function Fo(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function Go(){return new Ft(this._exit||this._groups.map(ea),this._parents)}function qo(r,a,o){var l=this.enter(),h=this,m=this.exit();return typeof r=="function"?(l=r(l),l&&(l=l.selection())):l=l.append(r+""),a!=null&&(h=a(h),h&&(h=h.selection())),o==null?m.remove():o(m),l&&h?l.merge(h).order():h}function zo(r){for(var a=r.selection?r.selection():r,o=this._groups,l=a._groups,h=o.length,m=l.length,v=Math.min(h,m),f=new Array(h),k=0;k<v;++k)for(var _=o[k],p=l[k],d=_.length,E=f[k]=new Array(d),w,S=0;S<d;++S)(w=_[S]||p[S])&&(E[S]=w);for(;k<h;++k)f[k]=o[k];return new Ft(f,this._parents)}function Yo(){for(var r=this._groups,a=-1,o=r.length;++a<o;)for(var l=r[a],h=l.length-1,m=l[h],v;--h>=0;)(v=l[h])&&(m&&v.compareDocumentPosition(m)^4&&m.parentNode.insertBefore(v,m),m=v);return this}function Xo(r){r||(r=Bo);function a(d,E){return d&&E?r(d.__data__,E.__data__):!d-!E}for(var o=this._groups,l=o.length,h=new Array(l),m=0;m<l;++m){for(var v=o[m],f=v.length,k=h[m]=new Array(f),_,p=0;p<f;++p)(_=v[p])&&(k[p]=_);k.sort(a)}return new Ft(h,this._parents).order()}function Bo(r,a){return r<a?-1:r>a?1:r>=a?0:NaN}function Uo(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function Vo(){return Array.from(this)}function Ho(){for(var r=this._groups,a=0,o=r.length;a<o;++a)for(var l=r[a],h=0,m=l.length;h<m;++h){var v=l[h];if(v)return v}return null}function $o(){let r=0;for(const a of this)++r;return r}function Zo(){return!this.node()}function Wo(r){for(var a=this._groups,o=0,l=a.length;o<l;++o)for(var h=a[o],m=0,v=h.length,f;m<v;++m)(f=h[m])&&r.call(f,f.__data__,m,h);return this}function Ko(r){return function(){this.removeAttribute(r)}}function Qo(r){return function(){this.removeAttributeNS(r.space,r.local)}}function Jo(r,a){return function(){this.setAttribute(r,a)}}function jo(r,a){return function(){this.setAttributeNS(r.space,r.local,a)}}function tl(r,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(r):this.setAttribute(r,o)}}function el(r,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,o)}}function nl(r,a){var o=li(r);if(arguments.length<2){var l=this.node();return o.local?l.getAttributeNS(o.space,o.local):l.getAttribute(o)}return this.each((a==null?o.local?Qo:Ko:typeof a=="function"?o.local?el:tl:o.local?jo:Jo)(o,a))}function na(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function il(r){return function(){this.style.removeProperty(r)}}function rl(r,a,o){return function(){this.style.setProperty(r,a,o)}}function sl(r,a,o){return function(){var l=a.apply(this,arguments);l==null?this.style.removeProperty(r):this.style.setProperty(r,l,o)}}function al(r,a,o){return arguments.length>1?this.each((a==null?il:typeof a=="function"?sl:rl)(r,a,o??"")):Ye(this.node(),r)}function Ye(r,a){return r.style.getPropertyValue(a)||na(r).getComputedStyle(r,null).getPropertyValue(a)}function ul(r){return function(){delete this[r]}}function ol(r,a){return function(){this[r]=a}}function ll(r,a){return function(){var o=a.apply(this,arguments);o==null?delete this[r]:this[r]=o}}function hl(r,a){return arguments.length>1?this.each((a==null?ul:typeof a=="function"?ll:ol)(r,a)):this.node()[r]}function ia(r){return r.trim().split(/^|\s+/)}function rr(r){return r.classList||new ra(r)}function ra(r){this._node=r,this._names=ia(r.getAttribute("class")||"")}ra.prototype={add:function(r){var a=this._names.indexOf(r);a<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var a=this._names.indexOf(r);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function sa(r,a){for(var o=rr(r),l=-1,h=a.length;++l<h;)o.add(a[l])}function aa(r,a){for(var o=rr(r),l=-1,h=a.length;++l<h;)o.remove(a[l])}function cl(r){return function(){sa(this,r)}}function fl(r){return function(){aa(this,r)}}function gl(r,a){return function(){(a.apply(this,arguments)?sa:aa)(this,r)}}function ml(r,a){var o=ia(r+"");if(arguments.length<2){for(var l=rr(this.node()),h=-1,m=o.length;++h<m;)if(!l.contains(o[h]))return!1;return!0}return this.each((typeof a=="function"?gl:a?cl:fl)(o,a))}function vl(){this.textContent=""}function yl(r){return function(){this.textContent=r}}function dl(r){return function(){var a=r.apply(this,arguments);this.textContent=a??""}}function _l(r){return arguments.length?this.each(r==null?vl:(typeof r=="function"?dl:yl)(r)):this.node().textContent}function pl(){this.innerHTML=""}function kl(r){return function(){this.innerHTML=r}}function xl(r){return function(){var a=r.apply(this,arguments);this.innerHTML=a??""}}function El(r){return arguments.length?this.each(r==null?pl:(typeof r=="function"?xl:kl)(r)):this.node().innerHTML}function Nl(){this.nextSibling&&this.parentNode.appendChild(this)}function Il(){return this.each(Nl)}function wl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sl(){return this.each(wl)}function Tl(r){var a=typeof r=="function"?r:Qs(r);return this.select(function(){return this.appendChild(a.apply(this,arguments))})}function Cl(){return null}function Rl(r,a){var o=typeof r=="function"?r:Qs(r),l=a==null?Cl:typeof a=="function"?a:ir(a);return this.select(function(){return this.insertBefore(o.apply(this,arguments),l.apply(this,arguments)||null)})}function Ll(){var r=this.parentNode;r&&r.removeChild(this)}function Ml(){return this.each(Ll)}function Ol(){var r=this.cloneNode(!1),a=this.parentNode;return a?a.insertBefore(r,this.nextSibling):r}function bl(){var r=this.cloneNode(!0),a=this.parentNode;return a?a.insertBefore(r,this.nextSibling):r}function Al(r){return this.select(r?bl:Ol)}function Pl(r){return arguments.length?this.property("__data__",r):this.node().__data__}function Dl(r){return function(a){r.call(this,a,this.__data__)}}function Fl(r){return r.trim().split(/^|\s+/).map(function(a){var o="",l=a.indexOf(".");return l>=0&&(o=a.slice(l+1),a=a.slice(0,l)),{type:a,name:o}})}function Gl(r){return function(){var a=this.__on;if(a){for(var o=0,l=-1,h=a.length,m;o<h;++o)m=a[o],(!r.type||m.type===r.type)&&m.name===r.name?this.removeEventListener(m.type,m.listener,m.options):a[++l]=m;++l?a.length=l:delete this.__on}}}function ql(r,a,o){return function(){var l=this.__on,h,m=Dl(a);if(l){for(var v=0,f=l.length;v<f;++v)if((h=l[v]).type===r.type&&h.name===r.name){this.removeEventListener(h.type,h.listener,h.options),this.addEventListener(h.type,h.listener=m,h.options=o),h.value=a;return}}this.addEventListener(r.type,m,o),h={type:r.type,name:r.name,value:a,listener:m,options:o},l?l.push(h):this.__on=[h]}}function zl(r,a,o){var l=Fl(r+""),h,m=l.length,v;if(arguments.length<2){var f=this.node().__on;if(f){for(var k=0,_=f.length,p;k<_;++k)for(h=0,p=f[k];h<m;++h)if((v=l[h]).type===p.type&&v.name===p.name)return p.value}return}for(f=a?ql:Gl,h=0;h<m;++h)this.each(f(l[h],a,o));return this}function ua(r,a,o){var l=na(r),h=l.CustomEvent;typeof h=="function"?h=new h(a,o):(h=l.document.createEvent("Event"),o?(h.initEvent(a,o.bubbles,o.cancelable),h.detail=o.detail):h.initEvent(a,!1,!1)),r.dispatchEvent(h)}function Yl(r,a){return function(){return ua(this,r,a)}}function Xl(r,a){return function(){return ua(this,r,a.apply(this,arguments))}}function Bl(r,a){return this.each((typeof a=="function"?Xl:Yl)(r,a))}function*Ul(){for(var r=this._groups,a=0,o=r.length;a<o;++a)for(var l=r[a],h=0,m=l.length,v;h<m;++h)(v=l[h])&&(yield v)}var oa=[null];function Ft(r,a){this._groups=r,this._parents=a}function vn(){return new Ft([[document.documentElement]],oa)}function Vl(){return this}Ft.prototype=vn.prototype={constructor:Ft,select:yo,selectAll:xo,selectChild:wo,selectChildren:Ro,filter:Lo,data:Do,enter:Mo,exit:Go,join:qo,merge:zo,selection:Vl,order:Yo,sort:Xo,call:Uo,nodes:Vo,node:Ho,size:$o,empty:Zo,each:Wo,attr:nl,style:al,property:hl,classed:ml,text:_l,html:El,raise:Il,lower:Sl,append:Tl,insert:Rl,remove:Ml,clone:Al,datum:Pl,on:zl,dispatch:Bl,[Symbol.iterator]:Ul};function we(r){return typeof r=="string"?new Ft([[document.querySelector(r)]],[document.documentElement]):new Ft([[r]],oa)}function Hl(r){let a;for(;a=r.sourceEvent;)r=a;return r}function Ie(r,a){if(r=Hl(r),a===void 0&&(a=r.currentTarget),a){var o=a.ownerSVGElement||a;if(o.createSVGPoint){var l=o.createSVGPoint();return l.x=r.clientX,l.y=r.clientY,l=l.matrixTransform(a.getScreenCTM().inverse()),[l.x,l.y]}if(a.getBoundingClientRect){var h=a.getBoundingClientRect();return[r.clientX-h.left-a.clientLeft,r.clientY-h.top-a.clientTop]}}return[r.pageX,r.pageY]}const Yi={capture:!0,passive:!1};function Xi(r){r.preventDefault(),r.stopImmediatePropagation()}function $l(r){var a=r.document.documentElement,o=we(r).on("dragstart.drag",Xi,Yi);"onselectstart"in a?o.on("selectstart.drag",Xi,Yi):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function Zl(r,a){var o=r.document.documentElement,l=we(r).on("dragstart.drag",null);a&&(l.on("click.drag",Xi,Yi),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in o?l.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}function sr(r,a,o){r.prototype=a.prototype=o,o.constructor=r}function la(r,a){var o=Object.create(r.prototype);for(var l in a)o[l]=a[l];return o}function yn(){}var cn=.7,Kn=1/cn,ze="\\s*([+-]?\\d+)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wl=/^#([0-9a-f]{3,8})$/,Kl=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Ql=new RegExp(`^rgb\\(${ne},${ne},${ne}\\)$`),Jl=new RegExp(`^rgba\\(${ze},${ze},${ze},${fn}\\)$`),jl=new RegExp(`^rgba\\(${ne},${ne},${ne},${fn}\\)$`),th=new RegExp(`^hsl\\(${fn},${ne},${ne}\\)$`),eh=new RegExp(`^hsla\\(${fn},${ne},${ne},${fn}\\)$`),os={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sr(yn,Ce,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:ls,formatHex:ls,formatHex8:nh,formatHsl:ih,formatRgb:hs,toString:hs});function ls(){return this.rgb().formatHex()}function nh(){return this.rgb().formatHex8()}function ih(){return ha(this).formatHsl()}function hs(){return this.rgb().formatRgb()}function Ce(r){var a,o;return r=(r+"").trim().toLowerCase(),(a=Wl.exec(r))?(o=a[1].length,a=parseInt(a[1],16),o===6?cs(a):o===3?new bt(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):o===8?Ln(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):o===4?Ln(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=Kl.exec(r))?new bt(a[1],a[2],a[3],1):(a=Ql.exec(r))?new bt(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=Jl.exec(r))?Ln(a[1],a[2],a[3],a[4]):(a=jl.exec(r))?Ln(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=th.exec(r))?ms(a[1],a[2]/100,a[3]/100,1):(a=eh.exec(r))?ms(a[1],a[2]/100,a[3]/100,a[4]):os.hasOwnProperty(r)?cs(os[r]):r==="transparent"?new bt(NaN,NaN,NaN,0):null}function cs(r){return new bt(r>>16&255,r>>8&255,r&255,1)}function Ln(r,a,o,l){return l<=0&&(r=a=o=NaN),new bt(r,a,o,l)}function rh(r){return r instanceof yn||(r=Ce(r)),r?(r=r.rgb(),new bt(r.r,r.g,r.b,r.opacity)):new bt}function Bi(r,a,o,l){return arguments.length===1?rh(r):new bt(r,a,o,l??1)}function bt(r,a,o,l){this.r=+r,this.g=+a,this.b=+o,this.opacity=+l}sr(bt,Bi,la(yn,{brighter(r){return r=r==null?Kn:Math.pow(Kn,r),new bt(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?cn:Math.pow(cn,r),new bt(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new bt(Te(this.r),Te(this.g),Te(this.b),Qn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fs,formatHex:fs,formatHex8:sh,formatRgb:gs,toString:gs}));function fs(){return`#${Se(this.r)}${Se(this.g)}${Se(this.b)}`}function sh(){return`#${Se(this.r)}${Se(this.g)}${Se(this.b)}${Se((isNaN(this.opacity)?1:this.opacity)*255)}`}function gs(){const r=Qn(this.opacity);return`${r===1?"rgb(":"rgba("}${Te(this.r)}, ${Te(this.g)}, ${Te(this.b)}${r===1?")":`, ${r})`}`}function Qn(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Te(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Se(r){return r=Te(r),(r<16?"0":"")+r.toString(16)}function ms(r,a,o,l){return l<=0?r=a=o=NaN:o<=0||o>=1?r=a=NaN:a<=0&&(r=NaN),new Zt(r,a,o,l)}function ha(r){if(r instanceof Zt)return new Zt(r.h,r.s,r.l,r.opacity);if(r instanceof yn||(r=Ce(r)),!r)return new Zt;if(r instanceof Zt)return r;r=r.rgb();var a=r.r/255,o=r.g/255,l=r.b/255,h=Math.min(a,o,l),m=Math.max(a,o,l),v=NaN,f=m-h,k=(m+h)/2;return f?(a===m?v=(o-l)/f+(o<l)*6:o===m?v=(l-a)/f+2:v=(a-o)/f+4,f/=k<.5?m+h:2-m-h,v*=60):f=k>0&&k<1?0:v,new Zt(v,f,k,r.opacity)}function ah(r,a,o,l){return arguments.length===1?ha(r):new Zt(r,a,o,l??1)}function Zt(r,a,o,l){this.h=+r,this.s=+a,this.l=+o,this.opacity=+l}sr(Zt,ah,la(yn,{brighter(r){return r=r==null?Kn:Math.pow(Kn,r),new Zt(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?cn:Math.pow(cn,r),new Zt(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,a=isNaN(r)||isNaN(this.s)?0:this.s,o=this.l,l=o+(o<.5?o:1-o)*a,h=2*o-l;return new bt(bi(r>=240?r-240:r+120,h,l),bi(r,h,l),bi(r<120?r+240:r-120,h,l),this.opacity)},clamp(){return new Zt(vs(this.h),Mn(this.s),Mn(this.l),Qn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Qn(this.opacity);return`${r===1?"hsl(":"hsla("}${vs(this.h)}, ${Mn(this.s)*100}%, ${Mn(this.l)*100}%${r===1?")":`, ${r})`}`}}));function vs(r){return r=(r||0)%360,r<0?r+360:r}function Mn(r){return Math.max(0,Math.min(1,r||0))}function bi(r,a,o){return(r<60?a+(o-a)*r/60:r<180?o:r<240?a+(o-a)*(240-r)/60:a)*255}const ar=r=>()=>r;function uh(r,a){return function(o){return r+o*a}}function oh(r,a,o){return r=Math.pow(r,o),a=Math.pow(a,o)-r,o=1/o,function(l){return Math.pow(r+l*a,o)}}function lh(r){return(r=+r)==1?ca:function(a,o){return o-a?oh(a,o,r):ar(isNaN(a)?o:a)}}function ca(r,a){var o=a-r;return o?uh(r,o):ar(isNaN(r)?a:r)}const Jn=function r(a){var o=lh(a);function l(h,m){var v=o((h=Bi(h)).r,(m=Bi(m)).r),f=o(h.g,m.g),k=o(h.b,m.b),_=ca(h.opacity,m.opacity);return function(p){return h.r=v(p),h.g=f(p),h.b=k(p),h.opacity=_(p),h+""}}return l.gamma=r,l}(1);function hh(r,a){a||(a=[]);var o=r?Math.min(a.length,r.length):0,l=a.slice(),h;return function(m){for(h=0;h<o;++h)l[h]=r[h]*(1-m)+a[h]*m;return l}}function ch(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function fh(r,a){var o=a?a.length:0,l=r?Math.min(o,r.length):0,h=new Array(l),m=new Array(o),v;for(v=0;v<l;++v)h[v]=ur(r[v],a[v]);for(;v<o;++v)m[v]=a[v];return function(f){for(v=0;v<l;++v)m[v]=h[v](f);return m}}function gh(r,a){var o=new Date;return r=+r,a=+a,function(l){return o.setTime(r*(1-l)+a*l),o}}function $t(r,a){return r=+r,a=+a,function(o){return r*(1-o)+a*o}}function mh(r,a){var o={},l={},h;(r===null||typeof r!="object")&&(r={}),(a===null||typeof a!="object")&&(a={});for(h in a)h in r?o[h]=ur(r[h],a[h]):l[h]=a[h];return function(m){for(h in o)l[h]=o[h](m);return l}}var Ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ai=new RegExp(Ui.source,"g");function vh(r){return function(){return r}}function yh(r){return function(a){return r(a)+""}}function fa(r,a){var o=Ui.lastIndex=Ai.lastIndex=0,l,h,m,v=-1,f=[],k=[];for(r=r+"",a=a+"";(l=Ui.exec(r))&&(h=Ai.exec(a));)(m=h.index)>o&&(m=a.slice(o,m),f[v]?f[v]+=m:f[++v]=m),(l=l[0])===(h=h[0])?f[v]?f[v]+=h:f[++v]=h:(f[++v]=null,k.push({i:v,x:$t(l,h)})),o=Ai.lastIndex;return o<a.length&&(m=a.slice(o),f[v]?f[v]+=m:f[++v]=m),f.length<2?k[0]?yh(k[0].x):vh(a):(a=k.length,function(_){for(var p=0,d;p<a;++p)f[(d=k[p]).i]=d.x(_);return f.join("")})}function ur(r,a){var o=typeof a,l;return a==null||o==="boolean"?ar(a):(o==="number"?$t:o==="string"?(l=Ce(a))?(a=l,Jn):fa:a instanceof Ce?Jn:a instanceof Date?gh:ch(a)?hh:Array.isArray(a)?fh:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?mh:$t)(r,a)}function dh(r,a){return r=+r,a=+a,function(o){return Math.round(r*(1-o)+a*o)}}var ys=180/Math.PI,Vi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ga(r,a,o,l,h,m){var v,f,k;return(v=Math.sqrt(r*r+a*a))&&(r/=v,a/=v),(k=r*o+a*l)&&(o-=r*k,l-=a*k),(f=Math.sqrt(o*o+l*l))&&(o/=f,l/=f,k/=f),r*l<a*o&&(r=-r,a=-a,k=-k,v=-v),{translateX:h,translateY:m,rotate:Math.atan2(a,r)*ys,skewX:Math.atan(k)*ys,scaleX:v,scaleY:f}}var On;function _h(r){const a=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return a.isIdentity?Vi:ga(a.a,a.b,a.c,a.d,a.e,a.f)}function ph(r){return r==null||(On||(On=document.createElementNS("http://www.w3.org/2000/svg","g")),On.setAttribute("transform",r),!(r=On.transform.baseVal.consolidate()))?Vi:(r=r.matrix,ga(r.a,r.b,r.c,r.d,r.e,r.f))}function ma(r,a,o,l){function h(_){return _.length?_.pop()+" ":""}function m(_,p,d,E,w,S){if(_!==d||p!==E){var O=w.push("translate(",null,a,null,o);S.push({i:O-4,x:$t(_,d)},{i:O-2,x:$t(p,E)})}else(d||E)&&w.push("translate("+d+a+E+o)}function v(_,p,d,E){_!==p?(_-p>180?p+=360:p-_>180&&(_+=360),E.push({i:d.push(h(d)+"rotate(",null,l)-2,x:$t(_,p)})):p&&d.push(h(d)+"rotate("+p+l)}function f(_,p,d,E){_!==p?E.push({i:d.push(h(d)+"skewX(",null,l)-2,x:$t(_,p)}):p&&d.push(h(d)+"skewX("+p+l)}function k(_,p,d,E,w,S){if(_!==d||p!==E){var O=w.push(h(w)+"scale(",null,",",null,")");S.push({i:O-4,x:$t(_,d)},{i:O-2,x:$t(p,E)})}else(d!==1||E!==1)&&w.push(h(w)+"scale("+d+","+E+")")}return function(_,p){var d=[],E=[];return _=r(_),p=r(p),m(_.translateX,_.translateY,p.translateX,p.translateY,d,E),v(_.rotate,p.rotate,d,E),f(_.skewX,p.skewX,d,E),k(_.scaleX,_.scaleY,p.scaleX,p.scaleY,d,E),_=p=null,function(w){for(var S=-1,O=E.length,P;++S<O;)d[(P=E[S]).i]=P.x(w);return d.join("")}}}var kh=ma(_h,"px, ","px)","deg)"),xh=ma(ph,", ",")",")"),Eh=1e-12;function ds(r){return((r=Math.exp(r))+1/r)/2}function Nh(r){return((r=Math.exp(r))-1/r)/2}function Ih(r){return((r=Math.exp(2*r))-1)/(r+1)}const wh=function r(a,o,l){function h(m,v){var f=m[0],k=m[1],_=m[2],p=v[0],d=v[1],E=v[2],w=p-f,S=d-k,O=w*w+S*S,P,L;if(O<Eh)L=Math.log(E/_)/a,P=function(q){return[f+q*w,k+q*S,_*Math.exp(a*q*L)]};else{var F=Math.sqrt(O),b=(E*E-_*_+l*O)/(2*_*o*F),Y=(E*E-_*_-l*O)/(2*E*o*F),A=Math.log(Math.sqrt(b*b+1)-b),X=Math.log(Math.sqrt(Y*Y+1)-Y);L=(X-A)/a,P=function(q){var $=q*L,U=ds(A),nt=_/(o*F)*(U*Ih(a*$+A)-Nh(A));return[f+nt*w,k+nt*S,_*U/ds(a*$+A)]}}return P.duration=L*1e3*a/Math.SQRT2,P}return h.rho=function(m){var v=Math.max(.001,+m),f=v*v,k=f*f;return r(v,f,k)},h}(Math.SQRT2,2,4);var Xe=0,on=0,an=0,va=1e3,jn,ln,ti=0,Re=0,hi=0,gn=typeof performance=="object"&&performance.now?performance:Date,ya=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function or(){return Re||(ya(Sh),Re=gn.now()+hi)}function Sh(){Re=0}function ei(){this._call=this._time=this._next=null}ei.prototype=da.prototype={constructor:ei,restart:function(r,a,o){if(typeof r!="function")throw new TypeError("callback is not a function");o=(o==null?or():+o)+(a==null?0:+a),!this._next&&ln!==this&&(ln?ln._next=this:jn=this,ln=this),this._call=r,this._time=o,Hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hi())}};function da(r,a,o){var l=new ei;return l.restart(r,a,o),l}function Th(){or(),++Xe;for(var r=jn,a;r;)(a=Re-r._time)>=0&&r._call.call(void 0,a),r=r._next;--Xe}function _s(){Re=(ti=gn.now())+hi,Xe=on=0;try{Th()}finally{Xe=0,Rh(),Re=0}}function Ch(){var r=gn.now(),a=r-ti;a>va&&(hi-=a,ti=r)}function Rh(){for(var r,a=jn,o,l=1/0;a;)a._call?(l>a._time&&(l=a._time),r=a,a=a._next):(o=a._next,a._next=null,a=r?r._next=o:jn=o);ln=r,Hi(l)}function Hi(r){if(!Xe){on&&(on=clearTimeout(on));var a=r-Re;a>24?(r<1/0&&(on=setTimeout(_s,r-gn.now()-hi)),an&&(an=clearInterval(an))):(an||(ti=gn.now(),an=setInterval(Ch,va)),Xe=1,ya(_s))}}function ps(r,a,o){var l=new ei;return a=a==null?0:+a,l.restart(h=>{l.stop(),r(h+a)},a,o),l}var Lh=nr("start","end","cancel","interrupt"),Mh=[],_a=0,ks=1,$i=2,Bn=3,xs=4,Zi=5,Un=6;function ci(r,a,o,l,h,m){var v=r.__transition;if(!v)r.__transition={};else if(o in v)return;Oh(r,o,{name:a,index:l,group:h,on:Lh,tween:Mh,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:_a})}function lr(r,a){var o=Wt(r,a);if(o.state>_a)throw new Error("too late; already scheduled");return o}function re(r,a){var o=Wt(r,a);if(o.state>Bn)throw new Error("too late; already running");return o}function Wt(r,a){var o=r.__transition;if(!o||!(o=o[a]))throw new Error("transition not found");return o}function Oh(r,a,o){var l=r.__transition,h;l[a]=o,o.timer=da(m,0,o.time);function m(_){o.state=ks,o.timer.restart(v,o.delay,o.time),o.delay<=_&&v(_-o.delay)}function v(_){var p,d,E,w;if(o.state!==ks)return k();for(p in l)if(w=l[p],w.name===o.name){if(w.state===Bn)return ps(v);w.state===xs?(w.state=Un,w.timer.stop(),w.on.call("interrupt",r,r.__data__,w.index,w.group),delete l[p]):+p<a&&(w.state=Un,w.timer.stop(),w.on.call("cancel",r,r.__data__,w.index,w.group),delete l[p])}if(ps(function(){o.state===Bn&&(o.state=xs,o.timer.restart(f,o.delay,o.time),f(_))}),o.state=$i,o.on.call("start",r,r.__data__,o.index,o.group),o.state===$i){for(o.state=Bn,h=new Array(E=o.tween.length),p=0,d=-1;p<E;++p)(w=o.tween[p].value.call(r,r.__data__,o.index,o.group))&&(h[++d]=w);h.length=d+1}}function f(_){for(var p=_<o.duration?o.ease.call(null,_/o.duration):(o.timer.restart(k),o.state=Zi,1),d=-1,E=h.length;++d<E;)h[d].call(r,p);o.state===Zi&&(o.on.call("end",r,r.__data__,o.index,o.group),k())}function k(){o.state=Un,o.timer.stop(),delete l[a];for(var _ in l)return;delete r.__transition}}function Vn(r,a){var o=r.__transition,l,h,m=!0,v;if(o){a=a==null?null:a+"";for(v in o){if((l=o[v]).name!==a){m=!1;continue}h=l.state>$i&&l.state<Zi,l.state=Un,l.timer.stop(),l.on.call(h?"interrupt":"cancel",r,r.__data__,l.index,l.group),delete o[v]}m&&delete r.__transition}}function bh(r){return this.each(function(){Vn(this,r)})}function Ah(r,a){var o,l;return function(){var h=re(this,r),m=h.tween;if(m!==o){l=o=m;for(var v=0,f=l.length;v<f;++v)if(l[v].name===a){l=l.slice(),l.splice(v,1);break}}h.tween=l}}function Ph(r,a,o){var l,h;if(typeof o!="function")throw new Error;return function(){var m=re(this,r),v=m.tween;if(v!==l){h=(l=v).slice();for(var f={name:a,value:o},k=0,_=h.length;k<_;++k)if(h[k].name===a){h[k]=f;break}k===_&&h.push(f)}m.tween=h}}function Dh(r,a){var o=this._id;if(r+="",arguments.length<2){for(var l=Wt(this.node(),o).tween,h=0,m=l.length,v;h<m;++h)if((v=l[h]).name===r)return v.value;return null}return this.each((a==null?Ah:Ph)(o,r,a))}function hr(r,a,o){var l=r._id;return r.each(function(){var h=re(this,l);(h.value||(h.value={}))[a]=o.apply(this,arguments)}),function(h){return Wt(h,l).value[a]}}function pa(r,a){var o;return(typeof a=="number"?$t:a instanceof Ce?Jn:(o=Ce(a))?(a=o,Jn):fa)(r,a)}function Fh(r){return function(){this.removeAttribute(r)}}function Gh(r){return function(){this.removeAttributeNS(r.space,r.local)}}function qh(r,a,o){var l,h=o+"",m;return function(){var v=this.getAttribute(r);return v===h?null:v===l?m:m=a(l=v,o)}}function zh(r,a,o){var l,h=o+"",m;return function(){var v=this.getAttributeNS(r.space,r.local);return v===h?null:v===l?m:m=a(l=v,o)}}function Yh(r,a,o){var l,h,m;return function(){var v,f=o(this),k;return f==null?void this.removeAttribute(r):(v=this.getAttribute(r),k=f+"",v===k?null:v===l&&k===h?m:(h=k,m=a(l=v,f)))}}function Xh(r,a,o){var l,h,m;return function(){var v,f=o(this),k;return f==null?void this.removeAttributeNS(r.space,r.local):(v=this.getAttributeNS(r.space,r.local),k=f+"",v===k?null:v===l&&k===h?m:(h=k,m=a(l=v,f)))}}function Bh(r,a){var o=li(r),l=o==="transform"?xh:pa;return this.attrTween(r,typeof a=="function"?(o.local?Xh:Yh)(o,l,hr(this,"attr."+r,a)):a==null?(o.local?Gh:Fh)(o):(o.local?zh:qh)(o,l,a))}function Uh(r,a){return function(o){this.setAttribute(r,a.call(this,o))}}function Vh(r,a){return function(o){this.setAttributeNS(r.space,r.local,a.call(this,o))}}function Hh(r,a){var o,l;function h(){var m=a.apply(this,arguments);return m!==l&&(o=(l=m)&&Vh(r,m)),o}return h._value=a,h}function $h(r,a){var o,l;function h(){var m=a.apply(this,arguments);return m!==l&&(o=(l=m)&&Uh(r,m)),o}return h._value=a,h}function Zh(r,a){var o="attr."+r;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(a==null)return this.tween(o,null);if(typeof a!="function")throw new Error;var l=li(r);return this.tween(o,(l.local?Hh:$h)(l,a))}function Wh(r,a){return function(){lr(this,r).delay=+a.apply(this,arguments)}}function Kh(r,a){return a=+a,function(){lr(this,r).delay=a}}function Qh(r){var a=this._id;return arguments.length?this.each((typeof r=="function"?Wh:Kh)(a,r)):Wt(this.node(),a).delay}function Jh(r,a){return function(){re(this,r).duration=+a.apply(this,arguments)}}function jh(r,a){return a=+a,function(){re(this,r).duration=a}}function tc(r){var a=this._id;return arguments.length?this.each((typeof r=="function"?Jh:jh)(a,r)):Wt(this.node(),a).duration}function ec(r,a){if(typeof a!="function")throw new Error;return function(){re(this,r).ease=a}}function nc(r){var a=this._id;return arguments.length?this.each(ec(a,r)):Wt(this.node(),a).ease}function ic(r,a){return function(){var o=a.apply(this,arguments);if(typeof o!="function")throw new Error;re(this,r).ease=o}}function rc(r){if(typeof r!="function")throw new Error;return this.each(ic(this._id,r))}function sc(r){typeof r!="function"&&(r=js(r));for(var a=this._groups,o=a.length,l=new Array(o),h=0;h<o;++h)for(var m=a[h],v=m.length,f=l[h]=[],k,_=0;_<v;++_)(k=m[_])&&r.call(k,k.__data__,_,m)&&f.push(k);return new ce(l,this._parents,this._name,this._id)}function ac(r){if(r._id!==this._id)throw new Error;for(var a=this._groups,o=r._groups,l=a.length,h=o.length,m=Math.min(l,h),v=new Array(l),f=0;f<m;++f)for(var k=a[f],_=o[f],p=k.length,d=v[f]=new Array(p),E,w=0;w<p;++w)(E=k[w]||_[w])&&(d[w]=E);for(;f<l;++f)v[f]=a[f];return new ce(v,this._parents,this._name,this._id)}function uc(r){return(r+"").trim().split(/^|\s+/).every(function(a){var o=a.indexOf(".");return o>=0&&(a=a.slice(0,o)),!a||a==="start"})}function oc(r,a,o){var l,h,m=uc(a)?lr:re;return function(){var v=m(this,r),f=v.on;f!==l&&(h=(l=f).copy()).on(a,o),v.on=h}}function lc(r,a){var o=this._id;return arguments.length<2?Wt(this.node(),o).on.on(r):this.each(oc(o,r,a))}function hc(r){return function(){var a=this.parentNode;for(var o in this.__transition)if(+o!==r)return;a&&a.removeChild(this)}}function cc(){return this.on("end.remove",hc(this._id))}function fc(r){var a=this._name,o=this._id;typeof r!="function"&&(r=ir(r));for(var l=this._groups,h=l.length,m=new Array(h),v=0;v<h;++v)for(var f=l[v],k=f.length,_=m[v]=new Array(k),p,d,E=0;E<k;++E)(p=f[E])&&(d=r.call(p,p.__data__,E,f))&&("__data__"in p&&(d.__data__=p.__data__),_[E]=d,ci(_[E],a,o,E,_,Wt(p,o)));return new ce(m,this._parents,a,o)}function gc(r){var a=this._name,o=this._id;typeof r!="function"&&(r=Js(r));for(var l=this._groups,h=l.length,m=[],v=[],f=0;f<h;++f)for(var k=l[f],_=k.length,p,d=0;d<_;++d)if(p=k[d]){for(var E=r.call(p,p.__data__,d,k),w,S=Wt(p,o),O=0,P=E.length;O<P;++O)(w=E[O])&&ci(w,a,o,O,E,S);m.push(E),v.push(p)}return new ce(m,v,a,o)}var mc=vn.prototype.constructor;function vc(){return new mc(this._groups,this._parents)}function yc(r,a){var o,l,h;return function(){var m=Ye(this,r),v=(this.style.removeProperty(r),Ye(this,r));return m===v?null:m===o&&v===l?h:h=a(o=m,l=v)}}function ka(r){return function(){this.style.removeProperty(r)}}function dc(r,a,o){var l,h=o+"",m;return function(){var v=Ye(this,r);return v===h?null:v===l?m:m=a(l=v,o)}}function _c(r,a,o){var l,h,m;return function(){var v=Ye(this,r),f=o(this),k=f+"";return f==null&&(k=f=(this.style.removeProperty(r),Ye(this,r))),v===k?null:v===l&&k===h?m:(h=k,m=a(l=v,f))}}function pc(r,a){var o,l,h,m="style."+a,v="end."+m,f;return function(){var k=re(this,r),_=k.on,p=k.value[m]==null?f||(f=ka(a)):void 0;(_!==o||h!==p)&&(l=(o=_).copy()).on(v,h=p),k.on=l}}function kc(r,a,o){var l=(r+="")=="transform"?kh:pa;return a==null?this.styleTween(r,yc(r,l)).on("end.style."+r,ka(r)):typeof a=="function"?this.styleTween(r,_c(r,l,hr(this,"style."+r,a))).each(pc(this._id,r)):this.styleTween(r,dc(r,l,a),o).on("end.style."+r,null)}function xc(r,a,o){return function(l){this.style.setProperty(r,a.call(this,l),o)}}function Ec(r,a,o){var l,h;function m(){var v=a.apply(this,arguments);return v!==h&&(l=(h=v)&&xc(r,v,o)),l}return m._value=a,m}function Nc(r,a,o){var l="style."+(r+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(a==null)return this.tween(l,null);if(typeof a!="function")throw new Error;return this.tween(l,Ec(r,a,o??""))}function Ic(r){return function(){this.textContent=r}}function wc(r){return function(){var a=r(this);this.textContent=a??""}}function Sc(r){return this.tween("text",typeof r=="function"?wc(hr(this,"text",r)):Ic(r==null?"":r+""))}function Tc(r){return function(a){this.textContent=r.call(this,a)}}function Cc(r){var a,o;function l(){var h=r.apply(this,arguments);return h!==o&&(a=(o=h)&&Tc(h)),a}return l._value=r,l}function Rc(r){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(r==null)return this.tween(a,null);if(typeof r!="function")throw new Error;return this.tween(a,Cc(r))}function Lc(){for(var r=this._name,a=this._id,o=xa(),l=this._groups,h=l.length,m=0;m<h;++m)for(var v=l[m],f=v.length,k,_=0;_<f;++_)if(k=v[_]){var p=Wt(k,a);ci(k,r,o,_,v,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ce(l,this._parents,r,o)}function Mc(){var r,a,o=this,l=o._id,h=o.size();return new Promise(function(m,v){var f={value:v},k={value:function(){--h===0&&m()}};o.each(function(){var _=re(this,l),p=_.on;p!==r&&(a=(r=p).copy(),a._.cancel.push(f),a._.interrupt.push(f),a._.end.push(k)),_.on=a}),h===0&&m()})}var Oc=0;function ce(r,a,o,l){this._groups=r,this._parents=a,this._name=o,this._id=l}function xa(){return++Oc}var oe=vn.prototype;ce.prototype={constructor:ce,select:fc,selectAll:gc,selectChild:oe.selectChild,selectChildren:oe.selectChildren,filter:sc,merge:ac,selection:vc,transition:Lc,call:oe.call,nodes:oe.nodes,node:oe.node,size:oe.size,empty:oe.empty,each:oe.each,on:lc,attr:Bh,attrTween:Zh,style:kc,styleTween:Nc,text:Sc,textTween:Rc,remove:cc,tween:Dh,delay:Qh,duration:tc,ease:nc,easeVarying:rc,end:Mc,[Symbol.iterator]:oe[Symbol.iterator]};function bc(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var Ac={time:null,delay:0,duration:250,ease:bc};function Pc(r,a){for(var o;!(o=r.__transition)||!(o=o[a]);)if(!(r=r.parentNode))throw new Error(`transition ${a} not found`);return o}function Dc(r){var a,o;r instanceof ce?(a=r._id,r=r._name):(a=xa(),(o=Ac).time=or(),r=r==null?null:r+"");for(var l=this._groups,h=l.length,m=0;m<h;++m)for(var v=l[m],f=v.length,k,_=0;_<f;++_)(k=v[_])&&ci(k,r,a,_,v,o||Pc(k,a));return new ce(l,this._parents,r,a)}vn.prototype.interrupt=bh;vn.prototype.transition=Dc;const he=11102230246251565e-32,Ct=134217729,Fc=(3+8*he)*he;function Pi(r,a,o,l,h){let m,v,f,k,_=a[0],p=l[0],d=0,E=0;p>_==p>-_?(m=_,_=a[++d]):(m=p,p=l[++E]);let w=0;if(d<r&&E<o)for(p>_==p>-_?(v=_+m,f=m-(v-_),_=a[++d]):(v=p+m,f=m-(v-p),p=l[++E]),m=v,f!==0&&(h[w++]=f);d<r&&E<o;)p>_==p>-_?(v=m+_,k=v-m,f=m-(v-k)+(_-k),_=a[++d]):(v=m+p,k=v-m,f=m-(v-k)+(p-k),p=l[++E]),m=v,f!==0&&(h[w++]=f);for(;d<r;)v=m+_,k=v-m,f=m-(v-k)+(_-k),_=a[++d],m=v,f!==0&&(h[w++]=f);for(;E<o;)v=m+p,k=v-m,f=m-(v-k)+(p-k),p=l[++E],m=v,f!==0&&(h[w++]=f);return(m!==0||w===0)&&(h[w++]=m),w}function Gc(r,a){let o=a[0];for(let l=1;l<r;l++)o+=a[l];return o}function dn(r){return new Float64Array(r)}const qc=(3+16*he)*he,zc=(2+12*he)*he,Yc=(9+64*he)*he*he,Ge=dn(4),Es=dn(8),Ns=dn(12),Is=dn(16),Lt=dn(4);function Xc(r,a,o,l,h,m,v){let f,k,_,p,d,E,w,S,O,P,L,F,b,Y,A,X,q,$;const U=r-h,nt=o-h,Z=a-m,it=l-m;Y=U*it,E=Ct*U,w=E-(E-U),S=U-w,E=Ct*it,O=E-(E-it),P=it-O,A=S*P-(Y-w*O-S*O-w*P),X=Z*nt,E=Ct*Z,w=E-(E-Z),S=Z-w,E=Ct*nt,O=E-(E-nt),P=nt-O,q=S*P-(X-w*O-S*O-w*P),L=A-q,d=A-L,Ge[0]=A-(L+d)+(d-q),F=Y+L,d=F-Y,b=Y-(F-d)+(L-d),L=b-X,d=b-L,Ge[1]=b-(L+d)+(d-X),$=F+L,d=$-F,Ge[2]=F-($-d)+(L-d),Ge[3]=$;let at=Gc(4,Ge),I=zc*v;if(at>=I||-at>=I||(d=r-U,f=r-(U+d)+(d-h),d=o-nt,_=o-(nt+d)+(d-h),d=a-Z,k=a-(Z+d)+(d-m),d=l-it,p=l-(it+d)+(d-m),f===0&&k===0&&_===0&&p===0)||(I=Yc*v+Fc*Math.abs(at),at+=U*p+it*f-(Z*_+nt*k),at>=I||-at>=I))return at;Y=f*it,E=Ct*f,w=E-(E-f),S=f-w,E=Ct*it,O=E-(E-it),P=it-O,A=S*P-(Y-w*O-S*O-w*P),X=k*nt,E=Ct*k,w=E-(E-k),S=k-w,E=Ct*nt,O=E-(E-nt),P=nt-O,q=S*P-(X-w*O-S*O-w*P),L=A-q,d=A-L,Lt[0]=A-(L+d)+(d-q),F=Y+L,d=F-Y,b=Y-(F-d)+(L-d),L=b-X,d=b-L,Lt[1]=b-(L+d)+(d-X),$=F+L,d=$-F,Lt[2]=F-($-d)+(L-d),Lt[3]=$;const G=Pi(4,Ge,4,Lt,Es);Y=U*p,E=Ct*U,w=E-(E-U),S=U-w,E=Ct*p,O=E-(E-p),P=p-O,A=S*P-(Y-w*O-S*O-w*P),X=Z*_,E=Ct*Z,w=E-(E-Z),S=Z-w,E=Ct*_,O=E-(E-_),P=_-O,q=S*P-(X-w*O-S*O-w*P),L=A-q,d=A-L,Lt[0]=A-(L+d)+(d-q),F=Y+L,d=F-Y,b=Y-(F-d)+(L-d),L=b-X,d=b-L,Lt[1]=b-(L+d)+(d-X),$=F+L,d=$-F,Lt[2]=F-($-d)+(L-d),Lt[3]=$;const M=Pi(G,Es,4,Lt,Ns);Y=f*p,E=Ct*f,w=E-(E-f),S=f-w,E=Ct*p,O=E-(E-p),P=p-O,A=S*P-(Y-w*O-S*O-w*P),X=k*_,E=Ct*k,w=E-(E-k),S=k-w,E=Ct*_,O=E-(E-_),P=_-O,q=S*P-(X-w*O-S*O-w*P),L=A-q,d=A-L,Lt[0]=A-(L+d)+(d-q),F=Y+L,d=F-Y,b=Y-(F-d)+(L-d),L=b-X,d=b-L,Lt[1]=b-(L+d)+(d-X),$=F+L,d=$-F,Lt[2]=F-($-d)+(L-d),Lt[3]=$;const V=Pi(M,Ns,4,Lt,Is);return Is[V-1]}function Bc(r,a,o,l,h,m){const v=(a-m)*(o-h),f=(r-h)*(l-m),k=v-f,_=Math.abs(v+f);return Math.abs(k)>=qc*_?k:-Xc(r,a,o,l,h,m,_)}function Uc(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function ni(r,a){if((o=(r=a?r.toExponential(a-1):r.toExponential()).indexOf("e"))<0)return null;var o,l=r.slice(0,o);return[l.length>1?l[0]+l.slice(2):l,+r.slice(o+1)]}function Be(r){return r=ni(Math.abs(r)),r?r[1]:NaN}function Vc(r,a){return function(o,l){for(var h=o.length,m=[],v=0,f=r[0],k=0;h>0&&f>0&&(k+f+1>l&&(f=Math.max(1,l-k)),m.push(o.substring(h-=f,h+f)),!((k+=f+1)>l));)f=r[v=(v+1)%r.length];return m.reverse().join(a)}}function Hc(r){return function(a){return a.replace(/[0-9]/g,function(o){return r[+o]})}}var $c=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ii(r){if(!(a=$c.exec(r)))throw new Error("invalid format: "+r);var a;return new cr({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}ii.prototype=cr.prototype;function cr(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}cr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zc(r){t:for(var a=r.length,o=1,l=-1,h;o<a;++o)switch(r[o]){case".":l=h=o;break;case"0":l===0&&(l=o),h=o;break;default:if(!+r[o])break t;l>0&&(l=0);break}return l>0?r.slice(0,l)+r.slice(h+1):r}var Ea;function Wc(r,a){var o=ni(r,a);if(!o)return r+"";var l=o[0],h=o[1],m=h-(Ea=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,v=l.length;return m===v?l:m>v?l+new Array(m-v+1).join("0"):m>0?l.slice(0,m)+"."+l.slice(m):"0."+new Array(1-m).join("0")+ni(r,Math.max(0,a+m-1))[0]}function ws(r,a){var o=ni(r,a);if(!o)return r+"";var l=o[0],h=o[1];return h<0?"0."+new Array(-h).join("0")+l:l.length>h+1?l.slice(0,h+1)+"."+l.slice(h+1):l+new Array(h-l.length+2).join("0")}const Ss={"%":(r,a)=>(r*100).toFixed(a),b:r=>Math.round(r).toString(2),c:r=>r+"",d:Uc,e:(r,a)=>r.toExponential(a),f:(r,a)=>r.toFixed(a),g:(r,a)=>r.toPrecision(a),o:r=>Math.round(r).toString(8),p:(r,a)=>ws(r*100,a),r:ws,s:Wc,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function Ts(r){return r}var Cs=Array.prototype.map,Rs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Kc(r){var a=r.grouping===void 0||r.thousands===void 0?Ts:Vc(Cs.call(r.grouping,Number),r.thousands+""),o=r.currency===void 0?"":r.currency[0]+"",l=r.currency===void 0?"":r.currency[1]+"",h=r.decimal===void 0?".":r.decimal+"",m=r.numerals===void 0?Ts:Hc(Cs.call(r.numerals,String)),v=r.percent===void 0?"%":r.percent+"",f=r.minus===void 0?"−":r.minus+"",k=r.nan===void 0?"NaN":r.nan+"";function _(d){d=ii(d);var E=d.fill,w=d.align,S=d.sign,O=d.symbol,P=d.zero,L=d.width,F=d.comma,b=d.precision,Y=d.trim,A=d.type;A==="n"?(F=!0,A="g"):Ss[A]||(b===void 0&&(b=12),Y=!0,A="g"),(P||E==="0"&&w==="=")&&(P=!0,E="0",w="=");var X=O==="$"?o:O==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",q=O==="$"?l:/[%p]/.test(A)?v:"",$=Ss[A],U=/[defgprs%]/.test(A);b=b===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function nt(Z){var it=X,at=q,I,G,M;if(A==="c")at=$(Z)+at,Z="";else{Z=+Z;var V=Z<0||1/Z<0;if(Z=isNaN(Z)?k:$(Math.abs(Z),b),Y&&(Z=Zc(Z)),V&&+Z==0&&S!=="+"&&(V=!1),it=(V?S==="("?S:f:S==="-"||S==="("?"":S)+it,at=(A==="s"?Rs[8+Ea/3]:"")+at+(V&&S==="("?")":""),U){for(I=-1,G=Z.length;++I<G;)if(M=Z.charCodeAt(I),48>M||M>57){at=(M===46?h+Z.slice(I+1):Z.slice(I))+at,Z=Z.slice(0,I);break}}}F&&!P&&(Z=a(Z,1/0));var Q=it.length+Z.length+at.length,K=Q<L?new Array(L-Q+1).join(E):"";switch(F&&P&&(Z=a(K+Z,K.length?L-at.length:1/0),K=""),w){case"<":Z=it+Z+at+K;break;case"=":Z=it+K+Z+at;break;case"^":Z=K.slice(0,Q=K.length>>1)+it+Z+at+K.slice(Q);break;default:Z=K+it+Z+at;break}return m(Z)}return nt.toString=function(){return d+""},nt}function p(d,E){var w=_((d=ii(d),d.type="f",d)),S=Math.max(-8,Math.min(8,Math.floor(Be(E)/3)))*3,O=Math.pow(10,-S),P=Rs[8+S/3];return function(L){return w(O*L)+P}}return{format:_,formatPrefix:p}}var bn,Na,Ia;Qc({thousands:",",grouping:[3],currency:["$",""]});function Qc(r){return bn=Kc(r),Na=bn.format,Ia=bn.formatPrefix,bn}function Jc(r){return Math.max(0,-Be(Math.abs(r)))}function jc(r,a){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Be(a)/3)))*3-Be(Math.abs(r)))}function tf(r,a){return r=Math.abs(r),a=Math.abs(a)-r,Math.max(0,Be(a)-Be(r))+1}function ef(r,a){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(a).domain(r);break}return this}function nf(r){return function(){return r}}function rf(r){return+r}var Ls=[0,1];function qe(r){return r}function Wi(r,a){return(a-=r=+r)?function(o){return(o-r)/a}:nf(isNaN(a)?NaN:.5)}function sf(r,a){var o;return r>a&&(o=r,r=a,a=o),function(l){return Math.max(r,Math.min(a,l))}}function af(r,a,o){var l=r[0],h=r[1],m=a[0],v=a[1];return h<l?(l=Wi(h,l),m=o(v,m)):(l=Wi(l,h),m=o(m,v)),function(f){return m(l(f))}}function uf(r,a,o){var l=Math.min(r.length,a.length)-1,h=new Array(l),m=new Array(l),v=-1;for(r[l]<r[0]&&(r=r.slice().reverse(),a=a.slice().reverse());++v<l;)h[v]=Wi(r[v],r[v+1]),m[v]=o(a[v],a[v+1]);return function(f){var k=ro(r,f,1,l)-1;return m[k](h[k](f))}}function of(r,a){return a.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function lf(){var r=Ls,a=Ls,o=ur,l,h,m,v=qe,f,k,_;function p(){var E=Math.min(r.length,a.length);return v!==qe&&(v=sf(r[0],r[E-1])),f=E>2?uf:af,k=_=null,d}function d(E){return E==null||isNaN(E=+E)?m:(k||(k=f(r.map(l),a,o)))(l(v(E)))}return d.invert=function(E){return v(h((_||(_=f(a,r.map(l),$t)))(E)))},d.domain=function(E){return arguments.length?(r=Array.from(E,rf),p()):r.slice()},d.range=function(E){return arguments.length?(a=Array.from(E),p()):a.slice()},d.rangeRound=function(E){return a=Array.from(E),o=dh,p()},d.clamp=function(E){return arguments.length?(v=E?!0:qe,p()):v!==qe},d.interpolate=function(E){return arguments.length?(o=E,p()):o},d.unknown=function(E){return arguments.length?(m=E,d):m},function(E,w){return l=E,h=w,p()}}function hf(){return lf()(qe,qe)}function cf(r,a,o,l){var h=lo(r,a,o),m;switch(l=ii(l??",f"),l.type){case"s":{var v=Math.max(Math.abs(r),Math.abs(a));return l.precision==null&&!isNaN(m=jc(h,v))&&(l.precision=m),Ia(l,v)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(m=tf(h,Math.max(Math.abs(r),Math.abs(a))))&&(l.precision=m-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(m=Jc(h))&&(l.precision=m-(l.type==="%")*2);break}}return Na(l)}function ff(r){var a=r.domain;return r.ticks=function(o){var l=a();return oo(l[0],l[l.length-1],o??10)},r.tickFormat=function(o,l){var h=a();return cf(h[0],h[h.length-1],o??10,l)},r.nice=function(o){o==null&&(o=10);var l=a(),h=0,m=l.length-1,v=l[h],f=l[m],k,_,p=10;for(f<v&&(_=v,v=f,f=_,_=h,h=m,m=_);p-- >0;){if(_=qi(v,f,o),_===k)return l[h]=v,l[m]=f,a(l);if(_>0)v=Math.floor(v/_)*_,f=Math.ceil(f/_)*_;else if(_<0)v=Math.ceil(v*_)/_,f=Math.floor(f*_)/_;else break;k=_}return r},r}function gf(){var r=hf();return r.copy=function(){return of(r,gf())},ef.apply(r,arguments),ff(r)}const An=r=>()=>r;function mf(r,{sourceEvent:a,target:o,transform:l,dispatch:h}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:a,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:h}})}function le(r,a,o){this.k=r,this.x=a,this.y=o}le.prototype={constructor:le,scale:function(r){return r===1?this:new le(this.k*r,this.x,this.y)},translate:function(r,a){return r===0&a===0?this:new le(this.k,this.x+this.k*r,this.y+this.k*a)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wa=new le(1,0,0);le.prototype;function Di(r){r.stopImmediatePropagation()}function un(r){r.preventDefault(),r.stopImmediatePropagation()}function vf(r){return(!r.ctrlKey||r.type==="wheel")&&!r.button}function yf(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r,r.hasAttribute("viewBox")?(r=r.viewBox.baseVal,[[r.x,r.y],[r.x+r.width,r.y+r.height]]):[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]):[[0,0],[r.clientWidth,r.clientHeight]]}function Ms(){return this.__zoom||wa}function df(r){return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function _f(){return navigator.maxTouchPoints||"ontouchstart"in this}function pf(r,a,o){var l=r.invertX(a[0][0])-o[0][0],h=r.invertX(a[1][0])-o[1][0],m=r.invertY(a[0][1])-o[0][1],v=r.invertY(a[1][1])-o[1][1];return r.translate(h>l?(l+h)/2:Math.min(0,l)||Math.max(0,h),v>m?(m+v)/2:Math.min(0,m)||Math.max(0,v))}function vg(){var r=vf,a=yf,o=pf,l=df,h=_f,m=[0,1/0],v=[[-1/0,-1/0],[1/0,1/0]],f=250,k=wh,_=nr("start","zoom","end"),p,d,E,w=500,S=150,O=0,P=10;function L(I){I.property("__zoom",Ms).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",nt).filter(h).on("touchstart.zoom",Z).on("touchmove.zoom",it).on("touchend.zoom touchcancel.zoom",at).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}L.transform=function(I,G,M,V){var Q=I.selection?I.selection():I;Q.property("__zoom",Ms),I!==Q?A(I,G,M,V):Q.interrupt().each(function(){X(this,arguments).event(V).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},L.scaleBy=function(I,G,M,V){L.scaleTo(I,function(){var Q=this.__zoom.k,K=typeof G=="function"?G.apply(this,arguments):G;return Q*K},M,V)},L.scaleTo=function(I,G,M,V){L.transform(I,function(){var Q=a.apply(this,arguments),K=this.__zoom,z=M==null?Y(Q):typeof M=="function"?M.apply(this,arguments):M,ot=K.invert(z),ht=typeof G=="function"?G.apply(this,arguments):G;return o(b(F(K,ht),z,ot),Q,v)},M,V)},L.translateBy=function(I,G,M,V){L.transform(I,function(){return o(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof M=="function"?M.apply(this,arguments):M),a.apply(this,arguments),v)},null,V)},L.translateTo=function(I,G,M,V,Q){L.transform(I,function(){var K=a.apply(this,arguments),z=this.__zoom,ot=V==null?Y(K):typeof V=="function"?V.apply(this,arguments):V;return o(wa.translate(ot[0],ot[1]).scale(z.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof M=="function"?-M.apply(this,arguments):-M),K,v)},V,Q)};function F(I,G){return G=Math.max(m[0],Math.min(m[1],G)),G===I.k?I:new le(G,I.x,I.y)}function b(I,G,M){var V=G[0]-M[0]*I.k,Q=G[1]-M[1]*I.k;return V===I.x&&Q===I.y?I:new le(I.k,V,Q)}function Y(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,G,M,V){I.on("start.zoom",function(){X(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event(V).end()}).tween("zoom",function(){var Q=this,K=arguments,z=X(Q,K).event(V),ot=a.apply(Q,K),ht=M==null?Y(ot):typeof M=="function"?M.apply(Q,K):M,dt=Math.max(ot[1][0]-ot[0][0],ot[1][1]-ot[0][1]),j=Q.__zoom,Nt=typeof G=="function"?G.apply(Q,K):G,Ut=k(j.invert(ht).concat(dt/j.k),Nt.invert(ht).concat(dt/Nt.k));return function(Mt){if(Mt===1)Mt=Nt;else{var C=Ut(Mt),Ze=dt/C[2];Mt=new le(Ze,ht[0]-C[0]*Ze,ht[1]-C[1]*Ze)}z.zoom(null,Mt)}})}function X(I,G,M){return!M&&I.__zooming||new q(I,G)}function q(I,G){this.that=I,this.args=G,this.active=0,this.sourceEvent=null,this.extent=a.apply(I,G),this.taps=0}q.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,G){return this.mouse&&I!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var G=we(this.that).datum();_.call(I,this.that,new mf(I,{sourceEvent:this.sourceEvent,target:L,transform:this.that.__zoom,dispatch:_}),G)}};function $(I,...G){if(!r.apply(this,arguments))return;var M=X(this,G).event(I),V=this.__zoom,Q=Math.max(m[0],Math.min(m[1],V.k*Math.pow(2,l.apply(this,arguments)))),K=Ie(I);if(M.wheel)(M.mouse[0][0]!==K[0]||M.mouse[0][1]!==K[1])&&(M.mouse[1]=V.invert(M.mouse[0]=K)),clearTimeout(M.wheel);else{if(V.k===Q)return;M.mouse=[K,V.invert(K)],Vn(this),M.start()}un(I),M.wheel=setTimeout(z,S),M.zoom("mouse",o(b(F(V,Q),M.mouse[0],M.mouse[1]),M.extent,v));function z(){M.wheel=null,M.end()}}function U(I,...G){if(E||!r.apply(this,arguments))return;var M=I.currentTarget,V=X(this,G,!0).event(I),Q=we(I.view).on("mousemove.zoom",ht,!0).on("mouseup.zoom",dt,!0),K=Ie(I,M),z=I.clientX,ot=I.clientY;$l(I.view),Di(I),V.mouse=[K,this.__zoom.invert(K)],Vn(this),V.start();function ht(j){if(un(j),!V.moved){var Nt=j.clientX-z,Ut=j.clientY-ot;V.moved=Nt*Nt+Ut*Ut>O}V.event(j).zoom("mouse",o(b(V.that.__zoom,V.mouse[0]=Ie(j,M),V.mouse[1]),V.extent,v))}function dt(j){Q.on("mousemove.zoom mouseup.zoom",null),Zl(j.view,V.moved),un(j),V.event(j).end()}}function nt(I,...G){if(r.apply(this,arguments)){var M=this.__zoom,V=Ie(I.changedTouches?I.changedTouches[0]:I,this),Q=M.invert(V),K=M.k*(I.shiftKey?.5:2),z=o(b(F(M,K),V,Q),a.apply(this,G),v);un(I),f>0?we(this).transition().duration(f).call(A,z,V,I):we(this).call(L.transform,z,V,I)}}function Z(I,...G){if(r.apply(this,arguments)){var M=I.touches,V=M.length,Q=X(this,G,I.changedTouches.length===V).event(I),K,z,ot,ht;for(Di(I),z=0;z<V;++z)ot=M[z],ht=Ie(ot,this),ht=[ht,this.__zoom.invert(ht),ot.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==ht[2]&&(Q.touch1=ht,Q.taps=0):(Q.touch0=ht,K=!0,Q.taps=1+!!p);p&&(p=clearTimeout(p)),K&&(Q.taps<2&&(d=ht[0],p=setTimeout(function(){p=null},w)),Vn(this),Q.start())}}function it(I,...G){if(this.__zooming){var M=X(this,G).event(I),V=I.changedTouches,Q=V.length,K,z,ot,ht;for(un(I),K=0;K<Q;++K)z=V[K],ot=Ie(z,this),M.touch0&&M.touch0[2]===z.identifier?M.touch0[0]=ot:M.touch1&&M.touch1[2]===z.identifier&&(M.touch1[0]=ot);if(z=M.that.__zoom,M.touch1){var dt=M.touch0[0],j=M.touch0[1],Nt=M.touch1[0],Ut=M.touch1[1],Mt=(Mt=Nt[0]-dt[0])*Mt+(Mt=Nt[1]-dt[1])*Mt,C=(C=Ut[0]-j[0])*C+(C=Ut[1]-j[1])*C;z=F(z,Math.sqrt(Mt/C)),ot=[(dt[0]+Nt[0])/2,(dt[1]+Nt[1])/2],ht=[(j[0]+Ut[0])/2,(j[1]+Ut[1])/2]}else if(M.touch0)ot=M.touch0[0],ht=M.touch0[1];else return;M.zoom("touch",o(b(z,ot,ht),M.extent,v))}}function at(I,...G){if(this.__zooming){var M=X(this,G).event(I),V=I.changedTouches,Q=V.length,K,z;for(Di(I),E&&clearTimeout(E),E=setTimeout(function(){E=null},w),K=0;K<Q;++K)z=V[K],M.touch0&&M.touch0[2]===z.identifier?delete M.touch0:M.touch1&&M.touch1[2]===z.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(z=Ie(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<P)){var ot=we(this).on("dblclick.zoom");ot&&ot.apply(this,arguments)}}}return L.wheelDelta=function(I){return arguments.length?(l=typeof I=="function"?I:An(+I),L):l},L.filter=function(I){return arguments.length?(r=typeof I=="function"?I:An(!!I),L):r},L.touchable=function(I){return arguments.length?(h=typeof I=="function"?I:An(!!I),L):h},L.extent=function(I){return arguments.length?(a=typeof I=="function"?I:An([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),L):a},L.scaleExtent=function(I){return arguments.length?(m[0]=+I[0],m[1]=+I[1],L):[m[0],m[1]]},L.translateExtent=function(I){return arguments.length?(v[0][0]=+I[0][0],v[1][0]=+I[1][0],v[0][1]=+I[0][1],v[1][1]=+I[1][1],L):[[v[0][0],v[0][1]],[v[1][0],v[1][1]]]},L.constrain=function(I){return arguments.length?(o=I,L):o},L.duration=function(I){return arguments.length?(f=+I,L):f},L.interpolate=function(I){return arguments.length?(k=I,L):k},L.on=function(){var I=_.on.apply(_,arguments);return I===_?L:I},L.clickDistance=function(I){return arguments.length?(O=(I=+I)*I,L):Math.sqrt(O)},L.tapDistance=function(I){return arguments.length?(P=+I,L):P},L}var Ot=63710088e-1,Sa={centimeters:Ot*100,centimetres:Ot*100,degrees:360/(2*Math.PI),feet:Ot*3.28084,inches:Ot*39.37,kilometers:Ot/1e3,kilometres:Ot/1e3,meters:Ot,metres:Ot,miles:Ot/1609.344,millimeters:Ot*1e3,millimetres:Ot*1e3,nauticalmiles:Ot/1852,radians:1,yards:Ot*1.0936};function Ta(r,a,o={}){const l={type:"Feature"};return(o.id===0||o.id)&&(l.id=o.id),o.bbox&&(l.bbox=o.bbox),l.properties=a||{},l.geometry=r,l}function kf(r,a,o={}){if(!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Os(r[0])||!Os(r[1]))throw new Error("coordinates must contain numbers");return Ta({type:"Point",coordinates:r},a,o)}function Ki(r,a={}){const o={type:"FeatureCollection"};return a.id&&(o.id=a.id),a.bbox&&(o.bbox=a.bbox),o.features=r,o}function xf(r,a="kilometers"){const o=Sa[a];if(!o)throw new Error(a+" units is invalid");return r*o}function Ef(r,a="kilometers"){const o=Sa[a];if(!o)throw new Error(a+" units is invalid");return r/o}function Os(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function Nf(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return[...r.geometry.coordinates];if(r.type==="Point")return[...r.coordinates]}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return[...r];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function If(r){return r.type==="Feature"?r.geometry:r}function Ca(r,a,o){if(r!==null)for(var l,h,m,v,f,k,_,p=0,d=0,E,w=r.type,S=w==="FeatureCollection",O=w==="Feature",P=S?r.features.length:1,L=0;L<P;L++){_=S?r.features[L].geometry:O?r.geometry:r,E=_?_.type==="GeometryCollection":!1,f=E?_.geometries.length:1;for(var F=0;F<f;F++){var b=0,Y=0;if(v=E?_.geometries[F]:_,v!==null){k=v.coordinates;var A=v.type;switch(p=0,A){case null:break;case"Point":if(a(k,d,L,b,Y)===!1)return!1;d++,b++;break;case"LineString":case"MultiPoint":for(l=0;l<k.length;l++){if(a(k[l],d,L,b,Y)===!1)return!1;d++,A==="MultiPoint"&&b++}A==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(l=0;l<k.length;l++){for(h=0;h<k[l].length-p;h++){if(a(k[l][h],d,L,b,Y)===!1)return!1;d++}A==="MultiLineString"&&b++,A==="Polygon"&&Y++}A==="Polygon"&&b++;break;case"MultiPolygon":for(l=0;l<k.length;l++){for(Y=0,h=0;h<k[l].length;h++){for(m=0;m<k[l][h].length-p;m++){if(a(k[l][h][m],d,L,b,Y)===!1)return!1;d++}Y++}b++}break;case"GeometryCollection":for(l=0;l<v.geometries.length;l++)if(Ca(v.geometries[l],a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function bs(r,a){if(r.type==="Feature")a(r,0);else if(r.type==="FeatureCollection")for(var o=0;o<r.features.length&&a(r.features[o],o)!==!1;o++);}function Ra(r,a){var o,l,h,m,v,f,k,_,p,d,E=0,w=r.type==="FeatureCollection",S=r.type==="Feature",O=w?r.features.length:1;for(o=0;o<O;o++){for(f=w?r.features[o].geometry:S?r.geometry:r,_=w?r.features[o].properties:S?r.properties:{},p=w?r.features[o].bbox:S?r.bbox:void 0,d=w?r.features[o].id:S?r.id:void 0,k=f?f.type==="GeometryCollection":!1,v=k?f.geometries.length:1,h=0;h<v;h++){if(m=k?f.geometries[h]:f,m===null){if(a(null,E,_,p,d)===!1)return!1;continue}switch(m.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(m,E,_,p,d)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<m.geometries.length;l++)if(a(m.geometries[l],E,_,p,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}E++}}function wf(r,a={}){if(r.bbox!=null&&a.recompute!==!0)return r.bbox;const o=[1/0,1/0,-1/0,-1/0];return Ca(r,l=>{o[0]>l[0]&&(o[0]=l[0]),o[1]>l[1]&&(o[1]=l[1]),o[2]<l[0]&&(o[2]=l[0]),o[3]<l[1]&&(o[3]=l[1])}),o}function Sf(r,a){var o,l,h=0,m,v,f,k,_,p,d,E=r[0],w=r[1],S=a.length;for(o=0;o<S;o++){l=0;var O=a[o],P=O.length-1;if(p=O[0],p[0]!==O[P][0]&&p[1]!==O[P][1])throw new Error("First and last coordinates in a ring must be the same");for(v=p[0]-E,f=p[1]-w,l;l<P;l++){if(d=O[l+1],k=d[0]-E,_=d[1]-w,f===0&&_===0){if(k<=0&&v>=0||v<=0&&k>=0)return 0}else if(_>=0&&f<=0||_<=0&&f>=0){if(m=Bc(v,k,f,_,0,0),m===0)return 0;(m>0&&_>0&&f<=0||m<0&&_<=0&&f>0)&&h++}p=d,f=_,v=k}}return h%2!==0}function yg(r,a,o={}){if(!r)throw new Error("point is required");if(!a)throw new Error("polygon is required");const l=Nf(r),h=If(a),m=h.type,v=a.bbox;let f=h.coordinates;if(v&&Tf(l,v)===!1)return!1;m==="Polygon"&&(f=[f]);let k=!1;for(var _=0;_<f.length;++_){const p=Sf(l,f[_]);if(p===0)return!o.ignoreBoundary;p&&(k=!0)}return k}function Tf(r,a){return a[0]<=r[0]&&a[1]<=r[1]&&a[2]>=r[0]&&a[3]>=r[1]}var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Lf(r,a={}){const o=wf(r),l=(o[0]+o[2])/2,h=(o[1]+o[3])/2;return kf([l,h],a.properties,a)}var La={exports:{}};(function(r,a){(function(o,l){r.exports=l()})(Cf,function(){function o(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=Array(t);e<t;e++)n[e]=i[e];return n}function l(i,t,e){return t=p(t),function(n,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(n)}(i,E()?Reflect.construct(t,e||[],p(i).constructor):t.apply(i,e))}function h(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function m(i,t,e){if(E())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var s=new(i.bind.apply(i,n));return e&&w(s,e.prototype),s}function v(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,P(n.key),n)}}function f(i,t,e){return t&&v(i.prototype,t),e&&v(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function k(i,t){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=L(i))||t){e&&(i=e);var n=0,s=function(){};return{s,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(y){throw y},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,c=!0,g=!1;return{s:function(){e=e.call(i)},n:function(){var y=e.next();return c=y.done,y},e:function(y){g=!0,u=y},f:function(){try{c||e.return==null||e.return()}finally{if(g)throw u}}}}function _(){return _=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,t,e){var n=function(u,c){for(;!{}.hasOwnProperty.call(u,c)&&(u=p(u))!==null;);return u}(i,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(arguments.length<3?i:e):s.value}},_.apply(null,arguments)}function p(i){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(i)}function d(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&w(i,t)}function E(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E=function(){return!!i})()}function w(i,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},w(i,t)}function S(i,t,e,n){var s=_(p(1&n?i.prototype:i),t,e);return 2&n&&typeof s=="function"?function(u){return s.apply(e,u)}:s}function O(i){return function(t){if(Array.isArray(t))return o(t)}(i)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(i)||L(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P(i){var t=function(e,n){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var u=s.call(e,n);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i,"string");return typeof t=="symbol"?t:t+""}function L(i,t){if(i){if(typeof i=="string")return o(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(i,t):void 0}}function F(i){var t=typeof Map=="function"?new Map:void 0;return F=function(e){if(e===null||!function(s){try{return Function.toString.call(s).indexOf("[native code]")!==-1}catch{return typeof s=="function"}}(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)},F(i)}var b=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=i.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=i.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==i.JOIN_ROUND&&(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=i.CAP_ROUND,this._joinStyle=i.JOIN_ROUND,this._mitreLimit=i.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=i.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var s=arguments[0],u=arguments[1],c=arguments[2],g=arguments[3];this.setQuadrantSegments(s),this.setEndCapStyle(u),this.setJoinStyle(c),this.setMitreLimit(g)}}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();b.CAP_ROUND=1,b.CAP_FLAT=2,b.CAP_SQUARE=3,b.JOIN_ROUND=1,b.JOIN_MITRE=2,b.JOIN_BEVEL=3,b.DEFAULT_QUADRANT_SEGMENTS=8,b.DEFAULT_MITRE_LIMIT=5,b.DEFAULT_SIMPLIFY_FACTOR=.01;var Y=function(i){function t(e){var n;return h(this,t),(n=l(this,t,[e])).name=Object.keys({Exception:t})[0],n}return d(t,i),f(t,[{key:"toString",value:function(){return this.message}}])}(F(Error)),A=function(i){function t(e){var n;return h(this,t),(n=l(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],n}return d(t,i),f(t)}(Y),X=function(){return f(function i(){h(this,i)},[{key:"filter",value:function(i){}}])}();function q(){}function $(){}function U(){}var nt,Z,it,at,I,G,M,V,Q=function(){return f(function i(){h(this,i)},null,[{key:"equalsWithTolerance",value:function(i,t,e){return Math.abs(i-t)<=e}}])}(),K=function(){return f(function i(t,e){h(this,i),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(i){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(i.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(i.low&t)===t?"1":"0";return e}}])}();function z(){}function ot(){}z.NaN=NaN,z.isNaN=function(i){return Number.isNaN(i)},z.isInfinite=function(i){return!Number.isFinite(i)},z.MAX_VALUE=Number.MAX_VALUE,z.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,z.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(G=2146435072,M=new Float64Array(1),V=new Int32Array(M.buffer),z.doubleToLongBits=function(i){M[0]=i;var t=0|V[0],e=0|V[1];return(e&G)===G&&1048575&e&&t!==0&&(t=0,e=2146959360),new K(e,t)},z.longBitsToDouble=function(i){return V[0]=i.low,V[1]=i.high,M[0]}):(nt=1023,Z=Math.log2,it=Math.floor,at=Math.pow,I=function(){for(var i=53;i>0;i--){var t=at(2,i)-1;if(it(Z(t))+1===i)return t}return 0}(),z.doubleToLongBits=function(i){var t,e,n,s,u,c,g,y,x;if(i<0||1/i===Number.NEGATIVE_INFINITY?(c=1<<31,i=-i):c=0,i===0)return new K(y=c,x=0);if(i===1/0)return new K(y=2146435072|c,x=0);if(i!=i)return new K(y=2146959360,x=0);if(s=0,x=0,(t=it(i))>1)if(t<=I)(s=it(Z(t)))<=20?(x=0,y=t<<20-s&1048575):(x=t%(e=at(2,n=s-20))<<32-n,y=t/e&1048575);else for(n=t,x=0;(n=it(e=n/2))!==0;)s++,x>>>=1,x|=(1&y)<<31,y>>>=1,e!==n&&(y|=524288);if(g=s+nt,u=t===0,t=i-t,s<52&&t!==0)for(n=0;;){if((e=2*t)>=1?(t=e-1,u?(g--,u=!1):(n<<=1,n|=1,s++)):(t=e,u?--g==0&&(s++,u=!1):(n<<=1,s++)),s===20)y|=n,n=0;else if(s===52){x|=n;break}if(e===1){s<20?y|=n<<20-s:s<52&&(x|=n<<52-s);break}}return y|=g<<20,new K(y|=c,x)},z.longBitsToDouble=function(i){var t,e,n,s,u=i.high,c=i.low,g=u&1<<31?-1:1;for(n=((2146435072&u)>>20)-nt,s=0,e=1<<19,t=1;t<=20;t++)u&e&&(s+=at(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)c&e&&(s+=at(2,-t)),e>>>=1;if(n===-1023){if(s===0)return 0*g;n=-1022}else{if(n===1024)return s===0?g/0:NaN;s+=1}return g*s*at(2,n)});var ht=function(i){function t(e){var n;return h(this,t),(n=l(this,t,[e])).name=Object.keys({RuntimeException:t})[0],n}return d(t,i),f(t)}(Y),dt=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,null,[{key:"constructor_",value:function(){if(arguments.length===0)ht.constructor_.call(this);else if(arguments.length===1){var e=arguments[0];ht.constructor_.call(this,e)}}}])}(ht),j=function(){function i(){h(this,i)}return f(i,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)i.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new dt("Should never reach here"+(t!==null?": "+t:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var t=arguments[0];i.isTrue(t,null)}else if(arguments.length===2){var e=arguments[1];if(!arguments[0])throw e===null?new dt:new dt(e)}}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];i.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],u=arguments[2];if(!s.equals(n))throw new dt("Expected "+n+" but encountered "+s+(u!==null?": "+u:""))}}}])}(),Nt=new ArrayBuffer(8),Ut=new Float64Array(Nt),Mt=new Int32Array(Nt),C=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getM",value:function(){return z.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case i.X:this.x=e;break;case i.Y:this.y=e;break;case i.Z:this.setZ(e);break;default:throw new A("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!!Q.equalsWithTolerance(this.x,e.x,n)&&!!Q.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new A("Invalid ordinate index: "+i.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.getZ()}throw new A("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||z.isNaN(this.getZ())&&z.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof i&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return Q.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return j.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,s=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+s*s)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*t+i.hashCode(this.x))+i.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[q,$,U]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)i.constructor_.call(this,0,0);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.x,t.y,t.getZ())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];i.constructor_.call(this,e,n,i.NULL_ORDINATE)}else if(arguments.length===3){var s=arguments[0],u=arguments[1],c=arguments[2];this.x=s,this.y=u,this.z=c}}},{key:"hashCode",value:function(t){return Ut[0]=t,Mt[0]^Mt[1]}}])}(),Ze=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compare",value:function(t,e){var n=i.compare(t.x,e.x);if(n!==0)return n;var s=i.compare(t.y,e.y);return s!==0?s:this._dimensionsToTest<=2?0:i.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[ot]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)i.constructor_.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new A("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:z.isNaN(t)?z.isNaN(e)?0:-1:z.isNaN(e)?1:0}}])}();C.DimensionalComparator=Ze,C.NULL_ORDINATE=z.NaN,C.X=0,C.Y=1,C.Z=2,C.M=3;var _t=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new i;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new i(e,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof i){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&s>=this._miny&&s<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof C){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){if(arguments[0]instanceof C&&arguments[1]instanceof C){var n=arguments[0],s=arguments[1];return!this.isNull()&&!((n.x<s.x?n.x:s.x)>this._maxx)&&!((n.x>s.x?n.x:s.x)<this._minx)&&!((n.y<s.y?n.y:s.y)>this._maxy)&&!((n.y>s.y?n.y:s.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1];return!this.isNull()&&!(u>this._maxx||u<this._minx||c>this._maxy||c<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=s,this._maxy=s):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),s<this._miny&&(this._miny=s),s>this._maxy&&(this._maxy=s))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];return this.covers(n,s)}}},{key:"centre",value:function(){return this.isNull()?null:new C((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.init(n.x,s.x,n.y,s.y)}else if(arguments.length===4){var u=arguments[0],c=arguments[1],g=arguments[2],y=arguments[3];u<c?(this._minx=u,this._maxx=c):(this._minx=c,this._maxx=u),g<y?(this._miny=g,this._maxy=y):(this._miny=y,this._maxy=g)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+C.hashCode(this._minx))+C.hashCode(this._maxx))+C.hashCode(this._miny))+C.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[q,U]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.init(n.x,s.x,n.y,s.y)}else if(arguments.length===4){var u=arguments[0],c=arguments[1],g=arguments[2],y=arguments[3];this.init(u,c,g,y)}}},{key:"intersects",value:function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var s=arguments[0],u=arguments[1],c=arguments[2],g=arguments[3],y=Math.min(c.x,g.x),x=Math.max(c.x,g.x),T=Math.min(s.x,u.x),R=Math.max(s.x,u.x);return!(T>x)&&!(R<y)&&(y=Math.min(c.y,g.y),x=Math.max(c.y,g.y),T=Math.min(s.y,u.y),R=Math.max(s.y,u.y),!(T>x)&&!(R<y))}}}])}(),tt=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(i.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return t!==null&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(arguments.length===1){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(arguments.length===2){var n=arguments[0],s=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,s)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION)throw new A("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return this.envelope!=null&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=this._envelope==null?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new _t(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),s=e.iterator();n.hasNext()&&s.hasNext();){var u=n.next(),c=s.next(),g=u.compareTo(c);if(g!==0)return g}return n.hasNext()?1:s.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===i.TYPECODE_MULTIPOINT||this.getTypeCode()===i.TYPECODE_MULTILINESTRING||this.getTypeCode()===i.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[$,q,U]}},{key:"getClass",value:function(){return i}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1}}])}();tt.constructor_=function(i){i&&(this._envelope=null,this._userData=null,this._factory=i,this._SRID=i.getSRID())},tt.TYPECODE_POINT=0,tt.TYPECODE_MULTIPOINT=1,tt.TYPECODE_LINESTRING=2,tt.TYPECODE_LINEARRING=3,tt.TYPECODE_MULTILINESTRING=4,tt.TYPECODE_POLYGON=5,tt.TYPECODE_MULTIPOLYGON=6,tt.TYPECODE_GEOMETRYCOLLECTION=7,tt.TYPENAME_POINT="Point",tt.TYPENAME_MULTIPOINT="MultiPoint",tt.TYPENAME_LINESTRING="LineString",tt.TYPENAME_LINEARRING="LinearRing",tt.TYPENAME_MULTILINESTRING="MultiLineString",tt.TYPENAME_POLYGON="Polygon",tt.TYPENAME_MULTIPOLYGON="MultiPolygon",tt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",tt.geometryChangedFilter={get interfaces_(){return[X]},filter:function(i){i.geometryChangedAction()}};var N=function(){function i(){h(this,i)}return f(i,null,[{key:"toLocationSymbol",value:function(t){switch(t){case i.EXTERIOR:return"e";case i.BOUNDARY:return"b";case i.INTERIOR:return"i";case i.NONE:return"-"}throw new A("Unknown location value: "+t)}}])}();N.INTERIOR=0,N.BOUNDARY=1,N.EXTERIOR=2,N.NONE=-1;var Kt=function(){return f(function i(){h(this,i)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),_n=function(i){function t(e){var n;return h(this,t),(n=l(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],n}return d(t,i),f(t)}(Y),fe=function(i){function t(e){var n;return h(this,t),(n=l(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],n}return d(t,i),f(t)}(Y),fr=function(i){function t(){return h(this,t),l(this,t,arguments)}return d(t,i),f(t,[{key:"contains",value:function(){}}])}(Kt),fi=function(i){function t(e){var n;return h(this,t),(n=l(this,t)).map=new Map,e instanceof Kt&&n.addAll(e),n}return d(t,i),f(t,[{key:"contains",value:function(e){var n=e.hashCode?e.hashCode():e;return!!this.map.has(n)}},{key:"add",value:function(e){var n=e.hashCode?e.hashCode():e;return!this.map.has(n)&&!!this.map.set(n,e)}},{key:"addAll",value:function(e){var n,s=k(e);try{for(s.s();!(n=s.n()).done;){var u=n.value;this.add(u)}}catch(c){s.e(c)}finally{s.f()}return!0}},{key:"remove",value:function(){throw new fe}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Ha(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(fr),Ha=function(){return f(function i(t){h(this,i),this.iterator=t.values();var e=this.iterator.next(),n=e.done,s=e.value;this.done=n,this.value=s},[{key:"next",value:function(){if(this.done)throw new _n;var i=this.value,t=this.iterator.next(),e=t.done,n=t.value;return this.done=e,this.value=n,i}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new fe}}])}(),B=function(){function i(){h(this,i)}return f(i,null,[{key:"opposite",value:function(t){return t===i.LEFT?i.RIGHT:t===i.RIGHT?i.LEFT:t}}])}();B.ON=0,B.LEFT=1,B.RIGHT=2;var gr=function(i){function t(e){var n;return h(this,t),(n=l(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],n}return d(t,i),f(t)}(Y),mr=function(i){function t(e){var n;return h(this,t),(n=l(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],n}return d(t,i),f(t)}(Y),ye=function(i){function t(){return h(this,t),l(this,t,arguments)}return d(t,i),f(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Kt),$a=function(i){function t(){var e;return h(this,t),(e=l(this,t)).array=[],e}return d(t,i),f(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new mr;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(this.array.length===0)throw new gr;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new gr;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(ye);function lt(i,t){return i.interfaces_&&i.interfaces_.indexOf(t)>-1}var We=function(){return f(function i(t){h(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),pn=function(){function i(t){h(this,i),this.value=t}return f(i,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new i(t)}}])}(),gi=function(){return f(function i(){h(this,i)},null,[{key:"isWhitespace",value:function(i){return i<=32&&i>=0||i===127}},{key:"toUpperCase",value:function(i){return i.toUpperCase()}}])}(),st=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var n=this.abs(),s=i.magnitude(n._hi),u=i.TEN.pow(s);(n=n.divide(u)).gt(i.TEN)?(n=n.divide(i.TEN),s+=1):n.lt(i.ONE)&&(n=n.multiply(i.TEN),s-=1);for(var c=s+1,g=new We,y=i.MAX_PRINT_DIGITS-1,x=0;x<=y;x++){t&&x===c&&g.append(".");var T=Math.trunc(n._hi);if(T<0)break;var R=!1,D=0;T>9?(R=!0,D="9"):D="0"+T,g.append(D),n=n.subtract(i.valueOf(T)).multiply(i.TEN),R&&n.selfAdd(i.TEN);var W=!0,J=i.magnitude(n._hi);if(J<0&&Math.abs(J)>=y-x&&(W=!1),!W)break}return e[0]=s,g.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof i){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n,s,u,c,g=arguments[0],y=arguments[1],x=null,T=null,R=null,D=null;return u=this._hi/g,D=(x=(R=i.SPLIT*u)-(x=R-u))*(T=(D=i.SPLIT*g)-(T=D-g))-(c=u*g)+x*(s=g-T)+(n=u-x)*T+n*s,D=u+(R=(this._hi-c-D+this._lo-u*y)/g),this._hi=D,this._lo=u-D+R,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof i){var t,e,n,s,u=arguments[0],c=null,g=null,y=null,x=null;return t=(n=this._hi/u._hi)-(c=(y=i.SPLIT*n)-(c=y-n)),x=c*(g=(x=i.SPLIT*u._hi)-(g=x-u._hi))-(s=n*u._hi)+c*(e=u._hi-g)+t*g+t*e,new i(x=n+(y=(this._hi-s-x+this._lo-n*u._lo)/u._hi),n-x+y)}if(typeof arguments[0]=="number"){var T=arguments[0];return z.isNaN(T)?i.createNaN():i.copy(this).selfDivide(T,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(t===0)return i.valueOf(1);var e=new i(this),n=i.valueOf(1),s=Math.abs(t);if(s>1)for(;s>0;)s%2==1&&n.selfMultiply(e),(s/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return i.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new i(t,e)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return i.valueOf(0);if(this.isNegative())return i.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=i.valueOf(e),s=this.subtract(n.sqr())._hi*(.5*t);return n.add(s)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e,n,s,u,c,g=arguments[0],y=null;return y=(s=this._hi+g)-(u=s-this._hi),n=(c=(y=g-u+(this._hi-y))+this._lo)+(s-(e=s+c)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(arguments.length===2){var x,T,R,D,W=arguments[0],J=arguments[1],et=null,gt=null,ct=null;R=this._hi+W,T=this._lo+J,gt=R-(ct=R-this._hi),et=T-(D=T-this._lo);var yt=(x=R+(ct=(gt=W-ct+(this._hi-gt))+T))+(ct=(et=J-D+(this._lo-et))+(ct+(R-x))),St=ct+(x-yt);return this._hi=yt,this._lo=St,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n,s,u=arguments[0],c=arguments[1],g=null,y=null,x=null,T=null;g=(x=i.SPLIT*this._hi)-this._hi,T=i.SPLIT*u,g=x-g,n=this._hi-g,y=T-u;var R=(x=this._hi*u)+(T=g*(y=T-y)-x+g*(s=u-y)+n*y+n*s+(this._hi*c+this._lo*u)),D=T+(g=x-R);return this._hi=R,this._lo=D,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return i.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new i(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new i(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return t.isNaN()?i.createNaN():i.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return z.isNaN(e)?i.createNaN():i.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return z.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=i.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),s=e[0]+1,u=n;if(n.charAt(0)===".")u="0"+n;else if(s<0)u="0."+i.stringOfChar("0",-s)+n;else if(n.indexOf(".")===-1){var c=s-n.length;u=n+i.stringOfChar("0",c)+".0"}return this.isNegative()?"-"+u:u}},{key:"reciprocal",value:function(){var t,e,n,s,u=null,c=null,g=null,y=null;t=(n=1/this._hi)-(u=(g=i.SPLIT*n)-(u=g-n)),c=(y=i.SPLIT*this._hi)-this._hi;var x=n+(g=(1-(s=n*this._hi)-(y=u*(c=y-c)-s+u*(e=this._hi-c)+t*c+t*e)-n*this._lo)/this._hi);return new i(x,n-x+g)}},{key:"toSciNotation",value:function(){if(this.isZero())return i.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),s=i.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var u="";n.length>1&&(u=n.substring(1));var c=n.charAt(0)+"."+u;return this.isNegative()?"-"+c+s:c+s}},{key:"abs",value:function(){return this.isNaN()?i.NaN:this.isNegative()?this.negate():new i(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return i.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return i.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof i){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this._hi=n,this._lo=s}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?i.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[U,q,$]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];i.constructor_.call(this,i.parse(n))}}else if(arguments.length===2){var s=arguments[0],u=arguments[1];this.init(s,u)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];return i.determinant(i.valueOf(t),i.valueOf(e),i.valueOf(n),i.valueOf(s))}if(arguments[3]instanceof i&&arguments[2]instanceof i&&arguments[0]instanceof i&&arguments[1]instanceof i){var u=arguments[1],c=arguments[2],g=arguments[3];return arguments[0].multiply(g).selfSubtract(u.multiply(c))}}},{key:"sqr",value:function(t){return i.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var t=arguments[0];return i.parse(t)}if(typeof arguments[0]=="number")return new i(arguments[0])}},{key:"sqrt",value:function(t){return i.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,n=t.length;gi.isWhitespace(t.charAt(e));)e++;var s=!1;if(e<n){var u=t.charAt(e);u!=="-"&&u!=="+"||(e++,u==="-"&&(s=!0))}for(var c=new i,g=0,y=0,x=0,T=!1;!(e>=n);){var R=t.charAt(e);if(e++,gi.isDigit(R)){var D=R-"0";c.selfMultiply(i.TEN),c.selfAdd(D),g++}else{if(R!=="."){if(R==="e"||R==="E"){var W=t.substring(e);try{x=pn.parseInt(W)}catch(yt){throw yt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+W+" in string "+t):yt}break}throw new NumberFormatException("Unexpected character '"+R+"' at position "+e+" in string "+t)}y=g,T=!0}}var J=c;T||(y=g);var et=g-y-x;if(et===0)J=c;else if(et>0){var gt=i.TEN.pow(et);J=c.divide(gt)}else if(et<0){var ct=i.TEN.pow(-et);J=c.multiply(ct)}return s?J.negate():J}},{key:"createNaN",value:function(){return new i(z.NaN,z.NaN)}},{key:"copy",value:function(t){return new i(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),s=Math.trunc(Math.floor(n));return 10*Math.pow(10,s)<=e&&(s+=1),s}},{key:"stringOfChar",value:function(t,e){for(var n=new We,s=0;s<e;s++)n.append(t);return n.toString()}}])}();st.PI=new st(3.141592653589793,12246467991473532e-32),st.TWO_PI=new st(6.283185307179586,24492935982947064e-32),st.PI_2=new st(1.5707963267948966,6123233995736766e-32),st.E=new st(2.718281828459045,14456468917292502e-32),st.NaN=new st(z.NaN,z.NaN),st.EPS=123259516440783e-46,st.SPLIT=134217729,st.MAX_PRINT_DIGITS=32,st.TEN=st.valueOf(10),st.ONE=st.valueOf(1),st.SCI_NOT_EXPONENT_CHAR="E",st.SCI_NOT_ZERO="0.0E0";var mi=function(){function i(){h(this,i)}return f(i,null,[{key:"orientationIndex",value:function(t,e,n){var s=i.orientationIndexFilter(t,e,n);if(s<=1)return s;var u=st.valueOf(e.x).selfAdd(-t.x),c=st.valueOf(e.y).selfAdd(-t.y),g=st.valueOf(n.x).selfAdd(-e.x),y=st.valueOf(n.y).selfAdd(-e.y);return u.selfMultiply(y).selfSubtract(c.selfMultiply(g)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof st&&arguments[2]instanceof st&&arguments[0]instanceof st&&arguments[1]instanceof st){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],u=arguments[1],c=arguments[2],g=arguments[3],y=st.valueOf(s),x=st.valueOf(u),T=st.valueOf(c),R=st.valueOf(g);return y.multiply(R).selfSubtract(x.multiply(T)).signum()}}},{key:"intersection",value:function(t,e,n,s){var u=new st(t.y).selfSubtract(e.y),c=new st(e.x).selfSubtract(t.x),g=new st(t.x).selfMultiply(e.y).selfSubtract(new st(e.x).selfMultiply(t.y)),y=new st(n.y).selfSubtract(s.y),x=new st(s.x).selfSubtract(n.x),T=new st(n.x).selfMultiply(s.y).selfSubtract(new st(s.x).selfMultiply(n.y)),R=c.multiply(T).selfSubtract(x.multiply(g)),D=y.multiply(g).selfSubtract(u.multiply(T)),W=u.multiply(x).selfSubtract(y.multiply(c)),J=R.selfDivide(W).doubleValue(),et=D.selfDivide(W).doubleValue();return z.isNaN(J)||z.isInfinite(J)||z.isNaN(et)||z.isInfinite(et)?null:new C(J,et)}},{key:"orientationIndexFilter",value:function(t,e,n){var s=null,u=(t.x-n.x)*(e.y-n.y),c=(t.y-n.y)*(e.x-n.x),g=u-c;if(u>0){if(c<=0)return i.signum(g);s=u+c}else{if(!(u<0)||c>=0)return i.signum(g);s=-u-c}var y=i.DP_SAFE_EPSILON*s;return g>=y||-g>=y?i.signum(g):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();mi.DP_SAFE_EPSILON=1e-15;var ft=function(){return f(function i(){h(this,i)},[{key:"getM",value:function(i){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(i,t)}return z.NaN}},{key:"setOrdinate",value:function(i,t,e){}},{key:"getZ",value:function(i){return this.hasZ()?this.getOrdinate(i,2):z.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(i,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(i){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(i){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(i){}},{key:"copy",value:function(){}},{key:"getY",value:function(i){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[$]}}])}();ft.X=0,ft.Y=1,ft.Z=2,ft.M=3;var ut=function(){function i(){h(this,i)}return f(i,null,[{key:"index",value:function(t,e,n){return mi.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new A("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],s=0,u=1;u<=e;u++){var c=t[u];c.y>n.y&&(n=c,s=u)}var g=s;do(g-=1)<0&&(g=e);while(t[g].equals2D(n)&&g!==s);var y=s;do y=(y+1)%e;while(t[y].equals2D(n)&&y!==s);var x=t[g],T=t[y];if(x.equals2D(n)||T.equals2D(n)||x.equals2D(T))return!1;var R=i.index(x,n,T);return R===0?x.x>T.x:R>0}if(lt(arguments[0],ft)){var D=arguments[0],W=D.size()-1;if(W<3)throw new A("Ring has fewer than 4 points, so orientation cannot be determined");for(var J=D.getCoordinate(0),et=0,gt=1;gt<=W;gt++){var ct=D.getCoordinate(gt);ct.y>J.y&&(J=ct,et=gt)}var yt=null,St=et;do(St-=1)<0&&(St=W),yt=D.getCoordinate(St);while(yt.equals2D(J)&&St!==et);var Tt=null,Ne=et;do Ne=(Ne+1)%W,Tt=D.getCoordinate(Ne);while(Tt.equals2D(J)&&Ne!==et);if(yt.equals2D(J)||Tt.equals2D(J)||yt.equals2D(Tt))return!1;var sn=i.index(yt,J,Tt);return sn===0?yt.x>Tt.x:sn>0}}}])}();ut.CLOCKWISE=-1,ut.RIGHT=ut.CLOCKWISE,ut.COUNTERCLOCKWISE=1,ut.LEFT=ut.COUNTERCLOCKWISE,ut.COLLINEAR=0,ut.STRAIGHT=ut.COLLINEAR;var Za=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(i,t){var e=this.getRightmostSideOfSegment(i,t);return e<0&&(e=this.getRightmostSideOfSegment(i,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(i)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var i=this._minDe.getEdge().getCoordinates();j.isTrue(this._minIndex>0&&this._minIndex<i.length,"rightmost point expected to be interior vertex of edge");var t=i[this._minIndex-1],e=i[this._minIndex+1],n=ut.index(this._minCoord,e,t),s=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&n===ut.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&n===ut.CLOCKWISE)&&(s=!0),s&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(i,t){var e=i.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var n=B.LEFT;return e[t].y<e[t+1].y&&(n=B.RIGHT),n}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(i){for(var t=i.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(this._minCoord===null||t[e].x>this._minCoord.x)&&(this._minDe=i,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var i=this._minDe.getNode().getEdges();this._minDe=i.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}j.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===B.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),se=function(i){function t(e,n){var s;return h(this,t),(s=l(this,t,[n?e+" [ "+n+" ]":e])).pt=n?new C(n):void 0,s.name=Object.keys({TopologyException:t})[0],s}return d(t,i),f(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(ht),Wa=function(){return f(function i(){h(this,i),this.array=[]},[{key:"addLast",value:function(i){this.array.push(i)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),rt=function(i){function t(e){var n;return h(this,t),(n=l(this,t)).array=[],e instanceof Kt&&n.addAll(e),n}return d(t,i),f(t,[{key:"interfaces_",get:function(){return[ye,Kt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return arguments.length===1?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var n,s=k(e);try{for(s.s();!(n=s.n()).done;){var u=n.value;this.array.push(u)}}catch(c){s.e(c)}finally{s.f()}}},{key:"set",value:function(e,n){var s=this.array[e];return this.array[e]=n,s}},{key:"iterator",value:function(){return new Ka(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new mr;return this.array[e]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(e){e?this.array.sort(function(n,s){return e.compare(n,s)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var n=0,s=this.array.length;n<s;n++)if(this.array[n]===e)return!!this.array.splice(n,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(ye),Ka=function(){return f(function i(t){h(this,i),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new _n;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(i){return this.arrayList.set(this.position-1,i)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),Qa=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();)i.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(i){for(var t=null,e=i.getEdges().iterator();e.hasNext();){var n=e.next();if(n.isVisited()||n.getSym().isVisited()){t=n;break}}if(t===null)throw new se("unable to find edge to compute depths at "+i.getCoordinate());i.getEdges().computeDepths(t);for(var s=i.getEdges().iterator();s.hasNext();){var u=s.next();u.setVisited(!0),this.copySymDepths(u)}}},{key:"computeDepth",value:function(i){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(B.RIGHT,i),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(i){this.addReachable(i),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();){var t=i.next();t.getDepth(B.RIGHT)>=1&&t.getDepth(B.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(i){var t=new fi,e=new Wa,n=i.getNode();for(e.addLast(n),t.add(n),i.setVisited(!0);!e.isEmpty();){var s=e.removeFirst();t.add(s),this.computeNodeDepth(s);for(var u=s.getEdges().iterator();u.hasNext();){var c=u.next().getSym();if(!c.isVisited()){var g=c.getNode();t.contains(g)||(e.addLast(g),t.add(g))}}}}},{key:"compareTo",value:function(i){var t=i;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var i=new _t,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),n=0;n<e.length-1;n++)i.expandToInclude(e[n]);this._env=i}return this._env}},{key:"addReachable",value:function(i){var t=new $a;for(t.add(i);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(i){var t=i.getSym();t.setDepth(B.LEFT,i.getDepth(B.RIGHT)),t.setDepth(B.RIGHT,i.getDepth(B.LEFT))}},{key:"add",value:function(i,t){i.setVisited(!0),this._nodes.add(i);for(var e=i.getEdges().iterator();e.hasNext();){var n=e.next();this._dirEdgeList.add(n);var s=n.getSym().getNode();s.isVisited()||t.push(s)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new rt,this._nodes=new rt,this._rightMostCoord=null,this._env=null,this._finder=new Za}}])}(),vi=function(){return f(function i(){h(this,i)},null,[{key:"intersection",value:function(i,t,e,n){var s=i.x<t.x?i.x:t.x,u=i.y<t.y?i.y:t.y,c=i.x>t.x?i.x:t.x,g=i.y>t.y?i.y:t.y,y=e.x<n.x?e.x:n.x,x=e.y<n.y?e.y:n.y,T=e.x>n.x?e.x:n.x,R=e.y>n.y?e.y:n.y,D=((s>y?s:y)+(c<T?c:T))/2,W=((u>x?u:x)+(g<R?g:R))/2,J=i.x-D,et=i.y-W,gt=t.x-D,ct=t.y-W,yt=e.x-D,St=e.y-W,Tt=n.x-D,Ne=n.y-W,sn=et-ct,ts=gt-J,es=J*ct-gt*et,ns=St-Ne,is=Tt-yt,rs=yt*Ne-Tt*St,ss=sn*is-ns*ts,Mi=(ts*rs-is*es)/ss,Oi=(ns*es-sn*rs)/ss;return z.isNaN(Mi)||z.isInfinite(Mi)||z.isNaN(Oi)||z.isInfinite(Oi)?null:new C(Mi+D,Oi+W)}}])}(),Gt=function(){return f(function i(){h(this,i)},null,[{key:"arraycopy",value:function(i,t,e,n,s){for(var u=0,c=t;c<t+s;c++)e[n+u]=i[c],u++}},{key:"getProperty",value:function(i){return{"line.separator":`
`}[i]}}])}(),Ke=function(){function i(){h(this,i)}return f(i,null,[{key:"log10",value:function(t){var e=Math.log(t);return z.isInfinite(e)||z.isNaN(e)?e:e/i.LOG_10}},{key:"min",value:function(t,e,n,s){var u=t;return e<u&&(u=e),n<u&&(u=n),s<u&&(u=s),u}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],u=arguments[1],c=arguments[2];return s<u?u:s>c?c:s}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(arguments.length===3){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(arguments.length===4){var s=arguments[1],u=arguments[2],c=arguments[3],g=arguments[0];return s>g&&(g=s),u>g&&(g=u),c>g&&(g=c),g}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();Ke.LOG_10=Math.log(10);var Qt=function(){function i(){h(this,i)}return f(i,null,[{key:"segmentToSegment",value:function(t,e,n,s){if(t.equals(e))return i.pointToSegment(t,n,s);if(n.equals(s))return i.pointToSegment(s,t,e);var u=!1;if(_t.intersects(t,e,n,s)){var c=(e.x-t.x)*(s.y-n.y)-(e.y-t.y)*(s.x-n.x);if(c===0)u=!0;else{var g=(t.y-n.y)*(s.x-n.x)-(t.x-n.x)*(s.y-n.y),y=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/c,x=g/c;(x<0||x>1||y<0||y>1)&&(u=!0)}}else u=!0;return u?Ke.min(i.pointToSegment(t,n,s),i.pointToSegment(e,n,s),i.pointToSegment(n,t,e),i.pointToSegment(s,t,e)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var s=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),u=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/s;if(u<=0)return t.distance(e);if(u>=1)return t.distance(n);var c=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/s;return Math.abs(c)*Math.sqrt(s)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var s=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),u=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/s;return Math.abs(u)*Math.sqrt(s)}},{key:"pointToSegmentString",value:function(t,e){if(e.length===0)throw new A("Line array must contain at least one vertex");for(var n=t.distance(e[0]),s=0;s<e.length-1;s++){var u=i.pointToSegment(t,e[s],e[s+1]);u<n&&(n=u)}return n}}])}(),vr=function(){return f(function i(){h(this,i)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||lt(arguments[0],ft);else if(arguments.length!==2){if(arguments.length===3){var i=arguments[0],t=arguments[1];return this.create(i,t)}}}}])}(),kn=function(){return f(function i(){h(this,i)},[{key:"filter",value:function(i){}}])}(),Ja=function(){return f(function i(){h(this,i)},null,[{key:"ofLine",value:function(i){var t=i.size();if(t<=1)return 0;var e=0,n=new C;i.getCoordinate(0,n);for(var s=n.x,u=n.y,c=1;c<t;c++){i.getCoordinate(c,n);var g=n.x,y=n.y,x=g-s,T=y-u;e+=Math.sqrt(x*x+T*T),s=g,u=y}return e}}])}(),yr=f(function i(){h(this,i)}),de=function(){function i(){h(this,i)}return f(i,null,[{key:"copyCoord",value:function(t,e,n,s){for(var u=Math.min(t.getDimension(),n.getDimension()),c=0;c<u;c++)n.setOrdinate(s,c,t.getOrdinate(e,c))}},{key:"isRing",value:function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,ft.X)===t.getOrdinate(e-1,ft.X)&&t.getOrdinate(0,ft.Y)===t.getOrdinate(e-1,ft.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(lt(arguments[0],ft)&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1];i.scroll(t,e,i.isRing(t))}else if(lt(arguments[0],ft)&&arguments[1]instanceof C){var n=arguments[0],s=arguments[1],u=i.indexOf(s,n);if(u<=0)return null;i.scroll(n,u)}}else if(arguments.length===3){var c=arguments[0],g=arguments[1],y=arguments[2];if(g<=0)return null;for(var x=c.copy(),T=y?c.size()-1:c.size(),R=0;R<T;R++)for(var D=0;D<c.getDimension();D++)c.setOrdinate(R,D,x.getOrdinate((g+R)%T,D));if(y)for(var W=0;W<c.getDimension();W++)c.setOrdinate(T,W,c.getOrdinate(0,W))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var s=Math.min(t.getDimension(),e.getDimension()),u=0;u<n;u++)for(var c=0;c<s;c++){var g=t.getOrdinate(u,c),y=e.getOrdinate(u,c);if(t.getOrdinate(u,c)!==e.getOrdinate(u,c)&&(!z.isNaN(g)||!z.isNaN(y)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var t=arguments[0];return i.minCoordinateIndex(t,0,t.size()-1)}if(arguments.length===3){for(var e=arguments[0],n=arguments[2],s=-1,u=null,c=arguments[1];c<=n;c++){var g=e.getCoordinate(c);(u===null||u.compareTo(g)>0)&&(u=g,s=c)}return s}}},{key:"extend",value:function(t,e,n){var s=t.create(n,e.getDimension()),u=e.size();if(i.copy(e,0,s,0,u),u>0)for(var c=u;c<n;c++)i.copy(e,u-1,s,c,1);return s}},{key:"reverse",value:function(t){for(var e=t.size()-1,n=Math.trunc(e/2),s=0;s<=n;s++)i.swap(t,s,e-s)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var s=0;s<t.getDimension();s++){var u=t.getOrdinate(e,s);t.setOrdinate(e,s,t.getOrdinate(n,s)),t.setOrdinate(n,s,u)}}},{key:"copy",value:function(t,e,n,s,u){for(var c=0;c<u;c++)i.copyCoord(t,e+c,n,s+c)}},{key:"ensureValidRing",value:function(t,e){var n=e.size();return n===0?e:n<=3?i.createClosedRing(t,e,4):e.getOrdinate(0,ft.X)===e.getOrdinate(n-1,ft.X)&&e.getOrdinate(0,ft.Y)===e.getOrdinate(n-1,ft.Y)?e:i.createClosedRing(t,e,n+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,ft.X)&&t.y===e.getOrdinate(n,ft.Y))return n;return-1}},{key:"createClosedRing",value:function(t,e,n){var s=t.create(n,e.getDimension()),u=e.size();i.copy(e,0,s,0,u);for(var c=u;c<n;c++)i.copy(e,0,s,c,1);return s}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var s=t.getCoordinate(n);(e===null||e.compareTo(s)>0)&&(e=s)}return e}}])}(),H=function(){function i(){h(this,i)}return f(i,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case i.FALSE:return i.SYM_FALSE;case i.TRUE:return i.SYM_TRUE;case i.DONTCARE:return i.SYM_DONTCARE;case i.P:return i.SYM_P;case i.L:return i.SYM_L;case i.A:return i.SYM_A}throw new A("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(gi.toUpperCase(t)){case i.SYM_FALSE:return i.FALSE;case i.SYM_TRUE:return i.TRUE;case i.SYM_DONTCARE:return i.DONTCARE;case i.SYM_P:return i.P;case i.SYM_L:return i.L;case i.SYM_A:return i.A}throw new A("Unknown dimension symbol: "+t)}}])}();H.P=0,H.L=1,H.A=2,H.FALSE=-1,H.TRUE=-2,H.DONTCARE=-3,H.SYM_FALSE="F",H.SYM_TRUE="T",H.SYM_DONTCARE="*",H.SYM_P="0",H.SYM_L="1",H.SYM_A="2";var xn=function(){return f(function i(){h(this,i)},[{key:"filter",value:function(i){}}])}(),En=function(){return f(function i(){h(this,i)},[{key:"filter",value:function(i,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Qe=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new _t:this._points.expandEnvelope(new _t)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof tt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var s=e;if(this._points.size()!==s._points.size())return!1;for(var u=0;u<this._points.size();u++)if(!this.equal(this._points.getCoordinate(u),s._points.getCoordinate(u),n))return!1;return!0}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var n=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(n))>0){var s=this._points.copy();de.reverse(s),this._points=s}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?H.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return de.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return tt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Ja.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var e=arguments[0],n=0,s=0;n<this._points.size()&&s<e._points.size();){var u=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(s));if(u!==0)return u;n++,s++}return n<this._points.size()?1:s<e._points.size()?-1:0}if(arguments.length===2){var c=arguments[0];return arguments[1].compare(this._points,c._points)}}},{key:"apply",value:function(){if(lt(arguments[0],kn))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(this._points.getCoordinate(n));else if(lt(arguments[0],En)){var s=arguments[0];if(this._points.size()===0)return null;for(var u=0;u<this._points.size()&&(s.filter(this._points,u),!s.isDone());u++);s.isGeometryChanged()&&this.geometryChanged()}else lt(arguments[0],xn)?arguments[0].filter(this):lt(arguments[0],X)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new fe}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return tt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(e){if(e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),e.size()===1)throw new A("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var n=0;n<this._points.size();n++)if(this._points.getCoordinate(n).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[yr]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];tt.constructor_.call(this,n),this.init(e)}}}}])}(tt),dr=f(function i(){h(this,i)}),yi=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new _t;var e=new _t;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof tt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return H.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return tt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0];return arguments[1].compare(this._coordinates,n._coordinates)}}},{key:"apply",value:function(){if(lt(arguments[0],kn)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(lt(arguments[0],En)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else lt(arguments[0],xn)?arguments[0].filter(this):lt(arguments[0],X)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return tt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(e){e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),j.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[dr]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],n=arguments[1];tt.constructor_.call(this,n),this.init(e)}}])}(tt),_r=function(){function i(){h(this,i)}return f(i,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(i.ofRingSigned(t))}if(lt(arguments[0],ft)){var e=arguments[0];return Math.abs(i.ofRingSigned(e))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,s=1;s<t.length-1;s++){var u=t[s].x-n,c=t[s+1].y;e+=u*(t[s-1].y-c)}return e/2}if(lt(arguments[0],ft)){var g=arguments[0],y=g.size();if(y<3)return 0;var x=new C,T=new C,R=new C;g.getCoordinate(0,T),g.getCoordinate(1,R);var D=T.x;R.x-=D;for(var W=0,J=1;J<y-1;J++)x.y=T.y,T.x=R.x,T.y=R.y,g.getCoordinate(J+1,R),R.x-=D,W+=T.x*(x.y-R.y);return W/2}}}])}(),_e=function(){return f(function i(){h(this,i)},null,[{key:"sort",value:function(){var i=arguments,t=arguments[0];if(arguments.length===1)t.sort(function(D,W){return D.compareTo(W)});else if(arguments.length===2)t.sort(function(D,W){return i[1].compare(D,W)});else if(arguments.length===3){var e=t.slice(arguments[1],arguments[2]);e.sort();var n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var s,u=k(n);try{for(u.s();!(s=u.n()).done;){var c=s.value;t.push(c)}}catch(D){u.e(D)}finally{u.f()}}else if(arguments.length===4){var g=t.slice(arguments[1],arguments[2]);g.sort(function(D,W){return i[3].compare(D,W)});var y=t.slice(0,arguments[1]).concat(g,t.slice(arguments[2],t.length));t.splice(0,t.length);var x,T=k(y);try{for(T.s();!(x=T.n()).done;){var R=x.value;t.push(R)}}catch(D){T.e(D)}finally{T.f()}}}},{key:"asList",value:function(i){var t,e=new rt,n=k(i);try{for(n.s();!(t=n.n()).done;){var s=t.value;e.add(s)}}catch(u){n.e(u)}finally{n.f()}return e}},{key:"copyOf",value:function(i,t){return i.slice(0,t)}}])}(),pr=f(function i(){h(this,i)}),Nn=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),n=-1,s=this._shell.getCoordinates(),u=0;u<s.length;u++)e[++n]=s[u];for(var c=0;c<this._holes.length;c++)for(var g=this._holes[c].getCoordinates(),y=0;y<g.length;y++)e[++n]=g[y];return e}},{key:"getArea",value:function(){var e=0;e+=_r.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++)e-=_r.ofRing(this._holes[n].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),s=0;s<this._holes.length;s++)n[s]=this._holes[s].copy();return new t(e,n,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var e=this._shell.getCoordinateSequence(),n=this.getEnvelopeInternal(),s=0;s<5;s++){var u=e.getX(s);if(u!==n.getMinX()&&u!==n.getMaxX())return!1;var c=e.getY(s);if(c!==n.getMinY()&&c!==n.getMaxY())return!1}for(var g=e.getX(0),y=e.getY(0),x=1;x<=4;x++){var T=e.getX(x),R=e.getY(x);if(T!==g==(R!==y))return!1;g=T,y=R}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof tt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var s=e,u=this._shell,c=s._shell;if(!u.equalsExact(c,n)||this._holes.length!==s._holes.length)return!1;for(var g=0;g<this._holes.length;g++)if(!this._holes[g].equalsExact(s._holes[g],n))return!1;return!0}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);_e.sort(this._holes)}else if(arguments.length===2){var n=arguments[0],s=arguments[1];if(n.isEmpty())return null;var u=n.getCoordinateSequence(),c=de.minCoordinateIndex(u,0,u.size()-2);de.scroll(u,c,!0),ut.isCCW(u)===s&&de.reverse(u)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),n=new Array(this.getNumInteriorRing()).fill(null),s=0;s<n.length;s++)n[s]=this.getInteriorRingN(s).reverse();return this.getFactory().createPolygon(e,n)}},{key:"getTypeCode",value:function(){return tt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)e+=this._holes[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)e+=this._holes[n].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,n){var s=e.copy();return this.normalize(s,n),s}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=this._shell,s=e._shell;return n.compareToSameClass(s)}if(arguments.length===2){var u=arguments[1],c=arguments[0],g=this._shell,y=c._shell,x=g.compareToSameClass(y,u);if(x!==0)return x;for(var T=this.getNumInteriorRing(),R=c.getNumInteriorRing(),D=0;D<T&&D<R;){var W=this.getInteriorRingN(D),J=c.getInteriorRingN(D),et=W.compareToSameClass(J,u);if(et!==0)return et;D++}return D<T?1:D<R?-1:0}}},{key:"apply",value:function(){if(lt(arguments[0],kn)){var e=arguments[0];this._shell.apply(e);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(e)}else if(lt(arguments[0],En)){var s=arguments[0];if(this._shell.apply(s),!s.isDone())for(var u=0;u<this._holes.length&&(this._holes[u].apply(s),!s.isDone());u++);s.isGeometryChanged()&&this.geometryChanged()}else if(lt(arguments[0],xn))arguments[0].filter(this);else if(lt(arguments[0],X)){var c=arguments[0];c.filter(this),this._shell.apply(c);for(var g=0;g<this._holes.length;g++)this._holes[g].apply(c)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++)e[n+1]=this._holes[n];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return tt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[pr]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],n=arguments[1],s=arguments[2];if(tt.constructor_.call(this,s),e===null&&(e=this.getFactory().createLinearRing()),n===null&&(n=[]),tt.hasNullElements(n))throw new A("holes must not contain null elements");if(e.isEmpty()&&tt.hasNonEmptyElements(n))throw new A("shell is empty but holes are not");this._shell=e,this._holes=n}}])}(tt),ja=function(i){function t(){return h(this,t),l(this,t,arguments)}return d(t,i),f(t)}(fr),kr=function(i){function t(e){var n;return h(this,t),(n=l(this,t)).array=[],e instanceof Kt&&n.addAll(e),n}return d(t,i),f(t,[{key:"contains",value:function(e){var n,s=k(this.array);try{for(s.s();!(n=s.n()).done;)if(n.value.compareTo(e)===0)return!0}catch(u){s.e(u)}finally{s.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var n=0,s=this.array.length;n<s;n++)if(this.array[n].compareTo(e)===1)return!!this.array.splice(n,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var n,s=k(e);try{for(s.s();!(n=s.n()).done;){var u=n.value;this.add(u)}}catch(c){s.e(c)}finally{s.f()}return!0}},{key:"remove",value:function(){throw new fe}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new tu(this.array)}}])}(ja),tu=function(){return f(function i(t){h(this,i),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new _n;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new fe}}])}(),At=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new _t,n=0;n<this._geometries.length;n++)e.expandToInclude(this._geometries[n].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),n=-1,s=0;s<this._geometries.length;s++)for(var u=this._geometries[s].getCoordinates(),c=0;c<u.length;c++)e[++n]=u[c];return e}},{key:"getArea",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof tt){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var s=e;if(this._geometries.length!==s._geometries.length)return!1;for(var u=0;u<this._geometries.length;u++)if(!this._geometries[u].equalsExact(s._geometries[u],n))return!1;return!0}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();_e.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=H.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,n=new rt(e),s=0;s<e;s++)n.add(this._geometries[s].reverse());return this.getFactory().buildGeometry(n)}},{key:"getTypeCode",value:function(){return tt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=H.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=new kr(_e.asList(this._geometries)),s=new kr(_e.asList(e._geometries));return this.compare(n,s)}if(arguments.length===2){for(var u=arguments[1],c=arguments[0],g=this.getNumGeometries(),y=c.getNumGeometries(),x=0;x<g&&x<y;){var T=this.getGeometryN(x),R=c.getGeometryN(x),D=T.compareToSameClass(R,u);if(D!==0)return D;x++}return x<g?1:x<y?-1:0}}},{key:"apply",value:function(){if(lt(arguments[0],kn))for(var e=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(e);else if(lt(arguments[0],En)){var s=arguments[0];if(this._geometries.length===0)return null;for(var u=0;u<this._geometries.length&&(this._geometries[u].apply(s),!s.isDone());u++);s.isGeometryChanged()&&this.geometryChanged()}else if(lt(arguments[0],xn)){var c=arguments[0];c.filter(this);for(var g=0;g<this._geometries.length;g++)this._geometries[g].apply(c)}else if(lt(arguments[0],X)){var y=arguments[0];y.filter(this);for(var x=0;x<this._geometries.length;x++)this._geometries[x].apply(y)}}},{key:"getBoundary",value:function(){return tt.checkNotGeometryCollection(this),j.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return tt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];if(tt.constructor_.call(this,n),e===null&&(e=[]),tt.hasNullElements(e))throw new A("geometries must not contain null elements");this._geometries=e}}}}])}(tt),di=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof tt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&S(t,"equalsExact",this,1).call(this,e,n)}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return S(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return H.FALSE}},{key:"getTypeCode",value:function(){return tt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return tt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[dr]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];At.constructor_.call(this,e,n)}}])}(At),Je=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return H.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||S(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return de.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return tt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!S(t,"isClosed",this,1).call(this))throw new A("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new A("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return tt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Qe.constructor_.call(this,e,n),this.validateConstruction()}}])}(Qe);Je.MINIMUM_VALID_SIZE=4;var pe=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;default:throw new A("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return C.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new A("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new A("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)C.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];C.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof C){var n=arguments[0];C.constructor_.call(this,n.x,n.y)}}else if(arguments.length===2){var s=arguments[0],u=arguments[1];C.constructor_.call(this,s,u,C.NULL_ORDINATE)}}}])}(C);pe.X=0,pe.Y=1,pe.Z=-1,pe.M=-1;var ke=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.M:this._m=n;break;default:throw new A("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return C.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new A("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new A("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)C.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];C.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof C){var n=arguments[0];C.constructor_.call(this,n.x,n.y),this._m=this.getM()}}else if(arguments.length===3){var s=arguments[0],u=arguments[1],c=arguments[2];C.constructor_.call(this,s,u,C.NULL_ORDINATE),this._m=c}}}])}(C);ke.X=0,ke.Y=1,ke.Z=-1,ke.M=2;var _i=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case C.X:this.x=n;break;case C.Y:this.y=n;break;case C.Z:this.z=n;break;case C.M:this._m=n;break;default:throw new A("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case C.X:return this.x;case C.Y:return this.y;case C.Z:return this.getZ();case C.M:return this.getM()}throw new A("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)C.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];C.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof C){var n=arguments[0];C.constructor_.call(this,n),this._m=this.getM()}}else if(arguments.length===4){var s=arguments[0],u=arguments[1],c=arguments[2],g=arguments[3];C.constructor_.call(this,s,u,c),this._m=g}}}])}(C),In=function(){function i(){h(this,i)}return f(i,null,[{key:"measures",value:function(t){return t instanceof pe?0:t instanceof ke||t instanceof _i?1:0}},{key:"dimension",value:function(t){return t instanceof pe?2:t instanceof ke?3:t instanceof _i?4:3}},{key:"create",value:function(){if(arguments.length===1){var t=arguments[0];return i.create(t,0)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e===2?new pe:e===3&&n===0?new C:e===3&&n===1?new ke:e===4&&n===1?new _i:new C}}}])}(),je=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&lt(arguments[0],Kt)){for(var e=arguments[1],n=!1,s=arguments[0].iterator();s.hasNext();)this.add(s.next(),e),n=!0;return n}return S(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=S(t,"clone",this,1).call(this),n=0;n<this.size();n++)e.add(n,this.get(n).clone());return e}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(t.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),n=new Array(e).fill(null),s=0;s<e;s++)n[s]=this.get(e-s-1);return n}}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];return S(t,"add",this,1).call(this,e)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var n=arguments[0],s=arguments[1];return this.add(n,s,!0),!0}if(arguments[0]instanceof C&&typeof arguments[1]=="boolean"){var u=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(u))return null;S(t,"add",this,1).call(this,u)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],g=arguments[1];return this.add(c,g),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var y=arguments[0],x=arguments[1];if(arguments[2])for(var T=0;T<y.length;T++)this.add(y[T],x);else for(var R=y.length-1;R>=0;R--)this.add(y[R],x);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof C){var D=arguments[0],W=arguments[1];if(!arguments[2]){var J=this.size();if(J>0&&(D>0&&this.get(D-1).equals2D(W)||D<J&&this.get(D).equals2D(W)))return null}S(t,"add",this,1).call(this,D,W)}}else if(arguments.length===4){var et=arguments[0],gt=arguments[1],ct=arguments[2],yt=arguments[3],St=1;ct>yt&&(St=-1);for(var Tt=ct;Tt!==yt;Tt+=St)this.add(et[Tt],gt);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.ensureCapacity(n.length),this.add(n,s)}}}}])}(rt);je.coordArrayType=new Array(0).fill(null);var It=function(){function i(){h(this,i)}return f(i,null,[{key:"isRing",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:"ptNotInList",value:function(t,e){for(var n=0;n<t.length;n++){var s=t[n];if(i.indexOf(s,e)<0)return s}return null}},{key:"scroll",value:function(t,e){var n=i.indexOf(e,t);if(n<0)return null;var s=new Array(t.length).fill(null);Gt.arraycopy(t,n,s,0,t.length-n),Gt.arraycopy(t,0,s,t.length-n,n),Gt.arraycopy(s,0,t,0,t.length)}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var s=arguments[0],u=arguments[1],c=arguments[2];if(s===u)return!0;if(s===null||u===null||s.length!==u.length)return!1;for(var g=0;g<s.length;g++)if(c.compare(s[g],u[g])!==0)return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new je,s=0;s<t.length;s++)e.intersects(t[s])&&n.add(t[s],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(t===null||t.length===0)return 0;var e,n=0,s=k(t);try{for(s.s();!(e=s.n()).done;){var u=e.value;n=Math.max(n,In.measures(u))}}catch(c){s.e(c)}finally{s.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return i.hasRepeatedPoints(t)?new je(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),s=0;s<=n;s++){var u=t[s];t[s]=t[e-s],t[e-s]=u}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var s=new Array(e).fill(null);if(e===0)return s;for(var u=0,c=0;c<t.length;c++)t[c]!==null&&(s[u++]=t[c]);return s}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(arguments.length===5)for(var s=arguments[0],u=arguments[1],c=arguments[2],g=arguments[3],y=arguments[4],x=0;x<y;x++)c[g+x]=s[u+x].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var s=t[n],u=e[t.length-n-1];if(s.compareTo(u)!==0)return!1}return!0}},{key:"envelope",value:function(t){for(var e=new _t,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(i.coordArrayType)}},{key:"dimension",value:function(t){if(t===null||t.length===0)return 3;var e,n=0,s=k(t);try{for(s.s();!(e=s.n()).done;){var u=e.value;n=Math.max(n,In.dimension(u))}}catch(c){s.e(c)}finally{s.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,s=t[e].compareTo(t[n]);if(s!==0)return s}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var s=t[n].compareTo(e[n]);if(s!==0)return s;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=Ke.clamp(e,0,t.length);var s=(n=Ke.clamp(n,-1,t.length))-e+1;n<0&&(s=0),e>=t.length&&(s=0),n<e&&(s=0);var u=new Array(s).fill(null);if(s===0)return u;for(var c=0,g=e;g<=n;g++)u[c++]=t[g];return u}}])}(),eu=function(){return f(function i(){h(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;return It.compare(e,n)}},{key:"interfaces_",get:function(){return[ot]}}])}(),nu=function(){return f(function i(){h(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;var s=It.compare(e,n);return It.isEqualReversed(e,n)?0:s}},{key:"OLDcompare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;for(var s=It.increasingDirection(e),u=It.increasingDirection(n),c=s>0?0:e.length-1,g=u>0?0:e.length-1,y=0;y<e.length;y++){var x=e[c].compareTo(n[g]);if(x!==0)return x;c+=s,g+=u}return 0}},{key:"interfaces_",get:function(){return[ot]}}])}();It.ForwardComparator=eu,It.BidirectionalComparator=nu,It.coordArrayType=new Array(0).fill(null);var wn=function(){return f(function i(t){h(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),tn=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():z.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case ft.X:this._coordinates[t].x=n;break;case ft.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():z.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case ft.X:return this._coordinates[t].x;case ft.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}if(arguments.length===2){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return In.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new i(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new wn(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ft,U]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];i.constructor_.call(this,t,It.dimension(t),It.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new C}else if(lt(arguments[0],ft)){var s=arguments[0];if(s===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=s.getDimension(),this._measures=s.getMeasures(),this._coordinates=new Array(s.size()).fill(null);for(var u=0;u<this._coordinates.length;u++)this._coordinates[u]=s.getCoordinateCopy(u)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],g=arguments[1];i.constructor_.call(this,c,g,It.measures(c))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var y=arguments[0],x=arguments[1];this._coordinates=new Array(y).fill(null),this._dimension=x;for(var T=0;T<y;T++)this._coordinates[T]=In.create(x)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var R=arguments[0],D=arguments[1],W=arguments[2];this._dimension=D,this._measures=W,this._coordinates=R===null?new Array(0).fill(null):R}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var J=arguments[0],et=arguments[1],gt=arguments[2];this._coordinates=new Array(J).fill(null),this._dimension=et,this._measures=gt;for(var ct=0;ct<J;ct++)this._coordinates[ct]=this.createCoordinate()}}}}])}(),pi=function(){function i(){h(this,i)}return f(i,[{key:"readResolve",value:function(){return i.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new tn(arguments[0]);if(lt(arguments[0],ft))return new tn(arguments[0])}else{if(arguments.length===2){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new tn(arguments[0],t)}if(arguments.length===3){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new tn(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[vr,U]}}],[{key:"instance",value:function(){return i.instanceObject}}])}();pi.instanceObject=new pi;var ki=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof tt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&S(t,"equalsExact",this,1).call(this,e,n)}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return tt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new rt,n=0;n<this._geometries.length;n++)for(var s=this._geometries[n].getBoundary(),u=0;u<s.getNumGeometries();u++)e.add(s.getGeometryN(u));var c=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(c))}},{key:"getGeometryType",value:function(){return tt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[pr]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];At.constructor_.call(this,e,n)}}])}(At),xr=function(){return f(function i(){h(this,i)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),iu=function(i){function t(){var e;return h(this,t),(e=l(this,t)).map=new Map,e}return d(t,i),f(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,n){return this.map.set(e,n),n}},{key:"values",value:function(){for(var e=new rt,n=this.map.values(),s=n.next();!s.done;)e.add(s.value),s=n.next();return e}},{key:"entrySet",value:function(){var e=new fi;return this.map.entries().forEach(function(n){return e.add(n)}),e}},{key:"size",value:function(){return this.map.size()}}])}(xr),Vt=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),s=e.getMaximumSignificantDigits();return pn.compare(n,s)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===i.FLOATING||this._modelType===i.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===i.FLOATING?t="Floating":this._modelType===i.FLOATING_SINGLE?t="Floating-Single":this._modelType===i.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var t=arguments[0];return z.isNaN(t)||this._modelType===i.FLOATING_SINGLE?t:this._modelType===i.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof C){var e=arguments[0];if(this._modelType===i.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===i.FLOATING?t=16:this._modelType===i.FLOATING_SINGLE?t=6:this._modelType===i.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[U,q]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=i.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Me){var t=arguments[0];this._modelType=t,t===i.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this._modelType=i.FIXED,this.setScale(e)}else if(arguments[0]instanceof i){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),Me=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"readResolve",value:function(){return i.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,i.nameToTypeMap.put(t,this)}}])}();Me.nameToTypeMap=new iu,Vt.Type=Me,Vt.FIXED=new Me("FIXED"),Vt.FLOATING=new Me("FLOATING"),Vt.FLOATING_SINGLE=new Me("FLOATING SINGLE"),Vt.maximumPreciseValue=9007199254740992;var xi=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof tt){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&S(t,"equalsExact",this,1).call(this,e,n)}return S(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?H.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return tt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new fe}},{key:"getGeometryType",value:function(){return tt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[yr]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];At.constructor_.call(this,e,n)}}])}(At),Oe=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new A("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new C(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new C(t.getMinX(),t.getMinY()),new C(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new C(t.getMinX(),t.getMinY()),new C(t.getMinX(),t.getMaxY()),new C(t.getMaxX(),t.getMaxY()),new C(t.getMaxX(),t.getMinY()),new C(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(lt(arguments[0],ft))return new Qe(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new xi(null,this):arguments.length===1?new xi(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,n=!1,s=!1,u=t.iterator();u.hasNext();){var c=u.next(),g=c.getTypeCode();e===null&&(e=g),g!==e&&(n=!0),c instanceof At&&(s=!0)}if(e===null)return this.createGeometryCollection();if(n||s)return this.createGeometryCollection(i.toGeometryArray(t));var y=t.iterator().next();if(t.size()>1){if(y instanceof Nn)return this.createMultiPolygon(i.toPolygonArray(t));if(y instanceof Qe)return this.createMultiLineString(i.toLineStringArray(t));if(y instanceof yi)return this.createMultiPoint(i.toPointArray(t));j.shouldNeverReachHere("Unhandled geometry type: "+y.getGeometryType())}return y}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(lt(arguments[0],ft))return new yi(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(lt(arguments[0],ft)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Je){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2)return new Nn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new At(null,this):arguments.length===1?new At(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(lt(arguments[0],ft))return new Je(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new ki(null,this):arguments.length===1?new ki(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new di(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new di(arguments[0],this);if(lt(arguments[0],ft)){var t=arguments[0];if(t===null)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var s=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());de.copy(t,n,s,0,1),e[n]=this.createPoint(s)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)i.constructor_.call(this,new Vt,0);else if(arguments.length===1){if(lt(arguments[0],vr)){var t=arguments[0];i.constructor_.call(this,new Vt,0,t)}else if(arguments[0]instanceof Vt){var e=arguments[0];i.constructor_.call(this,e,0,i.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];i.constructor_.call(this,n,s,i.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var u=arguments[0],c=arguments[1],g=arguments[2];this._precisionModel=u,this._coordinateSequenceFactory=g,this._SRID=c}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return pi.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),Ei="XY",ru="XYZ",su="XYM",au="XYZM",Er={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Nr="EMPTY",Sn=1,ae=2,ge=3,Ir=4,be=5,uu=6;for(var ou in Er)Er[ou].toUpperCase();var lu=function(){return f(function i(t){h(this,i),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"}},{key:"isNumeric_",value:function(i,t){return i>="0"&&i<="9"||i=="."&&!(t!==void 0&&t)}},{key:"isWhiteSpace_",value:function(i){return i==" "||i=="	"||i=="\r"||i==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var i,t=this.nextChar_(),e=this.index_,n=t;if(t=="(")i=ae;else if(t==",")i=be;else if(t==")")i=ge;else if(this.isNumeric_(t)||t=="-")i=Ir,n=this.readNumber_();else if(this.isAlpha_(t))i=Sn,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t!=="")throw new Error("Unexpected character: "+t);i=uu}return{position:e,value:n,type:i}}},{key:"readNumber_",value:function(){var i,t=this.index_,e=!1,n=!1;do i=="."?e=!0:i!="e"&&i!="E"||(n=!0),i=this.nextChar_();while(this.isNumeric_(i,e)||!n&&(i=="e"||i=="E")||n&&(i=="-"||i=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var i,t=this.index_;do i=this.nextChar_();while(this.isAlpha_(i));return this.wkt.substring(t,this.index_--).toUpperCase()}}])}(),hu=function(){return f(function i(t,e){h(this,i),this.lexer_=t,this.token_,this.layout_=Ei,this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(i){return this.token_.type==i}},{key:"match",value:function(i){var t=this.isTokenType(i);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var i=Ei,t=this.token_;if(this.isTokenType(Sn)){var e=t.value;e==="Z"?i=ru:e==="M"?i=su:e==="ZM"&&(i=au),i!==Ei&&this.consume_()}return i}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(ae)){var i=[];do i.push(this.parseGeometry_());while(this.match(be));if(this.match(ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(ae)){var i=this.parsePoint_();if(this.match(ge))return i}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(ae)){var i=this.parsePointList_();if(this.match(ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(ae)){var i=this.parseLineStringTextList_();if(this.match(ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var i;if(this.match(ae)){if(i=this.token_.type==ae?this.parsePointTextList_():this.parsePointList_(),this.match(ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(ae)){var i=this.parseLineStringTextList_();if(this.match(ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(ae)){var i=this.parsePolygonTextList_();if(this.match(ge))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var i=[],t=this.layout_.length,e=0;e<t;++e){var n=this.token_;if(!this.match(Ir))break;i.push(n.value)}if(i.length==t)return i;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var i=[this.parsePoint_()];this.match(be);)i.push(this.parsePoint_());return i}},{key:"parsePointTextList_",value:function(){for(var i=[this.parsePointText_()];this.match(be);)i.push(this.parsePointText_());return i}},{key:"parseLineStringTextList_",value:function(){for(var i=[this.parseLineStringText_()];this.match(be);)i.push(this.parseLineStringText_());return i}},{key:"parsePolygonTextList_",value:function(){for(var i=[this.parsePolygonText_()];this.match(be);)i.push(this.parsePolygonText_());return i}},{key:"isEmptyGeometry_",value:function(){var i=this.isTokenType(Sn)&&this.token_.value==Nr;return i&&this.consume_(),i}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var i=this.factory,t=function(et){return m(C,O(et))},e=function(et){var gt=et.map(function(ct){return i.createLinearRing(ct.map(t))});return gt.length>1?i.createPolygon(gt[0],gt.slice(1)):i.createPolygon(gt[0])},n=this.token_;if(this.match(Sn)){var s=n.value;if(this.layout_=this.parseGeometryLayout_(),s=="GEOMETRYCOLLECTION"){var u=this.parseGeometryCollectionText_();return i.createGeometryCollection(u)}switch(s){case"POINT":var c=this.parsePointText_();return c?i.createPoint(m(C,O(c))):i.createPoint();case"LINESTRING":var g=this.parseLineStringText_().map(t);return i.createLineString(g);case"LINEARRING":var y=this.parseLineStringText_().map(t);return i.createLinearRing(y);case"POLYGON":var x=this.parsePolygonText_();return x&&x.length!==0?e(x):i.createPolygon();case"MULTIPOINT":var T=this.parseMultiPointText_();if(!T||T.length===0)return i.createMultiPoint();var R=T.map(t).map(function(et){return i.createPoint(et)});return i.createMultiPoint(R);case"MULTILINESTRING":var D=this.parseMultiLineStringText_().map(function(et){return i.createLineString(et.map(t))});return i.createMultiLineString(D);case"MULTIPOLYGON":var W=this.parseMultiPolygonText_();if(!W||W.length===0)return i.createMultiPolygon();var J=W.map(e);return i.createMultiPolygon(J);default:throw new Error("Invalid geometry type: "+s)}}throw new Error(this.formatErrorMessage_())}}])}();function wr(i){if(i.isEmpty())return"";var t=i.getCoordinate(),e=[t.x,t.y];return t.z===void 0||Number.isNaN(t.z)||e.push(t.z),t.m===void 0||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function en(i){for(var t=i.getCoordinates().map(function(u){var c=[u.x,u.y];return u.z===void 0||Number.isNaN(u.z)||c.push(u.z),u.m===void 0||Number.isNaN(u.m)||c.push(u.m),c}),e=[],n=0,s=t.length;n<s;++n)e.push(t[n].join(" "));return e.join(", ")}function Sr(i){var t=[];t.push("("+en(i.getExteriorRing())+")");for(var e=0,n=i.getNumInteriorRing();e<n;++e)t.push("("+en(i.getInteriorRingN(e))+")");return t.join(", ")}var cu={Point:wr,LineString:en,LinearRing:en,Polygon:Sr,MultiPoint:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+wr(i.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+en(i.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+Sr(i.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push(Tr(i.getGeometryN(e)));return t.join(", ")}};function Tr(i){var t=i.getGeometryType(),e=cu[t];t=t.toUpperCase();var n=function(s){var u="";if(s.isEmpty())return u;var c=s.getCoordinate();return c.z===void 0||Number.isNaN(c.z)||(u+="Z"),c.m===void 0||Number.isNaN(c.m)||(u+="M"),u}(i);return n.length>0&&(t+=" "+n),i.isEmpty()?t+" "+Nr:t+" ("+e(i)+")"}var fu=function(){return f(function i(t){h(this,i),this.geometryFactory=t||new Oe,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(i){var t=new lu(i);return new hu(t,this.geometryFactory).parse()}},{key:"write",value:function(i){return Tr(i)}}])}(),Ni=function(){return f(function i(t){h(this,i),this.parser=new fu(t)},[{key:"write",value:function(i){return this.parser.write(i)}}],[{key:"toLineString",value:function(i,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+i.x+" "+i.y+", "+t.x+" "+t.y+" )"}}])}(),pt=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new wn;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,s){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=s,this._result=this.computeIntersect(t,e,n,s)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==i.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return i.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===i.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Ni.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ni.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new C,this._intPt[1]=new C,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var s=Math.abs(n.x-e.x),u=Math.abs(n.y-e.y),c=-1;if(t.equals(e))c=0;else if(t.equals(n))c=s>u?s:u;else{var g=Math.abs(t.x-e.x),y=Math.abs(t.y-e.y);(c=s>u?g:y)!==0||t.equals(e)||(c=Math.max(g,y))}return j.isTrue(!(c===0&&!t.equals(e)),"Bad distance calculation"),c}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var s=t.x-e.x,u=t.y-e.y,c=Math.sqrt(s*s+u*u);return j.isTrue(!(c===0&&!t.equals(e)),"Invalid distance calculation"),c}}])}();pt.DONT_INTERSECT=0,pt.DO_INTERSECT=1,pt.COLLINEAR=2,pt.NO_INTERSECTION=0,pt.POINT_INTERSECTION=1,pt.COLLINEAR_INTERSECTION=2;var xe=function(i){function t(){return h(this,t),l(this,t)}return d(t,i),f(t,[{key:"isInSegmentEnvelopes",value:function(e){var n=new _t(this._inputLines[0][0],this._inputLines[0][1]),s=new _t(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(e)&&s.contains(e)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return S(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1],s=arguments[2];if(this._isProper=!1,_t.intersects(n,s,e)&&ut.index(n,s,e)===0&&ut.index(s,n,e)===0)return this._isProper=!0,(e.equals(n)||e.equals(s))&&(this._isProper=!1),this._result=pt.POINT_INTERSECTION,null;this._result=pt.NO_INTERSECTION}},{key:"intersection",value:function(e,n,s,u){var c=this.intersectionSafe(e,n,s,u);return this.isInSegmentEnvelopes(c)||(c=new C(t.nearestEndpoint(e,n,s,u))),this._precisionModel!==null&&this._precisionModel.makePrecise(c),c}},{key:"checkDD",value:function(e,n,s,u,c){var g=mi.intersection(e,n,s,u),y=this.isInSegmentEnvelopes(g);Gt.out.println("DD in env = "+y+"  --------------------- "+g),c.distance(g)>1e-4&&Gt.out.println("Distance = "+c.distance(g))}},{key:"intersectionSafe",value:function(e,n,s,u){var c=vi.intersection(e,n,s,u);return c===null&&(c=t.nearestEndpoint(e,n,s,u)),c}},{key:"computeCollinearIntersection",value:function(e,n,s,u){var c=_t.intersects(e,n,s),g=_t.intersects(e,n,u),y=_t.intersects(s,u,e),x=_t.intersects(s,u,n);return c&&g?(this._intPt[0]=s,this._intPt[1]=u,pt.COLLINEAR_INTERSECTION):y&&x?(this._intPt[0]=e,this._intPt[1]=n,pt.COLLINEAR_INTERSECTION):c&&y?(this._intPt[0]=s,this._intPt[1]=e,!s.equals(e)||g||x?pt.COLLINEAR_INTERSECTION:pt.POINT_INTERSECTION):c&&x?(this._intPt[0]=s,this._intPt[1]=n,!s.equals(n)||g||y?pt.COLLINEAR_INTERSECTION:pt.POINT_INTERSECTION):g&&y?(this._intPt[0]=u,this._intPt[1]=e,!u.equals(e)||c||x?pt.COLLINEAR_INTERSECTION:pt.POINT_INTERSECTION):g&&x?(this._intPt[0]=u,this._intPt[1]=n,!u.equals(n)||c||y?pt.COLLINEAR_INTERSECTION:pt.POINT_INTERSECTION):pt.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,n,s,u){if(this._isProper=!1,!_t.intersects(e,n,s,u))return pt.NO_INTERSECTION;var c=ut.index(e,n,s),g=ut.index(e,n,u);if(c>0&&g>0||c<0&&g<0)return pt.NO_INTERSECTION;var y=ut.index(s,u,e),x=ut.index(s,u,n);return y>0&&x>0||y<0&&x<0?pt.NO_INTERSECTION:c===0&&g===0&&y===0&&x===0?this.computeCollinearIntersection(e,n,s,u):(c===0||g===0||y===0||x===0?(this._isProper=!1,e.equals2D(s)||e.equals2D(u)?this._intPt[0]=e:n.equals2D(s)||n.equals2D(u)?this._intPt[0]=n:c===0?this._intPt[0]=new C(s):g===0?this._intPt[0]=new C(u):y===0?this._intPt[0]=new C(e):x===0&&(this._intPt[0]=new C(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,s,u)),pt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,n,s,u){var c=e,g=Qt.pointToSegment(e,s,u),y=Qt.pointToSegment(n,s,u);return y<g&&(g=y,c=n),(y=Qt.pointToSegment(s,e,n))<g&&(g=y,c=s),(y=Qt.pointToSegment(u,e,n))<g&&(g=y,c=u),c}}])}(pt),gu=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,s=e.x;return n>s&&(n=e.x,s=t.x),this._p.x>=n&&this._p.x<=s&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var u=ut.index(t,e,this._p);if(u===ut.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(u=-u),u===ut.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==N.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?N.BOUNDARY:this._crossingCount%2==1?N.INTERIOR:N.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof C&&lt(arguments[1],ft)){for(var t=arguments[1],e=new i(arguments[0]),n=new C,s=new C,u=1;u<t.size();u++)if(t.getCoordinate(u,n),t.getCoordinate(u-1,s),e.countSegment(n,s),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var c=arguments[1],g=new i(arguments[0]),y=1;y<c.length;y++){var x=c[y],T=c[y-1];if(g.countSegment(x,T),g.isOnSegment())return g.getLocation()}return g.getLocation()}}}])}(),Ii=function(){function i(){h(this,i)}return f(i,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof C&&lt(arguments[1],ft)){for(var t=arguments[0],e=arguments[1],n=new xe,s=new C,u=new C,c=e.size(),g=1;g<c;g++)if(e.getCoordinate(g-1,s),e.getCoordinate(g,u),n.computeIntersection(t,s,u),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var y=arguments[0],x=arguments[1],T=new xe,R=1;R<x.length;R++){var D=x[R-1],W=x[R];if(T.computeIntersection(y,D,W),T.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return gu.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return i.locateInRing(t,e)!==N.EXTERIOR}}])}(),qt=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==N.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===N.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[B.ON]=this.location[B.ON],e[B.LEFT]=N.NONE,e[B.RIGHT]=N.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===N.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[B.LEFT];this.location[B.LEFT]=this.location[B.RIGHT],this.location[B.RIGHT]=t}},{key:"toString",value:function(){var t=new We;return this.location.length>1&&t.append(N.toLocationSymbol(this.location[B.LEFT])),t.append(N.toLocationSymbol(this.location[B.ON])),this.location.length>1&&t.append(N.toLocationSymbol(this.location[B.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[B.ON]=t,this.location[B.LEFT]=e,this.location[B.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:N.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===N.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(B.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(N.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[B.ON]=e}else if(arguments[0]instanceof i){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var s=0;s<this.location.length;s++)this.location[s]=n.location[s]}}else if(arguments.length===3){var u=arguments[0],c=arguments[1],g=arguments[2];this.init(3),this.location[B.ON]=u,this.location[B.LEFT]=c,this.location[B.RIGHT]=g}}}])}(),zt=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new qt(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(B.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new We;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(B.ON,e)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],u=arguments[2];this.elt[n].setLocation(s,u)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new qt(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new qt(t),this.elt[1]=new qt(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.elt[0]=new qt(e.elt[0]),this.elt[1]=new qt(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.elt[0]=new qt(N.NONE),this.elt[1]=new qt(N.NONE),this.elt[n].setLocation(s)}else if(arguments.length===3){var u=arguments[0],c=arguments[1],g=arguments[2];this.elt[0]=new qt(u,c,g),this.elt[1]=new qt(u,c,g)}else if(arguments.length===4){var y=arguments[0],x=arguments[1],T=arguments[2],R=arguments[3];this.elt[0]=new qt(N.NONE,N.NONE,N.NONE),this.elt[1]=new qt(N.NONE,N.NONE,N.NONE),this.elt[y].setLocations(x,T,R)}}},{key:"toLineLabel",value:function(t){for(var e=new i(N.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}}])}(),Tn=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var i=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)i[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(i),this._isHole=ut.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(i){this._startDe=i;var t=i,e=!0;do{if(t===null)throw new se("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new se("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var n=t.getLabel();j.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(i){return this._pts.get(i)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var i=this._startDe;do{var t=i.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),i=this.getNext(i)}while(i!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(i,t,e){var n=i.getCoordinates();if(t){var s=1;e&&(s=0);for(var u=s;u<n.length;u++)this._pts.add(n[u])}else{var c=n.length-2;e&&(c=n.length-1);for(var g=c;g>=0;g--)this._pts.add(n[g])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var i=this._startDe;do i.getEdge().setInResult(!0),i=i.getNext();while(i!==this._startDe)}},{key:"containsPoint",value:function(i){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(i)||!Ii.isInRing(i,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(i))return!1;return!0}},{key:"addHole",value:function(i){this._holes.add(i)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var i=arguments[0];this.mergeLabel(i,0),this.mergeLabel(i,1)}else if(arguments.length===2){var t=arguments[1],e=arguments[0].getLocation(t,B.RIGHT);if(e===N.NONE)return null;if(this._label.getLocation(t)===N.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(i){this._shell=i,i!==null&&i.addHole(this)}},{key:"toPolygon",value:function(i){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return i.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new rt,this._pts=new rt,this._label=new zt(N.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new rt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var i=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(i),this.computeRing()}}}}])}(),mu=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"setEdgeRing",value:function(e,n){e.setMinEdgeRing(n)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Tn.constructor_.call(this,e,n)}}])}(Tn),vu=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"buildMinimalRings",value:function(){var e=new rt,n=this._startDe;do{if(n.getMinEdgeRing()===null){var s=new mu(n,this._geometryFactory);e.add(s)}n=n.getNext()}while(n!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,n){e.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext();while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Tn.constructor_.call(this,e,n)}}])}(Tn),Cr=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(i){this._isVisited=i}},{key:"setInResult",value:function(i){this._isInResult=i}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(i){this._label=i}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(i){this._isCovered=i,this._isCoveredSet=!0}},{key:"updateIM",value:function(i){j.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(i)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._label=i}}}}])}(),Cn=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,n){var s=N.NONE;if(s=this._label.getLocation(n),!e.isNull(n)){var u=e.getLocation(n);s!==N.BOUNDARY&&(s=u)}return s}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return S(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];this._label===null?this._label=new zt(e,n):this._label.setLocation(e,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof zt)for(var n=arguments[0],s=0;s<2;s++){var u=this.computeMergedLocation(n,s);this._label.getLocation(s)===N.NONE&&this._label.setLocation(s,u)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(this._label===null)return null;var n=N.NONE;this._label!==null&&(n=this._label.getLocation(e));var s=null;switch(n){case N.BOUNDARY:s=N.INTERIOR;break;case N.INTERIOR:default:s=N.BOUNDARY}this._label.setLocation(e,s)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new zt(0,N.NONE)}}])}(Cr),yu=function(i){function t(){return h(this,t),l(this,t,arguments)}return d(t,i),f(t)}(xr);function Rr(i){return i==null?0:i.color}function vt(i){return i==null?null:i.parent}function Jt(i,t){i!==null&&(i.color=t)}function wi(i){return i==null?null:i.left}function Lr(i){return i==null?null:i.right}var nn=function(i){function t(){var e;return h(this,t),(e=l(this,t)).root_=null,e.size_=0,e}return d(t,i),f(t,[{key:"get",value:function(e){for(var n=this.root_;n!==null;){var s=e.compareTo(n.key);if(s<0)n=n.left;else{if(!(s>0))return n.value;n=n.right}}return null}},{key:"put",value:function(e,n){if(this.root_===null)return this.root_={key:e,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var s,u,c=this.root_;do if(s=c,(u=e.compareTo(c.key))<0)c=c.left;else{if(!(u>0)){var g=c.value;return c.value=n,g}c=c.right}while(c!==null);var y={key:e,left:null,right:null,value:n,parent:s,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return u<0?s.left=y:s.right=y,this.fixAfterInsertion(y),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var n;for(e.color=1;e!=null&&e!==this.root_&&e.parent.color===1;)vt(e)===wi(vt(vt(e)))?Rr(n=Lr(vt(vt(e))))===1?(Jt(vt(e),0),Jt(n,0),Jt(vt(vt(e)),1),e=vt(vt(e))):(e===Lr(vt(e))&&(e=vt(e),this.rotateLeft(e)),Jt(vt(e),0),Jt(vt(vt(e)),1),this.rotateRight(vt(vt(e)))):Rr(n=wi(vt(vt(e))))===1?(Jt(vt(e),0),Jt(n,0),Jt(vt(vt(e)),1),e=vt(vt(e))):(e===wi(vt(e))&&(e=vt(e),this.rotateRight(e)),Jt(vt(e),0),Jt(vt(vt(e)),1),this.rotateLeft(vt(vt(e))));this.root_.color=0}},{key:"values",value:function(){var e=new rt,n=this.getFirstEntry();if(n!==null)for(e.add(n.value);(n=t.successor(n))!==null;)e.add(n.value);return e}},{key:"entrySet",value:function(){var e=new fi,n=this.getFirstEntry();if(n!==null)for(e.add(n);(n=t.successor(n))!==null;)e.add(n);return e}},{key:"rotateLeft",value:function(e){if(e!=null){var n=e.right;e.right=n.left,n.left!=null&&(n.left.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.left===e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}}},{key:"rotateRight",value:function(e){if(e!=null){var n=e.left;e.left=n.right,n.right!=null&&(n.right.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.right===e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var n=this.root_;n!==null;){var s=e.compareTo(n.key);if(s<0)n=n.left;else{if(!(s>0))return!0;n=n.right}}return!1}}],[{key:"successor",value:function(e){var n;if(e===null)return null;if(e.right!==null){for(n=e.right;n.left!==null;)n=n.left;return n}n=e.parent;for(var s=e;n!==null&&s===n.right;)s=n,n=n.parent;return n}}])}(yu),Mr=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"find",value:function(i){return this.nodeMap.get(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof C){var i=arguments[0],t=this.nodeMap.get(i);return t===null&&(t=this.nodeFact.createNode(i),this.nodeMap.put(i,t)),t}if(arguments[0]instanceof Cn){var e=arguments[0],n=this.nodeMap.get(e.getCoordinate());return n===null?(this.nodeMap.put(e.getCoordinate(),e),e):(n.mergeLabel(e),n)}}},{key:"print",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(i){for(var t=new rt,e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(i)===N.BOUNDARY&&t.add(n)}return t}},{key:"add",value:function(i){var t=i.getCoordinate();this.addNode(t).add(i)}}],[{key:"constructor_",value:function(){this.nodeMap=new nn,this.nodeFact=null;var i=arguments[0];this.nodeFact=i}}])}(),Rt=function(){function i(){h(this,i)}return f(i,null,[{key:"isNorthern",value:function(t){return t===i.NE||t===i.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4===2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4===2)return-1;var n=t<e?t:e;return n===0&&(t>e?t:e)===3?3:n}},{key:"isInHalfPlane",value:function(t,e){return e===i.SE?t===i.SE||t===i.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new A("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?i.NE:i.SE:e>=0?i.NW:i.SW}if(arguments[0]instanceof C&&arguments[1]instanceof C){var n=arguments[0],s=arguments[1];if(s.x===n.x&&s.y===n.y)throw new A("Cannot compute the quadrant for two identical points "+n);return s.x>=n.x?s.y>=n.y?i.NE:i.SE:s.y>=n.y?i.NW:i.SW}}}])}();Rt.NE=0,Rt.NW=1,Rt.SW=2,Rt.SE=3;var Or=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ut.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),s=n.lastIndexOf("."),u=n.substring(s+1);t.print("  "+u+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Rt.quadrant(this._dx,this._dy),j.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],s=arguments[2];i.constructor_.call(this,e,n,s,null)}else if(arguments.length===4){var u=arguments[0],c=arguments[1],g=arguments[2],y=arguments[3];i.constructor_.call(this,u),this.init(c,g),this._label=y}}}])}(),Si=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new zt(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,n){if(this._depth[e]!==-999&&this._depth[e]!==n)throw new se("assigned depths do not match",this.getCoordinate());this._depth[e]=n}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,B.LEFT)===N.INTERIOR&&this._label.getLocation(n,B.RIGHT)===N.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){S(t,"print",this,1).call(this,e),e.print(" "+this._depth[B.LEFT]+"/"+this._depth[B.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),n=!this._label.isArea(0)||this._label.allPositionsEqual(0,N.EXTERIOR),s=!this._label.isArea(1)||this._label.allPositionsEqual(1,N.EXTERIOR);return e&&n&&s}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,n){var s=this.getEdge().getDepthDelta();this._isForward||(s=-s);var u=1;e===B.LEFT&&(u=-1);var c=B.opposite(e),g=n+s*u;this.setDepth(e,n),this.setDepth(c,g)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],n=arguments[1];if(Or.constructor_.call(this,e),this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var s=e.getNumPoints()-1;this.init(e.getCoordinate(s),e.getCoordinate(s-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,n){return e===N.EXTERIOR&&n===N.INTERIOR?1:e===N.INTERIOR&&n===N.EXTERIOR?-1:0}}])}(Or),br=function(){return f(function i(){h(this,i)},[{key:"createNode",value:function(i){return new Cn(i,null)}}])}(),Ar=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(i){i.println("Edges:");for(var t=0;t<this._edges.size();t++){i.println("edge "+t+":");var e=this._edges.get(t);e.print(i),e.eiList.print(i)}}},{key:"find",value:function(i){return this._nodes.find(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof Cn){var i=arguments[0];return this._nodes.addNode(i)}if(arguments[0]instanceof C){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(i){Gt.out.println(i)}},{key:"isBoundaryNode",value:function(i,t){var e=this._nodes.find(t);if(e===null)return!1;var n=e.getLabel();return n!==null&&n.getLocation(i)===N.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(i,t,e,n){return!!i.equals(e)&&ut.index(i,t,n)===ut.COLLINEAR&&Rt.quadrant(i,t)===Rt.quadrant(e,n)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(i){Gt.out.print(i)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),s=n.getCoordinates();if(this.matchInSameDirection(i,t,s[0],s[1])||this.matchInSameDirection(i,t,s[s.length-1],s[s.length-2]))return n}return null}},{key:"insertEdge",value:function(i){this._edges.add(i)}},{key:"findEdgeEnd",value:function(i){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===i)return e}return null}},{key:"addEdges",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var n=new Si(e,!0),s=new Si(e,!1);n.setSym(s),s.setSym(n),this.add(n),this.add(s)}}},{key:"add",value:function(i){this._nodes.add(i),this._edgeEndList.add(i)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),s=n.getCoordinates();if(i.equals(s[0])&&t.equals(s[1]))return n}return null}}],[{key:"constructor_",value:function(){if(this._edges=new rt,this._nodes=null,this._edgeEndList=new rt,arguments.length===0)this._nodes=new Mr(new br);else if(arguments.length===1){var i=arguments[0];this._nodes=new Mr(i)}}},{key:"linkResultDirectedEdges",value:function(i){for(var t=i.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}])}(),du=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var s=t.iterator();s.hasNext();){var u=s.next();u.isHole()?n.add(u):e.add(u)}}},{key:"computePolygons",value:function(t){for(var e=new rt,n=t.iterator();n.hasNext();){var s=n.next().toPolygon(this._geometryFactory);e.add(s)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next();if(s.getShell()===null){var u=i.findEdgeRingContaining(s,t);if(u===null)throw new se("unable to assign hole to a shell",s.getCoordinate(0));s.setShell(u)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var s=new rt,u=t.iterator();u.hasNext();){var c=u.next();if(c.getMaxNodeDegree()>2){c.linkDirectedEdgesForMinimalEdgeRings();var g=c.buildMinimalRings(),y=this.findShell(g);y!==null?(this.placePolygonHoles(y,g),e.add(y)):n.addAll(g)}else s.add(c)}return s}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new rt,n=t.iterator();n.hasNext();){var s=n.next();if(s.isInResult()&&s.getLabel().isArea()&&s.getEdgeRing()===null){var u=new vu(s,this._geometryFactory);e.add(u),u.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next();s.isHole()&&s.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,s=t.iterator();s.hasNext();){var u=s.next();u.isHole()||(n=u,e++)}return j.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Ar.linkResultDirectedEdges(n);var s=this.buildMaximalEdgeRings(e),u=new rt,c=this.buildMinimalEdgeRings(s,this._shellList,u);this.sortShellsAndHoles(c,this._shellList,u),this.placeFreeHoles(this._shellList,u)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new rt;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),s=n.getEnvelopeInternal(),u=n.getCoordinateN(0),c=null,g=null,y=e.iterator();y.hasNext();){var x=y.next(),T=x.getLinearRing(),R=T.getEnvelopeInternal();if(!R.equals(s)&&R.contains(s)){u=It.ptNotInList(n.getCoordinates(),T.getCoordinates());var D=!1;Ii.isInRing(u,T.getCoordinates())&&(D=!0),D&&(c===null||g.contains(R))&&(g=(c=x).getLinearRing().getEnvelopeInternal())}}return c}}])}(),Pr=function(){return f(function i(){h(this,i)},[{key:"getBounds",value:function(){}}])}(),ue=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Pr,U]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var i=arguments[0],t=arguments[1];this._bounds=i,this._item=t}}])}(),Rn=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var i=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),i}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(i){for(var t=null,e=this._items.get(i);2*i<=this._size&&((t=2*i)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);i=t)this._items.set(i,this._items.get(t));this._items.set(i,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(i){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,i);i.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,i)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new rt,this._items.add(null)}}])}(),_u=function(){return f(function i(){h(this,i)},[{key:"insert",value:function(i,t){}},{key:"remove",value:function(i,t){}},{key:"query",value:function(){}}])}(),Yt=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(i){j.isTrue(this._bounds===null),this._childBoundables.add(i)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Pr,U]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new rt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._level=i}}}}])}(),Ae={reverseOrder:function(){return{compare:function(i,t){return t.compareTo(i)}}},min:function(i){return Ae.sort(i),i.get(0)},sort:function(i,t){var e=i.toArray();t?_e.sort(e,t):_e.sort(e);for(var n=i.iterator(),s=0,u=e.length;s<u;s++)n.next(),n.set(e[s])},singletonList:function(i){var t=new rt;return t.add(i),t}},pu=function(){function i(){h(this,i)}return f(i,null,[{key:"maxDistance",value:function(t,e,n,s,u,c,g,y){var x=i.distance(t,e,u,c);return x=Math.max(x,i.distance(t,e,g,y)),x=Math.max(x,i.distance(n,s,u,c)),x=Math.max(x,i.distance(n,s,g,y))}},{key:"distance",value:function(t,e,n,s){var u=n-t,c=s-e;return Math.sqrt(u*u+c*c)}},{key:"maximumDistance",value:function(t,e){var n=Math.min(t.getMinX(),e.getMinX()),s=Math.min(t.getMinY(),e.getMinY()),u=Math.max(t.getMaxX(),e.getMaxX()),c=Math.max(t.getMaxY(),e.getMaxY());return i.distance(n,s,u,c)}},{key:"minMaxDistance",value:function(t,e){var n=t.getMinX(),s=t.getMinY(),u=t.getMaxX(),c=t.getMaxY(),g=e.getMinX(),y=e.getMinY(),x=e.getMaxX(),T=e.getMaxY(),R=i.maxDistance(n,s,n,c,g,y,g,T);return R=Math.min(R,i.maxDistance(n,s,n,c,g,y,x,y)),R=Math.min(R,i.maxDistance(n,s,n,c,x,T,g,T)),R=Math.min(R,i.maxDistance(n,s,n,c,x,T,x,y)),R=Math.min(R,i.maxDistance(n,s,u,s,g,y,g,T)),R=Math.min(R,i.maxDistance(n,s,u,s,g,y,x,y)),R=Math.min(R,i.maxDistance(n,s,u,s,x,T,g,T)),R=Math.min(R,i.maxDistance(n,s,u,s,x,T,x,y)),R=Math.min(R,i.maxDistance(u,c,n,c,g,y,g,T)),R=Math.min(R,i.maxDistance(u,c,n,c,g,y,x,y)),R=Math.min(R,i.maxDistance(u,c,n,c,x,T,g,T)),R=Math.min(R,i.maxDistance(u,c,n,c,x,T,x,y)),R=Math.min(R,i.maxDistance(u,c,u,s,g,y,g,T)),R=Math.min(R,i.maxDistance(u,c,u,s,g,y,x,y)),R=Math.min(R,i.maxDistance(u,c,u,s,x,T,g,T)),R=Math.min(R,i.maxDistance(u,c,u,s,x,T,x,y))}}])}(),Pe=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"maximumDistance",value:function(){return pu.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var n=i.isComposite(this._boundable1),s=i.isComposite(this._boundable2);if(n&&s)return i.area(this._boundable1)>i.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(s)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new A("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(i.isComposite(this._boundable1)||i.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,e,n,s,u){for(var c=t.getChildBoundables().iterator();c.hasNext();){var g=c.next(),y=null;(y=n?new i(e,g,this._itemDistance):new i(g,e,this._itemDistance)).getDistance()<u&&s.add(y)}}},{key:"getBoundable",value:function(t){return t===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Yt}}])}(),Dr=function(){return f(function i(){h(this,i)},[{key:"visitItem",value:function(i){}}])}(),De=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"queryInternal",value:function(){if(lt(arguments[2],Dr)&&arguments[0]instanceof Object&&arguments[1]instanceof Yt)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),s=0;s<n.size();s++){var u=n.get(s);this.getIntersectsOp().intersects(u.getBounds(),t)&&(u instanceof Yt?this.queryInternal(t,u,e):u instanceof ue?e.visitItem(u.getItem()):j.shouldNeverReachHere())}else if(lt(arguments[2],ye)&&arguments[0]instanceof Object&&arguments[1]instanceof Yt)for(var c=arguments[0],g=arguments[2],y=arguments[1].getChildBoundables(),x=0;x<y.size();x++){var T=y.get(x);this.getIntersectsOp().intersects(T.getBounds(),c)&&(T instanceof Yt?this.queryInternal(c,T,g):T instanceof ue?g.add(T.getItem()):j.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Yt?t+=this.size(n):n instanceof ue&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,s=t.getChildBoundables().iterator();s.hasNext();){var u=s.next();u instanceof ue&&u.getItem()===e&&(n=u)}return n!==null&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new rt:t}if(arguments.length===1){for(var e=arguments[0],n=new rt,s=e.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(u instanceof Yt){var c=this.itemsTree(u);c!==null&&n.add(c)}else u instanceof ue?n.add(u.getItem()):j.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){j.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ue(t,e))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var t=arguments[0],e=new rt;return this.boundablesAtLevel(t,this._root,e),e}if(arguments.length===3){var n=arguments[0],s=arguments[1],u=arguments[2];if(j.isTrue(n>-2),s.getLevel()===n)return u.add(s),null;for(var c=s.getChildBoundables().iterator();c.hasNext();){var g=c.next();g instanceof Yt?this.boundablesAtLevel(n,g,u):(j.isTrue(g instanceof ue),n===-1&&u.add(g))}return null}}},{key:"query",value:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new rt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(arguments.length===2){var n=arguments[0],s=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,s)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(arguments.length===3){var n=arguments[0],s=arguments[1],u=arguments[2],c=this.removeItem(s,u);if(c)return!0;for(var g=null,y=s.getChildBoundables().iterator();y.hasNext();){var x=y.next();if(this.getIntersectsOp().intersects(x.getBounds(),n)&&x instanceof Yt&&(c=this.remove(n,x,u))){g=x;break}}return g!==null&&g.getChildBoundables().isEmpty()&&s.getChildBoundables().remove(g),c}}},{key:"createHigherLevels",value:function(t,e){j.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Yt){var s=this.depth(n);s>t&&(t=s)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){j.isTrue(!t.isEmpty());var n=new rt;n.add(this.createNode(e));var s=new rt(t);Ae.sort(s,this.getComparator());for(var u=s.iterator();u.hasNext();){var c=u.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(c)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new rt,this._nodeCapacity=null,arguments.length===0)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];j.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();De.IntersectsOp=function(){},De.DEFAULT_NODE_CAPACITY=10;var ku=function(){return f(function i(){h(this,i)},[{key:"distance",value:function(i,t){}}])}(),jt=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,n){j.isTrue(e.length>0);for(var s=new rt,u=0;u<e.length;u++)s.addAll(this.createParentBoundablesFromVerticalSlice(e[u],n));return s}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.nearestNeighbourK(e,z.POSITIVE_INFINITY,n)}if(arguments.length===3){var s=arguments[0],u=arguments[2],c=arguments[1],g=new Rn;g.add(s);for(var y=new Rn;!g.isEmpty()&&c>=0;){var x=g.poll(),T=x.getDistance();if(T>=c)break;x.isLeaves()?y.size()<u?y.add(x):(y.peek().getDistance()>T&&(y.poll(),y.add(x)),c=y.peek().getDistance()):x.expandToQueue(g,c)}return t.getItems(y)}}},{key:"createNode",value:function(e){return new Fr(e)}},{key:"size",value:function(){return arguments.length===0?S(t,"size",this,1).call(this):S(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof _t))return S(t,"insert",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;S(t,"insert",this,1).call(this,e,n)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,n){for(var s=Math.trunc(Math.ceil(e.size()/n)),u=new Array(n).fill(null),c=e.iterator(),g=0;g<n;g++){u[g]=new rt;for(var y=0;c.hasNext()&&y<s;){var x=c.next();u[g].add(x),y++}}return u}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];return S(t,"query",this,1).call(this,e)}if(arguments.length===2){var n=arguments[0],s=arguments[1];S(t,"query",this,1).call(this,n,s)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return S(t,"createParentBoundables",this,1).call(this,e,n)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof _t){var e=arguments[0],n=arguments[1];return S(t,"remove",this,1).call(this,e,n)}return S(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?S(t,"depth",this,1).call(this):S(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,n){j.isTrue(!e.isEmpty());var s=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),u=new rt(e);Ae.sort(u,t.xComparator);var c=this.verticalSlices(u,Math.trunc(Math.ceil(Math.sqrt(s))));return this.createParentBoundablesFromVerticalSlices(c,n)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(lt(arguments[0],ku)){var e=arguments[0];if(this.isEmpty())return null;var n=new Pe(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(n)}if(arguments[0]instanceof Pe){var s=arguments[0],u=z.POSITIVE_INFINITY,c=null,g=new Rn;for(g.add(s);!g.isEmpty()&&u>0;){var y=g.poll(),x=y.getDistance();if(x>=u)break;y.isLeaves()?(u=x,c=y):y.expandToQueue(g,u)}return c===null?null:[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else{if(arguments.length===2){var T=arguments[0],R=arguments[1];if(this.isEmpty()||T.isEmpty())return null;var D=new Pe(this.getRoot(),T.getRoot(),R);return this.nearestNeighbour(D)}if(arguments.length===3){var W=arguments[2],J=new ue(arguments[0],arguments[1]),et=new Pe(this.getRoot(),J,W);return this.nearestNeighbour(et)[0]}if(arguments.length===4){var gt=arguments[2],ct=arguments[3],yt=new ue(arguments[0],arguments[1]),St=new Pe(this.getRoot(),yt,gt);return this.nearestNeighbourK(St,ct)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1],s=z.POSITIVE_INFINITY,u=new Rn;for(u.add(e);!u.isEmpty();){var c=u.poll(),g=c.getDistance();if(g>n)return!1;if(c.maximumDistance()<=n)return!0;if(c.isLeaves()){if((s=g)<=n)return!0}else c.expandToQueue(u,s)}return!1}if(arguments.length===3){var y=arguments[0],x=arguments[1],T=arguments[2],R=new Pe(this.getRoot(),y.getRoot(),x);return this.isWithinDistance(R,T)}}},{key:"interfaces_",get:function(){return[_u,U]}}],[{key:"constructor_",value:function(){if(arguments.length===0)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];De.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,n){return(e+n)/2}},{key:"getItems",value:function(e){for(var n=new Array(e.size()).fill(null),s=0;!e.isEmpty();){var u=e.poll();n[s]=u.getBoundable(0).getItem(),s++}return n}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(De),Fr=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeBounds",value:function(){for(var e=null,n=this.getChildBoundables().iterator();n.hasNext();){var s=n.next();e===null?e=new _t(s.getBounds()):e.expandToInclude(s.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];Yt.constructor_.call(this,e)}}])}(Yt);jt.STRtreeNode=Fr,jt.xComparator=new(function(){return f(function i(){h(this,i)},[{key:"interfaces_",get:function(){return[ot]}},{key:"compare",value:function(i,t){return De.compareDoubles(jt.centreX(i.getBounds()),jt.centreX(t.getBounds()))}}])}()),jt.yComparator=new(function(){return f(function i(){h(this,i)},[{key:"interfaces_",get:function(){return[ot]}},{key:"compare",value:function(i,t){return De.compareDoubles(jt.centreY(i.getBounds()),jt.centreY(t.getBounds()))}}])}()),jt.intersectsOp=new(function(){return f(function i(){h(this,i)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(i,t){return i.intersects(t)}}])}()),jt.DEFAULT_NODE_CAPACITY=10;var xu=function(){function i(){h(this,i)}return f(i,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,n){if(e.equals2D(n))return 0;var s=i.relativeSign(e.x,n.x),u=i.relativeSign(e.y,n.y);switch(t){case 0:return i.compareValue(s,u);case 1:return i.compareValue(u,s);case 2:return i.compareValue(u,-s);case 3:return i.compareValue(-s,u);case 4:return i.compareValue(-s,-u);case 5:return i.compareValue(-u,-s);case 6:return i.compareValue(-u,s);case 7:return i.compareValue(s,-u)}return j.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),Eu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(i){var t=i;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?xu.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===i}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._segString=i,this.coord=new C(t),this.segmentIndex=e,this._segmentOctant=n,this._isInterior=!t.equals2D(i.getCoordinate(e))}}])}(),Nu=function(){return f(function i(){h(this,i)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Iu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var i=new je;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next();this.addEdgeCoordinates(e,n,i),e=n}return i.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var i=new rt;this.findCollapsesFromInsertedNodes(i),this.findCollapsesFromExistingVertices(i);for(var t=i.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2;if(e===2)return[new C(i.coord),new C(t.coord)];var n=this._edge.getCoordinate(t.segmentIndex),s=t.isInterior()||!t.coord.equals2D(n);s||e--;var u=new Array(e).fill(null),c=0;u[c++]=new C(i.coord);for(var g=i.segmentIndex+1;g<=t.segmentIndex;g++)u[c++]=this._edge.getCoordinate(g);return s&&(u[c]=new C(t.coord)),u}},{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"findCollapsesFromExistingVertices",value:function(i){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var n=this._edge.getCoordinate(t+2);e.equals2D(n)&&i.add(pn.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(i,t,e){var n=this.createSplitEdgePts(i,t);e.add(n,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),s=this.createSplitEdge(e,n);i.add(s),e=n}}},{key:"findCollapseIndex",value:function(i,t,e){if(!i.coord.equals2D(t.coord))return!1;var n=t.segmentIndex-i.segmentIndex;return t.isInterior()||n--,n===1&&(e[0]=i.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(i){for(var t=new Array(1).fill(null),e=this.iterator(),n=e.next();e.hasNext();){var s=e.next();this.findCollapseIndex(n,s,t)&&i.add(pn.valueOf(t[0])),n=s}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var i=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(i),i)}},{key:"createSplitEdge",value:function(i,t){var e=this.createSplitEdgePts(i,t);return new Ee(e,this._edge.getData())}},{key:"add",value:function(i,t){var e=new Eu(this._edge,i,t,this._edge.getSegmentOctant(t)),n=this._nodeMap.get(e);return n!==null?(j.isTrue(n.coord.equals2D(i),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(i){var t=this._edge.getCoordinates(),e=i.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new ht("bad split edge start point at "+e);var n=i.get(i.size()-1).getCoordinates(),s=n[n.length-1];if(!s.equals2D(t[t.length-1]))throw new ht("bad split edge end point at "+s)}}],[{key:"constructor_",value:function(){this._nodeMap=new nn,this._edge=null;var i=arguments[0];this._edge=i}}])}(),wu=function(){function i(){h(this,i)}return f(i,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new A("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),s=Math.abs(e);return t>=0?e>=0?n>=s?0:1:n>=s?7:6:e>=0?n>=s?3:2:n>=s?4:5}if(arguments[0]instanceof C&&arguments[1]instanceof C){var u=arguments[0],c=arguments[1],g=c.x-u.x,y=c.y-u.y;if(g===0&&y===0)throw new A("Cannot compute the octant for two identical points "+u);return i.octant(g,y)}}}])}(),Su=function(){return f(function i(){h(this,i)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(i){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(i){}},{key:"getData",value:function(){}}])}(),Tu=function(){return f(function i(){h(this,i)},[{key:"addIntersection",value:function(i,t){}},{key:"interfaces_",get:function(){return[Su]}}])}(),Ee=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:wu.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[1],s=arguments[3],u=new C(arguments[0].getIntersection(s));this.addIntersection(u,n)}}},{key:"toString",value:function(){return Ni.toLineString(new tn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,s=n+1;if(s<this._pts.length){var u=this._pts[s];t.equals2D(u)&&(n=s)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var s=0;s<t.getIntersectionNum();s++)this.addIntersection(t,e,n,s)}},{key:"interfaces_",get:function(){return[Tu]}}],[{key:"constructor_",value:function(){this._nodeList=new Iu(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var t=arguments[0],e=new rt;return i.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[1],s=arguments[0].iterator();s.hasNext();)s.next().getNodeList().addSplitEdges(n)}}])}(),Pt=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof i){var t=arguments[0],e=ut.index(this.p0,this.p1,t.p0),n=ut.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof C){var s=arguments[0];return ut.index(this.p0,this.p1,s)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new xe;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof C){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new C(t);var e=this.projectionFactor(t),n=new C;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof i){var s=arguments[0],u=this.projectionFactor(s.p0),c=this.projectionFactor(s.p1);if(u>=1&&c>=1||u<=0&&c<=0)return null;var g=this.project(s.p0);u<0&&(g=this.p0),u>1&&(g=this.p1);var y=this.project(s.p1);return c<0&&(y=this.p0),c>1&&(y=this.p1),new i(g,y)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return t===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return Qt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return i.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,s=e*e+n*n;return s<=0?z.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/s}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),s=z.MAX_VALUE,u=null,c=this.closestPoint(t.p0);s=c.distance(t.p0),n[0]=c,n[1]=t.p0;var g=this.closestPoint(t.p1);(u=g.distance(t.p1))<s&&(s=u,n[0]=g,n[1]=t.p1);var y=t.closestPoint(this.p0);(u=y.distance(this.p0))<s&&(s=u,n[0]=this.p0,n[1]=y);var x=t.closestPoint(this.p1);return(u=x.distance(this.p1))<s&&(s=u,n[0]=this.p1,n[1]=x),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return vi.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),s=this.p0.y+t*(this.p1.y-this.p0.y),u=this.p1.x-this.p0.x,c=this.p1.y-this.p0.y,g=Math.sqrt(u*u+c*c),y=0,x=0;if(e!==0){if(g<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");y=e*u/g,x=e*c/g}return new C(n-x,s+y)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||z.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),s=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),u=e*e+n*n,c=e*e-n*n,g=t.getX(),y=t.getY();return new C((-c*g-2*e*n*y-2*e*s)/u,(c*y-2*e*n*g-2*n*s)/u)}},{key:"distance",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return Qt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof C){var e=arguments[0];return Qt.pointToSegment(e,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new C;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=z.doubleToLongBits(this.p0.x);t^=31*z.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=z.doubleToLongBits(this.p1.x);return n^=31*z.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))}},{key:"interfaces_",get:function(){return[q,U]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)i.constructor_.call(this,new C,new C);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var s=arguments[0],u=arguments[1],c=arguments[2],g=arguments[3];i.constructor_.call(this,new C(s,u),new C(c,g))}}},{key:"midPoint",value:function(t,e){return new C((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),Cu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var i=arguments[1],t=arguments[2],e=arguments[3];arguments[0].getLineSegment(i,this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Pt,this._overlapSeg2=new Pt}}])}(),Gr=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(i,t){t.p0=this._pts[i],t.p1=this._pts[i+1]}},{key:"computeSelect",value:function(i,t,e,n){var s=this._pts[t],u=this._pts[e];if(e-t==1)return n.select(this,t),null;if(!i.intersects(s,u))return null;var c=Math.trunc((t+e)/2);t<c&&this.computeSelect(i,t,c,n),c<e&&this.computeSelect(i,c,e,n)}},{key:"getCoordinates",value:function(){for(var i=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)i[t++]=this._pts[e];return i}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var i=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,i,i._start,i._end,t)}else if(arguments.length===6){var e=arguments[0],n=arguments[1],s=arguments[2],u=arguments[3],c=arguments[4],g=arguments[5];if(n-e==1&&c-u==1)return g.overlap(this,e,s,u),null;if(!this.overlaps(e,n,s,u,c))return null;var y=Math.trunc((e+n)/2),x=Math.trunc((u+c)/2);e<y&&(u<x&&this.computeOverlaps(e,y,s,u,x,g),x<c&&this.computeOverlaps(e,y,s,x,c,g)),y<n&&(u<x&&this.computeOverlaps(y,n,s,u,x,g),x<c&&this.computeOverlaps(y,n,s,x,c,g))}}},{key:"setId",value:function(i){this._id=i}},{key:"select",value:function(i,t){this.computeSelect(i,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(this._env===null){var i=this._pts[this._start],t=this._pts[this._end];this._env=new _t(i,t)}return this._env}},{key:"overlaps",value:function(i,t,e,n,s){return _t.intersects(this._pts[i],this._pts[t],e._pts[n],e._pts[s])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._pts=i,this._start=t,this._end=e,this._context=n}}])}(),Ru=function(){function i(){h(this,i)}return f(i,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var s=Rt.quadrant(t[n],t[n+1]),u=e+1;u<t.length&&!(!t[u-1].equals2D(t[u])&&Rt.quadrant(t[u-1],t[u])!==s);)u++;return u-1}},{key:"getChains",value:function(){if(arguments.length===1){var t=arguments[0];return i.getChains(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1],s=new rt,u=0;do{var c=i.findChainEnd(e,u),g=new Gr(e,u,c,n);s.add(g),u=c}while(u<e.length-1);return s}}}])}(),Ti=function(){return f(function i(){h(this,i)},[{key:"computeNodes",value:function(i){}},{key:"getNodedSubstrings",value:function(){}}])}(),qr=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(i){this._segInt=i}},{key:"interfaces_",get:function(){return[Ti]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this.setSegmentIntersector(i)}}}}])}(),Ci=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Ee.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var n=Ru.getChains(e.getCoordinates(),e).iterator();n.hasNext();){var s=n.next();s.setId(this._idCounter++),this._index.insert(s.getEnvelope(),s),this._monoChains.add(s)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var n=e.iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new zr(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var s=n.next(),u=this._index.query(s.getEnvelope()).iterator();u.hasNext();){var c=u.next();if(c.getId()>s.getId()&&(s.computeOverlaps(c,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new rt,this._index=new jt,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var e=arguments[0];qr.constructor_.call(this,e)}}}}])}(qr),zr=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"overlap",value:function(){if(arguments.length!==4)return S(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],n=arguments[2],s=arguments[3],u=arguments[0].getContext(),c=n.getContext();this._si.processIntersections(u,e,c,s)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}])}(Cu);Ci.SegmentOverlapAction=zr;var Ht=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isDeletable",value:function(t,e,n,s){var u=this._inputLine[t],c=this._inputLine[e],g=this._inputLine[n];return!!this.isConcave(u,c,g)&&!!this.isShallow(u,c,g,s)&&this.isShallowSampled(u,c,t,n,s)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),s=!1;n<this._inputLine.length;){var u=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=i.DELETE,u=!0,s=!0),t=u?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return s}},{key:"isShallowConcavity",value:function(t,e,n,s){return ut.index(t,e,n)===this._angleOrientation&&Qt.pointToSegment(e,t,n)<s}},{key:"isShallowSampled",value:function(t,e,n,s,u){var c=Math.trunc((s-n)/i.NUM_PTS_TO_CHECK);c<=0&&(c=1);for(var g=n;g<s;g+=c)if(!this.isShallow(t,e,this._inputLine[g],u))return!1;return!0}},{key:"isConcave",value:function(t,e,n){var s=ut.index(t,e,n)===this._angleOrientation;return s}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ut.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===i.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,n,s){return Qt.pointToSegment(e,t,n)<s}},{key:"collapseLine",value:function(){for(var t=new je,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==i.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ut.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,e){return new i(t).simplify(e)}}])}();Ht.INIT=0,Ht.DELETE=1,Ht.KEEP=1,Ht.NUM_PTS_TO_CHECK=10;var Yr=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getCoordinates",value:function(){return this._ptList.toArray(i.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new C(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var s=t.length-1;s>=0;s--)this.addPt(t[s])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Oe().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new C(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new rt}}])}();Yr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Dt=function(){function i(){h(this,i)}return f(i,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=i.PI_TIMES_2;for(;t<=-Math.PI;)t+=i.PI_TIMES_2;return t}},{key:"angle",value:function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],s=n.x-e.x,u=n.y-e.y;return Math.atan2(u,s)}}},{key:"isAcute",value:function(t,e,n){var s=t.x-e.x,u=t.y-e.y;return s*(n.x-e.x)+u*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var s=t.x-e.x,u=t.y-e.y;return s*(n.x-e.x)+u*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,n){var s=i.angle(e,t),u=i.angle(e,n);return Math.abs(u-s)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=i.PI_TIMES_2;t>=i.PI_TIMES_2&&(t=0)}else{for(;t>=i.PI_TIMES_2;)t-=i.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,n){var s=i.angle(e,t),u=i.angle(e,n);return i.diff(s,u)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var n=Math.sin(e-t);return n>0?i.COUNTERCLOCKWISE:n<0?i.CLOCKWISE:i.NONE}},{key:"angleBetweenOriented",value:function(t,e,n){var s=i.angle(e,t),u=i.angle(e,n)-s;return u<=-Math.PI?u+i.PI_TIMES_2:u>Math.PI?u-i.PI_TIMES_2:u}}])}();Dt.PI_TIMES_2=2*Math.PI,Dt.PI_OVER_2=Math.PI/2,Dt.PI_OVER_4=Math.PI/4,Dt.COUNTERCLOCKWISE=ut.COUNTERCLOCKWISE,Dt.CLOCKWISE=ut.CLOCKWISE,Dt.NONE=ut.COLLINEAR;var rn=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ut.index(this._s0,this._s1,this._s2),s=n===ut.CLOCKWISE&&this._side===B.LEFT||n===ut.COUNTERCLOCKWISE&&this._side===B.RIGHT;n===0?this.addCollinear(e):s?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new Pt(t,e),s=new Pt;this.computeOffsetSegment(n,B.LEFT,this._distance,s);var u=new Pt;this.computeOffsetSegment(n,B.RIGHT,this._distance,u);var c=e.x-t.x,g=e.y-t.y,y=Math.atan2(g,c);switch(this._bufParams.getEndCapStyle()){case b.CAP_ROUND:this._segList.addPt(s.p1),this.addDirectedFillet(e,y+Math.PI/2,y-Math.PI/2,ut.CLOCKWISE,this._distance),this._segList.addPt(u.p1);break;case b.CAP_FLAT:this._segList.addPt(s.p1),this._segList.addPt(u.p1);break;case b.CAP_SQUARE:var x=new C;x.x=Math.abs(this._distance)*Math.cos(y),x.y=Math.abs(this._distance)*Math.sin(y);var T=new C(s.p1.x+x.x,s.p1.y+x.y),R=new C(u.p1.x+x.x,u.p1.y+x.y);this._segList.addPt(T),this._segList.addPt(R)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,s){var u=vi.intersection(e.p0,e.p1,n.p0,n.p1);if(u!==null&&(s<=0?1:u.distance(t)/Math.abs(s))<=this._bufParams.getMitreLimit())return this._segList.addPt(u),null;this.addLimitedMitreJoin(e,n,s,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===b.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===b.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new C(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new C(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new C(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,s,u){var c=e.x-t.x,g=e.y-t.y,y=Math.atan2(g,c),x=n.x-t.x,T=n.y-t.y,R=Math.atan2(T,x);s===ut.CLOCKWISE?y<=R&&(y+=2*Math.PI):y>=R&&(y-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,y,R,s,u),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,s){var u=this._seg0.p1,c=Dt.angle(u,this._seg0.p0),g=Dt.angleBetweenOriented(this._seg0.p0,u,this._seg1.p1)/2,y=Dt.normalize(c+g),x=Dt.normalize(y+Math.PI),T=s*n,R=n-T*Math.abs(Math.sin(g)),D=u.x+T*Math.cos(x),W=u.y+T*Math.sin(x),J=new C(D,W),et=new Pt(u,J),gt=et.pointAlongOffset(1,R),ct=et.pointAlongOffset(1,-R);this._side===B.LEFT?(this._segList.addPt(gt),this._segList.addPt(ct)):(this._segList.addPt(ct),this._segList.addPt(gt))}},{key:"addDirectedFillet",value:function(t,e,n,s,u){var c=s===ut.CLOCKWISE?-1:1,g=Math.abs(e-n),y=Math.trunc(g/this._filletAngleQuantum+.5);if(y<1)return null;for(var x=g/y,T=new C,R=0;R<y;R++){var D=e+c*R*x;T.x=t.x+u*Math.cos(D),T.y=t.y+u*Math.sin(D),this._segList.addPt(T)}}},{key:"computeOffsetSegment",value:function(t,e,n,s){var u=e===B.LEFT?1:-1,c=t.p1.x-t.p0.x,g=t.p1.y-t.p0.y,y=Math.sqrt(c*c+g*g),x=u*n*c/y,T=u*n*g/y;s.p0.x=t.p0.x-T,s.p0.y=t.p0.y+x,s.p1.x=t.p1.x-T,s.p1.y=t.p1.y+x}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new C((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var s=new C((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(s)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new C(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Yr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===b.JOIN_BEVEL||this._bufParams.getJoinStyle()===b.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ut.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Pt,this._seg1=new Pt,this._offset0=new Pt,this._offset1=new Pt,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new xe,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===b.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}])}();rn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,rn.MAX_CLOSING_SEG_LEN_FACTOR=80;var Lu=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,e===0)return null;var n=e<0,s=Math.abs(e),u=this.getSegGen(s);t.length<=1?this.computePointCurve(t[0],u):this.computeOffsetCurve(t,n,u);var c=u.getCoordinates();return n&&It.reverse(c),c}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var s=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var u=Ht.simplify(t,-s),c=u.length-1;n.initSideSegments(u[c],u[c-1],B.LEFT),n.addFirstSegment();for(var g=c-2;g>=0;g--)n.addNextSegment(u[g],!0)}else{n.addSegments(t,!1);var y=Ht.simplify(t,s),x=y.length-1;n.initSideSegments(y[0],y[1],B.LEFT),n.addFirstSegment();for(var T=2;T<=x;T++)n.addNextSegment(y[T],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var s=this.simplifyTolerance(this._distance);e===B.RIGHT&&(s=-s);var u=Ht.simplify(t,s),c=u.length-1;n.initSideSegments(u[c-1],u[0],e);for(var g=1;g<=c;g++){var y=g!==1;n.addNextSegment(u[g],y)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),s=Ht.simplify(t,n),u=s.length-1;e.initSideSegments(s[0],s[1],B.LEFT);for(var c=2;c<=u;c++)e.addNextSegment(s[c],!0);e.addLastSegment(),e.addLineEndCap(s[u-1],s[u]);var g=Ht.simplify(t,-n),y=g.length-1;e.initSideSegments(g[y],g[y-1],B.LEFT);for(var x=y-2;x>=0;x--)e.addNextSegment(g[x],!0);e.addLastSegment(),e.addLineEndCap(g[1],g[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case b.CAP_ROUND:e.createCircle(t);break;case b.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),s=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],s);else if(this._bufParams.isSingleSided()){var u=e<0;this.computeSingleSidedBufferCurve(t,u,s)}else this.computeLineBufferCurve(t,s);return s.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return i.copyCoordinates(t);var s=this.getSegGen(n);return this.computeRingBufferCurve(t,e,s),s.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var s=this.simplifyTolerance(this._distance);if(e){var u=Ht.simplify(t,-s),c=u.length-1;n.initSideSegments(u[c],u[c-1],B.LEFT),n.addFirstSegment();for(var g=c-2;g>=0;g--)n.addNextSegment(u[g],!0)}else{var y=Ht.simplify(t,s),x=y.length-1;n.initSideSegments(y[0],y[1],B.LEFT),n.addFirstSegment();for(var T=2;T<=x;T++)n.addNextSegment(y[T],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return t===0||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new rn(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new C(t[n]);return e}}])}(),Xr=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var i=arguments[0],t=new rt,e=this._subgraphs.iterator();e.hasNext();){var n=e.next(),s=n.getEnvelope();i.y<s.getMinY()||i.y>s.getMaxY()||this.findStabbedSegments(i,n.getDirectedEdges(),t)}return t}if(arguments.length===3){if(lt(arguments[2],ye)&&arguments[0]instanceof C&&arguments[1]instanceof Si){for(var u=arguments[0],c=arguments[1],g=arguments[2],y=c.getEdge().getCoordinates(),x=0;x<y.length-1;x++)if(this._seg.p0=y[x],this._seg.p1=y[x+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<u.x||this._seg.isHorizontal()||u.y<this._seg.p0.y||u.y>this._seg.p1.y||ut.index(this._seg.p0,this._seg.p1,u)===ut.RIGHT)){var T=c.getDepth(B.LEFT);this._seg.p0.equals(y[x])||(T=c.getDepth(B.RIGHT));var R=new Br(this._seg,T);g.add(R)}}else if(lt(arguments[2],ye)&&arguments[0]instanceof C&&lt(arguments[1],ye))for(var D=arguments[0],W=arguments[2],J=arguments[1].iterator();J.hasNext();){var et=J.next();et.isForward()&&this.findStabbedSegments(D,et,W)}}}},{key:"getDepth",value:function(i){var t=this.findStabbedSegments(i);return t.size()===0?0:Ae.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Pt;var i=arguments[0];this._subgraphs=i}}])}(),Br=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(i){var t=i;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return e!==0||(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))!==0?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(i,t){var e=i.p0.compareTo(t.p0);return e!==0?e:i.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var i=arguments[0],t=arguments[1];this._upwardSeg=new Pt(i),this._leftDepth=t}}])}();Xr.DepthSegment=Br;var Ur=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,null,[{key:"constructor_",value:function(){Y.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(Y),Ri=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getY",value:function(){var t=this.y/this.w;if(z.isNaN(t)||z.isInfinite(t))throw new Ur;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(z.isNaN(t)||z.isInfinite(t))throw new Ur;return t}},{key:"getCoordinate",value:function(){var t=new C;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof i&&arguments[1]instanceof i){var s=arguments[0],u=arguments[1];this.x=s.y*u.w-u.y*s.w,this.y=u.x*s.w-s.x*u.w,this.w=s.x*u.y-u.x*s.y}else if(arguments[0]instanceof C&&arguments[1]instanceof C){var c=arguments[0],g=arguments[1];this.x=c.y-g.y,this.y=g.x-c.x,this.w=c.x*g.y-g.x*c.y}}else if(arguments.length===3){var y=arguments[0],x=arguments[1],T=arguments[2];this.x=y,this.y=x,this.w=T}else if(arguments.length===4){var R=arguments[0],D=arguments[1],W=arguments[2],J=arguments[3],et=R.y-D.y,gt=D.x-R.x,ct=R.x*D.y-D.x*R.y,yt=W.y-J.y,St=J.x-W.x,Tt=W.x*J.y-J.x*W.y;this.x=gt*Tt-St*ct,this.y=yt*ct-et*Tt,this.w=et*St-yt*gt}}}])}(),Mu=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"area",value:function(){return i.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return i.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(t===null)throw new A("Supplied point is null.");return i.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return i.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return i.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return i.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return i.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return i.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return i.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,s){return t*s-e*n}},{key:"interpolateZ",value:function(t,e,n,s){var u=e.x,c=e.y,g=n.x-u,y=s.x-u,x=n.y-c,T=s.y-c,R=g*T-y*x,D=t.x-u,W=t.y-c,J=(T*D-y*W)/R,et=(-x*D+g*W)/R;return e.getZ()+J*(n.getZ()-e.getZ())+et*(s.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var s=t.distance(e),u=e.distance(n),c=n.distance(t),g=s;return u>g&&(g=u),c>g&&(g=c),g}},{key:"circumcentreDD",value:function(t,e,n){var s=st.valueOf(t.x).subtract(n.x),u=st.valueOf(t.y).subtract(n.y),c=st.valueOf(e.x).subtract(n.x),g=st.valueOf(e.y).subtract(n.y),y=st.determinant(s,u,c,g).multiply(2),x=s.sqr().add(u.sqr()),T=c.sqr().add(g.sqr()),R=st.determinant(u,x,g,T),D=st.determinant(s,x,c,T),W=st.valueOf(n.x).subtract(R.divide(y)).doubleValue(),J=st.valueOf(n.y).add(D.divide(y)).doubleValue();return new C(W,J)}},{key:"isAcute",value:function(t,e,n){return!!Dt.isAcute(t,e,n)&&!!Dt.isAcute(e,n,t)&&!!Dt.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,e,n){var s=n.x,u=n.y,c=t.x-s,g=t.y-u,y=e.x-s,x=e.y-u,T=2*i.det(c,g,y,x),R=i.det(g,c*c+g*g,x,y*y+x*x),D=i.det(c,c*c+g*g,y,y*y+x*x);return new C(s-R/T,u+D/T)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,s=e.y-t.y,u=new Ri(t.x+n/2,t.y+s/2,1),c=new Ri(t.x-s+n/2,t.y+n+s/2,1);return new Ri(u,c)}},{key:"angleBisector",value:function(t,e,n){var s=e.distance(t),u=s/(s+e.distance(n)),c=n.x-t.x,g=n.y-t.y;return new C(t.x+u*c,t.y+u*g)}},{key:"area3D",value:function(t,e,n){var s=e.x-t.x,u=e.y-t.y,c=e.getZ()-t.getZ(),g=n.x-t.x,y=n.y-t.y,x=n.getZ()-t.getZ(),T=u*x-c*y,R=c*g-s*x,D=s*y-u*g,W=T*T+R*R+D*D,J=Math.sqrt(W)/2;return J}},{key:"centroid",value:function(t,e,n){var s=(t.x+e.x+n.x)/3,u=(t.y+e.y+n.y)/3;return new C(s,u)}},{key:"inCentre",value:function(t,e,n){var s=e.distance(n),u=t.distance(n),c=t.distance(e),g=s+u+c,y=(s*t.x+u*e.x+c*n.x)/g,x=(s*t.y+u*e.y+c*n.y)/g;return new C(y,x)}}])}(),Ou=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(i,t,e,n,s){if(t===0&&i.length<Je.MINIMUM_VALID_SIZE)return null;var u=n,c=s;i.length>=Je.MINIMUM_VALID_SIZE&&ut.isCCW(i)&&(u=s,c=n,e=B.opposite(e));var g=this._curveBuilder.getRingCurve(i,e,t);this.addCurve(g,u,c)}},{key:"addRingBothSides",value:function(i,t){this.addRingSide(i,t,B.LEFT,N.EXTERIOR,N.INTERIOR),this.addRingSide(i,t,B.RIGHT,N.INTERIOR,N.EXTERIOR)}},{key:"addPoint",value:function(i){if(this._distance<=0)return null;var t=i.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,N.EXTERIOR,N.INTERIOR)}},{key:"addPolygon",value:function(i){var t=this._distance,e=B.LEFT;this._distance<0&&(t=-this._distance,e=B.RIGHT);var n=i.getExteriorRing(),s=It.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&s.length<3)return null;this.addRingSide(s,t,e,N.EXTERIOR,N.INTERIOR);for(var u=0;u<i.getNumInteriorRing();u++){var c=i.getInteriorRingN(u),g=It.removeRepeatedPoints(c.getCoordinates());this._distance>0&&this.isErodedCompletely(c,-this._distance)||this.addRingSide(g,t,B.opposite(e),N.INTERIOR,N.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(i,t){var e=new Mu(i[0],i[1],i[2]),n=e.inCentre();return Qt.pointToSegment(n,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(i){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=It.removeRepeatedPoints(i.getCoordinates());if(It.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,N.EXTERIOR,N.INTERIOR)}}},{key:"addCurve",value:function(i,t,e){if(i===null||i.length<2)return null;var n=new Ee(i,new zt(0,N.BOUNDARY,t,e));this._curveList.add(n)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(i){if(i.isEmpty())return null;if(i instanceof Nn)this.addPolygon(i);else if(i instanceof Qe)this.addLineString(i);else if(i instanceof yi)this.addPoint(i);else if(i instanceof di)this.addCollection(i);else if(i instanceof xi)this.addCollection(i);else if(i instanceof ki)this.addCollection(i);else{if(!(i instanceof At))throw new fe(i.getGeometryType());this.addCollection(i)}}},{key:"isErodedCompletely",value:function(i,t){var e=i.getCoordinates();if(e.length<4)return t<0;if(e.length===4)return this.isTriangleErodedCompletely(e,t);var n=i.getEnvelopeInternal(),s=Math.min(n.getHeight(),n.getWidth());return t<0&&2*Math.abs(t)>s}},{key:"addCollection",value:function(i){for(var t=0;t<i.getNumGeometries();t++){var e=i.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new rt;var i=arguments[0],t=arguments[1],e=arguments[2];this._inputGeom=i,this._distance=t,this._curveBuilder=e}}])}(),bu=function(){return f(function i(){h(this,i)},[{key:"locate",value:function(i){}}])}(),Au=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,i.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new _n;var t=this._parent.getGeometryN(this._index++);return t instanceof At?(this._subcollectionIterator=new i(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new fe(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Nu]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof At)}}])}(),Pu=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"locate",value:function(t){return i.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[bu]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return N.EXTERIOR;var n=e.getExteriorRing(),s=i.locatePointInRing(t,n);if(s!==N.INTERIOR)return s;for(var u=0;u<e.getNumInteriorRing();u++){var c=e.getInteriorRingN(u),g=i.locatePointInRing(t,c);if(g===N.BOUNDARY)return N.BOUNDARY;if(g===N.INTERIOR)return N.EXTERIOR}return N.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Ii.locateInRing(t,e.getCoordinates()):N.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return N.EXTERIOR!==i.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof Nn)return i.locatePointInPolygon(t,e);if(e instanceof At)for(var n=new Au(e);n.hasNext();){var s=n.next();if(s!==e){var u=i.locateInGeometry(t,s);if(u!==N.EXTERIOR)return u}}return N.EXTERIOR}},{key:"isContained",value:function(t,e){return N.EXTERIOR!==i.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?N.EXTERIOR:e.getEnvelopeInternal().intersects(t)?i.locateInGeometry(t,e):N.EXTERIOR}}])}(),Du=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(i){this.getEdges();var t=this._edgeList.indexOf(i),e=t-1;return t===0&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(i){for(var t=N.NONE,e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.isArea(i)&&n.getLocation(i,B.LEFT)!==N.NONE&&(t=n.getLocation(i,B.LEFT))}if(t===N.NONE)return null;for(var s=t,u=this.iterator();u.hasNext();){var c=u.next(),g=c.getLabel();if(g.getLocation(i,B.ON)===N.NONE&&g.setLocation(i,B.ON,s),g.isArea(i)){var y=g.getLocation(i,B.LEFT),x=g.getLocation(i,B.RIGHT);if(x!==N.NONE){if(x!==s)throw new se("side location conflict",c.getCoordinate());y===N.NONE&&j.shouldNeverReachHere("found single null side (at "+c.getCoordinate()+")"),s=y}else j.isTrue(g.getLocation(i,B.LEFT)===N.NONE,"found single null side"),g.setLocation(i,B.RIGHT,s),g.setLocation(i,B.LEFT,s)}}}},{key:"getCoordinate",value:function(){var i=this.iterator();return i.hasNext()?i.next().getCoordinate():null}},{key:"print",value:function(i){Gt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"isAreaLabelsConsistent",value:function(i){return this.computeEdgeEndLabels(i.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(i){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,n=t.get(e).getLabel().getLocation(i,B.LEFT);j.isTrue(n!==N.NONE,"Found unlabelled area edge");for(var s=n,u=this.iterator();u.hasNext();){var c=u.next().getLabel();j.isTrue(c.isArea(i),"Found non-area edge");var g=c.getLocation(i,B.LEFT),y=c.getLocation(i,B.RIGHT);if(g===y||y!==s)return!1;s=g}return!0}},{key:"findIndex",value:function(i){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===i)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new rt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(i,t,e){return this._ptInAreaLocation[i]===N.NONE&&(this._ptInAreaLocation[i]=Pu.locate(t,e[i].getGeometry())),this._ptInAreaLocation[i]}},{key:"toString",value:function(){var i=new We;i.append("EdgeEndStar:   "+this.getCoordinate()),i.append(`
`);for(var t=this.iterator();t.hasNext();){var e=t.next();i.append(e),i.append(`
`)}return i.toString()}},{key:"computeEdgeEndLabels",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(i)}},{key:"computeLabelling",value:function(i){this.computeEdgeEndLabels(i[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var n=e.next().getLabel(),s=0;s<2;s++)n.isLine(s)&&n.getLocation(s)===N.BOUNDARY&&(t[s]=!0);for(var u=this.iterator();u.hasNext();)for(var c=u.next(),g=c.getLabel(),y=0;y<2;y++)if(g.isAnyNull(y)){var x=N.NONE;if(t[y])x=N.EXTERIOR;else{var T=c.getCoordinate();x=this.getLocation(y,T,i)}g.setAllLocationsIfNull(y,x)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(i,t){this._edgeMap.put(i,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new nn,this._edgeList=null,this._ptInAreaLocation=[N.NONE,N.NONE]}}])}(),Fu=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,n=null,s=this._SCANNING_FOR_INCOMING,u=0;u<this._resultAreaEdgeList.size();u++){var c=this._resultAreaEdgeList.get(u),g=c.getSym();if(c.getLabel().isArea())switch(e===null&&c.isInResult()&&(e=c),s){case this._SCANNING_FOR_INCOMING:if(!g.isInResult())continue;n=g,s=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!c.isInResult())continue;n.setNext(c),s=this._SCANNING_FOR_INCOMING}}if(s===this._LINKING_TO_OUTGOING){if(e===null)throw new se("no outgoing dirEdge found",this.getCoordinate());j.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}}},{key:"insert",value:function(e){var n=e;this.insertEdgeEnd(n,n)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),n=e.size();if(n<1)return null;var s=e.get(0);if(n===1)return s;var u=e.get(n-1),c=s.getQuadrant(),g=u.getQuadrant();return Rt.isNorthern(c)&&Rt.isNorthern(g)?s:Rt.isNorthern(c)||Rt.isNorthern(g)?s.getDy()!==0?s:u.getDy()!==0?u:(j.shouldNeverReachHere("found two horizontal edges incident on node"),null):u}},{key:"print",value:function(e){Gt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var s=n.next();e.print("out "),s.print(e),e.println(),e.print("in "),s.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new rt;for(var e=this.iterator();e.hasNext();){var n=e.next();(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var n=this.iterator();n.hasNext();){var s=n.next().getLabel();s.setAllLocationsIfNull(0,e.getLocation(0)),s.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,n=null,s=this._edgeList.size()-1;s>=0;s--){var u=this._edgeList.get(s),c=u.getSym();n===null&&(n=c),e!==null&&c.setNext(e),e=u}n.setNext(e)}},{key:"computeDepths",value:function(){if(arguments.length===1){var e=arguments[0],n=this.findIndex(e),s=e.getDepth(B.LEFT),u=e.getDepth(B.RIGHT),c=this.computeDepths(n+1,this._edgeList.size(),s);if(this.computeDepths(0,n,c)!==u)throw new se("depth mismatch at "+e.getCoordinate())}else if(arguments.length===3){for(var g=arguments[1],y=arguments[2],x=arguments[0];x<g;x++){var T=this._edgeList.get(x);T.setEdgeDepths(B.RIGHT,y),y=T.getDepth(B.LEFT)}return y}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var n=null,s=null,u=this._SCANNING_FOR_INCOMING,c=this._resultAreaEdgeList.size()-1;c>=0;c--){var g=this._resultAreaEdgeList.get(c),y=g.getSym();switch(n===null&&g.getEdgeRing()===e&&(n=g),u){case this._SCANNING_FOR_INCOMING:if(y.getEdgeRing()!==e)continue;s=y,u=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(g.getEdgeRing()!==e)continue;s.setNextMin(g),u=this._SCANNING_FOR_INCOMING}}u===this._LINKING_TO_OUTGOING&&(j.isTrue(n!==null,"found null for first outgoing dirEdge"),j.isTrue(n.getEdgeRing()===e,"unable to link last incoming dirEdge"),s.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var e=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&e++;return e}if(arguments.length===1){for(var s=arguments[0],u=0,c=this.iterator();c.hasNext();)c.next().getEdgeRing()===s&&u++;return u}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=N.NONE,n=this.iterator();n.hasNext();){var s=n.next(),u=s.getSym();if(!s.isLineEdge()){if(s.isInResult()){e=N.INTERIOR;break}if(u.isInResult()){e=N.EXTERIOR;break}}}if(e===N.NONE)return null;for(var c=e,g=this.iterator();g.hasNext();){var y=g.next(),x=y.getSym();y.isLineEdge()?y.getEdge().setCovered(c===N.INTERIOR):(y.isInResult()&&(c=N.EXTERIOR),x.isInResult()&&(c=N.INTERIOR))}}},{key:"computeLabelling",value:function(e){S(t,"computeLabelling",this,1).call(this,e),this._label=new zt(N.NONE);for(var n=this.iterator();n.hasNext();)for(var s=n.next().getEdge().getLabel(),u=0;u<2;u++){var c=s.getLocation(u);c!==N.INTERIOR&&c!==N.BOUNDARY||this._label.setLocation(u,N.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Du),Gu=function(i){function t(){return h(this,t),l(this,t)}return d(t,i),f(t,[{key:"createNode",value:function(e){return new Cn(e,new Fu)}}])}(br),Vr=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compareTo",value:function(t){var e=t;return i.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=i.orientation(t)}},{key:"orientation",value:function(t){return It.increasingDirection(t)===1}},{key:"compareOriented",value:function(t,e,n,s){for(var u=e?1:-1,c=s?1:-1,g=e?t.length:-1,y=s?n.length:-1,x=e?0:t.length-1,T=s?0:n.length-1;;){var R=t[x].compareTo(n[T]);if(R!==0)return R;var D=(x+=u)===g,W=(T+=c)===y;if(D&&!W)return-1;if(!D&&W)return 1;if(D&&W)return 0}}}])}(),qu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&i.print(","),i.print("(");for(var n=e.getCoordinates(),s=0;s<n.length;s++)s>0&&i.print(","),i.print(n[s].x+" "+n[s].y);i.println(")")}i.print(")  ")}},{key:"addAll",value:function(i){for(var t=i.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(i){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(i))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(i){return this._edges.get(i)}},{key:"findEqualEdge",value:function(i){var t=new Vr(i.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(i){this._edges.add(i);var t=new Vr(i.getCoordinates());this._ocaMap.put(t,i)}}],[{key:"constructor_",value:function(){this._edges=new rt,this._ocaMap=new nn}}])}(),Hr=function(){return f(function i(){h(this,i)},[{key:"processIntersections",value:function(i,t,e,n){}},{key:"isDone",value:function(){}}])}(),zu=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isTrivialIntersection",value:function(t,e,n,s){if(t===n&&this._li.getIntersectionNum()===1){if(i.isAdjacentSegments(e,s))return!0;if(t.isClosed()){var u=t.size()-1;if(e===0&&s===u||s===0&&e===u)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,s){if(t===n&&e===s)return null;this.numTests++;var u=t.getCoordinates()[e],c=t.getCoordinates()[e+1],g=n.getCoordinates()[s],y=n.getCoordinates()[s+1];this._li.computeIntersection(u,c,g,y),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,s)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,s,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Hr]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return Math.abs(t-e)===1}}])}(),Yu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex),i.println(" dist = "+this.dist)}},{key:"compareTo",value:function(i){var t=i;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===i}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(i,t){return this.segmentIndex<i?-1:this.segmentIndex>i?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var i=arguments[0],t=arguments[1],e=arguments[2];this.coord=new C(i),this.segmentIndex=t,this.dist=e}}])}(),Xu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),s=this.createSplitEdge(e,n);i.add(s),e=n}}},{key:"addEndpoints",value:function(){var i=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[i],i,0)}},{key:"createSplitEdge",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2,n=this.edge.pts[t.segmentIndex],s=t.dist>0||!t.coord.equals2D(n);s||e--;var u=new Array(e).fill(null),c=0;u[c++]=new C(i.coord);for(var g=i.segmentIndex+1;g<=t.segmentIndex;g++)u[c++]=this.edge.pts[g];return s&&(u[c]=t.coord),new Zr(u,new zt(this.edge._label))}},{key:"add",value:function(i,t,e){var n=new Yu(i,t,e),s=this._nodeMap.get(n);return s!==null?s:(this._nodeMap.put(n,n),n)}},{key:"isIntersection",value:function(i){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(i))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new nn,this.edge=null;var i=arguments[0];this.edge=i}}])}(),Bu=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])||i.isTrue(this._matrix[N.INTERIOR][N.BOUNDARY])||i.isTrue(this._matrix[N.BOUNDARY][N.INTERIOR])||i.isTrue(this._matrix[N.BOUNDARY][N.BOUNDARY]))&&this._matrix[N.EXTERIOR][N.INTERIOR]===H.FALSE&&this._matrix[N.EXTERIOR][N.BOUNDARY]===H.FALSE}},{key:"isCoveredBy",value:function(){return(i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])||i.isTrue(this._matrix[N.INTERIOR][N.BOUNDARY])||i.isTrue(this._matrix[N.BOUNDARY][N.INTERIOR])||i.isTrue(this._matrix[N.BOUNDARY][N.BOUNDARY]))&&this._matrix[N.INTERIOR][N.EXTERIOR]===H.FALSE&&this._matrix[N.BOUNDARY][N.EXTERIOR]===H.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),s=e%3;this._matrix[n][s]=H.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var u=arguments[0],c=arguments[1],g=arguments[2];this._matrix[u][c]=g}}},{key:"isContains",value:function(){return i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])&&this._matrix[N.EXTERIOR][N.INTERIOR]===H.FALSE&&this._matrix[N.EXTERIOR][N.BOUNDARY]===H.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),s=e%3;this.setAtLeast(n,s,H.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var u=arguments[0],c=arguments[1],g=arguments[2];this._matrix[u][c]<g&&(this._matrix[u][c]=g)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])&&this._matrix[N.INTERIOR][N.EXTERIOR]===H.FALSE&&this._matrix[N.BOUNDARY][N.EXTERIOR]===H.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===H.A&&e===H.A||t===H.L&&e===H.L||t===H.L&&e===H.A||t===H.P&&e===H.A||t===H.P&&e===H.L)&&this._matrix[N.INTERIOR][N.INTERIOR]===H.FALSE&&(i.isTrue(this._matrix[N.INTERIOR][N.BOUNDARY])||i.isTrue(this._matrix[N.BOUNDARY][N.INTERIOR])||i.isTrue(this._matrix[N.BOUNDARY][N.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===H.P&&e===H.P||t===H.A&&e===H.A?i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])&&i.isTrue(this._matrix[N.INTERIOR][N.EXTERIOR])&&i.isTrue(this._matrix[N.EXTERIOR][N.INTERIOR]):t===H.L&&e===H.L&&this._matrix[N.INTERIOR][N.INTERIOR]===1&&i.isTrue(this._matrix[N.INTERIOR][N.EXTERIOR])&&i.isTrue(this._matrix[N.EXTERIOR][N.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])&&this._matrix[N.INTERIOR][N.EXTERIOR]===H.FALSE&&this._matrix[N.BOUNDARY][N.EXTERIOR]===H.FALSE&&this._matrix[N.EXTERIOR][N.INTERIOR]===H.FALSE&&this._matrix[N.EXTERIOR][N.BOUNDARY]===H.FALSE}},{key:"toString",value:function(){for(var t=new wn("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,H.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(t.length!==9)throw new A("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!i.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[N.INTERIOR][N.INTERIOR]===H.FALSE&&this._matrix[N.INTERIOR][N.BOUNDARY]===H.FALSE&&this._matrix[N.BOUNDARY][N.INTERIOR]===H.FALSE&&this._matrix[N.BOUNDARY][N.BOUNDARY]===H.FALSE}},{key:"isCrosses",value:function(t,e){return t===H.P&&e===H.L||t===H.P&&e===H.A||t===H.L&&e===H.A?i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])&&i.isTrue(this._matrix[N.INTERIOR][N.EXTERIOR]):t===H.L&&e===H.P||t===H.A&&e===H.P||t===H.A&&e===H.L?i.isTrue(this._matrix[N.INTERIOR][N.INTERIOR])&&i.isTrue(this._matrix[N.EXTERIOR][N.INTERIOR]):t===H.L&&e===H.L&&this._matrix[N.INTERIOR][N.INTERIOR]===0}},{key:"interfaces_",get:function(){return[$]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(H.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];i.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof i){var e=arguments[0];i.constructor_.call(this),this._matrix[N.INTERIOR][N.INTERIOR]=e._matrix[N.INTERIOR][N.INTERIOR],this._matrix[N.INTERIOR][N.BOUNDARY]=e._matrix[N.INTERIOR][N.BOUNDARY],this._matrix[N.INTERIOR][N.EXTERIOR]=e._matrix[N.INTERIOR][N.EXTERIOR],this._matrix[N.BOUNDARY][N.INTERIOR]=e._matrix[N.BOUNDARY][N.INTERIOR],this._matrix[N.BOUNDARY][N.BOUNDARY]=e._matrix[N.BOUNDARY][N.BOUNDARY],this._matrix[N.BOUNDARY][N.EXTERIOR]=e._matrix[N.BOUNDARY][N.EXTERIOR],this._matrix[N.EXTERIOR][N.INTERIOR]=e._matrix[N.EXTERIOR][N.INTERIOR],this._matrix[N.EXTERIOR][N.BOUNDARY]=e._matrix[N.EXTERIOR][N.BOUNDARY],this._matrix[N.EXTERIOR][N.EXTERIOR]=e._matrix[N.EXTERIOR][N.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===H.SYM_DONTCARE||e===H.SYM_TRUE&&(t>=0||t===H.TRUE)||e===H.SYM_FALSE&&t===H.FALSE||e===H.SYM_P&&t===H.P||e===H.SYM_L&&t===H.L||e===H.SYM_A&&t===H.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[1];return new i(arguments[0]).matches(n)}}},{key:"isTrue",value:function(t){return t>=0||t===H.TRUE}}])}(),Uu=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return t===null||t.length===0?null:(this.ensureCapacity(this._size+t.length),Gt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=_e.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return Gt.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)i.constructor_.call(this,10);else if(arguments.length===1){var t=arguments[0];this._data=new Array(t).fill(null)}}}])}(),Vu=function(){function i(){h(this,i)}return f(i,[{key:"getChainStartIndices",value:function(t){var e=0,n=new Uu(Math.trunc(t.length/2));n.add(e);do{var s=this.findChainEnd(t,e);n.add(s),e=s}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=Rt.quadrant(t[e],t[e+1]),s=e+1;s<t.length&&Rt.quadrant(t[s-1],t[s])===n;)s++;return s-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,n=new rt;n.add(e);do{var s=this.findChainEnd(t,e);n.add(s),e=s}while(e<t.length-1);return i.toIntArray(n)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}])}(),Hu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t>e?t:e}},{key:"getMinX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[i],this.startIndex[i+1],t,t.startIndex[e],t.startIndex[e+1],n)}else if(arguments.length===6){var s=arguments[0],u=arguments[1],c=arguments[2],g=arguments[3],y=arguments[4],x=arguments[5];if(u-s==1&&y-g==1)return x.addIntersections(this.e,s,c.e,g),null;if(!this.overlaps(s,u,c,g,y))return null;var T=Math.trunc((s+u)/2),R=Math.trunc((g+y)/2);s<T&&(g<R&&this.computeIntersectsForChain(s,T,c,g,R,x),R<y&&this.computeIntersectsForChain(s,T,c,R,y,x)),T<u&&(g<R&&this.computeIntersectsForChain(T,u,c,g,R,x),R<y&&this.computeIntersectsForChain(T,u,c,R,y,x))}}},{key:"overlaps",value:function(i,t,e,n,s){return _t.intersects(this.pts[i],this.pts[t],e.pts[n],e.pts[s])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(i,t){for(var e=0;e<this.startIndex.length-1;e++)for(var n=0;n<i.startIndex.length-1;n++)this.computeIntersectsForChain(e,i,n,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var i=arguments[0];this.e=i,this.pts=i.getCoordinates();var t=new Vu;this.startIndex=t.getChainStartIndices(this.pts)}}])}(),$r=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==i.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this._depth[n][1]===i.NULL_VALUE}if(arguments.length===2){var s=arguments[0],u=arguments[1];return this._depth[s][u]===i.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var s=0;this._depth[t][n]>e&&(s=1),this._depth[t][n]=s}}}},{key:"getDelta",value:function(t){return this._depth[t][B.RIGHT]-this._depth[t][B.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?N.EXTERIOR:N.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var s=t.getLocation(e,n);s!==N.EXTERIOR&&s!==N.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=i.depthAtLocation(s):this._depth[e][n]+=i.depthAtLocation(s))}else if(arguments.length===3){var u=arguments[0],c=arguments[1];arguments[2]===N.INTERIOR&&this._depth[u][c]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=i.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===N.EXTERIOR?0:t===N.INTERIOR?1:i.NULL_VALUE}}])}();$r.NULL_VALUE=-1;var Zr=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,zt.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var s=!0,u=!0,c=this.pts.length,g=0;g<this.pts.length;g++)if(this.pts[g].equals2D(n.pts[g])||(s=!1),this.pts[g].equals2D(n.pts[--c])||(u=!1),!s&&!u)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.print(","),e.print(this.pts[n].x+" "+this.pts[n].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)e.print(this.pts[n]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Hu(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new _t;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,n,s,u){var c=new C(e.getIntersection(u)),g=n,y=e.getEdgeDistance(s,u),x=g+1;if(x<this.pts.length){var T=this.pts[x];c.equals2D(T)&&(g=x,y=0)}this.eiList.add(c,g,y)}},{key:"toString",value:function(){var e=new wn;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.append(","),e.append(this.pts[n].x+" "+this.pts[n].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(e.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,n,s){for(var u=0;u<e.getIntersectionNum();u++)this.addIntersection(e,n,s,u)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Xu(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new $r,this._depthDelta=0,arguments.length===1){var e=arguments[0];t.constructor_.call(this,e,null)}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.pts=n,this._label=s}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Bu&&arguments[0]instanceof zt))return S(t,"updateIM",this).apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,B.ON),e.getLocation(1,B.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,B.LEFT),e.getLocation(1,B.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,B.RIGHT),e.getLocation(1,B.RIGHT),2))}}])}(Cr),Wr=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),s=t.getLabel();e.isPointwiseEqual(t)||(s=new zt(t.getLabel())).flip(),n.merge(s);var u=i.depthDelta(s),c=e.getDepthDelta()+u;e.setDepthDelta(c)}else this._edgeList.add(t),t.setDepthDelta(i.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new rt,s=t.iterator();s.hasNext();){var u=s.next(),c=u.getRightmostCoordinate(),g=new Xr(n).getDepth(c);u.computeDepth(g),u.findResultEdges(),n.add(u),e.add(u.getDirectedEdges(),u.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new rt,n=t.getNodes().iterator();n.hasNext();){var s=n.next();if(!s.isVisited()){var u=new Qa;u.create(s),e.add(u)}}return Ae.sort(e,Ae.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new Ci,n=new xe;return n.setPrecisionModel(t),e.setSegmentIntersector(new zu(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var s=new Lu(n,this._bufParams),u=new Ou(t,e,s).getCurves();if(u.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(u,n),this._graph=new Ar(new Gu),this._graph.addEdges(this._edgeList.getEdges());var c=this.createSubgraphs(this._graph),g=new du(this._geomFact);this.buildSubgraphs(c,g);var y=g.getPolygons();return y.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(y)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var s=n.getNodedSubstrings().iterator();s.hasNext();){var u=s.next(),c=u.getCoordinates();if(c.length!==2||!c[0].equals2D(c[1])){var g=u.getData(),y=new Zr(u.getCoordinates(),new zt(g));this.insertUniqueEdge(y)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new qu;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,B.LEFT),n=t.getLocation(0,B.RIGHT);return e===N.INTERIOR&&n===N.EXTERIOR?1:e===N.EXTERIOR&&n===N.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new Oe,n=new rt;t.hasNext();){var s=t.next(),u=e.createLineString(s.getCoordinates());n.add(u)}return e.buildGeometry(n)}}])}(),$u=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"rescale",value:function(){if(lt(arguments[0],Kt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],s=0;s<n.length;s++)n[s].x=n[s].x/this._scaleFactor+this._offsetX,n[s].y=n[s].y/this._scaleFactor+this._offsetY;n.length===2&&n[0].equals2D(n[1])&&Gt.out.println(n)}}},{key:"scale",value:function(){if(lt(arguments[0],Kt)){for(var t=arguments[0],e=new rt(t.size()),n=t.iterator();n.hasNext();){var s=n.next();e.add(new Ee(this.scale(s.getCoordinates()),s.getData()))}return e}if(arguments[0]instanceof Array){for(var u=arguments[0],c=new Array(u.length).fill(null),g=0;g<u.length;g++)c[g]=new C(Math.round((u[g].x-this._offsetX)*this._scaleFactor),Math.round((u[g].y-this._offsetY)*this._scaleFactor),u[g].getZ());return It.removeRepeatedPoints(c)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[Ti]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];i.constructor_.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],s=arguments[1];this._noder=n,this._scaleFactor=s,this._isScaled=!this.isIntegerPrecision()}}}])}(),Kr=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(arguments.length===2){for(var n=arguments[0],s=arguments[1].iterator();s.hasNext();)for(var u=s.next().getCoordinates(),c=1;c<u.length-1;c++)if(u[c].equals(n))throw new ht("found endpt/interior pt intersection at index "+c+" :pt "+n)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var s=n.next();this.checkInteriorIntersections(e,s)}else if(arguments.length===2)for(var u=arguments[0],c=arguments[1],g=u.getCoordinates(),y=c.getCoordinates(),x=0;x<g.length-1;x++)for(var T=0;T<y.length-1;T++)this.checkInteriorIntersections(u,x,c,T);else if(arguments.length===4){var R=arguments[0],D=arguments[1],W=arguments[2],J=arguments[3];if(R===W&&D===J)return null;var et=R.getCoordinates()[D],gt=R.getCoordinates()[D+1],ct=W.getCoordinates()[J],yt=W.getCoordinates()[J+1];if(this._li.computeIntersection(et,gt,ct,yt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,et,gt)||this.hasInteriorIntersection(this._li,ct,yt)))throw new ht("found non-noded intersection at "+et+"-"+gt+" and "+ct+"-"+yt)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0].getCoordinates(),s=0;s<n.length-2;s++)this.checkCollapse(n[s],n[s+1],n[s+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var s=0;s<t.getIntersectionNum();s++){var u=t.getIntersection(s);if(!u.equals(e)&&!u.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,e,n){if(t.equals(n))throw new ht("found non-noded collapse at "+i.fact.createLineString([t,e,n]))}}],[{key:"constructor_",value:function(){this._li=new xe,this._segStrings=null;var t=arguments[0];this._segStrings=t}}])}();Kr.fact=new Oe;var Li=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),s=Math.max(t.x,e.x),u=Math.min(t.y,e.y),c=Math.max(t.y,e.y),g=this._maxx<n||this._minx>s||this._maxy<u||this._miny>c;if(g)return!1;var y=this.intersectsToleranceSquare(t,e);return j.isTrue(!(g&&y),"Found bad envelope test"),y}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new C(this._maxx,this._maxy),this._corner[1]=new C(this._minx,this._maxy),this._corner[2]=new C(this._minx,this._miny),this._corner[3]=new C(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var t=i.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new _t(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,s=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(s=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!s)||!!t.equals(this._pt)||!!e.equals(this._pt))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),s=t.getCoordinate(e+1);return!!this.intersects(n,s)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new A("Scale factor must be non-zero");e!==1&&(this._pt=new C(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new C,this._p1Scaled=new C),this.initCorners(this._pt)}}])}();Li.SAFE_ENV_EXPANSION_FACTOR=.75;var Zu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var i=arguments[1];arguments[0].getLineSegment(i,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Pt}}])}(),Qr=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var i=arguments[0];return this.snap(i,null,-1)}if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],s=t.getSafeEnvelope(),u=new Jr(t,e,n);return this._index.query(s,new(function(){return f(function c(){h(this,c)},[{key:"interfaces_",get:function(){return[Dr]}},{key:"visitItem",value:function(c){c.select(s,u)}}])}())),u.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var i=arguments[0];this._index=i}}])}(),Jr=function(i){function t(){var e;return h(this,t),e=l(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Gr))return S(t,"select",this,1).apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],s=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=s}}])}(Zu);Qr.HotPixelSnapAction=Jr;var Wu=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(i,t,e,n){if(i===e&&t===n)return null;var s=i.getCoordinates()[t],u=i.getCoordinates()[t+1],c=e.getCoordinates()[n],g=e.getCoordinates()[n+1];if(this._li.computeIntersection(s,u,c,g),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var y=0;y<this._li.getIntersectionNum();y++)this._interiorIntersections.add(this._li.getIntersection(y));i.addIntersections(this._li,t,0),e.addIntersections(this._li,n,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Hr]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var i=arguments[0];this._li=i,this._interiorIntersections=new rt}}])}(),Ku=function(){return f(function i(){h(this,i),i.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(i){var t=Ee.getNodedSubstrings(i),e=new Kr(t);try{e.checkValid()}catch(n){if(!(n instanceof Y))throw n;n.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Ee.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(i,t){var e=this.findInteriorIntersections(i,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(i)}},{key:"findInteriorIntersections",value:function(i,t){var e=new Wu(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(i),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(lt(arguments[0],Kt))for(var i=arguments[0].iterator();i.hasNext();){var t=i.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof Ee)for(var e=arguments[0],n=e.getCoordinates(),s=0;s<n.length;s++){var u=new Li(n[s],this._scaleFactor,this._li);this._pointSnapper.snap(u,e,s)&&e.addIntersection(n[s],s)}}},{key:"computeNodes",value:function(i){this._nodedSegStrings=i,this._noder=new Ci,this._pointSnapper=new Qr(this._noder.getIndex()),this.snapRound(i,this._li)}},{key:"computeIntersectionSnaps",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next(),n=new Li(e,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[Ti]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var i=arguments[0];this._pm=i,this._li=new xe,this._li.setPrecisionModel(i),this._scaleFactor=i.getScale()}}])}(),Fe=function(){function i(){h(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"bufferFixedPrecision",value:function(t){var e=new $u(new Ku(new Vt(1)),t.getScale()),n=new Wr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var t=i.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(u){if(!(u instanceof se))throw u;this._saveException=u}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var e=arguments[0],n=i.precisionScaleFactor(this._argGeom,this._distance,e),s=new Vt(n);this.bufferFixedPrecision(s)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Vt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new Wr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof ht))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new b,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(arguments.length===2){var t=arguments[1];return new i(arguments[0]).getResultGeometry(t)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof tt&&typeof arguments[1]=="number"){var e=arguments[1],n=arguments[2],s=new i(arguments[0]);return s.setQuadrantSegments(n),s.getResultGeometry(e)}if(arguments[2]instanceof b&&arguments[0]instanceof tt&&typeof arguments[1]=="number"){var u=arguments[1];return new i(arguments[0],arguments[2]).getResultGeometry(u)}}else if(arguments.length===4){var c=arguments[1],g=arguments[2],y=arguments[3],x=new i(arguments[0]);return x.setQuadrantSegments(g),x.setEndCapStyle(y),x.getResultGeometry(c)}}},{key:"precisionScaleFactor",value:function(t,e,n){var s=t.getEnvelopeInternal(),u=Ke.max(Math.abs(s.getMaxX()),Math.abs(s.getMaxY()),Math.abs(s.getMinX()),Math.abs(s.getMinY()))+2*(e>0?e:0),c=n-Math.trunc(Math.log(u)/Math.log(10)+1);return Math.pow(10,c)}}])}();Fe.CAP_ROUND=b.CAP_ROUND,Fe.CAP_BUTT=b.CAP_FLAT,Fe.CAP_FLAT=b.CAP_FLAT,Fe.CAP_SQUARE=b.CAP_SQUARE,Fe.MAX_PRECISION_DIGITS=12;var Qu=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],jr=function(){return f(function i(t){h(this,i),this.geometryFactory=t||new Oe},[{key:"read",value:function(i){var t,e=(t=typeof i=="string"?JSON.parse(i):i).type;if(!Xt[e])throw new Error("Unknown GeoJSON type: "+t.type);return Qu.indexOf(e)!==-1?Xt[e].call(this,t.coordinates):e==="GeometryCollection"?Xt[e].call(this,t.geometries):Xt[e].call(this,t)}},{key:"write",value:function(i){var t=i.getGeometryType();if(!te[t])throw new Error("Geometry is not supported");return te[t].call(this,i)}}])}(),Xt={Feature:function(i){var t={};for(var e in i)t[e]=i[e];if(i.geometry){var n=i.geometry.type;if(!Xt[n])throw new Error("Unknown GeoJSON type: "+i.type);t.geometry=this.read(i.geometry)}return i.bbox&&(t.bbox=Xt.bbox.call(this,i.bbox)),t},FeatureCollection:function(i){var t={};if(i.features){t.features=[];for(var e=0;e<i.features.length;++e)t.features.push(this.read(i.features[e]))}return i.bbox&&(t.bbox=this.parse.bbox.call(this,i.bbox)),t},coordinates:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(m(C,O(n)))}return t},bbox:function(i){return this.geometryFactory.createLinearRing([new C(i[0],i[1]),new C(i[2],i[1]),new C(i[2],i[3]),new C(i[0],i[3]),new C(i[0],i[1])])},Point:function(i){var t=m(C,O(i));return this.geometryFactory.createPoint(t)},MultiPoint:function(i){for(var t=[],e=0;e<i.length;++e)t.push(Xt.Point.call(this,i[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(i){var t=Xt.coordinates.call(this,i);return this.geometryFactory.createLineString(t)},MultiLineString:function(i){for(var t=[],e=0;e<i.length;++e)t.push(Xt.LineString.call(this,i[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(i){for(var t=Xt.coordinates.call(this,i[0]),e=this.geometryFactory.createLinearRing(t),n=[],s=1;s<i.length;++s){var u=i[s],c=Xt.coordinates.call(this,u),g=this.geometryFactory.createLinearRing(c);n.push(g)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(Xt.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(this.read(n))}return this.geometryFactory.createGeometryCollection(t)}},te={coordinate:function(i){var t=[i.x,i.y];return i.z&&t.push(i.z),i.m&&t.push(i.m),t},Point:function(i){return{type:"Point",coordinates:te.coordinate.call(this,i.getCoordinate())}},MultiPoint:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],s=te.Point.call(this,n);t.push(s.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(i){for(var t=[],e=i.getCoordinates(),n=0;n<e.length;++n){var s=e[n];t.push(te.coordinate.call(this,s))}return{type:"LineString",coordinates:t}},MultiLineString:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],s=te.LineString.call(this,n);t.push(s.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(i){var t=[],e=te.LineString.call(this,i._shell);t.push(e.coordinates);for(var n=0;n<i._holes.length;++n){var s=i._holes[n],u=te.LineString.call(this,s);t.push(u.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],s=te.Polygon.call(this,n);t.push(s.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],s=n.getGeometryType();t.push(te[s].call(this,n))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:Fe,GeoJSONReader:function(){return f(function i(t){h(this,i),this.parser=new jr(t||new Oe)},[{key:"read",value:function(i){return this.parser.read(i)}}])}(),GeoJSONWriter:function(){return f(function i(){h(this,i),this.parser=new jr(this.geometryFactory)},[{key:"write",value:function(i){return this.parser.write(i)}}])}()}})})(La);var Mf=La.exports;const Of=Rf(Mf);function ve(){return new ri}function ri(){this.reset()}ri.prototype={constructor:ri,reset:function(){this.s=this.t=0},add:function(r){As(Pn,r,this.t),As(this,Pn.s,this.s),this.s?this.t+=Pn.t:this.s=Pn.t},valueOf:function(){return this.s}};var Pn=new ri;function As(r,a,o){var l=r.s=a+o,h=l-a,m=l-h;r.t=a-m+(o-h)}var kt=1e-6,mt=Math.PI,ee=mt/2,Ps=mt/4,ie=mt*2,me=180/mt,Bt=mt/180,wt=Math.abs,bf=Math.atan,Ue=Math.atan2,xt=Math.cos,Et=Math.sin,$e=Math.sqrt;function Ma(r){return r>1?0:r<-1?mt:Math.acos(r)}function Le(r){return r>1?ee:r<-1?-ee:Math.asin(r)}function hn(){}function si(r,a){r&&Fs.hasOwnProperty(r.type)&&Fs[r.type](r,a)}var Ds={Feature:function(r,a){si(r.geometry,a)},FeatureCollection:function(r,a){for(var o=r.features,l=-1,h=o.length;++l<h;)si(o[l].geometry,a)}},Fs={Sphere:function(r,a){a.sphere()},Point:function(r,a){r=r.coordinates,a.point(r[0],r[1],r[2])},MultiPoint:function(r,a){for(var o=r.coordinates,l=-1,h=o.length;++l<h;)r=o[l],a.point(r[0],r[1],r[2])},LineString:function(r,a){Qi(r.coordinates,a,0)},MultiLineString:function(r,a){for(var o=r.coordinates,l=-1,h=o.length;++l<h;)Qi(o[l],a,0)},Polygon:function(r,a){Gs(r.coordinates,a)},MultiPolygon:function(r,a){for(var o=r.coordinates,l=-1,h=o.length;++l<h;)Gs(o[l],a)},GeometryCollection:function(r,a){for(var o=r.geometries,l=-1,h=o.length;++l<h;)si(o[l],a)}};function Qi(r,a,o){var l=-1,h=r.length-o,m;for(a.lineStart();++l<h;)m=r[l],a.point(m[0],m[1],m[2]);a.lineEnd()}function Gs(r,a){var o=-1,l=r.length;for(a.polygonStart();++o<l;)Qi(r[o],a,1);a.polygonEnd()}function Af(r,a){r&&Ds.hasOwnProperty(r.type)?Ds[r.type](r,a):si(r,a)}ve();ve();function Ji(r){return[Ue(r[1],r[0]),Le(r[2])]}function Ve(r){var a=r[0],o=r[1],l=xt(o);return[l*xt(a),l*Et(a),Et(o)]}function Dn(r,a){return r[0]*a[0]+r[1]*a[1]+r[2]*a[2]}function ai(r,a){return[r[1]*a[2]-r[2]*a[1],r[2]*a[0]-r[0]*a[2],r[0]*a[1]-r[1]*a[0]]}function Fi(r,a){r[0]+=a[0],r[1]+=a[1],r[2]+=a[2]}function Fn(r,a){return[r[0]*a,r[1]*a,r[2]*a]}function ji(r){var a=$e(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=a,r[1]/=a,r[2]/=a}ve();function Oa(r,a){function o(l,h){return l=r(l,h),a(l[0],l[1])}return r.invert&&a.invert&&(o.invert=function(l,h){return l=a.invert(l,h),l&&r.invert(l[0],l[1])}),o}function tr(r,a){return[r>mt?r-ie:r<-mt?r+ie:r,a]}tr.invert=tr;function Pf(r,a,o){return(r%=ie)?a||o?Oa(zs(r),Ys(a,o)):zs(r):a||o?Ys(a,o):tr}function qs(r){return function(a,o){return a+=r,[a>mt?a-ie:a<-mt?a+ie:a,o]}}function zs(r){var a=qs(r);return a.invert=qs(-r),a}function Ys(r,a){var o=xt(r),l=Et(r),h=xt(a),m=Et(a);function v(f,k){var _=xt(k),p=xt(f)*_,d=Et(f)*_,E=Et(k),w=E*o+p*l;return[Ue(d*h-w*m,p*o-E*l),Le(w*h+d*m)]}return v.invert=function(f,k){var _=xt(k),p=xt(f)*_,d=Et(f)*_,E=Et(k),w=E*h-d*m;return[Ue(d*h+E*m,p*o+w*l),Le(w*o-p*l)]},v}function Df(r,a,o,l,h,m){if(o){var v=xt(a),f=Et(a),k=l*o;h==null?(h=a+l*ie,m=a-k/2):(h=Xs(v,h),m=Xs(v,m),(l>0?h<m:h>m)&&(h+=l*ie));for(var _,p=h;l>0?p>m:p<m;p-=k)_=Ji([v,-f*xt(p),-f*Et(p)]),r.point(_[0],_[1])}}function Xs(r,a){a=Ve(a),a[0]-=r,ji(a);var o=Ma(-a[1]);return((-a[2]<0?-o:o)+ie-kt)%ie}function ba(){var r=[],a;return{point:function(o,l){a.push([o,l])},lineStart:function(){r.push(a=[])},lineEnd:hn,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var o=r;return r=[],a=null,o}}}function Ff(r,a,o,l,h,m){var v=r[0],f=r[1],k=a[0],_=a[1],p=0,d=1,E=k-v,w=_-f,S;if(S=o-v,!(!E&&S>0)){if(S/=E,E<0){if(S<p)return;S<d&&(d=S)}else if(E>0){if(S>d)return;S>p&&(p=S)}if(S=h-v,!(!E&&S<0)){if(S/=E,E<0){if(S>d)return;S>p&&(p=S)}else if(E>0){if(S<p)return;S<d&&(d=S)}if(S=l-f,!(!w&&S>0)){if(S/=w,w<0){if(S<p)return;S<d&&(d=S)}else if(w>0){if(S>d)return;S>p&&(p=S)}if(S=m-f,!(!w&&S<0)){if(S/=w,w<0){if(S>d)return;S>p&&(p=S)}else if(w>0){if(S<p)return;S<d&&(d=S)}return p>0&&(r[0]=v+p*E,r[1]=f+p*w),d<1&&(a[0]=v+d*E,a[1]=f+d*w),!0}}}}}function Hn(r,a){return wt(r[0]-a[0])<kt&&wt(r[1]-a[1])<kt}function Gn(r,a,o,l){this.x=r,this.z=a,this.o=o,this.e=l,this.v=!1,this.n=this.p=null}function Aa(r,a,o,l,h){var m=[],v=[],f,k;if(r.forEach(function(S){if(!((O=S.length-1)<=0)){var O,P=S[0],L=S[O],F;if(Hn(P,L)){for(h.lineStart(),f=0;f<O;++f)h.point((P=S[f])[0],P[1]);h.lineEnd();return}m.push(F=new Gn(P,S,null,!0)),v.push(F.o=new Gn(P,null,F,!1)),m.push(F=new Gn(L,S,null,!1)),v.push(F.o=new Gn(L,null,F,!0))}}),!!m.length){for(v.sort(a),Bs(m),Bs(v),f=0,k=v.length;f<k;++f)v[f].e=o=!o;for(var _=m[0],p,d;;){for(var E=_,w=!0;E.v;)if((E=E.n)===_)return;p=E.z,h.lineStart();do{if(E.v=E.o.v=!0,E.e){if(w)for(f=0,k=p.length;f<k;++f)h.point((d=p[f])[0],d[1]);else l(E.x,E.n.x,1,h);E=E.n}else{if(w)for(p=E.p.z,f=p.length-1;f>=0;--f)h.point((d=p[f])[0],d[1]);else l(E.x,E.p.x,-1,h);E=E.p}E=E.o,p=E.z,w=!w}while(!E.v);h.lineEnd()}}}function Bs(r){if(a=r.length){for(var a,o=0,l=r[0],h;++o<a;)l.n=h=r[o],h.p=l,l=h;l.n=h=r[0],h.p=l}}function Pa(r,a){return r<a?-1:r>a?1:r>=a?0:NaN}function Gf(r){return r.length===1&&(r=qf(r)),{left:function(a,o,l,h){for(l==null&&(l=0),h==null&&(h=a.length);l<h;){var m=l+h>>>1;r(a[m],o)<0?l=m+1:h=m}return l},right:function(a,o,l,h){for(l==null&&(l=0),h==null&&(h=a.length);l<h;){var m=l+h>>>1;r(a[m],o)>0?h=m:l=m+1}return l}}}function qf(r){return function(a,o){return Pa(r(a),o)}}Gf(Pa);function Da(r){for(var a=r.length,o,l=-1,h=0,m,v;++l<a;)h+=r[l].length;for(m=new Array(h);--a>=0;)for(v=r[a],o=v.length;--o>=0;)m[--h]=v[o];return m}var qn=1e9,zn=-1e9;function zf(r,a,o,l){function h(_,p){return r<=_&&_<=o&&a<=p&&p<=l}function m(_,p,d,E){var w=0,S=0;if(_==null||(w=v(_,d))!==(S=v(p,d))||k(_,p)<0^d>0)do E.point(w===0||w===3?r:o,w>1?l:a);while((w=(w+d+4)%4)!==S);else E.point(p[0],p[1])}function v(_,p){return wt(_[0]-r)<kt?p>0?0:3:wt(_[0]-o)<kt?p>0?2:1:wt(_[1]-a)<kt?p>0?1:0:p>0?3:2}function f(_,p){return k(_.x,p.x)}function k(_,p){var d=v(_,1),E=v(p,1);return d!==E?d-E:d===0?p[1]-_[1]:d===1?_[0]-p[0]:d===2?_[1]-p[1]:p[0]-_[0]}return function(_){var p=_,d=ba(),E,w,S,O,P,L,F,b,Y,A,X,q={point:$,lineStart:it,lineEnd:at,polygonStart:nt,polygonEnd:Z};function $(G,M){h(G,M)&&p.point(G,M)}function U(){for(var G=0,M=0,V=w.length;M<V;++M)for(var Q=w[M],K=1,z=Q.length,ot=Q[0],ht,dt,j=ot[0],Nt=ot[1];K<z;++K)ht=j,dt=Nt,ot=Q[K],j=ot[0],Nt=ot[1],dt<=l?Nt>l&&(j-ht)*(l-dt)>(Nt-dt)*(r-ht)&&++G:Nt<=l&&(j-ht)*(l-dt)<(Nt-dt)*(r-ht)&&--G;return G}function nt(){p=d,E=[],w=[],X=!0}function Z(){var G=U(),M=X&&G,V=(E=Da(E)).length;(M||V)&&(_.polygonStart(),M&&(_.lineStart(),m(null,null,1,_),_.lineEnd()),V&&Aa(E,f,G,m,_),_.polygonEnd()),p=_,E=w=S=null}function it(){q.point=I,w&&w.push(S=[]),A=!0,Y=!1,F=b=NaN}function at(){E&&(I(O,P),L&&Y&&d.rejoin(),E.push(d.result())),q.point=$,Y&&p.lineEnd()}function I(G,M){var V=h(G,M);if(w&&S.push([G,M]),A)O=G,P=M,L=V,A=!1,V&&(p.lineStart(),p.point(G,M));else if(V&&Y)p.point(G,M);else{var Q=[F=Math.max(zn,Math.min(qn,F)),b=Math.max(zn,Math.min(qn,b))],K=[G=Math.max(zn,Math.min(qn,G)),M=Math.max(zn,Math.min(qn,M))];Ff(Q,K,r,a,o,l)?(Y||(p.lineStart(),p.point(Q[0],Q[1])),p.point(K[0],K[1]),V||p.lineEnd(),X=!1):V&&(p.lineStart(),p.point(G,M),X=!1)}F=G,b=M,Y=V}return q}}var Gi=ve();function Yf(r,a){var o=a[0],l=a[1],h=[Et(o),-xt(o),0],m=0,v=0;Gi.reset();for(var f=0,k=r.length;f<k;++f)if(p=(_=r[f]).length)for(var _,p,d=_[p-1],E=d[0],w=d[1]/2+Ps,S=Et(w),O=xt(w),P=0;P<p;++P,E=F,S=Y,O=A,d=L){var L=_[P],F=L[0],b=L[1]/2+Ps,Y=Et(b),A=xt(b),X=F-E,q=X>=0?1:-1,$=q*X,U=$>mt,nt=S*Y;if(Gi.add(Ue(nt*q*Et($),O*A+nt*xt($))),m+=U?X+q*ie:X,U^E>=o^F>=o){var Z=ai(Ve(d),Ve(L));ji(Z);var it=ai(h,Z);ji(it);var at=(U^X>=0?-1:1)*Le(it[2]);(l>at||l===at&&(Z[0]||Z[1]))&&(v+=U^X>=0?1:-1)}}return(m<-1e-6||m<kt&&Gi<-1e-6)^v&1}ve();function Us(r){return r}ve();ve();var He=1/0,ui=He,mn=-He,oi=mn,Vs={point:Xf,lineStart:hn,lineEnd:hn,polygonStart:hn,polygonEnd:hn,result:function(){var r=[[He,ui],[mn,oi]];return mn=oi=-(ui=He=1/0),r}};function Xf(r,a){r<He&&(He=r),r>mn&&(mn=r),a<ui&&(ui=a),a>oi&&(oi=a)}ve();function Fa(r,a,o,l){return function(h,m){var v=a(m),f=h.invert(l[0],l[1]),k=ba(),_=a(k),p=!1,d,E,w,S={point:O,lineStart:L,lineEnd:F,polygonStart:function(){S.point=b,S.lineStart=Y,S.lineEnd=A,E=[],d=[]},polygonEnd:function(){S.point=O,S.lineStart=L,S.lineEnd=F,E=Da(E);var X=Yf(d,f);E.length?(p||(m.polygonStart(),p=!0),Aa(E,Uf,X,o,m)):X&&(p||(m.polygonStart(),p=!0),m.lineStart(),o(null,null,1,m),m.lineEnd()),p&&(m.polygonEnd(),p=!1),E=d=null},sphere:function(){m.polygonStart(),m.lineStart(),o(null,null,1,m),m.lineEnd(),m.polygonEnd()}};function O(X,q){var $=h(X,q);r(X=$[0],q=$[1])&&m.point(X,q)}function P(X,q){var $=h(X,q);v.point($[0],$[1])}function L(){S.point=P,v.lineStart()}function F(){S.point=O,v.lineEnd()}function b(X,q){w.push([X,q]);var $=h(X,q);_.point($[0],$[1])}function Y(){_.lineStart(),w=[]}function A(){b(w[0][0],w[0][1]),_.lineEnd();var X=_.clean(),q=k.result(),$,U=q.length,nt,Z,it;if(w.pop(),d.push(w),w=null,!!U){if(X&1){if(Z=q[0],(nt=Z.length-1)>0){for(p||(m.polygonStart(),p=!0),m.lineStart(),$=0;$<nt;++$)m.point((it=Z[$])[0],it[1]);m.lineEnd()}return}U>1&&X&2&&q.push(q.pop().concat(q.shift())),E.push(q.filter(Bf))}}return S}}function Bf(r){return r.length>1}function Uf(r,a){return((r=r.x)[0]<0?r[1]-ee-kt:ee-r[1])-((a=a.x)[0]<0?a[1]-ee-kt:ee-a[1])}const Hs=Fa(function(){return!0},Vf,$f,[-mt,-ee]);function Vf(r){var a=NaN,o=NaN,l=NaN,h;return{lineStart:function(){r.lineStart(),h=1},point:function(m,v){var f=m>0?mt:-mt,k=wt(m-a);wt(k-mt)<kt?(r.point(a,o=(o+v)/2>0?ee:-ee),r.point(l,o),r.lineEnd(),r.lineStart(),r.point(f,o),r.point(m,o),h=0):l!==f&&k>=mt&&(wt(a-l)<kt&&(a-=l*kt),wt(m-f)<kt&&(m-=f*kt),o=Hf(a,o,m,v),r.point(l,o),r.lineEnd(),r.lineStart(),r.point(f,o),h=0),r.point(a=m,o=v),l=f},lineEnd:function(){r.lineEnd(),a=o=NaN},clean:function(){return 2-h}}}function Hf(r,a,o,l){var h,m,v=Et(r-o);return wt(v)>kt?bf((Et(a)*(m=xt(l))*Et(o)-Et(l)*(h=xt(a))*Et(r))/(h*m*v)):(a+l)/2}function $f(r,a,o,l){var h;if(r==null)h=o*ee,l.point(-mt,h),l.point(0,h),l.point(mt,h),l.point(mt,0),l.point(mt,-h),l.point(0,-h),l.point(-mt,-h),l.point(-mt,0),l.point(-mt,h);else if(wt(r[0]-a[0])>kt){var m=r[0]<a[0]?mt:-mt;h=o*m/2,l.point(-m,h),l.point(0,h),l.point(m,h)}else l.point(a[0],a[1])}function Zf(r,a){var o=xt(r),l=o>0,h=wt(o)>kt;function m(p,d,E,w){Df(w,r,a,E,p,d)}function v(p,d){return xt(p)*xt(d)>o}function f(p){var d,E,w,S,O;return{lineStart:function(){S=w=!1,O=1},point:function(P,L){var F=[P,L],b,Y=v(P,L),A=l?Y?0:_(P,L):Y?_(P+(P<0?mt:-mt),L):0;if(!d&&(S=w=Y)&&p.lineStart(),Y!==w&&(b=k(d,F),(!b||Hn(d,b)||Hn(F,b))&&(F[0]+=kt,F[1]+=kt,Y=v(F[0],F[1]))),Y!==w)O=0,Y?(p.lineStart(),b=k(F,d),p.point(b[0],b[1])):(b=k(d,F),p.point(b[0],b[1]),p.lineEnd()),d=b;else if(h&&d&&l^Y){var X;!(A&E)&&(X=k(F,d,!0))&&(O=0,l?(p.lineStart(),p.point(X[0][0],X[0][1]),p.point(X[1][0],X[1][1]),p.lineEnd()):(p.point(X[1][0],X[1][1]),p.lineEnd(),p.lineStart(),p.point(X[0][0],X[0][1])))}Y&&(!d||!Hn(d,F))&&p.point(F[0],F[1]),d=F,w=Y,E=A},lineEnd:function(){w&&p.lineEnd(),d=null},clean:function(){return O|(S&&w)<<1}}}function k(p,d,E){var w=Ve(p),S=Ve(d),O=[1,0,0],P=ai(w,S),L=Dn(P,P),F=P[0],b=L-F*F;if(!b)return!E&&p;var Y=o*L/b,A=-o*F/b,X=ai(O,P),q=Fn(O,Y),$=Fn(P,A);Fi(q,$);var U=X,nt=Dn(q,U),Z=Dn(U,U),it=nt*nt-Z*(Dn(q,q)-1);if(!(it<0)){var at=$e(it),I=Fn(U,(-nt-at)/Z);if(Fi(I,q),I=Ji(I),!E)return I;var G=p[0],M=d[0],V=p[1],Q=d[1],K;M<G&&(K=G,G=M,M=K);var z=M-G,ot=wt(z-mt)<kt,ht=ot||z<kt;if(!ot&&Q<V&&(K=V,V=Q,Q=K),ht?ot?V+Q>0^I[1]<(wt(I[0]-G)<kt?V:Q):V<=I[1]&&I[1]<=Q:z>mt^(G<=I[0]&&I[0]<=M)){var dt=Fn(U,(-nt+at)/Z);return Fi(dt,q),[I,Ji(dt)]}}}function _(p,d){var E=l?r:mt-r,w=0;return p<-E?w|=1:p>E&&(w|=2),d<-E?w|=4:d>E&&(w|=8),w}return Fa(v,f,m,l?[0,-r]:[-mt,r-mt])}function Ga(r){return function(a){var o=new er;for(var l in r)o[l]=r[l];return o.stream=a,o}}function er(){}er.prototype={constructor:er,point:function(r,a){this.stream.point(r,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qa(r,a,o){var l=a[1][0]-a[0][0],h=a[1][1]-a[0][1],m=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),m!=null&&r.clipExtent(null),Af(o,r.stream(Vs));var v=Vs.result(),f=Math.min(l/(v[1][0]-v[0][0]),h/(v[1][1]-v[0][1])),k=+a[0][0]+(l-f*(v[1][0]+v[0][0]))/2,_=+a[0][1]+(h-f*(v[1][1]+v[0][1]))/2;return m!=null&&r.clipExtent(m),r.scale(f*150).translate([k,_])}function Wf(r,a,o){return qa(r,[[0,0],a],o)}var $s=16,Kf=xt(30*Bt);function Zs(r,a){return+a?Jf(r,a):Qf(r)}function Qf(r){return Ga({point:function(a,o){a=r(a,o),this.stream.point(a[0],a[1])}})}function Jf(r,a){function o(l,h,m,v,f,k,_,p,d,E,w,S,O,P){var L=_-l,F=p-h,b=L*L+F*F;if(b>4*a&&O--){var Y=v+E,A=f+w,X=k+S,q=$e(Y*Y+A*A+X*X),$=Le(X/=q),U=wt(wt(X)-1)<kt||wt(m-d)<kt?(m+d)/2:Ue(A,Y),nt=r(U,$),Z=nt[0],it=nt[1],at=Z-l,I=it-h,G=F*at-L*I;(G*G/b>a||wt((L*at+F*I)/b-.5)>.3||v*E+f*w+k*S<Kf)&&(o(l,h,m,v,f,k,Z,it,U,Y/=q,A/=q,X,O,P),P.point(Z,it),o(Z,it,U,Y,A,X,_,p,d,E,w,S,O,P))}}return function(l){var h,m,v,f,k,_,p,d,E,w,S,O,P={point:L,lineStart:F,lineEnd:Y,polygonStart:function(){l.polygonStart(),P.lineStart=A},polygonEnd:function(){l.polygonEnd(),P.lineStart=F}};function L($,U){$=r($,U),l.point($[0],$[1])}function F(){d=NaN,P.point=b,l.lineStart()}function b($,U){var nt=Ve([$,U]),Z=r($,U);o(d,E,p,w,S,O,d=Z[0],E=Z[1],p=$,w=nt[0],S=nt[1],O=nt[2],$s,l),l.point(d,E)}function Y(){P.point=L,l.lineEnd()}function A(){F(),P.point=X,P.lineEnd=q}function X($,U){b(h=$,U),m=d,v=E,f=w,k=S,_=O,P.point=b}function q(){o(d,E,p,w,S,O,m,v,h,f,k,_,$s,l),P.lineEnd=Y,Y()}return P}}var jf=Ga({point:function(r,a){this.stream.point(r*Bt,a*Bt)}});function tg(r){return eg(function(){return r})()}function eg(r){var a,o=150,l=480,h=250,m,v,f=0,k=0,_=0,p=0,d=0,E,w,S=null,O=Hs,P=null,L,F,b,Y=Us,A=.5,X=Zs(Z,A),q,$;function U(I){return I=w(I[0]*Bt,I[1]*Bt),[I[0]*o+m,v-I[1]*o]}function nt(I){return I=w.invert((I[0]-m)/o,(v-I[1])/o),I&&[I[0]*me,I[1]*me]}function Z(I,G){return I=a(I,G),[I[0]*o+m,v-I[1]*o]}U.stream=function(I){return q&&$===I?q:q=jf(O(E,X(Y($=I))))},U.clipAngle=function(I){return arguments.length?(O=+I?Zf(S=I*Bt,6*Bt):(S=null,Hs),at()):S*me},U.clipExtent=function(I){return arguments.length?(Y=I==null?(P=L=F=b=null,Us):zf(P=+I[0][0],L=+I[0][1],F=+I[1][0],b=+I[1][1]),at()):P==null?null:[[P,L],[F,b]]},U.scale=function(I){return arguments.length?(o=+I,it()):o},U.translate=function(I){return arguments.length?(l=+I[0],h=+I[1],it()):[l,h]},U.center=function(I){return arguments.length?(f=I[0]%360*Bt,k=I[1]%360*Bt,it()):[f*me,k*me]},U.rotate=function(I){return arguments.length?(_=I[0]%360*Bt,p=I[1]%360*Bt,d=I.length>2?I[2]%360*Bt:0,it()):[_*me,p*me,d*me]},U.precision=function(I){return arguments.length?(X=Zs(Z,A=I*I),at()):$e(A)},U.fitExtent=function(I,G){return qa(U,I,G)},U.fitSize=function(I,G){return Wf(U,I,G)};function it(){w=Oa(E=Pf(_,p,d),a);var I=a(f,k);return m=l-I[0]*o,v=h+I[1]*o,at()}function at(){return q=$=null,U}return function(){return a=r.apply(this,arguments),U.invert=a.invert&&nt,it()}}function za(r){return function(a,o){var l=xt(a),h=xt(o),m=r(l*h);return[m*h*Et(a),m*Et(o)]}}function Ya(r){return function(a,o){var l=$e(a*a+o*o),h=r(l),m=Et(h),v=xt(h);return[Ue(a*m,l*v),Le(l&&o*m/l)]}}var ng=za(function(r){return $e(2/(1+r))});ng.invert=Ya(function(r){return 2*Le(r/2)});var Xa=za(function(r){return(r=Ma(r))&&r/Et(r)});Xa.invert=Ya(function(r){return r});function ig(){return tg(Xa).scale(79.4188).clipAngle(180-.001)}function Ws(r,a){return[r,a]}Ws.invert=Ws;var{BufferOp:rg,GeoJSONReader:sg,GeoJSONWriter:ag}=Of;function dg(r,a,o){o=o||{};var l=o.units||"kilometers",h=o.steps||8;if(!r)throw new Error("geojson is required");if(typeof o!="object")throw new Error("options must be an object");if(typeof h!="number")throw new Error("steps must be an number");if(a===void 0)throw new Error("radius is required");if(h<=0)throw new Error("steps must be greater than 0");var m=[];switch(r.type){case"GeometryCollection":return Ra(r,function(v){var f=$n(v,a,l,h);f&&m.push(f)}),Ki(m);case"FeatureCollection":return bs(r,function(v){var f=$n(v,a,l,h);f&&bs(f,function(k){k&&m.push(k)})}),Ki(m)}return $n(r,a,l,h)}function $n(r,a,o,l){var h=r.properties||{},m=r.type==="Feature"?r.geometry:r;if(m.type==="GeometryCollection"){var v=[];return Ra(r,function(O){var P=$n(O,a,o,l);P&&v.push(P)}),Ki(v)}var f=ug(m),k={type:m.type,coordinates:Ua(m.coordinates,f)},_=new sg,p=_.read(k),d=xf(Ef(a,o),"meters"),E=rg.bufferOp(p,d,l),w=new ag;if(E=w.write(E),!Ba(E.coordinates)){var S={type:E.type,coordinates:Va(E.coordinates,f)};return Ta(S,h)}}function Ba(r){return Array.isArray(r[0])?Ba(r[0]):isNaN(r[0])}function Ua(r,a){return typeof r[0]!="object"?a(r):r.map(function(o){return Ua(o,a)})}function Va(r,a){return typeof r[0]!="object"?a.invert(r):r.map(function(o){return Va(o,a)})}function ug(r){var a=Lf(r).geometry.coordinates,o=[-a[0],-a[1]];return ig().rotate(o).scale(Ot)}export{yg as a,dg as b,gg as c,cg as d,hg as e,wa as i,gf as l,mg as m,kf as p,we as s,fg as u,vg as z};
