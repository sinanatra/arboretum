import{A as vl,s as Mn,n as Ne,d as rt,i as Nt,p as Yt,r as br,O as St,h as _t,P as Ct,z as hu,x as Y,Q as Ys,e as kt,y as Xs,R as Pi,f as Xe,l as Be,j as ce,t as fe,S as yl,b as wn,T as Bs,U as _l,k as mi,m as di}from"../chunks/CCjlHDLj.js";import{a as re,S as On,i as An,d as vi,t as Re,m as yi,e as _i,b as pi,c as cu,g as fu}from"../chunks/BDgAEpGB.js";function Xt(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Mr(r,s){r.d(1),s.delete(r.key)}function Or(r,s,u,o,l,m,f,c,y,v,_,p){let x=r.length,N=m.length,w=x;const A={};for(;w--;)A[r[w].key]=w;const q=[],R=new Map,P=new Map,b=[];for(w=N;w--;){const z=p(l,m,w),V=u(z);let B=f.get(V);B?b.push(()=>B.p(z,s)):(B=v(V,z),B.c()),R.set(V,q[w]=B),V in A&&P.set(V,Math.abs(w-A[V]))}const G=new Set,M=new Set;function D(z){re(z,1),z.m(c,_),f.set(z.key,z),_=z.first,N--}for(;x&&N;){const z=q[N-1],V=r[x-1],B=z.key,j=V.key;z===V?(_=z.first,x--,N--):R.has(j)?!f.has(B)||G.has(B)?D(z):M.has(j)?x--:P.get(B)>P.get(j)?(M.add(B),D(z)):(G.add(j),x--):(y(V,f),x--)}for(;x--;){const z=r[x];R.has(z.key)||y(z,f)}for(;N;)D(q[N-1]);return vl(b),q}function ui(r,s){return r==null||s==null?NaN:r<s?-1:r>s?1:r>=s?0:NaN}function pl(r,s){return r==null||s==null?NaN:s<r?-1:s>r?1:s>=r?0:NaN}function gu(r){let s,u,o;r.length!==2?(s=ui,u=(c,y)=>ui(r(c),y),o=(c,y)=>r(c)-y):(s=r===ui||r===pl?r:kl,u=r,o=r);function l(c,y,v=0,_=c.length){if(v<_){if(s(y,y)!==0)return _;do{const p=v+_>>>1;u(c[p],y)<0?v=p+1:_=p}while(v<_)}return v}function m(c,y,v=0,_=c.length){if(v<_){if(s(y,y)!==0)return _;do{const p=v+_>>>1;u(c[p],y)<=0?v=p+1:_=p}while(v<_)}return v}function f(c,y,v=0,_=c.length){const p=l(c,y,v,_-1);return p>v&&o(c[p-1],y)>-o(c[p],y)?p-1:p}return{left:l,center:f,right:m}}function kl(){return 0}function xl(r){return r===null?NaN:+r}const El=gu(ui),Nl=El.right;gu(xl).center;const wl=Math.sqrt(50),Il=Math.sqrt(10),Sl=Math.sqrt(2);function ki(r,s,u){const o=(s-r)/Math.max(0,u),l=Math.floor(Math.log10(o)),m=o/Math.pow(10,l),f=m>=wl?10:m>=Il?5:m>=Sl?2:1;let c,y,v;return l<0?(v=Math.pow(10,-l)/f,c=Math.round(r*v),y=Math.round(s*v),c/v<r&&++c,y/v>s&&--y,v=-v):(v=Math.pow(10,l)*f,c=Math.round(r/v),y=Math.round(s/v),c*v<r&&++c,y*v>s&&--y),y<c&&.5<=u&&u<2?ki(r,s,u*2):[c,y,v]}function Cl(r,s,u){if(s=+s,r=+r,u=+u,!(u>0))return[];if(r===s)return[r];const o=s<r,[l,m,f]=o?ki(s,r,u):ki(r,s,u);if(!(m>=l))return[];const c=m-l+1,y=new Array(c);if(o)if(f<0)for(let v=0;v<c;++v)y[v]=(m-v)/-f;else for(let v=0;v<c;++v)y[v]=(m-v)*f;else if(f<0)for(let v=0;v<c;++v)y[v]=(l+v)/-f;else for(let v=0;v<c;++v)y[v]=(l+v)*f;return y}function gr(r,s,u){return s=+s,r=+r,u=+u,ki(r,s,u)[2]}function Tl(r,s,u){s=+s,r=+r,u=+u;const o=s<r,l=o?gr(s,r,u):gr(r,s,u);return(o?-1:1)*(l<0?1/-l:l)}function Us(r,s){let u;for(const o of r)o!=null&&(u<o||u===void 0&&o>=o)&&(u=o);return u}function Vs(r,s){let u;for(const o of r)o!=null&&(u>o||u===void 0&&o>=o)&&(u=o);return u}var Rl={value:()=>{}};function Ar(){for(var r=0,s=arguments.length,u={},o;r<s;++r){if(!(o=arguments[r]+"")||o in u||/[\s.]/.test(o))throw new Error("illegal type: "+o);u[o]=[]}return new oi(u)}function oi(r){this._=r}function Ll(r,s){return r.trim().split(/^|\s+/).map(function(u){var o="",l=u.indexOf(".");if(l>=0&&(o=u.slice(l+1),u=u.slice(0,l)),u&&!s.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:o}})}oi.prototype=Ar.prototype={constructor:oi,on:function(r,s){var u=this._,o=Ll(r+"",u),l,m=-1,f=o.length;if(arguments.length<2){for(;++m<f;)if((l=(r=o[m]).type)&&(l=bl(u[l],r.name)))return l;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++m<f;)if(l=(r=o[m]).type)u[l]=Hs(u[l],r.name,s);else if(s==null)for(l in u)u[l]=Hs(u[l],r.name,null);return this},copy:function(){var r={},s=this._;for(var u in s)r[u]=s[u].slice();return new oi(r)},call:function(r,s){if((l=arguments.length-2)>0)for(var u=new Array(l),o=0,l,m;o<l;++o)u[o]=arguments[o+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(m=this._[r],o=0,l=m.length;o<l;++o)m[o].value.apply(s,u)},apply:function(r,s,u){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var o=this._[r],l=0,m=o.length;l<m;++l)o[l].value.apply(s,u)}};function bl(r,s){for(var u=0,o=r.length,l;u<o;++u)if((l=r[u]).name===s)return l.value}function Hs(r,s,u){for(var o=0,l=r.length;o<l;++o)if(r[o].name===s){r[o]=Rl,r=r.slice(0,o).concat(r.slice(o+1));break}return u!=null&&r.push({name:s,value:u}),r}var mr="http://www.w3.org/1999/xhtml";const Zs={svg:"http://www.w3.org/2000/svg",xhtml:mr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Di(r){var s=r+="",u=s.indexOf(":");return u>=0&&(s=r.slice(0,u))!=="xmlns"&&(r=r.slice(u+1)),Zs.hasOwnProperty(s)?{space:Zs[s],local:r}:r}function Ml(r){return function(){var s=this.ownerDocument,u=this.namespaceURI;return u===mr&&s.documentElement.namespaceURI===mr?s.createElement(r):s.createElementNS(u,r)}}function Ol(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function mu(r){var s=Di(r);return(s.local?Ol:Ml)(s)}function Al(){}function Pr(r){return r==null?Al:function(){return this.querySelector(r)}}function Pl(r){typeof r!="function"&&(r=Pr(r));for(var s=this._groups,u=s.length,o=new Array(u),l=0;l<u;++l)for(var m=s[l],f=m.length,c=o[l]=new Array(f),y,v,_=0;_<f;++_)(y=m[_])&&(v=r.call(y,y.__data__,_,m))&&("__data__"in y&&(v.__data__=y.__data__),c[_]=v);return new Ht(o,this._parents)}function Dl(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function Fl(){return[]}function du(r){return r==null?Fl:function(){return this.querySelectorAll(r)}}function ql(r){return function(){return Dl(r.apply(this,arguments))}}function Gl(r){typeof r=="function"?r=ql(r):r=du(r);for(var s=this._groups,u=s.length,o=[],l=[],m=0;m<u;++m)for(var f=s[m],c=f.length,y,v=0;v<c;++v)(y=f[v])&&(o.push(r.call(y,y.__data__,v,f)),l.push(y));return new Ht(o,l)}function vu(r){return function(){return this.matches(r)}}function yu(r){return function(s){return s.matches(r)}}var zl=Array.prototype.find;function Yl(r){return function(){return zl.call(this.children,r)}}function Xl(){return this.firstElementChild}function Bl(r){return this.select(r==null?Xl:Yl(typeof r=="function"?r:yu(r)))}var Ul=Array.prototype.filter;function Vl(){return Array.from(this.children)}function Hl(r){return function(){return Ul.call(this.children,r)}}function Zl(r){return this.selectAll(r==null?Vl:Hl(typeof r=="function"?r:yu(r)))}function $l(r){typeof r!="function"&&(r=vu(r));for(var s=this._groups,u=s.length,o=new Array(u),l=0;l<u;++l)for(var m=s[l],f=m.length,c=o[l]=[],y,v=0;v<f;++v)(y=m[v])&&r.call(y,y.__data__,v,m)&&c.push(y);return new Ht(o,this._parents)}function _u(r){return new Array(r.length)}function Wl(){return new Ht(this._enter||this._groups.map(_u),this._parents)}function xi(r,s){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=s}xi.prototype={constructor:xi,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,s){return this._parent.insertBefore(r,s)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function Kl(r){return function(){return r}}function Ql(r,s,u,o,l,m){for(var f=0,c,y=s.length,v=m.length;f<v;++f)(c=s[f])?(c.__data__=m[f],o[f]=c):u[f]=new xi(r,m[f]);for(;f<y;++f)(c=s[f])&&(l[f]=c)}function Jl(r,s,u,o,l,m,f){var c,y,v=new Map,_=s.length,p=m.length,x=new Array(_),N;for(c=0;c<_;++c)(y=s[c])&&(x[c]=N=f.call(y,y.__data__,c,s)+"",v.has(N)?l[c]=y:v.set(N,y));for(c=0;c<p;++c)N=f.call(r,m[c],c,m)+"",(y=v.get(N))?(o[c]=y,y.__data__=m[c],v.delete(N)):u[c]=new xi(r,m[c]);for(c=0;c<_;++c)(y=s[c])&&v.get(x[c])===y&&(l[c]=y)}function jl(r){return r.__data__}function th(r,s){if(!arguments.length)return Array.from(this,jl);var u=s?Jl:Ql,o=this._parents,l=this._groups;typeof r!="function"&&(r=Kl(r));for(var m=l.length,f=new Array(m),c=new Array(m),y=new Array(m),v=0;v<m;++v){var _=o[v],p=l[v],x=p.length,N=eh(r.call(_,_&&_.__data__,v,o)),w=N.length,A=c[v]=new Array(w),q=f[v]=new Array(w),R=y[v]=new Array(x);u(_,p,A,q,R,N,s);for(var P=0,b=0,G,M;P<w;++P)if(G=A[P]){for(P>=b&&(b=P+1);!(M=q[b])&&++b<w;);G._next=M||null}}return f=new Ht(f,o),f._enter=c,f._exit=y,f}function eh(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function nh(){return new Ht(this._exit||this._groups.map(_u),this._parents)}function ih(r,s,u){var o=this.enter(),l=this,m=this.exit();return typeof r=="function"?(o=r(o),o&&(o=o.selection())):o=o.append(r+""),s!=null&&(l=s(l),l&&(l=l.selection())),u==null?m.remove():u(m),o&&l?o.merge(l).order():l}function rh(r){for(var s=r.selection?r.selection():r,u=this._groups,o=s._groups,l=u.length,m=o.length,f=Math.min(l,m),c=new Array(l),y=0;y<f;++y)for(var v=u[y],_=o[y],p=v.length,x=c[y]=new Array(p),N,w=0;w<p;++w)(N=v[w]||_[w])&&(x[w]=N);for(;y<l;++y)c[y]=u[y];return new Ht(c,this._parents)}function sh(){for(var r=this._groups,s=-1,u=r.length;++s<u;)for(var o=r[s],l=o.length-1,m=o[l],f;--l>=0;)(f=o[l])&&(m&&f.compareDocumentPosition(m)^4&&m.parentNode.insertBefore(f,m),m=f);return this}function ah(r){r||(r=uh);function s(p,x){return p&&x?r(p.__data__,x.__data__):!p-!x}for(var u=this._groups,o=u.length,l=new Array(o),m=0;m<o;++m){for(var f=u[m],c=f.length,y=l[m]=new Array(c),v,_=0;_<c;++_)(v=f[_])&&(y[_]=v);y.sort(s)}return new Ht(l,this._parents).order()}function uh(r,s){return r<s?-1:r>s?1:r>=s?0:NaN}function oh(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function lh(){return Array.from(this)}function hh(){for(var r=this._groups,s=0,u=r.length;s<u;++s)for(var o=r[s],l=0,m=o.length;l<m;++l){var f=o[l];if(f)return f}return null}function ch(){let r=0;for(const s of this)++r;return r}function fh(){return!this.node()}function gh(r){for(var s=this._groups,u=0,o=s.length;u<o;++u)for(var l=s[u],m=0,f=l.length,c;m<f;++m)(c=l[m])&&r.call(c,c.__data__,m,l);return this}function mh(r){return function(){this.removeAttribute(r)}}function dh(r){return function(){this.removeAttributeNS(r.space,r.local)}}function vh(r,s){return function(){this.setAttribute(r,s)}}function yh(r,s){return function(){this.setAttributeNS(r.space,r.local,s)}}function _h(r,s){return function(){var u=s.apply(this,arguments);u==null?this.removeAttribute(r):this.setAttribute(r,u)}}function ph(r,s){return function(){var u=s.apply(this,arguments);u==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,u)}}function kh(r,s){var u=Di(r);if(arguments.length<2){var o=this.node();return u.local?o.getAttributeNS(u.space,u.local):o.getAttribute(u)}return this.each((s==null?u.local?dh:mh:typeof s=="function"?u.local?ph:_h:u.local?yh:vh)(u,s))}function pu(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function xh(r){return function(){this.style.removeProperty(r)}}function Eh(r,s,u){return function(){this.style.setProperty(r,s,u)}}function Nh(r,s,u){return function(){var o=s.apply(this,arguments);o==null?this.style.removeProperty(r):this.style.setProperty(r,o,u)}}function wh(r,s,u){return arguments.length>1?this.each((s==null?xh:typeof s=="function"?Nh:Eh)(r,s,u??"")):rn(this.node(),r)}function rn(r,s){return r.style.getPropertyValue(s)||pu(r).getComputedStyle(r,null).getPropertyValue(s)}function Ih(r){return function(){delete this[r]}}function Sh(r,s){return function(){this[r]=s}}function Ch(r,s){return function(){var u=s.apply(this,arguments);u==null?delete this[r]:this[r]=u}}function Th(r,s){return arguments.length>1?this.each((s==null?Ih:typeof s=="function"?Ch:Sh)(r,s)):this.node()[r]}function ku(r){return r.trim().split(/^|\s+/)}function Dr(r){return r.classList||new xu(r)}function xu(r){this._node=r,this._names=ku(r.getAttribute("class")||"")}xu.prototype={add:function(r){var s=this._names.indexOf(r);s<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var s=this._names.indexOf(r);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function Eu(r,s){for(var u=Dr(r),o=-1,l=s.length;++o<l;)u.add(s[o])}function Nu(r,s){for(var u=Dr(r),o=-1,l=s.length;++o<l;)u.remove(s[o])}function Rh(r){return function(){Eu(this,r)}}function Lh(r){return function(){Nu(this,r)}}function bh(r,s){return function(){(s.apply(this,arguments)?Eu:Nu)(this,r)}}function Mh(r,s){var u=ku(r+"");if(arguments.length<2){for(var o=Dr(this.node()),l=-1,m=u.length;++l<m;)if(!o.contains(u[l]))return!1;return!0}return this.each((typeof s=="function"?bh:s?Rh:Lh)(u,s))}function Oh(){this.textContent=""}function Ah(r){return function(){this.textContent=r}}function Ph(r){return function(){var s=r.apply(this,arguments);this.textContent=s??""}}function Dh(r){return arguments.length?this.each(r==null?Oh:(typeof r=="function"?Ph:Ah)(r)):this.node().textContent}function Fh(){this.innerHTML=""}function qh(r){return function(){this.innerHTML=r}}function Gh(r){return function(){var s=r.apply(this,arguments);this.innerHTML=s??""}}function zh(r){return arguments.length?this.each(r==null?Fh:(typeof r=="function"?Gh:qh)(r)):this.node().innerHTML}function Yh(){this.nextSibling&&this.parentNode.appendChild(this)}function Xh(){return this.each(Yh)}function Bh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uh(){return this.each(Bh)}function Vh(r){var s=typeof r=="function"?r:mu(r);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function Hh(){return null}function Zh(r,s){var u=typeof r=="function"?r:mu(r),o=s==null?Hh:typeof s=="function"?s:Pr(s);return this.select(function(){return this.insertBefore(u.apply(this,arguments),o.apply(this,arguments)||null)})}function $h(){var r=this.parentNode;r&&r.removeChild(this)}function Wh(){return this.each($h)}function Kh(){var r=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(r,this.nextSibling):r}function Qh(){var r=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(r,this.nextSibling):r}function Jh(r){return this.select(r?Qh:Kh)}function jh(r){return arguments.length?this.property("__data__",r):this.node().__data__}function tc(r){return function(s){r.call(this,s,this.__data__)}}function ec(r){return r.trim().split(/^|\s+/).map(function(s){var u="",o=s.indexOf(".");return o>=0&&(u=s.slice(o+1),s=s.slice(0,o)),{type:s,name:u}})}function nc(r){return function(){var s=this.__on;if(s){for(var u=0,o=-1,l=s.length,m;u<l;++u)m=s[u],(!r.type||m.type===r.type)&&m.name===r.name?this.removeEventListener(m.type,m.listener,m.options):s[++o]=m;++o?s.length=o:delete this.__on}}}function ic(r,s,u){return function(){var o=this.__on,l,m=tc(s);if(o){for(var f=0,c=o.length;f<c;++f)if((l=o[f]).type===r.type&&l.name===r.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=m,l.options=u),l.value=s;return}}this.addEventListener(r.type,m,u),l={type:r.type,name:r.name,value:s,listener:m,options:u},o?o.push(l):this.__on=[l]}}function rc(r,s,u){var o=ec(r+""),l,m=o.length,f;if(arguments.length<2){var c=this.node().__on;if(c){for(var y=0,v=c.length,_;y<v;++y)for(l=0,_=c[y];l<m;++l)if((f=o[l]).type===_.type&&f.name===_.name)return _.value}return}for(c=s?ic:nc,l=0;l<m;++l)this.each(c(o[l],s,u));return this}function wu(r,s,u){var o=pu(r),l=o.CustomEvent;typeof l=="function"?l=new l(s,u):(l=o.document.createEvent("Event"),u?(l.initEvent(s,u.bubbles,u.cancelable),l.detail=u.detail):l.initEvent(s,!1,!1)),r.dispatchEvent(l)}function sc(r,s){return function(){return wu(this,r,s)}}function ac(r,s){return function(){return wu(this,r,s.apply(this,arguments))}}function uc(r,s){return this.each((typeof s=="function"?ac:sc)(r,s))}function*oc(){for(var r=this._groups,s=0,u=r.length;s<u;++s)for(var o=r[s],l=0,m=o.length,f;l<m;++l)(f=o[l])&&(yield f)}var Iu=[null];function Ht(r,s){this._groups=r,this._parents=s}function Pn(){return new Ht([[document.documentElement]],Iu)}function lc(){return this}Ht.prototype=Pn.prototype={constructor:Ht,select:Pl,selectAll:Gl,selectChild:Bl,selectChildren:Zl,filter:$l,data:th,enter:Wl,exit:nh,join:ih,merge:rh,selection:lc,order:sh,sort:ah,call:oh,nodes:lh,node:hh,size:ch,empty:fh,each:gh,attr:kh,style:wh,property:Th,classed:Mh,text:Dh,html:zh,raise:Xh,lower:Uh,append:Vh,insert:Zh,remove:Wh,clone:Jh,datum:jh,on:rc,dispatch:uc,[Symbol.iterator]:oc};function Te(r){return typeof r=="string"?new Ht([[document.querySelector(r)]],[document.documentElement]):new Ht([[r]],Iu)}function hc(r){let s;for(;s=r.sourceEvent;)r=s;return r}function Ge(r,s){if(r=hc(r),s===void 0&&(s=r.currentTarget),s){var u=s.ownerSVGElement||s;if(u.createSVGPoint){var o=u.createSVGPoint();return o.x=r.clientX,o.y=r.clientY,o=o.matrixTransform(s.getScreenCTM().inverse()),[o.x,o.y]}if(s.getBoundingClientRect){var l=s.getBoundingClientRect();return[r.clientX-l.left-s.clientLeft,r.clientY-l.top-s.clientTop]}}return[r.pageX,r.pageY]}const dr={capture:!0,passive:!1};function vr(r){r.preventDefault(),r.stopImmediatePropagation()}function cc(r){var s=r.document.documentElement,u=Te(r).on("dragstart.drag",vr,dr);"onselectstart"in s?u.on("selectstart.drag",vr,dr):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function fc(r,s){var u=r.document.documentElement,o=Te(r).on("dragstart.drag",null);s&&(o.on("click.drag",vr,dr),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in u?o.on("selectstart.drag",null):(u.style.MozUserSelect=u.__noselect,delete u.__noselect)}function Fr(r,s,u){r.prototype=s.prototype=u,u.constructor=r}function Su(r,s){var u=Object.create(r.prototype);for(var o in s)u[o]=s[o];return u}function Dn(){}var Tn=.7,Ei=1/Tn,nn="\\s*([+-]?\\d+)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gc=/^#([0-9a-f]{3,8})$/,mc=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),dc=new RegExp(`^rgb\\(${me},${me},${me}\\)$`),vc=new RegExp(`^rgba\\(${nn},${nn},${nn},${Rn}\\)$`),yc=new RegExp(`^rgba\\(${me},${me},${me},${Rn}\\)$`),_c=new RegExp(`^hsl\\(${Rn},${me},${me}\\)$`),pc=new RegExp(`^hsla\\(${Rn},${me},${me},${Rn}\\)$`),$s={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fr(Dn,Ue,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:Ws,formatHex:Ws,formatHex8:kc,formatHsl:xc,formatRgb:Ks,toString:Ks});function Ws(){return this.rgb().formatHex()}function kc(){return this.rgb().formatHex8()}function xc(){return Cu(this).formatHsl()}function Ks(){return this.rgb().formatRgb()}function Ue(r){var s,u;return r=(r+"").trim().toLowerCase(),(s=gc.exec(r))?(u=s[1].length,s=parseInt(s[1],16),u===6?Qs(s):u===3?new zt(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):u===8?Kn(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):u===4?Kn(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=mc.exec(r))?new zt(s[1],s[2],s[3],1):(s=dc.exec(r))?new zt(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=vc.exec(r))?Kn(s[1],s[2],s[3],s[4]):(s=yc.exec(r))?Kn(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=_c.exec(r))?ta(s[1],s[2]/100,s[3]/100,1):(s=pc.exec(r))?ta(s[1],s[2]/100,s[3]/100,s[4]):$s.hasOwnProperty(r)?Qs($s[r]):r==="transparent"?new zt(NaN,NaN,NaN,0):null}function Qs(r){return new zt(r>>16&255,r>>8&255,r&255,1)}function Kn(r,s,u,o){return o<=0&&(r=s=u=NaN),new zt(r,s,u,o)}function Ec(r){return r instanceof Dn||(r=Ue(r)),r?(r=r.rgb(),new zt(r.r,r.g,r.b,r.opacity)):new zt}function yr(r,s,u,o){return arguments.length===1?Ec(r):new zt(r,s,u,o??1)}function zt(r,s,u,o){this.r=+r,this.g=+s,this.b=+u,this.opacity=+o}Fr(zt,yr,Su(Dn,{brighter(r){return r=r==null?Ei:Math.pow(Ei,r),new zt(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Tn:Math.pow(Tn,r),new zt(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new zt(Ye(this.r),Ye(this.g),Ye(this.b),Ni(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Js,formatHex:Js,formatHex8:Nc,formatRgb:js,toString:js}));function Js(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}`}function Nc(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}${ze((isNaN(this.opacity)?1:this.opacity)*255)}`}function js(){const r=Ni(this.opacity);return`${r===1?"rgb(":"rgba("}${Ye(this.r)}, ${Ye(this.g)}, ${Ye(this.b)}${r===1?")":`, ${r})`}`}function Ni(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function Ye(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function ze(r){return r=Ye(r),(r<16?"0":"")+r.toString(16)}function ta(r,s,u,o){return o<=0?r=s=u=NaN:u<=0||u>=1?r=s=NaN:s<=0&&(r=NaN),new ie(r,s,u,o)}function Cu(r){if(r instanceof ie)return new ie(r.h,r.s,r.l,r.opacity);if(r instanceof Dn||(r=Ue(r)),!r)return new ie;if(r instanceof ie)return r;r=r.rgb();var s=r.r/255,u=r.g/255,o=r.b/255,l=Math.min(s,u,o),m=Math.max(s,u,o),f=NaN,c=m-l,y=(m+l)/2;return c?(s===m?f=(u-o)/c+(u<o)*6:u===m?f=(o-s)/c+2:f=(s-u)/c+4,c/=y<.5?m+l:2-m-l,f*=60):c=y>0&&y<1?0:f,new ie(f,c,y,r.opacity)}function wc(r,s,u,o){return arguments.length===1?Cu(r):new ie(r,s,u,o??1)}function ie(r,s,u,o){this.h=+r,this.s=+s,this.l=+u,this.opacity=+o}Fr(ie,wc,Su(Dn,{brighter(r){return r=r==null?Ei:Math.pow(Ei,r),new ie(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Tn:Math.pow(Tn,r),new ie(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,s=isNaN(r)||isNaN(this.s)?0:this.s,u=this.l,o=u+(u<.5?u:1-u)*s,l=2*u-o;return new zt(ar(r>=240?r-240:r+120,l,o),ar(r,l,o),ar(r<120?r+240:r-120,l,o),this.opacity)},clamp(){return new ie(ea(this.h),Qn(this.s),Qn(this.l),Ni(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Ni(this.opacity);return`${r===1?"hsl(":"hsla("}${ea(this.h)}, ${Qn(this.s)*100}%, ${Qn(this.l)*100}%${r===1?")":`, ${r})`}`}}));function ea(r){return r=(r||0)%360,r<0?r+360:r}function Qn(r){return Math.max(0,Math.min(1,r||0))}function ar(r,s,u){return(r<60?s+(u-s)*r/60:r<180?u:r<240?s+(u-s)*(240-r)/60:s)*255}const qr=r=>()=>r;function Ic(r,s){return function(u){return r+u*s}}function Sc(r,s,u){return r=Math.pow(r,u),s=Math.pow(s,u)-r,u=1/u,function(o){return Math.pow(r+o*s,u)}}function Cc(r){return(r=+r)==1?Tu:function(s,u){return u-s?Sc(s,u,r):qr(isNaN(s)?u:s)}}function Tu(r,s){var u=s-r;return u?Ic(r,u):qr(isNaN(r)?s:r)}const wi=function r(s){var u=Cc(s);function o(l,m){var f=u((l=yr(l)).r,(m=yr(m)).r),c=u(l.g,m.g),y=u(l.b,m.b),v=Tu(l.opacity,m.opacity);return function(_){return l.r=f(_),l.g=c(_),l.b=y(_),l.opacity=v(_),l+""}}return o.gamma=r,o}(1);function Tc(r,s){s||(s=[]);var u=r?Math.min(s.length,r.length):0,o=s.slice(),l;return function(m){for(l=0;l<u;++l)o[l]=r[l]*(1-m)+s[l]*m;return o}}function Rc(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Lc(r,s){var u=s?s.length:0,o=r?Math.min(u,r.length):0,l=new Array(o),m=new Array(u),f;for(f=0;f<o;++f)l[f]=Gr(r[f],s[f]);for(;f<u;++f)m[f]=s[f];return function(c){for(f=0;f<o;++f)m[f]=l[f](c);return m}}function bc(r,s){var u=new Date;return r=+r,s=+s,function(o){return u.setTime(r*(1-o)+s*o),u}}function ne(r,s){return r=+r,s=+s,function(u){return r*(1-u)+s*u}}function Mc(r,s){var u={},o={},l;(r===null||typeof r!="object")&&(r={}),(s===null||typeof s!="object")&&(s={});for(l in s)l in r?u[l]=Gr(r[l],s[l]):o[l]=s[l];return function(m){for(l in u)o[l]=u[l](m);return o}}var _r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ur=new RegExp(_r.source,"g");function Oc(r){return function(){return r}}function Ac(r){return function(s){return r(s)+""}}function Ru(r,s){var u=_r.lastIndex=ur.lastIndex=0,o,l,m,f=-1,c=[],y=[];for(r=r+"",s=s+"";(o=_r.exec(r))&&(l=ur.exec(s));)(m=l.index)>u&&(m=s.slice(u,m),c[f]?c[f]+=m:c[++f]=m),(o=o[0])===(l=l[0])?c[f]?c[f]+=l:c[++f]=l:(c[++f]=null,y.push({i:f,x:ne(o,l)})),u=ur.lastIndex;return u<s.length&&(m=s.slice(u),c[f]?c[f]+=m:c[++f]=m),c.length<2?y[0]?Ac(y[0].x):Oc(s):(s=y.length,function(v){for(var _=0,p;_<s;++_)c[(p=y[_]).i]=p.x(v);return c.join("")})}function Gr(r,s){var u=typeof s,o;return s==null||u==="boolean"?qr(s):(u==="number"?ne:u==="string"?(o=Ue(s))?(s=o,wi):Ru:s instanceof Ue?wi:s instanceof Date?bc:Rc(s)?Tc:Array.isArray(s)?Lc:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?Mc:ne)(r,s)}function Pc(r,s){return r=+r,s=+s,function(u){return Math.round(r*(1-u)+s*u)}}var na=180/Math.PI,pr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lu(r,s,u,o,l,m){var f,c,y;return(f=Math.sqrt(r*r+s*s))&&(r/=f,s/=f),(y=r*u+s*o)&&(u-=r*y,o-=s*y),(c=Math.sqrt(u*u+o*o))&&(u/=c,o/=c,y/=c),r*o<s*u&&(r=-r,s=-s,y=-y,f=-f),{translateX:l,translateY:m,rotate:Math.atan2(s,r)*na,skewX:Math.atan(y)*na,scaleX:f,scaleY:c}}var Jn;function Dc(r){const s=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return s.isIdentity?pr:Lu(s.a,s.b,s.c,s.d,s.e,s.f)}function Fc(r){return r==null||(Jn||(Jn=document.createElementNS("http://www.w3.org/2000/svg","g")),Jn.setAttribute("transform",r),!(r=Jn.transform.baseVal.consolidate()))?pr:(r=r.matrix,Lu(r.a,r.b,r.c,r.d,r.e,r.f))}function bu(r,s,u,o){function l(v){return v.length?v.pop()+" ":""}function m(v,_,p,x,N,w){if(v!==p||_!==x){var A=N.push("translate(",null,s,null,u);w.push({i:A-4,x:ne(v,p)},{i:A-2,x:ne(_,x)})}else(p||x)&&N.push("translate("+p+s+x+u)}function f(v,_,p,x){v!==_?(v-_>180?_+=360:_-v>180&&(v+=360),x.push({i:p.push(l(p)+"rotate(",null,o)-2,x:ne(v,_)})):_&&p.push(l(p)+"rotate("+_+o)}function c(v,_,p,x){v!==_?x.push({i:p.push(l(p)+"skewX(",null,o)-2,x:ne(v,_)}):_&&p.push(l(p)+"skewX("+_+o)}function y(v,_,p,x,N,w){if(v!==p||_!==x){var A=N.push(l(N)+"scale(",null,",",null,")");w.push({i:A-4,x:ne(v,p)},{i:A-2,x:ne(_,x)})}else(p!==1||x!==1)&&N.push(l(N)+"scale("+p+","+x+")")}return function(v,_){var p=[],x=[];return v=r(v),_=r(_),m(v.translateX,v.translateY,_.translateX,_.translateY,p,x),f(v.rotate,_.rotate,p,x),c(v.skewX,_.skewX,p,x),y(v.scaleX,v.scaleY,_.scaleX,_.scaleY,p,x),v=_=null,function(N){for(var w=-1,A=x.length,q;++w<A;)p[(q=x[w]).i]=q.x(N);return p.join("")}}}var qc=bu(Dc,"px, ","px)","deg)"),Gc=bu(Fc,", ",")",")"),zc=1e-12;function ia(r){return((r=Math.exp(r))+1/r)/2}function Yc(r){return((r=Math.exp(r))-1/r)/2}function Xc(r){return((r=Math.exp(2*r))-1)/(r+1)}const Bc=function r(s,u,o){function l(m,f){var c=m[0],y=m[1],v=m[2],_=f[0],p=f[1],x=f[2],N=_-c,w=p-y,A=N*N+w*w,q,R;if(A<zc)R=Math.log(x/v)/s,q=function(z){return[c+z*N,y+z*w,v*Math.exp(s*z*R)]};else{var P=Math.sqrt(A),b=(x*x-v*v+o*A)/(2*v*u*P),G=(x*x-v*v-o*A)/(2*x*u*P),M=Math.log(Math.sqrt(b*b+1)-b),D=Math.log(Math.sqrt(G*G+1)-G);R=(D-M)/s,q=function(z){var V=z*R,B=ia(M),j=v/(u*P)*(B*Xc(s*V+M)-Yc(M));return[c+j*N,y+j*w,v*B/ia(s*V+M)]}}return q.duration=R*1e3*s/Math.SQRT2,q}return l.rho=function(m){var f=Math.max(.001,+m),c=f*f,y=c*c;return r(f,c,y)},l}(Math.SQRT2,2,4);var sn=0,In=0,En=0,Mu=1e3,Ii,Sn,Si=0,Ve=0,Fi=0,Ln=typeof performance=="object"&&performance.now?performance:Date,Ou=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function zr(){return Ve||(Ou(Uc),Ve=Ln.now()+Fi)}function Uc(){Ve=0}function Ci(){this._call=this._time=this._next=null}Ci.prototype=Au.prototype={constructor:Ci,restart:function(r,s,u){if(typeof r!="function")throw new TypeError("callback is not a function");u=(u==null?zr():+u)+(s==null?0:+s),!this._next&&Sn!==this&&(Sn?Sn._next=this:Ii=this,Sn=this),this._call=r,this._time=u,kr()},stop:function(){this._call&&(this._call=null,this._time=1/0,kr())}};function Au(r,s,u){var o=new Ci;return o.restart(r,s,u),o}function Vc(){zr(),++sn;for(var r=Ii,s;r;)(s=Ve-r._time)>=0&&r._call.call(void 0,s),r=r._next;--sn}function ra(){Ve=(Si=Ln.now())+Fi,sn=In=0;try{Vc()}finally{sn=0,Zc(),Ve=0}}function Hc(){var r=Ln.now(),s=r-Si;s>Mu&&(Fi-=s,Si=r)}function Zc(){for(var r,s=Ii,u,o=1/0;s;)s._call?(o>s._time&&(o=s._time),r=s,s=s._next):(u=s._next,s._next=null,s=r?r._next=u:Ii=u);Sn=r,kr(o)}function kr(r){if(!sn){In&&(In=clearTimeout(In));var s=r-Ve;s>24?(r<1/0&&(In=setTimeout(ra,r-Ln.now()-Fi)),En&&(En=clearInterval(En))):(En||(Si=Ln.now(),En=setInterval(Hc,Mu)),sn=1,Ou(ra))}}function sa(r,s,u){var o=new Ci;return s=s==null?0:+s,o.restart(l=>{o.stop(),r(l+s)},s,u),o}var $c=Ar("start","end","cancel","interrupt"),Wc=[],Pu=0,aa=1,xr=2,li=3,ua=4,Er=5,hi=6;function qi(r,s,u,o,l,m){var f=r.__transition;if(!f)r.__transition={};else if(u in f)return;Kc(r,u,{name:s,index:o,group:l,on:$c,tween:Wc,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:Pu})}function Yr(r,s){var u=se(r,s);if(u.state>Pu)throw new Error("too late; already scheduled");return u}function ve(r,s){var u=se(r,s);if(u.state>li)throw new Error("too late; already running");return u}function se(r,s){var u=r.__transition;if(!u||!(u=u[s]))throw new Error("transition not found");return u}function Kc(r,s,u){var o=r.__transition,l;o[s]=u,u.timer=Au(m,0,u.time);function m(v){u.state=aa,u.timer.restart(f,u.delay,u.time),u.delay<=v&&f(v-u.delay)}function f(v){var _,p,x,N;if(u.state!==aa)return y();for(_ in o)if(N=o[_],N.name===u.name){if(N.state===li)return sa(f);N.state===ua?(N.state=hi,N.timer.stop(),N.on.call("interrupt",r,r.__data__,N.index,N.group),delete o[_]):+_<s&&(N.state=hi,N.timer.stop(),N.on.call("cancel",r,r.__data__,N.index,N.group),delete o[_])}if(sa(function(){u.state===li&&(u.state=ua,u.timer.restart(c,u.delay,u.time),c(v))}),u.state=xr,u.on.call("start",r,r.__data__,u.index,u.group),u.state===xr){for(u.state=li,l=new Array(x=u.tween.length),_=0,p=-1;_<x;++_)(N=u.tween[_].value.call(r,r.__data__,u.index,u.group))&&(l[++p]=N);l.length=p+1}}function c(v){for(var _=v<u.duration?u.ease.call(null,v/u.duration):(u.timer.restart(y),u.state=Er,1),p=-1,x=l.length;++p<x;)l[p].call(r,_);u.state===Er&&(u.on.call("end",r,r.__data__,u.index,u.group),y())}function y(){u.state=hi,u.timer.stop(),delete o[s];for(var v in o)return;delete r.__transition}}function ci(r,s){var u=r.__transition,o,l,m=!0,f;if(u){s=s==null?null:s+"";for(f in u){if((o=u[f]).name!==s){m=!1;continue}l=o.state>xr&&o.state<Er,o.state=hi,o.timer.stop(),o.on.call(l?"interrupt":"cancel",r,r.__data__,o.index,o.group),delete u[f]}m&&delete r.__transition}}function Qc(r){return this.each(function(){ci(this,r)})}function Jc(r,s){var u,o;return function(){var l=ve(this,r),m=l.tween;if(m!==u){o=u=m;for(var f=0,c=o.length;f<c;++f)if(o[f].name===s){o=o.slice(),o.splice(f,1);break}}l.tween=o}}function jc(r,s,u){var o,l;if(typeof u!="function")throw new Error;return function(){var m=ve(this,r),f=m.tween;if(f!==o){l=(o=f).slice();for(var c={name:s,value:u},y=0,v=l.length;y<v;++y)if(l[y].name===s){l[y]=c;break}y===v&&l.push(c)}m.tween=l}}function tf(r,s){var u=this._id;if(r+="",arguments.length<2){for(var o=se(this.node(),u).tween,l=0,m=o.length,f;l<m;++l)if((f=o[l]).name===r)return f.value;return null}return this.each((s==null?Jc:jc)(u,r,s))}function Xr(r,s,u){var o=r._id;return r.each(function(){var l=ve(this,o);(l.value||(l.value={}))[s]=u.apply(this,arguments)}),function(l){return se(l,o).value[s]}}function Du(r,s){var u;return(typeof s=="number"?ne:s instanceof Ue?wi:(u=Ue(s))?(s=u,wi):Ru)(r,s)}function ef(r){return function(){this.removeAttribute(r)}}function nf(r){return function(){this.removeAttributeNS(r.space,r.local)}}function rf(r,s,u){var o,l=u+"",m;return function(){var f=this.getAttribute(r);return f===l?null:f===o?m:m=s(o=f,u)}}function sf(r,s,u){var o,l=u+"",m;return function(){var f=this.getAttributeNS(r.space,r.local);return f===l?null:f===o?m:m=s(o=f,u)}}function af(r,s,u){var o,l,m;return function(){var f,c=u(this),y;return c==null?void this.removeAttribute(r):(f=this.getAttribute(r),y=c+"",f===y?null:f===o&&y===l?m:(l=y,m=s(o=f,c)))}}function uf(r,s,u){var o,l,m;return function(){var f,c=u(this),y;return c==null?void this.removeAttributeNS(r.space,r.local):(f=this.getAttributeNS(r.space,r.local),y=c+"",f===y?null:f===o&&y===l?m:(l=y,m=s(o=f,c)))}}function of(r,s){var u=Di(r),o=u==="transform"?Gc:Du;return this.attrTween(r,typeof s=="function"?(u.local?uf:af)(u,o,Xr(this,"attr."+r,s)):s==null?(u.local?nf:ef)(u):(u.local?sf:rf)(u,o,s))}function lf(r,s){return function(u){this.setAttribute(r,s.call(this,u))}}function hf(r,s){return function(u){this.setAttributeNS(r.space,r.local,s.call(this,u))}}function cf(r,s){var u,o;function l(){var m=s.apply(this,arguments);return m!==o&&(u=(o=m)&&hf(r,m)),u}return l._value=s,l}function ff(r,s){var u,o;function l(){var m=s.apply(this,arguments);return m!==o&&(u=(o=m)&&lf(r,m)),u}return l._value=s,l}function gf(r,s){var u="attr."+r;if(arguments.length<2)return(u=this.tween(u))&&u._value;if(s==null)return this.tween(u,null);if(typeof s!="function")throw new Error;var o=Di(r);return this.tween(u,(o.local?cf:ff)(o,s))}function mf(r,s){return function(){Yr(this,r).delay=+s.apply(this,arguments)}}function df(r,s){return s=+s,function(){Yr(this,r).delay=s}}function vf(r){var s=this._id;return arguments.length?this.each((typeof r=="function"?mf:df)(s,r)):se(this.node(),s).delay}function yf(r,s){return function(){ve(this,r).duration=+s.apply(this,arguments)}}function _f(r,s){return s=+s,function(){ve(this,r).duration=s}}function pf(r){var s=this._id;return arguments.length?this.each((typeof r=="function"?yf:_f)(s,r)):se(this.node(),s).duration}function kf(r,s){if(typeof s!="function")throw new Error;return function(){ve(this,r).ease=s}}function xf(r){var s=this._id;return arguments.length?this.each(kf(s,r)):se(this.node(),s).ease}function Ef(r,s){return function(){var u=s.apply(this,arguments);if(typeof u!="function")throw new Error;ve(this,r).ease=u}}function Nf(r){if(typeof r!="function")throw new Error;return this.each(Ef(this._id,r))}function wf(r){typeof r!="function"&&(r=vu(r));for(var s=this._groups,u=s.length,o=new Array(u),l=0;l<u;++l)for(var m=s[l],f=m.length,c=o[l]=[],y,v=0;v<f;++v)(y=m[v])&&r.call(y,y.__data__,v,m)&&c.push(y);return new we(o,this._parents,this._name,this._id)}function If(r){if(r._id!==this._id)throw new Error;for(var s=this._groups,u=r._groups,o=s.length,l=u.length,m=Math.min(o,l),f=new Array(o),c=0;c<m;++c)for(var y=s[c],v=u[c],_=y.length,p=f[c]=new Array(_),x,N=0;N<_;++N)(x=y[N]||v[N])&&(p[N]=x);for(;c<o;++c)f[c]=s[c];return new we(f,this._parents,this._name,this._id)}function Sf(r){return(r+"").trim().split(/^|\s+/).every(function(s){var u=s.indexOf(".");return u>=0&&(s=s.slice(0,u)),!s||s==="start"})}function Cf(r,s,u){var o,l,m=Sf(s)?Yr:ve;return function(){var f=m(this,r),c=f.on;c!==o&&(l=(o=c).copy()).on(s,u),f.on=l}}function Tf(r,s){var u=this._id;return arguments.length<2?se(this.node(),u).on.on(r):this.each(Cf(u,r,s))}function Rf(r){return function(){var s=this.parentNode;for(var u in this.__transition)if(+u!==r)return;s&&s.removeChild(this)}}function Lf(){return this.on("end.remove",Rf(this._id))}function bf(r){var s=this._name,u=this._id;typeof r!="function"&&(r=Pr(r));for(var o=this._groups,l=o.length,m=new Array(l),f=0;f<l;++f)for(var c=o[f],y=c.length,v=m[f]=new Array(y),_,p,x=0;x<y;++x)(_=c[x])&&(p=r.call(_,_.__data__,x,c))&&("__data__"in _&&(p.__data__=_.__data__),v[x]=p,qi(v[x],s,u,x,v,se(_,u)));return new we(m,this._parents,s,u)}function Mf(r){var s=this._name,u=this._id;typeof r!="function"&&(r=du(r));for(var o=this._groups,l=o.length,m=[],f=[],c=0;c<l;++c)for(var y=o[c],v=y.length,_,p=0;p<v;++p)if(_=y[p]){for(var x=r.call(_,_.__data__,p,y),N,w=se(_,u),A=0,q=x.length;A<q;++A)(N=x[A])&&qi(N,s,u,A,x,w);m.push(x),f.push(_)}return new we(m,f,s,u)}var Of=Pn.prototype.constructor;function Af(){return new Of(this._groups,this._parents)}function Pf(r,s){var u,o,l;return function(){var m=rn(this,r),f=(this.style.removeProperty(r),rn(this,r));return m===f?null:m===u&&f===o?l:l=s(u=m,o=f)}}function Fu(r){return function(){this.style.removeProperty(r)}}function Df(r,s,u){var o,l=u+"",m;return function(){var f=rn(this,r);return f===l?null:f===o?m:m=s(o=f,u)}}function Ff(r,s,u){var o,l,m;return function(){var f=rn(this,r),c=u(this),y=c+"";return c==null&&(y=c=(this.style.removeProperty(r),rn(this,r))),f===y?null:f===o&&y===l?m:(l=y,m=s(o=f,c))}}function qf(r,s){var u,o,l,m="style."+s,f="end."+m,c;return function(){var y=ve(this,r),v=y.on,_=y.value[m]==null?c||(c=Fu(s)):void 0;(v!==u||l!==_)&&(o=(u=v).copy()).on(f,l=_),y.on=o}}function Gf(r,s,u){var o=(r+="")=="transform"?qc:Du;return s==null?this.styleTween(r,Pf(r,o)).on("end.style."+r,Fu(r)):typeof s=="function"?this.styleTween(r,Ff(r,o,Xr(this,"style."+r,s))).each(qf(this._id,r)):this.styleTween(r,Df(r,o,s),u).on("end.style."+r,null)}function zf(r,s,u){return function(o){this.style.setProperty(r,s.call(this,o),u)}}function Yf(r,s,u){var o,l;function m(){var f=s.apply(this,arguments);return f!==l&&(o=(l=f)&&zf(r,f,u)),o}return m._value=s,m}function Xf(r,s,u){var o="style."+(r+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(s==null)return this.tween(o,null);if(typeof s!="function")throw new Error;return this.tween(o,Yf(r,s,u??""))}function Bf(r){return function(){this.textContent=r}}function Uf(r){return function(){var s=r(this);this.textContent=s??""}}function Vf(r){return this.tween("text",typeof r=="function"?Uf(Xr(this,"text",r)):Bf(r==null?"":r+""))}function Hf(r){return function(s){this.textContent=r.call(this,s)}}function Zf(r){var s,u;function o(){var l=r.apply(this,arguments);return l!==u&&(s=(u=l)&&Hf(l)),s}return o._value=r,o}function $f(r){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(r==null)return this.tween(s,null);if(typeof r!="function")throw new Error;return this.tween(s,Zf(r))}function Wf(){for(var r=this._name,s=this._id,u=qu(),o=this._groups,l=o.length,m=0;m<l;++m)for(var f=o[m],c=f.length,y,v=0;v<c;++v)if(y=f[v]){var _=se(y,s);qi(y,r,u,v,f,{time:_.time+_.delay+_.duration,delay:0,duration:_.duration,ease:_.ease})}return new we(o,this._parents,r,u)}function Kf(){var r,s,u=this,o=u._id,l=u.size();return new Promise(function(m,f){var c={value:f},y={value:function(){--l===0&&m()}};u.each(function(){var v=ve(this,o),_=v.on;_!==r&&(s=(r=_).copy(),s._.cancel.push(c),s._.interrupt.push(c),s._.end.push(y)),v.on=s}),l===0&&m()})}var Qf=0;function we(r,s,u,o){this._groups=r,this._parents=s,this._name=u,this._id=o}function qu(){return++Qf}var ke=Pn.prototype;we.prototype={constructor:we,select:bf,selectAll:Mf,selectChild:ke.selectChild,selectChildren:ke.selectChildren,filter:wf,merge:If,selection:Af,transition:Wf,call:ke.call,nodes:ke.nodes,node:ke.node,size:ke.size,empty:ke.empty,each:ke.each,on:Tf,attr:of,attrTween:gf,style:Gf,styleTween:Xf,text:Vf,textTween:$f,remove:Lf,tween:tf,delay:vf,duration:pf,ease:xf,easeVarying:Nf,end:Kf,[Symbol.iterator]:ke[Symbol.iterator]};function Jf(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var jf={time:null,delay:0,duration:250,ease:Jf};function tg(r,s){for(var u;!(u=r.__transition)||!(u=u[s]);)if(!(r=r.parentNode))throw new Error(`transition ${s} not found`);return u}function eg(r){var s,u;r instanceof we?(s=r._id,r=r._name):(s=qu(),(u=jf).time=zr(),r=r==null?null:r+"");for(var o=this._groups,l=o.length,m=0;m<l;++m)for(var f=o[m],c=f.length,y,v=0;v<c;++v)(y=f[v])&&qi(y,r,s,v,f,u||tg(y,s));return new we(o,this._parents,r,s)}Pn.prototype.interrupt=Qc;Pn.prototype.transition=eg;const Ee=11102230246251565e-32,Pt=134217729,ng=(3+8*Ee)*Ee;function or(r,s,u,o,l){let m,f,c,y,v=s[0],_=o[0],p=0,x=0;_>v==_>-v?(m=v,v=s[++p]):(m=_,_=o[++x]);let N=0;if(p<r&&x<u)for(_>v==_>-v?(f=v+m,c=m-(f-v),v=s[++p]):(f=_+m,c=m-(f-_),_=o[++x]),m=f,c!==0&&(l[N++]=c);p<r&&x<u;)_>v==_>-v?(f=m+v,y=f-m,c=m-(f-y)+(v-y),v=s[++p]):(f=m+_,y=f-m,c=m-(f-y)+(_-y),_=o[++x]),m=f,c!==0&&(l[N++]=c);for(;p<r;)f=m+v,y=f-m,c=m-(f-y)+(v-y),v=s[++p],m=f,c!==0&&(l[N++]=c);for(;x<u;)f=m+_,y=f-m,c=m-(f-y)+(_-y),_=o[++x],m=f,c!==0&&(l[N++]=c);return(m!==0||N===0)&&(l[N++]=m),N}function ig(r,s){let u=s[0];for(let o=1;o<r;o++)u+=s[o];return u}function Fn(r){return new Float64Array(r)}const rg=(3+16*Ee)*Ee,sg=(2+12*Ee)*Ee,ag=(9+64*Ee)*Ee*Ee,tn=Fn(4),oa=Fn(8),la=Fn(12),ha=Fn(16),Ft=Fn(4);function ug(r,s,u,o,l,m,f){let c,y,v,_,p,x,N,w,A,q,R,P,b,G,M,D,z,V;const B=r-l,j=u-l,$=s-m,tt=o-m;G=B*tt,x=Pt*B,N=x-(x-B),w=B-N,x=Pt*tt,A=x-(x-tt),q=tt-A,M=w*q-(G-N*A-w*A-N*q),D=$*j,x=Pt*$,N=x-(x-$),w=$-N,x=Pt*j,A=x-(x-j),q=j-A,z=w*q-(D-N*A-w*A-N*q),R=M-z,p=M-R,tn[0]=M-(R+p)+(p-z),P=G+R,p=P-G,b=G-(P-p)+(R-p),R=b-D,p=b-R,tn[1]=b-(R+p)+(p-D),V=P+R,p=V-P,tn[2]=P-(V-p)+(R-p),tn[3]=V;let it=ig(4,tn),S=sg*f;if(it>=S||-it>=S||(p=r-B,c=r-(B+p)+(p-l),p=u-j,v=u-(j+p)+(p-l),p=s-$,y=s-($+p)+(p-m),p=o-tt,_=o-(tt+p)+(p-m),c===0&&y===0&&v===0&&_===0)||(S=ag*f+ng*Math.abs(it),it+=B*_+tt*c-($*v+j*y),it>=S||-it>=S))return it;G=c*tt,x=Pt*c,N=x-(x-c),w=c-N,x=Pt*tt,A=x-(x-tt),q=tt-A,M=w*q-(G-N*A-w*A-N*q),D=y*j,x=Pt*y,N=x-(x-y),w=y-N,x=Pt*j,A=x-(x-j),q=j-A,z=w*q-(D-N*A-w*A-N*q),R=M-z,p=M-R,Ft[0]=M-(R+p)+(p-z),P=G+R,p=P-G,b=G-(P-p)+(R-p),R=b-D,p=b-R,Ft[1]=b-(R+p)+(p-D),V=P+R,p=V-P,Ft[2]=P-(V-p)+(R-p),Ft[3]=V;const F=or(4,tn,4,Ft,oa);G=B*_,x=Pt*B,N=x-(x-B),w=B-N,x=Pt*_,A=x-(x-_),q=_-A,M=w*q-(G-N*A-w*A-N*q),D=$*v,x=Pt*$,N=x-(x-$),w=$-N,x=Pt*v,A=x-(x-v),q=v-A,z=w*q-(D-N*A-w*A-N*q),R=M-z,p=M-R,Ft[0]=M-(R+p)+(p-z),P=G+R,p=P-G,b=G-(P-p)+(R-p),R=b-D,p=b-R,Ft[1]=b-(R+p)+(p-D),V=P+R,p=V-P,Ft[2]=P-(V-p)+(R-p),Ft[3]=V;const O=or(F,oa,4,Ft,la);G=c*_,x=Pt*c,N=x-(x-c),w=c-N,x=Pt*_,A=x-(x-_),q=_-A,M=w*q-(G-N*A-w*A-N*q),D=y*v,x=Pt*y,N=x-(x-y),w=y-N,x=Pt*v,A=x-(x-v),q=v-A,z=w*q-(D-N*A-w*A-N*q),R=M-z,p=M-R,Ft[0]=M-(R+p)+(p-z),P=G+R,p=P-G,b=G-(P-p)+(R-p),R=b-D,p=b-R,Ft[1]=b-(R+p)+(p-D),V=P+R,p=V-P,Ft[2]=P-(V-p)+(R-p),Ft[3]=V;const Z=or(O,la,4,Ft,ha);return ha[Z-1]}function og(r,s,u,o,l,m){const f=(s-m)*(u-l),c=(r-l)*(o-m),y=f-c,v=Math.abs(f+c);return Math.abs(y)>=rg*v?y:-ug(r,s,u,o,l,m,v)}function lg(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Ti(r,s){if((u=(r=s?r.toExponential(s-1):r.toExponential()).indexOf("e"))<0)return null;var u,o=r.slice(0,u);return[o.length>1?o[0]+o.slice(2):o,+r.slice(u+1)]}function an(r){return r=Ti(Math.abs(r)),r?r[1]:NaN}function hg(r,s){return function(u,o){for(var l=u.length,m=[],f=0,c=r[0],y=0;l>0&&c>0&&(y+c+1>o&&(c=Math.max(1,o-y)),m.push(u.substring(l-=c,l+c)),!((y+=c+1)>o));)c=r[f=(f+1)%r.length];return m.reverse().join(s)}}function cg(r){return function(s){return s.replace(/[0-9]/g,function(u){return r[+u]})}}var fg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ri(r){if(!(s=fg.exec(r)))throw new Error("invalid format: "+r);var s;return new Br({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}Ri.prototype=Br.prototype;function Br(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}Br.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gg(r){t:for(var s=r.length,u=1,o=-1,l;u<s;++u)switch(r[u]){case".":o=l=u;break;case"0":o===0&&(o=u),l=u;break;default:if(!+r[u])break t;o>0&&(o=0);break}return o>0?r.slice(0,o)+r.slice(l+1):r}var Gu;function mg(r,s){var u=Ti(r,s);if(!u)return r+"";var o=u[0],l=u[1],m=l-(Gu=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,f=o.length;return m===f?o:m>f?o+new Array(m-f+1).join("0"):m>0?o.slice(0,m)+"."+o.slice(m):"0."+new Array(1-m).join("0")+Ti(r,Math.max(0,s+m-1))[0]}function ca(r,s){var u=Ti(r,s);if(!u)return r+"";var o=u[0],l=u[1];return l<0?"0."+new Array(-l).join("0")+o:o.length>l+1?o.slice(0,l+1)+"."+o.slice(l+1):o+new Array(l-o.length+2).join("0")}const fa={"%":(r,s)=>(r*100).toFixed(s),b:r=>Math.round(r).toString(2),c:r=>r+"",d:lg,e:(r,s)=>r.toExponential(s),f:(r,s)=>r.toFixed(s),g:(r,s)=>r.toPrecision(s),o:r=>Math.round(r).toString(8),p:(r,s)=>ca(r*100,s),r:ca,s:mg,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function ga(r){return r}var ma=Array.prototype.map,da=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dg(r){var s=r.grouping===void 0||r.thousands===void 0?ga:hg(ma.call(r.grouping,Number),r.thousands+""),u=r.currency===void 0?"":r.currency[0]+"",o=r.currency===void 0?"":r.currency[1]+"",l=r.decimal===void 0?".":r.decimal+"",m=r.numerals===void 0?ga:cg(ma.call(r.numerals,String)),f=r.percent===void 0?"%":r.percent+"",c=r.minus===void 0?"−":r.minus+"",y=r.nan===void 0?"NaN":r.nan+"";function v(p){p=Ri(p);var x=p.fill,N=p.align,w=p.sign,A=p.symbol,q=p.zero,R=p.width,P=p.comma,b=p.precision,G=p.trim,M=p.type;M==="n"?(P=!0,M="g"):fa[M]||(b===void 0&&(b=12),G=!0,M="g"),(q||x==="0"&&N==="=")&&(q=!0,x="0",N="=");var D=A==="$"?u:A==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",z=A==="$"?o:/[%p]/.test(M)?f:"",V=fa[M],B=/[defgprs%]/.test(M);b=b===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function j($){var tt=D,it=z,S,F,O;if(M==="c")it=V($)+it,$="";else{$=+$;var Z=$<0||1/$<0;if($=isNaN($)?y:V(Math.abs($),b),G&&($=gg($)),Z&&+$==0&&w!=="+"&&(Z=!1),tt=(Z?w==="("?w:c:w==="-"||w==="("?"":w)+tt,it=(M==="s"?da[8+Gu/3]:"")+it+(Z&&w==="("?")":""),B){for(S=-1,F=$.length;++S<F;)if(O=$.charCodeAt(S),48>O||O>57){it=(O===46?l+$.slice(S+1):$.slice(S))+it,$=$.slice(0,S);break}}}P&&!q&&($=s($,1/0));var J=tt.length+$.length+it.length,Q=J<R?new Array(R-J+1).join(x):"";switch(P&&q&&($=s(Q+$,Q.length?R-it.length:1/0),Q=""),N){case"<":$=tt+$+it+Q;break;case"=":$=tt+Q+$+it;break;case"^":$=Q.slice(0,J=Q.length>>1)+tt+$+it+Q.slice(J);break;default:$=Q+tt+$+it;break}return m($)}return j.toString=function(){return p+""},j}function _(p,x){var N=v((p=Ri(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(an(x)/3)))*3,A=Math.pow(10,-w),q=da[8+w/3];return function(R){return N(A*R)+q}}return{format:v,formatPrefix:_}}var jn,zu,Yu;vg({thousands:",",grouping:[3],currency:["$",""]});function vg(r){return jn=dg(r),zu=jn.format,Yu=jn.formatPrefix,jn}function yg(r){return Math.max(0,-an(Math.abs(r)))}function _g(r,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(an(s)/3)))*3-an(Math.abs(r)))}function pg(r,s){return r=Math.abs(r),s=Math.abs(s)-r,Math.max(0,an(s)-an(r))+1}function kg(r,s){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(s).domain(r);break}return this}function xg(r){return function(){return r}}function Eg(r){return+r}var va=[0,1];function en(r){return r}function Nr(r,s){return(s-=r=+r)?function(u){return(u-r)/s}:xg(isNaN(s)?NaN:.5)}function Ng(r,s){var u;return r>s&&(u=r,r=s,s=u),function(o){return Math.max(r,Math.min(s,o))}}function wg(r,s,u){var o=r[0],l=r[1],m=s[0],f=s[1];return l<o?(o=Nr(l,o),m=u(f,m)):(o=Nr(o,l),m=u(m,f)),function(c){return m(o(c))}}function Ig(r,s,u){var o=Math.min(r.length,s.length)-1,l=new Array(o),m=new Array(o),f=-1;for(r[o]<r[0]&&(r=r.slice().reverse(),s=s.slice().reverse());++f<o;)l[f]=Nr(r[f],r[f+1]),m[f]=u(s[f],s[f+1]);return function(c){var y=Nl(r,c,1,o)-1;return m[y](l[y](c))}}function Sg(r,s){return s.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function Cg(){var r=va,s=va,u=Gr,o,l,m,f=en,c,y,v;function _(){var x=Math.min(r.length,s.length);return f!==en&&(f=Ng(r[0],r[x-1])),c=x>2?Ig:wg,y=v=null,p}function p(x){return x==null||isNaN(x=+x)?m:(y||(y=c(r.map(o),s,u)))(o(f(x)))}return p.invert=function(x){return f(l((v||(v=c(s,r.map(o),ne)))(x)))},p.domain=function(x){return arguments.length?(r=Array.from(x,Eg),_()):r.slice()},p.range=function(x){return arguments.length?(s=Array.from(x),_()):s.slice()},p.rangeRound=function(x){return s=Array.from(x),u=Pc,_()},p.clamp=function(x){return arguments.length?(f=x?!0:en,_()):f!==en},p.interpolate=function(x){return arguments.length?(u=x,_()):u},p.unknown=function(x){return arguments.length?(m=x,p):m},function(x,N){return o=x,l=N,_()}}function Tg(){return Cg()(en,en)}function Rg(r,s,u,o){var l=Tl(r,s,u),m;switch(o=Ri(o??",f"),o.type){case"s":{var f=Math.max(Math.abs(r),Math.abs(s));return o.precision==null&&!isNaN(m=_g(l,f))&&(o.precision=m),Yu(o,f)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(m=pg(l,Math.max(Math.abs(r),Math.abs(s))))&&(o.precision=m-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(m=yg(l))&&(o.precision=m-(o.type==="%")*2);break}}return zu(o)}function Lg(r){var s=r.domain;return r.ticks=function(u){var o=s();return Cl(o[0],o[o.length-1],u??10)},r.tickFormat=function(u,o){var l=s();return Rg(l[0],l[l.length-1],u??10,o)},r.nice=function(u){u==null&&(u=10);var o=s(),l=0,m=o.length-1,f=o[l],c=o[m],y,v,_=10;for(c<f&&(v=f,f=c,c=v,v=l,l=m,m=v);_-- >0;){if(v=gr(f,c,u),v===y)return o[l]=f,o[m]=c,s(o);if(v>0)f=Math.floor(f/v)*v,c=Math.ceil(c/v)*v;else if(v<0)f=Math.ceil(f*v)/v,c=Math.floor(c*v)/v;else break;y=v}return r},r}function wr(){var r=Tg();return r.copy=function(){return Sg(r,wr())},kg.apply(r,arguments),Lg(r)}const ti=r=>()=>r;function bg(r,{sourceEvent:s,target:u,transform:o,dispatch:l}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:u,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:l}})}function xe(r,s,u){this.k=r,this.x=s,this.y=u}xe.prototype={constructor:xe,scale:function(r){return r===1?this:new xe(this.k*r,this.x,this.y)},translate:function(r,s){return r===0&s===0?this:new xe(this.k,this.x+this.k*r,this.y+this.k*s)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ur=new xe(1,0,0);xe.prototype;function lr(r){r.stopImmediatePropagation()}function Nn(r){r.preventDefault(),r.stopImmediatePropagation()}function Mg(r){return(!r.ctrlKey||r.type==="wheel")&&!r.button}function Og(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r,r.hasAttribute("viewBox")?(r=r.viewBox.baseVal,[[r.x,r.y],[r.x+r.width,r.y+r.height]]):[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]):[[0,0],[r.clientWidth,r.clientHeight]]}function ya(){return this.__zoom||Ur}function Ag(r){return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function Pg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dg(r,s,u){var o=r.invertX(s[0][0])-u[0][0],l=r.invertX(s[1][0])-u[1][0],m=r.invertY(s[0][1])-u[0][1],f=r.invertY(s[1][1])-u[1][1];return r.translate(l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l),f>m?(m+f)/2:Math.min(0,m)||Math.max(0,f))}function Fg(){var r=Mg,s=Og,u=Dg,o=Ag,l=Pg,m=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],c=250,y=Bc,v=Ar("start","zoom","end"),_,p,x,N=500,w=150,A=0,q=10;function R(S){S.property("__zoom",ya).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",j).filter(l).on("touchstart.zoom",$).on("touchmove.zoom",tt).on("touchend.zoom touchcancel.zoom",it).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}R.transform=function(S,F,O,Z){var J=S.selection?S.selection():S;J.property("__zoom",ya),S!==J?M(S,F,O,Z):J.interrupt().each(function(){D(this,arguments).event(Z).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},R.scaleBy=function(S,F,O,Z){R.scaleTo(S,function(){var J=this.__zoom.k,Q=typeof F=="function"?F.apply(this,arguments):F;return J*Q},O,Z)},R.scaleTo=function(S,F,O,Z){R.transform(S,function(){var J=s.apply(this,arguments),Q=this.__zoom,U=O==null?G(J):typeof O=="function"?O.apply(this,arguments):O,ht=Q.invert(U),ft=typeof F=="function"?F.apply(this,arguments):F;return u(b(P(Q,ft),U,ht),J,f)},O,Z)},R.translateBy=function(S,F,O,Z){R.transform(S,function(){return u(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof O=="function"?O.apply(this,arguments):O),s.apply(this,arguments),f)},null,Z)},R.translateTo=function(S,F,O,Z,J){R.transform(S,function(){var Q=s.apply(this,arguments),U=this.__zoom,ht=Z==null?G(Q):typeof Z=="function"?Z.apply(this,arguments):Z;return u(Ur.translate(ht[0],ht[1]).scale(U.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof O=="function"?-O.apply(this,arguments):-O),Q,f)},Z,J)};function P(S,F){return F=Math.max(m[0],Math.min(m[1],F)),F===S.k?S:new xe(F,S.x,S.y)}function b(S,F,O){var Z=F[0]-O[0]*S.k,J=F[1]-O[1]*S.k;return Z===S.x&&J===S.y?S:new xe(S.k,Z,J)}function G(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function M(S,F,O,Z){S.on("start.zoom",function(){D(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(Z).end()}).tween("zoom",function(){var J=this,Q=arguments,U=D(J,Q).event(Z),ht=s.apply(J,Q),ft=O==null?G(ht):typeof O=="function"?O.apply(J,Q):O,xt=Math.max(ht[1][0]-ht[0][0],ht[1][1]-ht[0][1]),nt=J.__zoom,Lt=typeof F=="function"?F.apply(J,Q):F,jt=y(nt.invert(ft).concat(xt/nt.k),Lt.invert(ft).concat(xt/Lt.k));return function(qt){if(qt===1)qt=Lt;else{var T=jt(qt),cn=xt/T[2];qt=new xe(cn,ft[0]-T[0]*cn,ft[1]-T[1]*cn)}U.zoom(null,qt)}})}function D(S,F,O){return!O&&S.__zooming||new z(S,F)}function z(S,F){this.that=S,this.args=F,this.active=0,this.sourceEvent=null,this.extent=s.apply(S,F),this.taps=0}z.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,F){return this.mouse&&S!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var F=Te(this.that).datum();v.call(S,this.that,new bg(S,{sourceEvent:this.sourceEvent,target:R,transform:this.that.__zoom,dispatch:v}),F)}};function V(S,...F){if(!r.apply(this,arguments))return;var O=D(this,F).event(S),Z=this.__zoom,J=Math.max(m[0],Math.min(m[1],Z.k*Math.pow(2,o.apply(this,arguments)))),Q=Ge(S);if(O.wheel)(O.mouse[0][0]!==Q[0]||O.mouse[0][1]!==Q[1])&&(O.mouse[1]=Z.invert(O.mouse[0]=Q)),clearTimeout(O.wheel);else{if(Z.k===J)return;O.mouse=[Q,Z.invert(Q)],ci(this),O.start()}Nn(S),O.wheel=setTimeout(U,w),O.zoom("mouse",u(b(P(Z,J),O.mouse[0],O.mouse[1]),O.extent,f));function U(){O.wheel=null,O.end()}}function B(S,...F){if(x||!r.apply(this,arguments))return;var O=S.currentTarget,Z=D(this,F,!0).event(S),J=Te(S.view).on("mousemove.zoom",ft,!0).on("mouseup.zoom",xt,!0),Q=Ge(S,O),U=S.clientX,ht=S.clientY;cc(S.view),lr(S),Z.mouse=[Q,this.__zoom.invert(Q)],ci(this),Z.start();function ft(nt){if(Nn(nt),!Z.moved){var Lt=nt.clientX-U,jt=nt.clientY-ht;Z.moved=Lt*Lt+jt*jt>A}Z.event(nt).zoom("mouse",u(b(Z.that.__zoom,Z.mouse[0]=Ge(nt,O),Z.mouse[1]),Z.extent,f))}function xt(nt){J.on("mousemove.zoom mouseup.zoom",null),fc(nt.view,Z.moved),Nn(nt),Z.event(nt).end()}}function j(S,...F){if(r.apply(this,arguments)){var O=this.__zoom,Z=Ge(S.changedTouches?S.changedTouches[0]:S,this),J=O.invert(Z),Q=O.k*(S.shiftKey?.5:2),U=u(b(P(O,Q),Z,J),s.apply(this,F),f);Nn(S),c>0?Te(this).transition().duration(c).call(M,U,Z,S):Te(this).call(R.transform,U,Z,S)}}function $(S,...F){if(r.apply(this,arguments)){var O=S.touches,Z=O.length,J=D(this,F,S.changedTouches.length===Z).event(S),Q,U,ht,ft;for(lr(S),U=0;U<Z;++U)ht=O[U],ft=Ge(ht,this),ft=[ft,this.__zoom.invert(ft),ht.identifier],J.touch0?!J.touch1&&J.touch0[2]!==ft[2]&&(J.touch1=ft,J.taps=0):(J.touch0=ft,Q=!0,J.taps=1+!!_);_&&(_=clearTimeout(_)),Q&&(J.taps<2&&(p=ft[0],_=setTimeout(function(){_=null},N)),ci(this),J.start())}}function tt(S,...F){if(this.__zooming){var O=D(this,F).event(S),Z=S.changedTouches,J=Z.length,Q,U,ht,ft;for(Nn(S),Q=0;Q<J;++Q)U=Z[Q],ht=Ge(U,this),O.touch0&&O.touch0[2]===U.identifier?O.touch0[0]=ht:O.touch1&&O.touch1[2]===U.identifier&&(O.touch1[0]=ht);if(U=O.that.__zoom,O.touch1){var xt=O.touch0[0],nt=O.touch0[1],Lt=O.touch1[0],jt=O.touch1[1],qt=(qt=Lt[0]-xt[0])*qt+(qt=Lt[1]-xt[1])*qt,T=(T=jt[0]-nt[0])*T+(T=jt[1]-nt[1])*T;U=P(U,Math.sqrt(qt/T)),ht=[(xt[0]+Lt[0])/2,(xt[1]+Lt[1])/2],ft=[(nt[0]+jt[0])/2,(nt[1]+jt[1])/2]}else if(O.touch0)ht=O.touch0[0],ft=O.touch0[1];else return;O.zoom("touch",u(b(U,ht,ft),O.extent,f))}}function it(S,...F){if(this.__zooming){var O=D(this,F).event(S),Z=S.changedTouches,J=Z.length,Q,U;for(lr(S),x&&clearTimeout(x),x=setTimeout(function(){x=null},N),Q=0;Q<J;++Q)U=Z[Q],O.touch0&&O.touch0[2]===U.identifier?delete O.touch0:O.touch1&&O.touch1[2]===U.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(U=Ge(U,this),Math.hypot(p[0]-U[0],p[1]-U[1])<q)){var ht=Te(this).on("dblclick.zoom");ht&&ht.apply(this,arguments)}}}return R.wheelDelta=function(S){return arguments.length?(o=typeof S=="function"?S:ti(+S),R):o},R.filter=function(S){return arguments.length?(r=typeof S=="function"?S:ti(!!S),R):r},R.touchable=function(S){return arguments.length?(l=typeof S=="function"?S:ti(!!S),R):l},R.extent=function(S){return arguments.length?(s=typeof S=="function"?S:ti([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),R):s},R.scaleExtent=function(S){return arguments.length?(m[0]=+S[0],m[1]=+S[1],R):[m[0],m[1]]},R.translateExtent=function(S){return arguments.length?(f[0][0]=+S[0][0],f[1][0]=+S[1][0],f[0][1]=+S[0][1],f[1][1]=+S[1][1],R):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},R.constrain=function(S){return arguments.length?(u=S,R):u},R.duration=function(S){return arguments.length?(c=+S,R):c},R.interpolate=function(S){return arguments.length?(y=S,R):y},R.on=function(){var S=v.on.apply(v,arguments);return S===v?R:S},R.clickDistance=function(S){return arguments.length?(A=(S=+S)*S,R):Math.sqrt(A)},R.tapDistance=function(S){return arguments.length?(q=+S,R):q},R}var Gt=63710088e-1,Xu={centimeters:Gt*100,centimetres:Gt*100,degrees:360/(2*Math.PI),feet:Gt*3.28084,inches:Gt*39.37,kilometers:Gt/1e3,kilometres:Gt/1e3,meters:Gt,metres:Gt,miles:Gt/1609.344,millimeters:Gt*1e3,millimetres:Gt*1e3,nauticalmiles:Gt/1852,radians:1,yards:Gt*1.0936};function Bu(r,s,u={}){const o={type:"Feature"};return(u.id===0||u.id)&&(o.id=u.id),u.bbox&&(o.bbox=u.bbox),o.properties=s||{},o.geometry=r,o}function Uu(r,s,u={}){if(!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_a(r[0])||!_a(r[1]))throw new Error("coordinates must contain numbers");return Bu({type:"Point",coordinates:r},s,u)}function Ir(r,s={}){const u={type:"FeatureCollection"};return s.id&&(u.id=s.id),s.bbox&&(u.bbox=s.bbox),u.features=r,u}function qg(r,s="kilometers"){const u=Xu[s];if(!u)throw new Error(s+" units is invalid");return r*u}function Gg(r,s="kilometers"){const u=Xu[s];if(!u)throw new Error(s+" units is invalid");return r/u}function _a(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function zg(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return[...r.geometry.coordinates];if(r.type==="Point")return[...r.coordinates]}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return[...r];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Yg(r){return r.type==="Feature"?r.geometry:r}function Vu(r,s,u){if(r!==null)for(var o,l,m,f,c,y,v,_=0,p=0,x,N=r.type,w=N==="FeatureCollection",A=N==="Feature",q=w?r.features.length:1,R=0;R<q;R++){v=w?r.features[R].geometry:A?r.geometry:r,x=v?v.type==="GeometryCollection":!1,c=x?v.geometries.length:1;for(var P=0;P<c;P++){var b=0,G=0;if(f=x?v.geometries[P]:v,f!==null){y=f.coordinates;var M=f.type;switch(_=0,M){case null:break;case"Point":if(s(y,p,R,b,G)===!1)return!1;p++,b++;break;case"LineString":case"MultiPoint":for(o=0;o<y.length;o++){if(s(y[o],p,R,b,G)===!1)return!1;p++,M==="MultiPoint"&&b++}M==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(o=0;o<y.length;o++){for(l=0;l<y[o].length-_;l++){if(s(y[o][l],p,R,b,G)===!1)return!1;p++}M==="MultiLineString"&&b++,M==="Polygon"&&G++}M==="Polygon"&&b++;break;case"MultiPolygon":for(o=0;o<y.length;o++){for(G=0,l=0;l<y[o].length;l++){for(m=0;m<y[o][l].length-_;m++){if(s(y[o][l][m],p,R,b,G)===!1)return!1;p++}G++}b++}break;case"GeometryCollection":for(o=0;o<f.geometries.length;o++)if(Vu(f.geometries[o],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pa(r,s){if(r.type==="Feature")s(r,0);else if(r.type==="FeatureCollection")for(var u=0;u<r.features.length&&s(r.features[u],u)!==!1;u++);}function Hu(r,s){var u,o,l,m,f,c,y,v,_,p,x=0,N=r.type==="FeatureCollection",w=r.type==="Feature",A=N?r.features.length:1;for(u=0;u<A;u++){for(c=N?r.features[u].geometry:w?r.geometry:r,v=N?r.features[u].properties:w?r.properties:{},_=N?r.features[u].bbox:w?r.bbox:void 0,p=N?r.features[u].id:w?r.id:void 0,y=c?c.type==="GeometryCollection":!1,f=y?c.geometries.length:1,l=0;l<f;l++){if(m=y?c.geometries[l]:c,m===null){if(s(null,x,v,_,p)===!1)return!1;continue}switch(m.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(m,x,v,_,p)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<m.geometries.length;o++)if(s(m.geometries[o],x,v,_,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function Xg(r,s={}){if(r.bbox!=null&&s.recompute!==!0)return r.bbox;const u=[1/0,1/0,-1/0,-1/0];return Vu(r,o=>{u[0]>o[0]&&(u[0]=o[0]),u[1]>o[1]&&(u[1]=o[1]),u[2]<o[0]&&(u[2]=o[0]),u[3]<o[1]&&(u[3]=o[1])}),u}function Bg(r,s){var u,o,l=0,m,f,c,y,v,_,p,x=r[0],N=r[1],w=s.length;for(u=0;u<w;u++){o=0;var A=s[u],q=A.length-1;if(_=A[0],_[0]!==A[q][0]&&_[1]!==A[q][1])throw new Error("First and last coordinates in a ring must be the same");for(f=_[0]-x,c=_[1]-N,o;o<q;o++){if(p=A[o+1],y=p[0]-x,v=p[1]-N,c===0&&v===0){if(y<=0&&f>=0||f<=0&&y>=0)return 0}else if(v>=0&&c<=0||v<=0&&c>=0){if(m=og(f,y,c,v,0,0),m===0)return 0;(m>0&&v>0&&c<=0||m<0&&v<=0&&c>0)&&l++}_=p,c=v,f=y}}return l%2!==0}function ka(r,s,u={}){if(!r)throw new Error("point is required");if(!s)throw new Error("polygon is required");const o=zg(r),l=Yg(s),m=l.type,f=s.bbox;let c=l.coordinates;if(f&&Ug(o,f)===!1)return!1;m==="Polygon"&&(c=[c]);let y=!1;for(var v=0;v<c.length;++v){const _=Bg(o,c[v]);if(_===0)return!u.ignoreBoundary;_&&(y=!0)}return y}function Ug(r,s){return s[0]<=r[0]&&s[1]<=r[1]&&s[2]>=r[0]&&s[3]>=r[1]}var Vg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Zg(r,s={}){const u=Xg(r),o=(u[0]+u[2])/2,l=(u[1]+u[3])/2;return Uu([o,l],s.properties,s)}var Zu={exports:{}};(function(r,s){(function(u,o){r.exports=o()})(Vg,function(){function u(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=Array(t);e<t;e++)n[e]=i[e];return n}function o(i,t,e){return t=_(t),function(n,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(n)}(i,x()?Reflect.construct(t,e||[],_(i).constructor):t.apply(i,e))}function l(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function m(i,t,e){if(x())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var a=new(i.bind.apply(i,n));return e&&N(a,e.prototype),a}function f(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,q(n.key),n)}}function c(i,t,e){return t&&f(i.prototype,t),e&&f(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function y(i,t){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=R(i))||t){e&&(i=e);var n=0,a=function(){};return{s:a,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(k){throw k},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h,g=!0,d=!1;return{s:function(){e=e.call(i)},n:function(){var k=e.next();return g=k.done,k},e:function(k){d=!0,h=k},f:function(){try{g||e.return==null||e.return()}finally{if(d)throw h}}}}function v(){return v=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,t,e){var n=function(h,g){for(;!{}.hasOwnProperty.call(h,g)&&(h=_(h))!==null;);return h}(i,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?i:e):a.value}},v.apply(null,arguments)}function _(i){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(i)}function p(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&N(i,t)}function x(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x=function(){return!!i})()}function N(i,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},N(i,t)}function w(i,t,e,n){var a=v(_(1&n?i.prototype:i),t,e);return 2&n&&typeof a=="function"?function(h){return a.apply(e,h)}:a}function A(i){return function(t){if(Array.isArray(t))return u(t)}(i)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(i)||R(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q(i){var t=function(e,n){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var h=a.call(e,n);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i,"string");return typeof t=="symbol"?t:t+""}function R(i,t){if(i){if(typeof i=="string")return u(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(i,t):void 0}}function P(i){var t=typeof Map=="function"?new Map:void 0;return P=function(e){if(e===null||!function(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),N(n,e)},P(i)}var b=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=i.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=i.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==i.JOIN_ROUND&&(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=i.CAP_ROUND,this._joinStyle=i.JOIN_ROUND,this._mitreLimit=i.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=i.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var a=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3];this.setQuadrantSegments(a),this.setEndCapStyle(h),this.setJoinStyle(g),this.setMitreLimit(d)}}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();b.CAP_ROUND=1,b.CAP_FLAT=2,b.CAP_SQUARE=3,b.JOIN_ROUND=1,b.JOIN_MITRE=2,b.JOIN_BEVEL=3,b.DEFAULT_QUADRANT_SEGMENTS=8,b.DEFAULT_MITRE_LIMIT=5,b.DEFAULT_SIMPLIFY_FACTOR=.01;var G=function(i){function t(e){var n;return l(this,t),(n=o(this,t,[e])).name=Object.keys({Exception:t})[0],n}return p(t,i),c(t,[{key:"toString",value:function(){return this.message}}])}(P(Error)),M=function(i){function t(e){var n;return l(this,t),(n=o(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],n}return p(t,i),c(t)}(G),D=function(){return c(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}();function z(){}function V(){}function B(){}var j,$,tt,it,S,F,O,Z,J=function(){return c(function i(){l(this,i)},null,[{key:"equalsWithTolerance",value:function(i,t,e){return Math.abs(i-t)<=e}}])}(),Q=function(){return c(function i(t,e){l(this,i),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(i){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(i.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(i.low&t)===t?"1":"0";return e}}])}();function U(){}function ht(){}U.NaN=NaN,U.isNaN=function(i){return Number.isNaN(i)},U.isInfinite=function(i){return!Number.isFinite(i)},U.MAX_VALUE=Number.MAX_VALUE,U.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,U.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(F=2146435072,O=new Float64Array(1),Z=new Int32Array(O.buffer),U.doubleToLongBits=function(i){O[0]=i;var t=0|Z[0],e=0|Z[1];return(e&F)===F&&1048575&e&&t!==0&&(t=0,e=2146959360),new Q(e,t)},U.longBitsToDouble=function(i){return Z[0]=i.low,Z[1]=i.high,O[0]}):(j=1023,$=Math.log2,tt=Math.floor,it=Math.pow,S=function(){for(var i=53;i>0;i--){var t=it(2,i)-1;if(tt($(t))+1===i)return t}return 0}(),U.doubleToLongBits=function(i){var t,e,n,a,h,g,d,k,E;if(i<0||1/i===Number.NEGATIVE_INFINITY?(g=1<<31,i=-i):g=0,i===0)return new Q(k=g,E=0);if(i===1/0)return new Q(k=2146435072|g,E=0);if(i!=i)return new Q(k=2146959360,E=0);if(a=0,E=0,(t=tt(i))>1)if(t<=S)(a=tt($(t)))<=20?(E=0,k=t<<20-a&1048575):(E=t%(e=it(2,n=a-20))<<32-n,k=t/e&1048575);else for(n=t,E=0;(n=tt(e=n/2))!==0;)a++,E>>>=1,E|=(1&k)<<31,k>>>=1,e!==n&&(k|=524288);if(d=a+j,h=t===0,t=i-t,a<52&&t!==0)for(n=0;;){if((e=2*t)>=1?(t=e-1,h?(d--,h=!1):(n<<=1,n|=1,a++)):(t=e,h?--d==0&&(a++,h=!1):(n<<=1,a++)),a===20)k|=n,n=0;else if(a===52){E|=n;break}if(e===1){a<20?k|=n<<20-a:a<52&&(E|=n<<52-a);break}}return k|=d<<20,new Q(k|=g,E)},U.longBitsToDouble=function(i){var t,e,n,a,h=i.high,g=i.low,d=h&1<<31?-1:1;for(n=((2146435072&h)>>20)-j,a=0,e=1<<19,t=1;t<=20;t++)h&e&&(a+=it(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)g&e&&(a+=it(2,-t)),e>>>=1;if(n===-1023){if(a===0)return 0*d;n=-1022}else{if(n===1024)return a===0?d/0:NaN;a+=1}return d*a*it(2,n)});var ft=function(i){function t(e){var n;return l(this,t),(n=o(this,t,[e])).name=Object.keys({RuntimeException:t})[0],n}return p(t,i),c(t)}(G),xt=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,null,[{key:"constructor_",value:function(){if(arguments.length===0)ft.constructor_.call(this);else if(arguments.length===1){var e=arguments[0];ft.constructor_.call(this,e)}}}])}(ft),nt=function(){function i(){l(this,i)}return c(i,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)i.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new xt("Should never reach here"+(t!==null?": "+t:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var t=arguments[0];i.isTrue(t,null)}else if(arguments.length===2){var e=arguments[1];if(!arguments[0])throw e===null?new xt:new xt(e)}}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];i.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],a=arguments[1],h=arguments[2];if(!a.equals(n))throw new xt("Expected "+n+" but encountered "+a+(h!==null?": "+h:""))}}}])}(),Lt=new ArrayBuffer(8),jt=new Float64Array(Lt),qt=new Int32Array(Lt),T=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getM",value:function(){return U.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case i.X:this.x=e;break;case i.Y:this.y=e;break;case i.Z:this.setZ(e);break;default:throw new M("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!!J.equalsWithTolerance(this.x,e.x,n)&&!!J.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new M("Invalid ordinate index: "+i.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.getZ()}throw new M("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||U.isNaN(this.getZ())&&U.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof i&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return J.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return nt.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,a=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+a*a)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*t+i.hashCode(this.x))+i.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[z,V,B]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)i.constructor_.call(this,0,0);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.x,t.y,t.getZ())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];i.constructor_.call(this,e,n,i.NULL_ORDINATE)}else if(arguments.length===3){var a=arguments[0],h=arguments[1],g=arguments[2];this.x=a,this.y=h,this.z=g}}},{key:"hashCode",value:function(t){return jt[0]=t,qt[0]^qt[1]}}])}(),cn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"compare",value:function(t,e){var n=i.compare(t.x,e.x);if(n!==0)return n;var a=i.compare(t.y,e.y);return a!==0?a:this._dimensionsToTest<=2?0:i.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[ht]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)i.constructor_.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new M("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:U.isNaN(t)?U.isNaN(e)?0:-1:U.isNaN(e)?1:0}}])}();T.DimensionalComparator=cn,T.NULL_ORDINATE=U.NaN,T.X=0,T.Y=1,T.Z=2,T.M=3;var Et=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new i;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new i(e,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof i){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&a>=this._miny&&a<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof T){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){if(arguments[0]instanceof T&&arguments[1]instanceof T){var n=arguments[0],a=arguments[1];return!this.isNull()&&!((n.x<a.x?n.x:a.x)>this._maxx)&&!((n.x>a.x?n.x:a.x)<this._minx)&&!((n.y<a.y?n.y:a.y)>this._maxy)&&!((n.y>a.y?n.y:a.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var h=arguments[0],g=arguments[1];return!this.isNull()&&!(h>this._maxx||h<this._minx||g>this._maxy||g<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=a,this._maxy=a):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),a<this._miny&&(this._miny=a),a>this._maxy&&(this._maxy=a))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof T){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];return this.covers(n,a)}}},{key:"centre",value:function(){return this.isNull()?null:new T((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];this.init(n.x,a.x,n.y,a.y)}else if(arguments.length===4){var h=arguments[0],g=arguments[1],d=arguments[2],k=arguments[3];h<g?(this._minx=h,this._maxx=g):(this._minx=g,this._maxx=h),d<k?(this._miny=d,this._maxy=k):(this._miny=k,this._maxy=d)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+T.hashCode(this._minx))+T.hashCode(this._maxx))+T.hashCode(this._miny))+T.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[z,B]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];this.init(n.x,a.x,n.y,a.y)}else if(arguments.length===4){var h=arguments[0],g=arguments[1],d=arguments[2],k=arguments[3];this.init(h,g,d,k)}}},{key:"intersects",value:function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var a=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3],k=Math.min(g.x,d.x),E=Math.max(g.x,d.x),C=Math.min(a.x,h.x),L=Math.max(a.x,h.x);return!(C>E)&&!(L<k)&&(k=Math.min(g.y,d.y),E=Math.max(g.y,d.y),C=Math.min(a.y,h.y),L=Math.max(a.y,h.y),!(C>E)&&!(L<k))}}}])}(),st=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(i.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return t!==null&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(arguments.length===1){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(arguments.length===2){var n=arguments[0],a=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,a)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION)throw new M("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return this.envelope!=null&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=this._envelope==null?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Et(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),a=e.iterator();n.hasNext()&&a.hasNext();){var h=n.next(),g=a.next(),d=h.compareTo(g);if(d!==0)return d}return n.hasNext()?1:a.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===i.TYPECODE_MULTIPOINT||this.getTypeCode()===i.TYPECODE_MULTILINESTRING||this.getTypeCode()===i.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[V,z,B]}},{key:"getClass",value:function(){return i}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1}}])}();st.constructor_=function(i){i&&(this._envelope=null,this._userData=null,this._factory=i,this._SRID=i.getSRID())},st.TYPECODE_POINT=0,st.TYPECODE_MULTIPOINT=1,st.TYPECODE_LINESTRING=2,st.TYPECODE_LINEARRING=3,st.TYPECODE_MULTILINESTRING=4,st.TYPECODE_POLYGON=5,st.TYPECODE_MULTIPOLYGON=6,st.TYPECODE_GEOMETRYCOLLECTION=7,st.TYPENAME_POINT="Point",st.TYPENAME_MULTIPOINT="MultiPoint",st.TYPENAME_LINESTRING="LineString",st.TYPENAME_LINEARRING="LinearRing",st.TYPENAME_MULTILINESTRING="MultiLineString",st.TYPENAME_POLYGON="Polygon",st.TYPENAME_MULTIPOLYGON="MultiPolygon",st.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",st.geometryChangedFilter={get interfaces_(){return[D]},filter:function(i){i.geometryChangedAction()}};var I=function(){function i(){l(this,i)}return c(i,null,[{key:"toLocationSymbol",value:function(t){switch(t){case i.EXTERIOR:return"e";case i.BOUNDARY:return"b";case i.INTERIOR:return"i";case i.NONE:return"-"}throw new M("Unknown location value: "+t)}}])}();I.INTERIOR=0,I.BOUNDARY=1,I.EXTERIOR=2,I.NONE=-1;var ae=function(){return c(function i(){l(this,i)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),qn=function(i){function t(e){var n;return l(this,t),(n=o(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],n}return p(t,i),c(t)}(G),Ie=function(i){function t(e){var n;return l(this,t),(n=o(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],n}return p(t,i),c(t)}(G),Zr=function(i){function t(){return l(this,t),o(this,t,arguments)}return p(t,i),c(t,[{key:"contains",value:function(){}}])}(ae),Gi=function(i){function t(e){var n;return l(this,t),(n=o(this,t)).map=new Map,e instanceof ae&&n.addAll(e),n}return p(t,i),c(t,[{key:"contains",value:function(e){var n=e.hashCode?e.hashCode():e;return!!this.map.has(n)}},{key:"add",value:function(e){var n=e.hashCode?e.hashCode():e;return!this.map.has(n)&&!!this.map.set(n,e)}},{key:"addAll",value:function(e){var n,a=y(e);try{for(a.s();!(n=a.n()).done;){var h=n.value;this.add(h)}}catch(g){a.e(g)}finally{a.f()}return!0}},{key:"remove",value:function(){throw new Ie}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new lo(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Zr),lo=function(){return c(function i(t){l(this,i),this.iterator=t.values();var e=this.iterator.next(),n=e.done,a=e.value;this.done=n,this.value=a},[{key:"next",value:function(){if(this.done)throw new qn;var i=this.value,t=this.iterator.next(),e=t.done,n=t.value;return this.done=e,this.value=n,i}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Ie}}])}(),H=function(){function i(){l(this,i)}return c(i,null,[{key:"opposite",value:function(t){return t===i.LEFT?i.RIGHT:t===i.RIGHT?i.LEFT:t}}])}();H.ON=0,H.LEFT=1,H.RIGHT=2;var $r=function(i){function t(e){var n;return l(this,t),(n=o(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],n}return p(t,i),c(t)}(G),Wr=function(i){function t(e){var n;return l(this,t),(n=o(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],n}return p(t,i),c(t)}(G),be=function(i){function t(){return l(this,t),o(this,t,arguments)}return p(t,i),c(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(ae),ho=function(i){function t(){var e;return l(this,t),(e=o(this,t)).array=[],e}return p(t,i),c(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new Wr;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(this.array.length===0)throw new $r;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new $r;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(be);function ct(i,t){return i.interfaces_&&i.interfaces_.indexOf(t)>-1}var fn=function(){return c(function i(t){l(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),Gn=function(){function i(t){l(this,i),this.value=t}return c(i,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new i(t)}}])}(),zi=function(){return c(function i(){l(this,i)},null,[{key:"isWhitespace",value:function(i){return i<=32&&i>=0||i===127}},{key:"toUpperCase",value:function(i){return i.toUpperCase()}}])}(),ot=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var n=this.abs(),a=i.magnitude(n._hi),h=i.TEN.pow(a);(n=n.divide(h)).gt(i.TEN)?(n=n.divide(i.TEN),a+=1):n.lt(i.ONE)&&(n=n.multiply(i.TEN),a-=1);for(var g=a+1,d=new fn,k=i.MAX_PRINT_DIGITS-1,E=0;E<=k;E++){t&&E===g&&d.append(".");var C=Math.trunc(n._hi);if(C<0)break;var L=!1,X=0;C>9?(L=!0,X="9"):X="0"+C,d.append(X),n=n.subtract(i.valueOf(C)).multiply(i.TEN),L&&n.selfAdd(i.TEN);var K=!0,et=i.magnitude(n._hi);if(et<0&&Math.abs(et)>=k-E&&(K=!1),!K)break}return e[0]=a,d.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof i){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n,a,h,g,d=arguments[0],k=arguments[1],E=null,C=null,L=null,X=null;return h=this._hi/d,X=(E=(L=i.SPLIT*h)-(E=L-h))*(C=(X=i.SPLIT*d)-(C=X-d))-(g=h*d)+E*(a=d-C)+(n=h-E)*C+n*a,X=h+(L=(this._hi-g-X+this._lo-h*k)/d),this._hi=X,this._lo=h-X+L,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof i){var t,e,n,a,h=arguments[0],g=null,d=null,k=null,E=null;return t=(n=this._hi/h._hi)-(g=(k=i.SPLIT*n)-(g=k-n)),E=g*(d=(E=i.SPLIT*h._hi)-(d=E-h._hi))-(a=n*h._hi)+g*(e=h._hi-d)+t*d+t*e,new i(E=n+(k=(this._hi-a-E+this._lo-n*h._lo)/h._hi),n-E+k)}if(typeof arguments[0]=="number"){var C=arguments[0];return U.isNaN(C)?i.createNaN():i.copy(this).selfDivide(C,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(t===0)return i.valueOf(1);var e=new i(this),n=i.valueOf(1),a=Math.abs(t);if(a>1)for(;a>0;)a%2==1&&n.selfMultiply(e),(a/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return i.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new i(t,e)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return i.valueOf(0);if(this.isNegative())return i.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=i.valueOf(e),a=this.subtract(n.sqr())._hi*(.5*t);return n.add(a)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e,n,a,h,g,d=arguments[0],k=null;return k=(a=this._hi+d)-(h=a-this._hi),n=(g=(k=d-h+(this._hi-k))+this._lo)+(a-(e=a+g)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(arguments.length===2){var E,C,L,X,K=arguments[0],et=arguments[1],at=null,dt=null,gt=null;L=this._hi+K,C=this._lo+et,dt=L-(gt=L-this._hi),at=C-(X=C-this._lo);var pt=(E=L+(gt=(dt=K-gt+(this._hi-dt))+C))+(gt=(at=et-X+(this._lo-at))+(gt+(L-E))),Ot=gt+(E-pt);return this._hi=pt,this._lo=Ot,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n,a,h=arguments[0],g=arguments[1],d=null,k=null,E=null,C=null;d=(E=i.SPLIT*this._hi)-this._hi,C=i.SPLIT*h,d=E-d,n=this._hi-d,k=C-h;var L=(E=this._hi*h)+(C=d*(k=C-k)-E+d*(a=h-k)+n*k+n*a+(this._hi*g+this._lo*h)),X=C+(d=E-L);return this._hi=L,this._lo=X,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return i.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new i(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new i(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return t.isNaN()?i.createNaN():i.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return U.isNaN(e)?i.createNaN():i.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return U.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=i.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),a=e[0]+1,h=n;if(n.charAt(0)===".")h="0"+n;else if(a<0)h="0."+i.stringOfChar("0",-a)+n;else if(n.indexOf(".")===-1){var g=a-n.length;h=n+i.stringOfChar("0",g)+".0"}return this.isNegative()?"-"+h:h}},{key:"reciprocal",value:function(){var t,e,n,a,h=null,g=null,d=null,k=null;t=(n=1/this._hi)-(h=(d=i.SPLIT*n)-(h=d-n)),g=(k=i.SPLIT*this._hi)-this._hi;var E=n+(d=(1-(a=n*this._hi)-(k=h*(g=k-g)-a+h*(e=this._hi-g)+t*g+t*e)-n*this._lo)/this._hi);return new i(E,n-E+d)}},{key:"toSciNotation",value:function(){if(this.isZero())return i.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),a=i.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var h="";n.length>1&&(h=n.substring(1));var g=n.charAt(0)+"."+h;return this.isNegative()?"-"+g+a:g+a}},{key:"abs",value:function(){return this.isNaN()?i.NaN:this.isNegative()?this.negate():new i(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return i.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return i.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof i){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];this._hi=n,this._lo=a}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?i.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[B,z,V]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];i.constructor_.call(this,i.parse(n))}}else if(arguments.length===2){var a=arguments[0],h=arguments[1];this.init(a,h)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2],a=arguments[3];return i.determinant(i.valueOf(t),i.valueOf(e),i.valueOf(n),i.valueOf(a))}if(arguments[3]instanceof i&&arguments[2]instanceof i&&arguments[0]instanceof i&&arguments[1]instanceof i){var h=arguments[1],g=arguments[2],d=arguments[3];return arguments[0].multiply(d).selfSubtract(h.multiply(g))}}},{key:"sqr",value:function(t){return i.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var t=arguments[0];return i.parse(t)}if(typeof arguments[0]=="number")return new i(arguments[0])}},{key:"sqrt",value:function(t){return i.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,n=t.length;zi.isWhitespace(t.charAt(e));)e++;var a=!1;if(e<n){var h=t.charAt(e);h!=="-"&&h!=="+"||(e++,h==="-"&&(a=!0))}for(var g=new i,d=0,k=0,E=0,C=!1;!(e>=n);){var L=t.charAt(e);if(e++,zi.isDigit(L)){var X=L-"0";g.selfMultiply(i.TEN),g.selfAdd(X),d++}else{if(L!=="."){if(L==="e"||L==="E"){var K=t.substring(e);try{E=Gn.parseInt(K)}catch(pt){throw pt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+K+" in string "+t):pt}break}throw new NumberFormatException("Unexpected character '"+L+"' at position "+e+" in string "+t)}k=d,C=!0}}var et=g;C||(k=d);var at=d-k-E;if(at===0)et=g;else if(at>0){var dt=i.TEN.pow(at);et=g.divide(dt)}else if(at<0){var gt=i.TEN.pow(-at);et=g.multiply(gt)}return a?et.negate():et}},{key:"createNaN",value:function(){return new i(U.NaN,U.NaN)}},{key:"copy",value:function(t){return new i(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),a=Math.trunc(Math.floor(n));return 10*Math.pow(10,a)<=e&&(a+=1),a}},{key:"stringOfChar",value:function(t,e){for(var n=new fn,a=0;a<e;a++)n.append(t);return n.toString()}}])}();ot.PI=new ot(3.141592653589793,12246467991473532e-32),ot.TWO_PI=new ot(6.283185307179586,24492935982947064e-32),ot.PI_2=new ot(1.5707963267948966,6123233995736766e-32),ot.E=new ot(2.718281828459045,14456468917292502e-32),ot.NaN=new ot(U.NaN,U.NaN),ot.EPS=123259516440783e-46,ot.SPLIT=134217729,ot.MAX_PRINT_DIGITS=32,ot.TEN=ot.valueOf(10),ot.ONE=ot.valueOf(1),ot.SCI_NOT_EXPONENT_CHAR="E",ot.SCI_NOT_ZERO="0.0E0";var Yi=function(){function i(){l(this,i)}return c(i,null,[{key:"orientationIndex",value:function(t,e,n){var a=i.orientationIndexFilter(t,e,n);if(a<=1)return a;var h=ot.valueOf(e.x).selfAdd(-t.x),g=ot.valueOf(e.y).selfAdd(-t.y),d=ot.valueOf(n.x).selfAdd(-e.x),k=ot.valueOf(n.y).selfAdd(-e.y);return h.selfMultiply(k).selfSubtract(g.selfMultiply(d)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof ot&&arguments[2]instanceof ot&&arguments[0]instanceof ot&&arguments[1]instanceof ot){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var a=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3],k=ot.valueOf(a),E=ot.valueOf(h),C=ot.valueOf(g),L=ot.valueOf(d);return k.multiply(L).selfSubtract(E.multiply(C)).signum()}}},{key:"intersection",value:function(t,e,n,a){var h=new ot(t.y).selfSubtract(e.y),g=new ot(e.x).selfSubtract(t.x),d=new ot(t.x).selfMultiply(e.y).selfSubtract(new ot(e.x).selfMultiply(t.y)),k=new ot(n.y).selfSubtract(a.y),E=new ot(a.x).selfSubtract(n.x),C=new ot(n.x).selfMultiply(a.y).selfSubtract(new ot(a.x).selfMultiply(n.y)),L=g.multiply(C).selfSubtract(E.multiply(d)),X=k.multiply(d).selfSubtract(h.multiply(C)),K=h.multiply(E).selfSubtract(k.multiply(g)),et=L.selfDivide(K).doubleValue(),at=X.selfDivide(K).doubleValue();return U.isNaN(et)||U.isInfinite(et)||U.isNaN(at)||U.isInfinite(at)?null:new T(et,at)}},{key:"orientationIndexFilter",value:function(t,e,n){var a=null,h=(t.x-n.x)*(e.y-n.y),g=(t.y-n.y)*(e.x-n.x),d=h-g;if(h>0){if(g<=0)return i.signum(d);a=h+g}else{if(!(h<0)||g>=0)return i.signum(d);a=-h-g}var k=i.DP_SAFE_EPSILON*a;return d>=k||-d>=k?i.signum(d):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();Yi.DP_SAFE_EPSILON=1e-15;var mt=function(){return c(function i(){l(this,i)},[{key:"getM",value:function(i){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(i,t)}return U.NaN}},{key:"setOrdinate",value:function(i,t,e){}},{key:"getZ",value:function(i){return this.hasZ()?this.getOrdinate(i,2):U.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(i,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(i){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(i){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(i){}},{key:"copy",value:function(){}},{key:"getY",value:function(i){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[V]}}])}();mt.X=0,mt.Y=1,mt.Z=2,mt.M=3;var lt=function(){function i(){l(this,i)}return c(i,null,[{key:"index",value:function(t,e,n){return Yi.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new M("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],a=0,h=1;h<=e;h++){var g=t[h];g.y>n.y&&(n=g,a=h)}var d=a;do(d-=1)<0&&(d=e);while(t[d].equals2D(n)&&d!==a);var k=a;do k=(k+1)%e;while(t[k].equals2D(n)&&k!==a);var E=t[d],C=t[k];if(E.equals2D(n)||C.equals2D(n)||E.equals2D(C))return!1;var L=i.index(E,n,C);return L===0?E.x>C.x:L>0}if(ct(arguments[0],mt)){var X=arguments[0],K=X.size()-1;if(K<3)throw new M("Ring has fewer than 4 points, so orientation cannot be determined");for(var et=X.getCoordinate(0),at=0,dt=1;dt<=K;dt++){var gt=X.getCoordinate(dt);gt.y>et.y&&(et=gt,at=dt)}var pt=null,Ot=at;do(Ot-=1)<0&&(Ot=K),pt=X.getCoordinate(Ot);while(pt.equals2D(et)&&Ot!==at);var At=null,qe=at;do qe=(qe+1)%K,At=X.getCoordinate(qe);while(At.equals2D(et)&&qe!==at);if(pt.equals2D(et)||At.equals2D(et)||pt.equals2D(At))return!1;var xn=i.index(pt,et,At);return xn===0?pt.x>At.x:xn>0}}}])}();lt.CLOCKWISE=-1,lt.RIGHT=lt.CLOCKWISE,lt.COUNTERCLOCKWISE=1,lt.LEFT=lt.COUNTERCLOCKWISE,lt.COLLINEAR=0,lt.STRAIGHT=lt.COLLINEAR;var co=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(i,t){var e=this.getRightmostSideOfSegment(i,t);return e<0&&(e=this.getRightmostSideOfSegment(i,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(i)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var i=this._minDe.getEdge().getCoordinates();nt.isTrue(this._minIndex>0&&this._minIndex<i.length,"rightmost point expected to be interior vertex of edge");var t=i[this._minIndex-1],e=i[this._minIndex+1],n=lt.index(this._minCoord,e,t),a=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&n===lt.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&n===lt.CLOCKWISE)&&(a=!0),a&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(i,t){var e=i.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var n=H.LEFT;return e[t].y<e[t+1].y&&(n=H.RIGHT),n}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(i){for(var t=i.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(this._minCoord===null||t[e].x>this._minCoord.x)&&(this._minDe=i,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var i=this._minDe.getNode().getEdges();this._minDe=i.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}nt.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===H.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),ye=function(i){function t(e,n){var a;return l(this,t),(a=o(this,t,[n?e+" [ "+n+" ]":e])).pt=n?new T(n):void 0,a.name=Object.keys({TopologyException:t})[0],a}return p(t,i),c(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(ft),fo=function(){return c(function i(){l(this,i),this.array=[]},[{key:"addLast",value:function(i){this.array.push(i)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),ut=function(i){function t(e){var n;return l(this,t),(n=o(this,t)).array=[],e instanceof ae&&n.addAll(e),n}return p(t,i),c(t,[{key:"interfaces_",get:function(){return[be,ae]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return arguments.length===1?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var n,a=y(e);try{for(a.s();!(n=a.n()).done;){var h=n.value;this.array.push(h)}}catch(g){a.e(g)}finally{a.f()}}},{key:"set",value:function(e,n){var a=this.array[e];return this.array[e]=n,a}},{key:"iterator",value:function(){return new go(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new Wr;return this.array[e]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(e){e?this.array.sort(function(n,a){return e.compare(n,a)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var n=0,a=this.array.length;n<a;n++)if(this.array[n]===e)return!!this.array.splice(n,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(be),go=function(){return c(function i(t){l(this,i),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new qn;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(i){return this.arrayList.set(this.position-1,i)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),mo=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();)i.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(i){for(var t=null,e=i.getEdges().iterator();e.hasNext();){var n=e.next();if(n.isVisited()||n.getSym().isVisited()){t=n;break}}if(t===null)throw new ye("unable to find edge to compute depths at "+i.getCoordinate());i.getEdges().computeDepths(t);for(var a=i.getEdges().iterator();a.hasNext();){var h=a.next();h.setVisited(!0),this.copySymDepths(h)}}},{key:"computeDepth",value:function(i){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(H.RIGHT,i),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(i){this.addReachable(i),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();){var t=i.next();t.getDepth(H.RIGHT)>=1&&t.getDepth(H.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(i){var t=new Gi,e=new fo,n=i.getNode();for(e.addLast(n),t.add(n),i.setVisited(!0);!e.isEmpty();){var a=e.removeFirst();t.add(a),this.computeNodeDepth(a);for(var h=a.getEdges().iterator();h.hasNext();){var g=h.next().getSym();if(!g.isVisited()){var d=g.getNode();t.contains(d)||(e.addLast(d),t.add(d))}}}}},{key:"compareTo",value:function(i){var t=i;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var i=new Et,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),n=0;n<e.length-1;n++)i.expandToInclude(e[n]);this._env=i}return this._env}},{key:"addReachable",value:function(i){var t=new ho;for(t.add(i);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(i){var t=i.getSym();t.setDepth(H.LEFT,i.getDepth(H.RIGHT)),t.setDepth(H.RIGHT,i.getDepth(H.LEFT))}},{key:"add",value:function(i,t){i.setVisited(!0),this._nodes.add(i);for(var e=i.getEdges().iterator();e.hasNext();){var n=e.next();this._dirEdgeList.add(n);var a=n.getSym().getNode();a.isVisited()||t.push(a)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new ut,this._nodes=new ut,this._rightMostCoord=null,this._env=null,this._finder=new co}}])}(),Xi=function(){return c(function i(){l(this,i)},null,[{key:"intersection",value:function(i,t,e,n){var a=i.x<t.x?i.x:t.x,h=i.y<t.y?i.y:t.y,g=i.x>t.x?i.x:t.x,d=i.y>t.y?i.y:t.y,k=e.x<n.x?e.x:n.x,E=e.y<n.y?e.y:n.y,C=e.x>n.x?e.x:n.x,L=e.y>n.y?e.y:n.y,X=((a>k?a:k)+(g<C?g:C))/2,K=((h>E?h:E)+(d<L?d:L))/2,et=i.x-X,at=i.y-K,dt=t.x-X,gt=t.y-K,pt=e.x-X,Ot=e.y-K,At=n.x-X,qe=n.y-K,xn=at-gt,Ps=dt-et,Ds=et*gt-dt*at,Fs=Ot-qe,qs=At-pt,Gs=pt*qe-At*Ot,zs=xn*qs-Fs*Ps,rr=(Ps*Gs-qs*Ds)/zs,sr=(Fs*Ds-xn*Gs)/zs;return U.isNaN(rr)||U.isInfinite(rr)||U.isNaN(sr)||U.isInfinite(sr)?null:new T(rr+X,sr+K)}}])}(),Zt=function(){return c(function i(){l(this,i)},null,[{key:"arraycopy",value:function(i,t,e,n,a){for(var h=0,g=t;g<t+a;g++)e[n+h]=i[g],h++}},{key:"getProperty",value:function(i){return{"line.separator":`
`}[i]}}])}(),gn=function(){function i(){l(this,i)}return c(i,null,[{key:"log10",value:function(t){var e=Math.log(t);return U.isInfinite(e)||U.isNaN(e)?e:e/i.LOG_10}},{key:"min",value:function(t,e,n,a){var h=t;return e<h&&(h=e),n<h&&(h=n),a<h&&(h=a),h}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],h=arguments[1],g=arguments[2];return a<h?h:a>g?g:a}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(arguments.length===3){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(arguments.length===4){var a=arguments[1],h=arguments[2],g=arguments[3],d=arguments[0];return a>d&&(d=a),h>d&&(d=h),g>d&&(d=g),d}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();gn.LOG_10=Math.log(10);var ue=function(){function i(){l(this,i)}return c(i,null,[{key:"segmentToSegment",value:function(t,e,n,a){if(t.equals(e))return i.pointToSegment(t,n,a);if(n.equals(a))return i.pointToSegment(a,t,e);var h=!1;if(Et.intersects(t,e,n,a)){var g=(e.x-t.x)*(a.y-n.y)-(e.y-t.y)*(a.x-n.x);if(g===0)h=!0;else{var d=(t.y-n.y)*(a.x-n.x)-(t.x-n.x)*(a.y-n.y),k=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/g,E=d/g;(E<0||E>1||k<0||k>1)&&(h=!0)}}else h=!0;return h?gn.min(i.pointToSegment(t,n,a),i.pointToSegment(e,n,a),i.pointToSegment(n,t,e),i.pointToSegment(a,t,e)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var a=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),h=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/a;if(h<=0)return t.distance(e);if(h>=1)return t.distance(n);var g=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/a;return Math.abs(g)*Math.sqrt(a)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var a=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),h=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/a;return Math.abs(h)*Math.sqrt(a)}},{key:"pointToSegmentString",value:function(t,e){if(e.length===0)throw new M("Line array must contain at least one vertex");for(var n=t.distance(e[0]),a=0;a<e.length-1;a++){var h=i.pointToSegment(t,e[a],e[a+1]);h<n&&(n=h)}return n}}])}(),Kr=function(){return c(function i(){l(this,i)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||ct(arguments[0],mt);else if(arguments.length!==2){if(arguments.length===3){var i=arguments[0],t=arguments[1];return this.create(i,t)}}}}])}(),zn=function(){return c(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),vo=function(){return c(function i(){l(this,i)},null,[{key:"ofLine",value:function(i){var t=i.size();if(t<=1)return 0;var e=0,n=new T;i.getCoordinate(0,n);for(var a=n.x,h=n.y,g=1;g<t;g++){i.getCoordinate(g,n);var d=n.x,k=n.y,E=d-a,C=k-h;e+=Math.sqrt(E*E+C*C),a=d,h=k}return e}}])}(),Qr=c(function i(){l(this,i)}),Me=function(){function i(){l(this,i)}return c(i,null,[{key:"copyCoord",value:function(t,e,n,a){for(var h=Math.min(t.getDimension(),n.getDimension()),g=0;g<h;g++)n.setOrdinate(a,g,t.getOrdinate(e,g))}},{key:"isRing",value:function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,mt.X)===t.getOrdinate(e-1,mt.X)&&t.getOrdinate(0,mt.Y)===t.getOrdinate(e-1,mt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(ct(arguments[0],mt)&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1];i.scroll(t,e,i.isRing(t))}else if(ct(arguments[0],mt)&&arguments[1]instanceof T){var n=arguments[0],a=arguments[1],h=i.indexOf(a,n);if(h<=0)return null;i.scroll(n,h)}}else if(arguments.length===3){var g=arguments[0],d=arguments[1],k=arguments[2];if(d<=0)return null;for(var E=g.copy(),C=k?g.size()-1:g.size(),L=0;L<C;L++)for(var X=0;X<g.getDimension();X++)g.setOrdinate(L,X,E.getOrdinate((d+L)%C,X));if(k)for(var K=0;K<g.getDimension();K++)g.setOrdinate(C,K,g.getOrdinate(0,K))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var a=Math.min(t.getDimension(),e.getDimension()),h=0;h<n;h++)for(var g=0;g<a;g++){var d=t.getOrdinate(h,g),k=e.getOrdinate(h,g);if(t.getOrdinate(h,g)!==e.getOrdinate(h,g)&&(!U.isNaN(d)||!U.isNaN(k)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var t=arguments[0];return i.minCoordinateIndex(t,0,t.size()-1)}if(arguments.length===3){for(var e=arguments[0],n=arguments[2],a=-1,h=null,g=arguments[1];g<=n;g++){var d=e.getCoordinate(g);(h===null||h.compareTo(d)>0)&&(h=d,a=g)}return a}}},{key:"extend",value:function(t,e,n){var a=t.create(n,e.getDimension()),h=e.size();if(i.copy(e,0,a,0,h),h>0)for(var g=h;g<n;g++)i.copy(e,h-1,a,g,1);return a}},{key:"reverse",value:function(t){for(var e=t.size()-1,n=Math.trunc(e/2),a=0;a<=n;a++)i.swap(t,a,e-a)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var a=0;a<t.getDimension();a++){var h=t.getOrdinate(e,a);t.setOrdinate(e,a,t.getOrdinate(n,a)),t.setOrdinate(n,a,h)}}},{key:"copy",value:function(t,e,n,a,h){for(var g=0;g<h;g++)i.copyCoord(t,e+g,n,a+g)}},{key:"ensureValidRing",value:function(t,e){var n=e.size();return n===0?e:n<=3?i.createClosedRing(t,e,4):e.getOrdinate(0,mt.X)===e.getOrdinate(n-1,mt.X)&&e.getOrdinate(0,mt.Y)===e.getOrdinate(n-1,mt.Y)?e:i.createClosedRing(t,e,n+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,mt.X)&&t.y===e.getOrdinate(n,mt.Y))return n;return-1}},{key:"createClosedRing",value:function(t,e,n){var a=t.create(n,e.getDimension()),h=e.size();i.copy(e,0,a,0,h);for(var g=h;g<n;g++)i.copy(e,0,a,g,1);return a}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var a=t.getCoordinate(n);(e===null||e.compareTo(a)>0)&&(e=a)}return e}}])}(),W=function(){function i(){l(this,i)}return c(i,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case i.FALSE:return i.SYM_FALSE;case i.TRUE:return i.SYM_TRUE;case i.DONTCARE:return i.SYM_DONTCARE;case i.P:return i.SYM_P;case i.L:return i.SYM_L;case i.A:return i.SYM_A}throw new M("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(zi.toUpperCase(t)){case i.SYM_FALSE:return i.FALSE;case i.SYM_TRUE:return i.TRUE;case i.SYM_DONTCARE:return i.DONTCARE;case i.SYM_P:return i.P;case i.SYM_L:return i.L;case i.SYM_A:return i.A}throw new M("Unknown dimension symbol: "+t)}}])}();W.P=0,W.L=1,W.A=2,W.FALSE=-1,W.TRUE=-2,W.DONTCARE=-3,W.SYM_FALSE="F",W.SYM_TRUE="T",W.SYM_DONTCARE="*",W.SYM_P="0",W.SYM_L="1",W.SYM_A="2";var Yn=function(){return c(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),Xn=function(){return c(function i(){l(this,i)},[{key:"filter",value:function(i,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),mn=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Et:this._points.expandEnvelope(new Et)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var a=e;if(this._points.size()!==a._points.size())return!1;for(var h=0;h<this._points.size();h++)if(!this.equal(this._points.getCoordinate(h),a._points.getCoordinate(h),n))return!1;return!0}return w(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var n=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(n))>0){var a=this._points.copy();Me.reverse(a),this._points=a}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?W.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Me.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return st.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return vo.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var e=arguments[0],n=0,a=0;n<this._points.size()&&a<e._points.size();){var h=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(a));if(h!==0)return h;n++,a++}return n<this._points.size()?1:a<e._points.size()?-1:0}if(arguments.length===2){var g=arguments[0];return arguments[1].compare(this._points,g._points)}}},{key:"apply",value:function(){if(ct(arguments[0],zn))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(this._points.getCoordinate(n));else if(ct(arguments[0],Xn)){var a=arguments[0];if(this._points.size()===0)return null;for(var h=0;h<this._points.size()&&(a.filter(this._points,h),!a.isDone());h++);a.isGeometryChanged()&&this.geometryChanged()}else ct(arguments[0],Yn)?arguments[0].filter(this):ct(arguments[0],D)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Ie}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return st.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(e){if(e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),e.size()===1)throw new M("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var n=0;n<this._points.size();n++)if(this._points.getCoordinate(n).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[Qr]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];st.constructor_.call(this,n),this.init(e)}}}}])}(st),Jr=c(function i(){l(this,i)}),Bi=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Et;var e=new Et;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return w(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return st.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0];return arguments[1].compare(this._coordinates,n._coordinates)}}},{key:"apply",value:function(){if(ct(arguments[0],zn)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(ct(arguments[0],Xn)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else ct(arguments[0],Yn)?arguments[0].filter(this):ct(arguments[0],D)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return st.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(e){e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),nt.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Jr]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],n=arguments[1];st.constructor_.call(this,n),this.init(e)}}])}(st),jr=function(){function i(){l(this,i)}return c(i,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(i.ofRingSigned(t))}if(ct(arguments[0],mt)){var e=arguments[0];return Math.abs(i.ofRingSigned(e))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,a=1;a<t.length-1;a++){var h=t[a].x-n,g=t[a+1].y;e+=h*(t[a-1].y-g)}return e/2}if(ct(arguments[0],mt)){var d=arguments[0],k=d.size();if(k<3)return 0;var E=new T,C=new T,L=new T;d.getCoordinate(0,C),d.getCoordinate(1,L);var X=C.x;L.x-=X;for(var K=0,et=1;et<k-1;et++)E.y=C.y,C.x=L.x,C.y=L.y,d.getCoordinate(et+1,L),L.x-=X,K+=C.x*(E.y-L.y);return K/2}}}])}(),Oe=function(){return c(function i(){l(this,i)},null,[{key:"sort",value:function(){var i=arguments,t=arguments[0];if(arguments.length===1)t.sort(function(X,K){return X.compareTo(K)});else if(arguments.length===2)t.sort(function(X,K){return i[1].compare(X,K)});else if(arguments.length===3){var e=t.slice(arguments[1],arguments[2]);e.sort();var n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var a,h=y(n);try{for(h.s();!(a=h.n()).done;){var g=a.value;t.push(g)}}catch(X){h.e(X)}finally{h.f()}}else if(arguments.length===4){var d=t.slice(arguments[1],arguments[2]);d.sort(function(X,K){return i[3].compare(X,K)});var k=t.slice(0,arguments[1]).concat(d,t.slice(arguments[2],t.length));t.splice(0,t.length);var E,C=y(k);try{for(C.s();!(E=C.n()).done;){var L=E.value;t.push(L)}}catch(X){C.e(X)}finally{C.f()}}}},{key:"asList",value:function(i){var t,e=new ut,n=y(i);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.add(a)}}catch(h){n.e(h)}finally{n.f()}return e}},{key:"copyOf",value:function(i,t){return i.slice(0,t)}}])}(),ts=c(function i(){l(this,i)}),Bn=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),n=-1,a=this._shell.getCoordinates(),h=0;h<a.length;h++)e[++n]=a[h];for(var g=0;g<this._holes.length;g++)for(var d=this._holes[g].getCoordinates(),k=0;k<d.length;k++)e[++n]=d[k];return e}},{key:"getArea",value:function(){var e=0;e+=jr.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++)e-=jr.ofRing(this._holes[n].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),a=0;a<this._holes.length;a++)n[a]=this._holes[a].copy();return new t(e,n,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var e=this._shell.getCoordinateSequence(),n=this.getEnvelopeInternal(),a=0;a<5;a++){var h=e.getX(a);if(h!==n.getMinX()&&h!==n.getMaxX())return!1;var g=e.getY(a);if(g!==n.getMinY()&&g!==n.getMaxY())return!1}for(var d=e.getX(0),k=e.getY(0),E=1;E<=4;E++){var C=e.getX(E),L=e.getY(E);if(C!==d==(L!==k))return!1;d=C,k=L}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var a=e,h=this._shell,g=a._shell;if(!h.equalsExact(g,n)||this._holes.length!==a._holes.length)return!1;for(var d=0;d<this._holes.length;d++)if(!this._holes[d].equalsExact(a._holes[d],n))return!1;return!0}return w(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);Oe.sort(this._holes)}else if(arguments.length===2){var n=arguments[0],a=arguments[1];if(n.isEmpty())return null;var h=n.getCoordinateSequence(),g=Me.minCoordinateIndex(h,0,h.size()-2);Me.scroll(h,g,!0),lt.isCCW(h)===a&&Me.reverse(h)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),n=new Array(this.getNumInteriorRing()).fill(null),a=0;a<n.length;a++)n[a]=this.getInteriorRingN(a).reverse();return this.getFactory().createPolygon(e,n)}},{key:"getTypeCode",value:function(){return st.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)e+=this._holes[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)e+=this._holes[n].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,n){var a=e.copy();return this.normalize(a,n),a}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=this._shell,a=e._shell;return n.compareToSameClass(a)}if(arguments.length===2){var h=arguments[1],g=arguments[0],d=this._shell,k=g._shell,E=d.compareToSameClass(k,h);if(E!==0)return E;for(var C=this.getNumInteriorRing(),L=g.getNumInteriorRing(),X=0;X<C&&X<L;){var K=this.getInteriorRingN(X),et=g.getInteriorRingN(X),at=K.compareToSameClass(et,h);if(at!==0)return at;X++}return X<C?1:X<L?-1:0}}},{key:"apply",value:function(){if(ct(arguments[0],zn)){var e=arguments[0];this._shell.apply(e);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(e)}else if(ct(arguments[0],Xn)){var a=arguments[0];if(this._shell.apply(a),!a.isDone())for(var h=0;h<this._holes.length&&(this._holes[h].apply(a),!a.isDone());h++);a.isGeometryChanged()&&this.geometryChanged()}else if(ct(arguments[0],Yn))arguments[0].filter(this);else if(ct(arguments[0],D)){var g=arguments[0];g.filter(this),this._shell.apply(g);for(var d=0;d<this._holes.length;d++)this._holes[d].apply(g)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++)e[n+1]=this._holes[n];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return st.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[ts]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],n=arguments[1],a=arguments[2];if(st.constructor_.call(this,a),e===null&&(e=this.getFactory().createLinearRing()),n===null&&(n=[]),st.hasNullElements(n))throw new M("holes must not contain null elements");if(e.isEmpty()&&st.hasNonEmptyElements(n))throw new M("shell is empty but holes are not");this._shell=e,this._holes=n}}])}(st),yo=function(i){function t(){return l(this,t),o(this,t,arguments)}return p(t,i),c(t)}(Zr),es=function(i){function t(e){var n;return l(this,t),(n=o(this,t)).array=[],e instanceof ae&&n.addAll(e),n}return p(t,i),c(t,[{key:"contains",value:function(e){var n,a=y(this.array);try{for(a.s();!(n=a.n()).done;)if(n.value.compareTo(e)===0)return!0}catch(h){a.e(h)}finally{a.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var n=0,a=this.array.length;n<a;n++)if(this.array[n].compareTo(e)===1)return!!this.array.splice(n,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var n,a=y(e);try{for(a.s();!(n=a.n()).done;){var h=n.value;this.add(h)}}catch(g){a.e(g)}finally{a.f()}return!0}},{key:"remove",value:function(){throw new Ie}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new _o(this.array)}}])}(yo),_o=function(){return c(function i(t){l(this,i),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new qn;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Ie}}])}(),Bt=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new Et,n=0;n<this._geometries.length;n++)e.expandToInclude(this._geometries[n].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),n=-1,a=0;a<this._geometries.length;a++)for(var h=this._geometries[a].getCoordinates(),g=0;g<h.length;g++)e[++n]=h[g];return e}},{key:"getArea",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var a=e;if(this._geometries.length!==a._geometries.length)return!1;for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].equalsExact(a._geometries[h],n))return!1;return!0}return w(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Oe.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=W.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,n=new ut(e),a=0;a<e;a++)n.add(this._geometries[a].reverse());return this.getFactory().buildGeometry(n)}},{key:"getTypeCode",value:function(){return st.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=W.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=new es(Oe.asList(this._geometries)),a=new es(Oe.asList(e._geometries));return this.compare(n,a)}if(arguments.length===2){for(var h=arguments[1],g=arguments[0],d=this.getNumGeometries(),k=g.getNumGeometries(),E=0;E<d&&E<k;){var C=this.getGeometryN(E),L=g.getGeometryN(E),X=C.compareToSameClass(L,h);if(X!==0)return X;E++}return E<d?1:E<k?-1:0}}},{key:"apply",value:function(){if(ct(arguments[0],zn))for(var e=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(e);else if(ct(arguments[0],Xn)){var a=arguments[0];if(this._geometries.length===0)return null;for(var h=0;h<this._geometries.length&&(this._geometries[h].apply(a),!a.isDone());h++);a.isGeometryChanged()&&this.geometryChanged()}else if(ct(arguments[0],Yn)){var g=arguments[0];g.filter(this);for(var d=0;d<this._geometries.length;d++)this._geometries[d].apply(g)}else if(ct(arguments[0],D)){var k=arguments[0];k.filter(this);for(var E=0;E<this._geometries.length;E++)this._geometries[E].apply(k)}}},{key:"getBoundary",value:function(){return st.checkNotGeometryCollection(this),nt.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return st.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];if(st.constructor_.call(this,n),e===null&&(e=[]),st.hasNullElements(e))throw new M("geometries must not contain null elements");this._geometries=e}}}}])}(st),Ui=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&w(t,"equalsExact",this,1).call(this,e,n)}return w(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return w(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"getTypeCode",value:function(){return st.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return st.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Jr]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Bt.constructor_.call(this,e,n)}}])}(Bt),dn=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||w(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Me.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return st.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!w(t,"isClosed",this,1).call(this))throw new M("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new M("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return st.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];mn.constructor_.call(this,e,n),this.validateConstruction()}}])}(mn);dn.MINIMUM_VALID_SIZE=4;var Ae=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;default:throw new M("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return T.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new M("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new M("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)T.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];T.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof T){var n=arguments[0];T.constructor_.call(this,n.x,n.y)}}else if(arguments.length===2){var a=arguments[0],h=arguments[1];T.constructor_.call(this,a,h,T.NULL_ORDINATE)}}}])}(T);Ae.X=0,Ae.Y=1,Ae.Z=-1,Ae.M=-1;var Pe=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.M:this._m=n;break;default:throw new M("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return T.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new M("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new M("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)T.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];T.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof T){var n=arguments[0];T.constructor_.call(this,n.x,n.y),this._m=this.getM()}}else if(arguments.length===3){var a=arguments[0],h=arguments[1],g=arguments[2];T.constructor_.call(this,a,h,T.NULL_ORDINATE),this._m=g}}}])}(T);Pe.X=0,Pe.Y=1,Pe.Z=-1,Pe.M=2;var Vi=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case T.X:this.x=n;break;case T.Y:this.y=n;break;case T.Z:this.z=n;break;case T.M:this._m=n;break;default:throw new M("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case T.X:return this.x;case T.Y:return this.y;case T.Z:return this.getZ();case T.M:return this.getM()}throw new M("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)T.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];T.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof T){var n=arguments[0];T.constructor_.call(this,n),this._m=this.getM()}}else if(arguments.length===4){var a=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3];T.constructor_.call(this,a,h,g),this._m=d}}}])}(T),Un=function(){function i(){l(this,i)}return c(i,null,[{key:"measures",value:function(t){return t instanceof Ae?0:t instanceof Pe||t instanceof Vi?1:0}},{key:"dimension",value:function(t){return t instanceof Ae?2:t instanceof Pe?3:t instanceof Vi?4:3}},{key:"create",value:function(){if(arguments.length===1){var t=arguments[0];return i.create(t,0)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e===2?new Ae:e===3&&n===0?new T:e===3&&n===1?new Pe:e===4&&n===1?new Vi:new T}}}])}(),vn=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&ct(arguments[0],ae)){for(var e=arguments[1],n=!1,a=arguments[0].iterator();a.hasNext();)this.add(a.next(),e),n=!0;return n}return w(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=w(t,"clone",this,1).call(this),n=0;n<this.size();n++)e.add(n,this.get(n).clone());return e}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(t.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),n=new Array(e).fill(null),a=0;a<e;a++)n[a]=this.get(e-a-1);return n}}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];return w(t,"add",this,1).call(this,e)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var n=arguments[0],a=arguments[1];return this.add(n,a,!0),!0}if(arguments[0]instanceof T&&typeof arguments[1]=="boolean"){var h=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(h))return null;w(t,"add",this,1).call(this,h)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var g=arguments[0],d=arguments[1];return this.add(g,d),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var k=arguments[0],E=arguments[1];if(arguments[2])for(var C=0;C<k.length;C++)this.add(k[C],E);else for(var L=k.length-1;L>=0;L--)this.add(k[L],E);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof T){var X=arguments[0],K=arguments[1];if(!arguments[2]){var et=this.size();if(et>0&&(X>0&&this.get(X-1).equals2D(K)||X<et&&this.get(X).equals2D(K)))return null}w(t,"add",this,1).call(this,X,K)}}else if(arguments.length===4){var at=arguments[0],dt=arguments[1],gt=arguments[2],pt=arguments[3],Ot=1;gt>pt&&(Ot=-1);for(var At=gt;At!==pt;At+=Ot)this.add(at[At],dt);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(arguments.length===2){var n=arguments[0],a=arguments[1];this.ensureCapacity(n.length),this.add(n,a)}}}}])}(ut);vn.coordArrayType=new Array(0).fill(null);var bt=function(){function i(){l(this,i)}return c(i,null,[{key:"isRing",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:"ptNotInList",value:function(t,e){for(var n=0;n<t.length;n++){var a=t[n];if(i.indexOf(a,e)<0)return a}return null}},{key:"scroll",value:function(t,e){var n=i.indexOf(e,t);if(n<0)return null;var a=new Array(t.length).fill(null);Zt.arraycopy(t,n,a,0,t.length-n),Zt.arraycopy(t,0,a,t.length-n,n),Zt.arraycopy(a,0,t,0,t.length)}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var a=arguments[0],h=arguments[1],g=arguments[2];if(a===h)return!0;if(a===null||h===null||a.length!==h.length)return!1;for(var d=0;d<a.length;d++)if(g.compare(a[d],h[d])!==0)return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new vn,a=0;a<t.length;a++)e.intersects(t[a])&&n.add(t[a],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(t===null||t.length===0)return 0;var e,n=0,a=y(t);try{for(a.s();!(e=a.n()).done;){var h=e.value;n=Math.max(n,Un.measures(h))}}catch(g){a.e(g)}finally{a.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return i.hasRepeatedPoints(t)?new vn(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),a=0;a<=n;a++){var h=t[a];t[a]=t[e-a],t[e-a]=h}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var a=new Array(e).fill(null);if(e===0)return a;for(var h=0,g=0;g<t.length;g++)t[g]!==null&&(a[h++]=t[g]);return a}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(arguments.length===5)for(var a=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3],k=arguments[4],E=0;E<k;E++)g[d+E]=a[h+E].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var a=t[n],h=e[t.length-n-1];if(a.compareTo(h)!==0)return!1}return!0}},{key:"envelope",value:function(t){for(var e=new Et,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(i.coordArrayType)}},{key:"dimension",value:function(t){if(t===null||t.length===0)return 3;var e,n=0,a=y(t);try{for(a.s();!(e=a.n()).done;){var h=e.value;n=Math.max(n,Un.dimension(h))}}catch(g){a.e(g)}finally{a.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,a=t[e].compareTo(t[n]);if(a!==0)return a}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var a=t[n].compareTo(e[n]);if(a!==0)return a;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=gn.clamp(e,0,t.length);var a=(n=gn.clamp(n,-1,t.length))-e+1;n<0&&(a=0),e>=t.length&&(a=0),n<e&&(a=0);var h=new Array(a).fill(null);if(a===0)return h;for(var g=0,d=e;d<=n;d++)h[g++]=t[d];return h}}])}(),po=function(){return c(function i(){l(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;return bt.compare(e,n)}},{key:"interfaces_",get:function(){return[ht]}}])}(),ko=function(){return c(function i(){l(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;var a=bt.compare(e,n);return bt.isEqualReversed(e,n)?0:a}},{key:"OLDcompare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;for(var a=bt.increasingDirection(e),h=bt.increasingDirection(n),g=a>0?0:e.length-1,d=h>0?0:e.length-1,k=0;k<e.length;k++){var E=e[g].compareTo(n[d]);if(E!==0)return E;g+=a,d+=h}return 0}},{key:"interfaces_",get:function(){return[ht]}}])}();bt.ForwardComparator=po,bt.BidirectionalComparator=ko,bt.coordArrayType=new Array(0).fill(null);var Vn=function(){return c(function i(t){l(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),yn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():U.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case mt.X:this._coordinates[t].x=n;break;case mt.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():U.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case mt.X:return this._coordinates[t].x;case mt.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}if(arguments.length===2){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Un.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new i(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new Vn(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[mt,B]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];i.constructor_.call(this,t,bt.dimension(t),bt.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new T}else if(ct(arguments[0],mt)){var a=arguments[0];if(a===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=a.getDimension(),this._measures=a.getMeasures(),this._coordinates=new Array(a.size()).fill(null);for(var h=0;h<this._coordinates.length;h++)this._coordinates[h]=a.getCoordinateCopy(h)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var g=arguments[0],d=arguments[1];i.constructor_.call(this,g,d,bt.measures(g))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var k=arguments[0],E=arguments[1];this._coordinates=new Array(k).fill(null),this._dimension=E;for(var C=0;C<k;C++)this._coordinates[C]=Un.create(E)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var L=arguments[0],X=arguments[1],K=arguments[2];this._dimension=X,this._measures=K,this._coordinates=L===null?new Array(0).fill(null):L}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var et=arguments[0],at=arguments[1],dt=arguments[2];this._coordinates=new Array(et).fill(null),this._dimension=at,this._measures=dt;for(var gt=0;gt<et;gt++)this._coordinates[gt]=this.createCoordinate()}}}}])}(),Hi=function(){function i(){l(this,i)}return c(i,[{key:"readResolve",value:function(){return i.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new yn(arguments[0]);if(ct(arguments[0],mt))return new yn(arguments[0])}else{if(arguments.length===2){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new yn(arguments[0],t)}if(arguments.length===3){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new yn(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[Kr,B]}}],[{key:"instance",value:function(){return i.instanceObject}}])}();Hi.instanceObject=new Hi;var Zi=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&w(t,"equalsExact",this,1).call(this,e,n)}return w(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return st.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new ut,n=0;n<this._geometries.length;n++)for(var a=this._geometries[n].getBoundary(),h=0;h<a.getNumGeometries();h++)e.add(a.getGeometryN(h));var g=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(g))}},{key:"getGeometryType",value:function(){return st.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[ts]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Bt.constructor_.call(this,e,n)}}])}(Bt),ns=function(){return c(function i(){l(this,i)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),xo=function(i){function t(){var e;return l(this,t),(e=o(this,t)).map=new Map,e}return p(t,i),c(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,n){return this.map.set(e,n),n}},{key:"values",value:function(){for(var e=new ut,n=this.map.values(),a=n.next();!a.done;)e.add(a.value),a=n.next();return e}},{key:"entrySet",value:function(){var e=new Gi;return this.map.entries().forEach(function(n){return e.add(n)}),e}},{key:"size",value:function(){return this.map.size()}}])}(ns),te=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),a=e.getMaximumSignificantDigits();return Gn.compare(n,a)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===i.FLOATING||this._modelType===i.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===i.FLOATING?t="Floating":this._modelType===i.FLOATING_SINGLE?t="Floating-Single":this._modelType===i.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var t=arguments[0];return U.isNaN(t)||this._modelType===i.FLOATING_SINGLE?t:this._modelType===i.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof T){var e=arguments[0];if(this._modelType===i.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===i.FLOATING?t=16:this._modelType===i.FLOATING_SINGLE?t=6:this._modelType===i.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[B,z]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=i.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Ze){var t=arguments[0];this._modelType=t,t===i.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this._modelType=i.FIXED,this.setScale(e)}else if(arguments[0]instanceof i){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),Ze=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"readResolve",value:function(){return i.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[B]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,i.nameToTypeMap.put(t,this)}}])}();Ze.nameToTypeMap=new xo,te.Type=Ze,te.FIXED=new Ze("FIXED"),te.FLOATING=new Ze("FLOATING"),te.FLOATING_SINGLE=new Ze("FLOATING SINGLE"),te.maximumPreciseValue=9007199254740992;var $i=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof st){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&w(t,"equalsExact",this,1).call(this,e,n)}return w(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?W.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return st.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Ie}},{key:"getGeometryType",value:function(){return st.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Qr]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Bt.constructor_.call(this,e,n)}}])}(Bt),$e=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new M("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new T(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new T(t.getMinX(),t.getMinY()),new T(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new T(t.getMinX(),t.getMinY()),new T(t.getMinX(),t.getMaxY()),new T(t.getMaxX(),t.getMaxY()),new T(t.getMaxX(),t.getMinY()),new T(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(ct(arguments[0],mt))return new mn(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new $i(null,this):arguments.length===1?new $i(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,n=!1,a=!1,h=t.iterator();h.hasNext();){var g=h.next(),d=g.getTypeCode();e===null&&(e=d),d!==e&&(n=!0),g instanceof Bt&&(a=!0)}if(e===null)return this.createGeometryCollection();if(n||a)return this.createGeometryCollection(i.toGeometryArray(t));var k=t.iterator().next();if(t.size()>1){if(k instanceof Bn)return this.createMultiPolygon(i.toPolygonArray(t));if(k instanceof mn)return this.createMultiLineString(i.toLineStringArray(t));if(k instanceof Bi)return this.createMultiPoint(i.toPointArray(t));nt.shouldNeverReachHere("Unhandled geometry type: "+k.getGeometryType())}return k}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(ct(arguments[0],mt))return new Bi(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(ct(arguments[0],mt)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof dn){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2)return new Bn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Bt(null,this):arguments.length===1?new Bt(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(ct(arguments[0],mt))return new dn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Zi(null,this):arguments.length===1?new Zi(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Ui(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Ui(arguments[0],this);if(ct(arguments[0],mt)){var t=arguments[0];if(t===null)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var a=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Me.copy(t,n,a,0,1),e[n]=this.createPoint(a)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[B]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)i.constructor_.call(this,new te,0);else if(arguments.length===1){if(ct(arguments[0],Kr)){var t=arguments[0];i.constructor_.call(this,new te,0,t)}else if(arguments[0]instanceof te){var e=arguments[0];i.constructor_.call(this,e,0,i.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];i.constructor_.call(this,n,a,i.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var h=arguments[0],g=arguments[1],d=arguments[2];this._precisionModel=h,this._coordinateSequenceFactory=d,this._SRID=g}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Hi.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),Wi="XY",Eo="XYZ",No="XYM",wo="XYZM",is={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},rs="EMPTY",Hn=1,_e=2,Se=3,ss=4,We=5,Io=6;for(var So in is)is[So].toUpperCase();var Co=function(){return c(function i(t){l(this,i),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"}},{key:"isNumeric_",value:function(i,t){return i>="0"&&i<="9"||i=="."&&!(t!==void 0&&t)}},{key:"isWhiteSpace_",value:function(i){return i==" "||i=="	"||i=="\r"||i==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var i,t=this.nextChar_(),e=this.index_,n=t;if(t=="(")i=_e;else if(t==",")i=We;else if(t==")")i=Se;else if(this.isNumeric_(t)||t=="-")i=ss,n=this.readNumber_();else if(this.isAlpha_(t))i=Hn,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t!=="")throw new Error("Unexpected character: "+t);i=Io}return{position:e,value:n,type:i}}},{key:"readNumber_",value:function(){var i,t=this.index_,e=!1,n=!1;do i=="."?e=!0:i!="e"&&i!="E"||(n=!0),i=this.nextChar_();while(this.isNumeric_(i,e)||!n&&(i=="e"||i=="E")||n&&(i=="-"||i=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var i,t=this.index_;do i=this.nextChar_();while(this.isAlpha_(i));return this.wkt.substring(t,this.index_--).toUpperCase()}}])}(),To=function(){return c(function i(t,e){l(this,i),this.lexer_=t,this.token_,this.layout_=Wi,this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(i){return this.token_.type==i}},{key:"match",value:function(i){var t=this.isTokenType(i);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var i=Wi,t=this.token_;if(this.isTokenType(Hn)){var e=t.value;e==="Z"?i=Eo:e==="M"?i=No:e==="ZM"&&(i=wo),i!==Wi&&this.consume_()}return i}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(_e)){var i=[];do i.push(this.parseGeometry_());while(this.match(We));if(this.match(Se))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(_e)){var i=this.parsePoint_();if(this.match(Se))return i}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(_e)){var i=this.parsePointList_();if(this.match(Se))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(_e)){var i=this.parseLineStringTextList_();if(this.match(Se))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var i;if(this.match(_e)){if(i=this.token_.type==_e?this.parsePointTextList_():this.parsePointList_(),this.match(Se))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(_e)){var i=this.parseLineStringTextList_();if(this.match(Se))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(_e)){var i=this.parsePolygonTextList_();if(this.match(Se))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var i=[],t=this.layout_.length,e=0;e<t;++e){var n=this.token_;if(!this.match(ss))break;i.push(n.value)}if(i.length==t)return i;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var i=[this.parsePoint_()];this.match(We);)i.push(this.parsePoint_());return i}},{key:"parsePointTextList_",value:function(){for(var i=[this.parsePointText_()];this.match(We);)i.push(this.parsePointText_());return i}},{key:"parseLineStringTextList_",value:function(){for(var i=[this.parseLineStringText_()];this.match(We);)i.push(this.parseLineStringText_());return i}},{key:"parsePolygonTextList_",value:function(){for(var i=[this.parsePolygonText_()];this.match(We);)i.push(this.parsePolygonText_());return i}},{key:"isEmptyGeometry_",value:function(){var i=this.isTokenType(Hn)&&this.token_.value==rs;return i&&this.consume_(),i}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var i=this.factory,t=function(at){return m(T,A(at))},e=function(at){var dt=at.map(function(gt){return i.createLinearRing(gt.map(t))});return dt.length>1?i.createPolygon(dt[0],dt.slice(1)):i.createPolygon(dt[0])},n=this.token_;if(this.match(Hn)){var a=n.value;if(this.layout_=this.parseGeometryLayout_(),a=="GEOMETRYCOLLECTION"){var h=this.parseGeometryCollectionText_();return i.createGeometryCollection(h)}switch(a){case"POINT":var g=this.parsePointText_();return g?i.createPoint(m(T,A(g))):i.createPoint();case"LINESTRING":var d=this.parseLineStringText_().map(t);return i.createLineString(d);case"LINEARRING":var k=this.parseLineStringText_().map(t);return i.createLinearRing(k);case"POLYGON":var E=this.parsePolygonText_();return E&&E.length!==0?e(E):i.createPolygon();case"MULTIPOINT":var C=this.parseMultiPointText_();if(!C||C.length===0)return i.createMultiPoint();var L=C.map(t).map(function(at){return i.createPoint(at)});return i.createMultiPoint(L);case"MULTILINESTRING":var X=this.parseMultiLineStringText_().map(function(at){return i.createLineString(at.map(t))});return i.createMultiLineString(X);case"MULTIPOLYGON":var K=this.parseMultiPolygonText_();if(!K||K.length===0)return i.createMultiPolygon();var et=K.map(e);return i.createMultiPolygon(et);default:throw new Error("Invalid geometry type: "+a)}}throw new Error(this.formatErrorMessage_())}}])}();function as(i){if(i.isEmpty())return"";var t=i.getCoordinate(),e=[t.x,t.y];return t.z===void 0||Number.isNaN(t.z)||e.push(t.z),t.m===void 0||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function _n(i){for(var t=i.getCoordinates().map(function(h){var g=[h.x,h.y];return h.z===void 0||Number.isNaN(h.z)||g.push(h.z),h.m===void 0||Number.isNaN(h.m)||g.push(h.m),g}),e=[],n=0,a=t.length;n<a;++n)e.push(t[n].join(" "));return e.join(", ")}function us(i){var t=[];t.push("("+_n(i.getExteriorRing())+")");for(var e=0,n=i.getNumInteriorRing();e<n;++e)t.push("("+_n(i.getInteriorRingN(e))+")");return t.join(", ")}var Ro={Point:as,LineString:_n,LinearRing:_n,Polygon:us,MultiPoint:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+as(i.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+_n(i.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+us(i.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push(os(i.getGeometryN(e)));return t.join(", ")}};function os(i){var t=i.getGeometryType(),e=Ro[t];t=t.toUpperCase();var n=function(a){var h="";if(a.isEmpty())return h;var g=a.getCoordinate();return g.z===void 0||Number.isNaN(g.z)||(h+="Z"),g.m===void 0||Number.isNaN(g.m)||(h+="M"),h}(i);return n.length>0&&(t+=" "+n),i.isEmpty()?t+" "+rs:t+" ("+e(i)+")"}var Lo=function(){return c(function i(t){l(this,i),this.geometryFactory=t||new $e,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(i){var t=new Co(i);return new To(t,this.geometryFactory).parse()}},{key:"write",value:function(i){return os(i)}}])}(),Ki=function(){return c(function i(t){l(this,i),this.parser=new Lo(t)},[{key:"write",value:function(i){return this.parser.write(i)}}],[{key:"toLineString",value:function(i,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+i.x+" "+i.y+", "+t.x+" "+t.y+" )"}}])}(),wt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new Vn;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,a){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=a,this._result=this.computeIntersect(t,e,n,a)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==i.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return i.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===i.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Ki.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ki.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new T,this._intPt[1]=new T,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var a=Math.abs(n.x-e.x),h=Math.abs(n.y-e.y),g=-1;if(t.equals(e))g=0;else if(t.equals(n))g=a>h?a:h;else{var d=Math.abs(t.x-e.x),k=Math.abs(t.y-e.y);(g=a>h?d:k)!==0||t.equals(e)||(g=Math.max(d,k))}return nt.isTrue(!(g===0&&!t.equals(e)),"Bad distance calculation"),g}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var a=t.x-e.x,h=t.y-e.y,g=Math.sqrt(a*a+h*h);return nt.isTrue(!(g===0&&!t.equals(e)),"Invalid distance calculation"),g}}])}();wt.DONT_INTERSECT=0,wt.DO_INTERSECT=1,wt.COLLINEAR=2,wt.NO_INTERSECTION=0,wt.POINT_INTERSECTION=1,wt.COLLINEAR_INTERSECTION=2;var De=function(i){function t(){return l(this,t),o(this,t)}return p(t,i),c(t,[{key:"isInSegmentEnvelopes",value:function(e){var n=new Et(this._inputLines[0][0],this._inputLines[0][1]),a=new Et(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(e)&&a.contains(e)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return w(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1],a=arguments[2];if(this._isProper=!1,Et.intersects(n,a,e)&&lt.index(n,a,e)===0&&lt.index(a,n,e)===0)return this._isProper=!0,(e.equals(n)||e.equals(a))&&(this._isProper=!1),this._result=wt.POINT_INTERSECTION,null;this._result=wt.NO_INTERSECTION}},{key:"intersection",value:function(e,n,a,h){var g=this.intersectionSafe(e,n,a,h);return this.isInSegmentEnvelopes(g)||(g=new T(t.nearestEndpoint(e,n,a,h))),this._precisionModel!==null&&this._precisionModel.makePrecise(g),g}},{key:"checkDD",value:function(e,n,a,h,g){var d=Yi.intersection(e,n,a,h),k=this.isInSegmentEnvelopes(d);Zt.out.println("DD in env = "+k+"  --------------------- "+d),g.distance(d)>1e-4&&Zt.out.println("Distance = "+g.distance(d))}},{key:"intersectionSafe",value:function(e,n,a,h){var g=Xi.intersection(e,n,a,h);return g===null&&(g=t.nearestEndpoint(e,n,a,h)),g}},{key:"computeCollinearIntersection",value:function(e,n,a,h){var g=Et.intersects(e,n,a),d=Et.intersects(e,n,h),k=Et.intersects(a,h,e),E=Et.intersects(a,h,n);return g&&d?(this._intPt[0]=a,this._intPt[1]=h,wt.COLLINEAR_INTERSECTION):k&&E?(this._intPt[0]=e,this._intPt[1]=n,wt.COLLINEAR_INTERSECTION):g&&k?(this._intPt[0]=a,this._intPt[1]=e,!a.equals(e)||d||E?wt.COLLINEAR_INTERSECTION:wt.POINT_INTERSECTION):g&&E?(this._intPt[0]=a,this._intPt[1]=n,!a.equals(n)||d||k?wt.COLLINEAR_INTERSECTION:wt.POINT_INTERSECTION):d&&k?(this._intPt[0]=h,this._intPt[1]=e,!h.equals(e)||g||E?wt.COLLINEAR_INTERSECTION:wt.POINT_INTERSECTION):d&&E?(this._intPt[0]=h,this._intPt[1]=n,!h.equals(n)||g||k?wt.COLLINEAR_INTERSECTION:wt.POINT_INTERSECTION):wt.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,n,a,h){if(this._isProper=!1,!Et.intersects(e,n,a,h))return wt.NO_INTERSECTION;var g=lt.index(e,n,a),d=lt.index(e,n,h);if(g>0&&d>0||g<0&&d<0)return wt.NO_INTERSECTION;var k=lt.index(a,h,e),E=lt.index(a,h,n);return k>0&&E>0||k<0&&E<0?wt.NO_INTERSECTION:g===0&&d===0&&k===0&&E===0?this.computeCollinearIntersection(e,n,a,h):(g===0||d===0||k===0||E===0?(this._isProper=!1,e.equals2D(a)||e.equals2D(h)?this._intPt[0]=e:n.equals2D(a)||n.equals2D(h)?this._intPt[0]=n:g===0?this._intPt[0]=new T(a):d===0?this._intPt[0]=new T(h):k===0?this._intPt[0]=new T(e):E===0&&(this._intPt[0]=new T(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,a,h)),wt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,n,a,h){var g=e,d=ue.pointToSegment(e,a,h),k=ue.pointToSegment(n,a,h);return k<d&&(d=k,g=n),(k=ue.pointToSegment(a,e,n))<d&&(d=k,g=a),(k=ue.pointToSegment(h,e,n))<d&&(d=k,g=h),g}}])}(wt),bo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,a=e.x;return n>a&&(n=e.x,a=t.x),this._p.x>=n&&this._p.x<=a&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var h=lt.index(t,e,this._p);if(h===lt.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(h=-h),h===lt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==I.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?I.BOUNDARY:this._crossingCount%2==1?I.INTERIOR:I.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof T&&ct(arguments[1],mt)){for(var t=arguments[1],e=new i(arguments[0]),n=new T,a=new T,h=1;h<t.size();h++)if(t.getCoordinate(h,n),t.getCoordinate(h-1,a),e.countSegment(n,a),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof T&&arguments[1]instanceof Array){for(var g=arguments[1],d=new i(arguments[0]),k=1;k<g.length;k++){var E=g[k],C=g[k-1];if(d.countSegment(E,C),d.isOnSegment())return d.getLocation()}return d.getLocation()}}}])}(),Qi=function(){function i(){l(this,i)}return c(i,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof T&&ct(arguments[1],mt)){for(var t=arguments[0],e=arguments[1],n=new De,a=new T,h=new T,g=e.size(),d=1;d<g;d++)if(e.getCoordinate(d-1,a),e.getCoordinate(d,h),n.computeIntersection(t,a,h),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof T&&arguments[1]instanceof Array){for(var k=arguments[0],E=arguments[1],C=new De,L=1;L<E.length;L++){var X=E[L-1],K=E[L];if(C.computeIntersection(k,X,K),C.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return bo.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return i.locateInRing(t,e)!==I.EXTERIOR}}])}(),$t=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==I.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===I.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[H.ON]=this.location[H.ON],e[H.LEFT]=I.NONE,e[H.RIGHT]=I.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===I.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[H.LEFT];this.location[H.LEFT]=this.location[H.RIGHT],this.location[H.RIGHT]=t}},{key:"toString",value:function(){var t=new fn;return this.location.length>1&&t.append(I.toLocationSymbol(this.location[H.LEFT])),t.append(I.toLocationSymbol(this.location[H.ON])),this.location.length>1&&t.append(I.toLocationSymbol(this.location[H.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[H.ON]=t,this.location[H.LEFT]=e,this.location[H.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:I.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===I.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(H.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(I.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[H.ON]=e}else if(arguments[0]instanceof i){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var a=0;a<this.location.length;a++)this.location[a]=n.location[a]}}else if(arguments.length===3){var h=arguments[0],g=arguments[1],d=arguments[2];this.init(3),this.location[H.ON]=h,this.location[H.LEFT]=g,this.location[H.RIGHT]=d}}}])}(),Wt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new $t(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(H.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new fn;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(H.ON,e)}else if(arguments.length===3){var n=arguments[0],a=arguments[1],h=arguments[2];this.elt[n].setLocation(a,h)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new $t(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new $t(t),this.elt[1]=new $t(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.elt[0]=new $t(e.elt[0]),this.elt[1]=new $t(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],a=arguments[1];this.elt[0]=new $t(I.NONE),this.elt[1]=new $t(I.NONE),this.elt[n].setLocation(a)}else if(arguments.length===3){var h=arguments[0],g=arguments[1],d=arguments[2];this.elt[0]=new $t(h,g,d),this.elt[1]=new $t(h,g,d)}else if(arguments.length===4){var k=arguments[0],E=arguments[1],C=arguments[2],L=arguments[3];this.elt[0]=new $t(I.NONE,I.NONE,I.NONE),this.elt[1]=new $t(I.NONE,I.NONE,I.NONE),this.elt[k].setLocations(E,C,L)}}},{key:"toLineLabel",value:function(t){for(var e=new i(I.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}}])}(),Zn=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var i=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)i[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(i),this._isHole=lt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(i){this._startDe=i;var t=i,e=!0;do{if(t===null)throw new ye("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new ye("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var n=t.getLabel();nt.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(i){return this._pts.get(i)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var i=this._startDe;do{var t=i.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),i=this.getNext(i)}while(i!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(i,t,e){var n=i.getCoordinates();if(t){var a=1;e&&(a=0);for(var h=a;h<n.length;h++)this._pts.add(n[h])}else{var g=n.length-2;e&&(g=n.length-1);for(var d=g;d>=0;d--)this._pts.add(n[d])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var i=this._startDe;do i.getEdge().setInResult(!0),i=i.getNext();while(i!==this._startDe)}},{key:"containsPoint",value:function(i){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(i)||!Qi.isInRing(i,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(i))return!1;return!0}},{key:"addHole",value:function(i){this._holes.add(i)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var i=arguments[0];this.mergeLabel(i,0),this.mergeLabel(i,1)}else if(arguments.length===2){var t=arguments[1],e=arguments[0].getLocation(t,H.RIGHT);if(e===I.NONE)return null;if(this._label.getLocation(t)===I.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(i){this._shell=i,i!==null&&i.addHole(this)}},{key:"toPolygon",value:function(i){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return i.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new ut,this._pts=new ut,this._label=new Wt(I.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ut,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var i=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(i),this.computeRing()}}}}])}(),Mo=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"setEdgeRing",value:function(e,n){e.setMinEdgeRing(n)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Zn.constructor_.call(this,e,n)}}])}(Zn),Oo=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"buildMinimalRings",value:function(){var e=new ut,n=this._startDe;do{if(n.getMinEdgeRing()===null){var a=new Mo(n,this._geometryFactory);e.add(a)}n=n.getNext()}while(n!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,n){e.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext();while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];Zn.constructor_.call(this,e,n)}}])}(Zn),ls=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(i){this._isVisited=i}},{key:"setInResult",value:function(i){this._isInResult=i}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(i){this._label=i}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(i){this._isCovered=i,this._isCoveredSet=!0}},{key:"updateIM",value:function(i){nt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(i)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._label=i}}}}])}(),$n=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,n){var a=I.NONE;if(a=this._label.getLocation(n),!e.isNull(n)){var h=e.getLocation(n);a!==I.BOUNDARY&&(a=h)}return a}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return w(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];this._label===null?this._label=new Wt(e,n):this._label.setLocation(e,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof Wt)for(var n=arguments[0],a=0;a<2;a++){var h=this.computeMergedLocation(n,a);this._label.getLocation(a)===I.NONE&&this._label.setLocation(a,h)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(this._label===null)return null;var n=I.NONE;this._label!==null&&(n=this._label.getLocation(e));var a=null;switch(n){case I.BOUNDARY:a=I.INTERIOR;break;case I.INTERIOR:default:a=I.BOUNDARY}this._label.setLocation(e,a)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Wt(0,I.NONE)}}])}(ls),Ao=function(i){function t(){return l(this,t),o(this,t,arguments)}return p(t,i),c(t)}(ns);function hs(i){return i==null?0:i.color}function yt(i){return i==null?null:i.parent}function oe(i,t){i!==null&&(i.color=t)}function Ji(i){return i==null?null:i.left}function cs(i){return i==null?null:i.right}var pn=function(i){function t(){var e;return l(this,t),(e=o(this,t)).root_=null,e.size_=0,e}return p(t,i),c(t,[{key:"get",value:function(e){for(var n=this.root_;n!==null;){var a=e.compareTo(n.key);if(a<0)n=n.left;else{if(!(a>0))return n.value;n=n.right}}return null}},{key:"put",value:function(e,n){if(this.root_===null)return this.root_={key:e,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var a,h,g=this.root_;do if(a=g,(h=e.compareTo(g.key))<0)g=g.left;else{if(!(h>0)){var d=g.value;return g.value=n,d}g=g.right}while(g!==null);var k={key:e,left:null,right:null,value:n,parent:a,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return h<0?a.left=k:a.right=k,this.fixAfterInsertion(k),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var n;for(e.color=1;e!=null&&e!==this.root_&&e.parent.color===1;)yt(e)===Ji(yt(yt(e)))?hs(n=cs(yt(yt(e))))===1?(oe(yt(e),0),oe(n,0),oe(yt(yt(e)),1),e=yt(yt(e))):(e===cs(yt(e))&&(e=yt(e),this.rotateLeft(e)),oe(yt(e),0),oe(yt(yt(e)),1),this.rotateRight(yt(yt(e)))):hs(n=Ji(yt(yt(e))))===1?(oe(yt(e),0),oe(n,0),oe(yt(yt(e)),1),e=yt(yt(e))):(e===Ji(yt(e))&&(e=yt(e),this.rotateRight(e)),oe(yt(e),0),oe(yt(yt(e)),1),this.rotateLeft(yt(yt(e))));this.root_.color=0}},{key:"values",value:function(){var e=new ut,n=this.getFirstEntry();if(n!==null)for(e.add(n.value);(n=t.successor(n))!==null;)e.add(n.value);return e}},{key:"entrySet",value:function(){var e=new Gi,n=this.getFirstEntry();if(n!==null)for(e.add(n);(n=t.successor(n))!==null;)e.add(n);return e}},{key:"rotateLeft",value:function(e){if(e!=null){var n=e.right;e.right=n.left,n.left!=null&&(n.left.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.left===e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}}},{key:"rotateRight",value:function(e){if(e!=null){var n=e.left;e.left=n.right,n.right!=null&&(n.right.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.right===e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var n=this.root_;n!==null;){var a=e.compareTo(n.key);if(a<0)n=n.left;else{if(!(a>0))return!0;n=n.right}}return!1}}],[{key:"successor",value:function(e){var n;if(e===null)return null;if(e.right!==null){for(n=e.right;n.left!==null;)n=n.left;return n}n=e.parent;for(var a=e;n!==null&&a===n.right;)a=n,n=n.parent;return n}}])}(Ao),fs=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"find",value:function(i){return this.nodeMap.get(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof T){var i=arguments[0],t=this.nodeMap.get(i);return t===null&&(t=this.nodeFact.createNode(i),this.nodeMap.put(i,t)),t}if(arguments[0]instanceof $n){var e=arguments[0],n=this.nodeMap.get(e.getCoordinate());return n===null?(this.nodeMap.put(e.getCoordinate(),e),e):(n.mergeLabel(e),n)}}},{key:"print",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(i){for(var t=new ut,e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(i)===I.BOUNDARY&&t.add(n)}return t}},{key:"add",value:function(i){var t=i.getCoordinate();this.addNode(t).add(i)}}],[{key:"constructor_",value:function(){this.nodeMap=new pn,this.nodeFact=null;var i=arguments[0];this.nodeFact=i}}])}(),Dt=function(){function i(){l(this,i)}return c(i,null,[{key:"isNorthern",value:function(t){return t===i.NE||t===i.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4===2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4===2)return-1;var n=t<e?t:e;return n===0&&(t>e?t:e)===3?3:n}},{key:"isInHalfPlane",value:function(t,e){return e===i.SE?t===i.SE||t===i.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new M("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?i.NE:i.SE:e>=0?i.NW:i.SW}if(arguments[0]instanceof T&&arguments[1]instanceof T){var n=arguments[0],a=arguments[1];if(a.x===n.x&&a.y===n.y)throw new M("Cannot compute the quadrant for two identical points "+n);return a.x>=n.x?a.y>=n.y?i.NE:i.SE:a.y>=n.y?i.NW:i.SW}}}])}();Dt.NE=0,Dt.NW=1,Dt.SW=2,Dt.SE=3;var gs=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:lt.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),a=n.lastIndexOf("."),h=n.substring(a+1);t.print("  "+h+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Dt.quadrant(this._dx,this._dy),nt.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],a=arguments[2];i.constructor_.call(this,e,n,a,null)}else if(arguments.length===4){var h=arguments[0],g=arguments[1],d=arguments[2],k=arguments[3];i.constructor_.call(this,h),this.init(g,d),this._label=k}}}])}(),ji=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new Wt(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,n){if(this._depth[e]!==-999&&this._depth[e]!==n)throw new ye("assigned depths do not match",this.getCoordinate());this._depth[e]=n}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,H.LEFT)===I.INTERIOR&&this._label.getLocation(n,H.RIGHT)===I.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){w(t,"print",this,1).call(this,e),e.print(" "+this._depth[H.LEFT]+"/"+this._depth[H.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),n=!this._label.isArea(0)||this._label.allPositionsEqual(0,I.EXTERIOR),a=!this._label.isArea(1)||this._label.allPositionsEqual(1,I.EXTERIOR);return e&&n&&a}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,n){var a=this.getEdge().getDepthDelta();this._isForward||(a=-a);var h=1;e===H.LEFT&&(h=-1);var g=H.opposite(e),d=n+a*h;this.setDepth(e,n),this.setDepth(g,d)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],n=arguments[1];if(gs.constructor_.call(this,e),this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var a=e.getNumPoints()-1;this.init(e.getCoordinate(a),e.getCoordinate(a-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,n){return e===I.EXTERIOR&&n===I.INTERIOR?1:e===I.INTERIOR&&n===I.EXTERIOR?-1:0}}])}(gs),ms=function(){return c(function i(){l(this,i)},[{key:"createNode",value:function(i){return new $n(i,null)}}])}(),ds=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(i){i.println("Edges:");for(var t=0;t<this._edges.size();t++){i.println("edge "+t+":");var e=this._edges.get(t);e.print(i),e.eiList.print(i)}}},{key:"find",value:function(i){return this._nodes.find(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof $n){var i=arguments[0];return this._nodes.addNode(i)}if(arguments[0]instanceof T){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(i){Zt.out.println(i)}},{key:"isBoundaryNode",value:function(i,t){var e=this._nodes.find(t);if(e===null)return!1;var n=e.getLabel();return n!==null&&n.getLocation(i)===I.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(i,t,e,n){return!!i.equals(e)&&lt.index(i,t,n)===lt.COLLINEAR&&Dt.quadrant(i,t)===Dt.quadrant(e,n)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(i){Zt.out.print(i)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),a=n.getCoordinates();if(this.matchInSameDirection(i,t,a[0],a[1])||this.matchInSameDirection(i,t,a[a.length-1],a[a.length-2]))return n}return null}},{key:"insertEdge",value:function(i){this._edges.add(i)}},{key:"findEdgeEnd",value:function(i){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===i)return e}return null}},{key:"addEdges",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var n=new ji(e,!0),a=new ji(e,!1);n.setSym(a),a.setSym(n),this.add(n),this.add(a)}}},{key:"add",value:function(i){this._nodes.add(i),this._edgeEndList.add(i)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),a=n.getCoordinates();if(i.equals(a[0])&&t.equals(a[1]))return n}return null}}],[{key:"constructor_",value:function(){if(this._edges=new ut,this._nodes=null,this._edgeEndList=new ut,arguments.length===0)this._nodes=new fs(new ms);else if(arguments.length===1){var i=arguments[0];this._nodes=new fs(i)}}},{key:"linkResultDirectedEdges",value:function(i){for(var t=i.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}])}(),Po=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var a=t.iterator();a.hasNext();){var h=a.next();h.isHole()?n.add(h):e.add(h)}}},{key:"computePolygons",value:function(t){for(var e=new ut,n=t.iterator();n.hasNext();){var a=n.next().toPolygon(this._geometryFactory);e.add(a)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var a=n.next();if(a.getShell()===null){var h=i.findEdgeRingContaining(a,t);if(h===null)throw new ye("unable to assign hole to a shell",a.getCoordinate(0));a.setShell(h)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var a=new ut,h=t.iterator();h.hasNext();){var g=h.next();if(g.getMaxNodeDegree()>2){g.linkDirectedEdgesForMinimalEdgeRings();var d=g.buildMinimalRings(),k=this.findShell(d);k!==null?(this.placePolygonHoles(k,d),e.add(k)):n.addAll(d)}else a.add(g)}return a}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new ut,n=t.iterator();n.hasNext();){var a=n.next();if(a.isInResult()&&a.getLabel().isArea()&&a.getEdgeRing()===null){var h=new Oo(a,this._geometryFactory);e.add(h),h.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var a=n.next();a.isHole()&&a.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,a=t.iterator();a.hasNext();){var h=a.next();h.isHole()||(n=h,e++)}return nt.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];ds.linkResultDirectedEdges(n);var a=this.buildMaximalEdgeRings(e),h=new ut,g=this.buildMinimalEdgeRings(a,this._shellList,h);this.sortShellsAndHoles(g,this._shellList,h),this.placeFreeHoles(this._shellList,h)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new ut;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),a=n.getEnvelopeInternal(),h=n.getCoordinateN(0),g=null,d=null,k=e.iterator();k.hasNext();){var E=k.next(),C=E.getLinearRing(),L=C.getEnvelopeInternal();if(!L.equals(a)&&L.contains(a)){h=bt.ptNotInList(n.getCoordinates(),C.getCoordinates());var X=!1;Qi.isInRing(h,C.getCoordinates())&&(X=!0),X&&(g===null||d.contains(L))&&(d=(g=E).getLinearRing().getEnvelopeInternal())}}return g}}])}(),vs=function(){return c(function i(){l(this,i)},[{key:"getBounds",value:function(){}}])}(),pe=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[vs,B]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var i=arguments[0],t=arguments[1];this._bounds=i,this._item=t}}])}(),Wn=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var i=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),i}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(i){for(var t=null,e=this._items.get(i);2*i<=this._size&&((t=2*i)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);i=t)this._items.set(i,this._items.get(t));this._items.set(i,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(i){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,i);i.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,i)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new ut,this._items.add(null)}}])}(),Do=function(){return c(function i(){l(this,i)},[{key:"insert",value:function(i,t){}},{key:"remove",value:function(i,t){}},{key:"query",value:function(){}}])}(),Kt=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(i){nt.isTrue(this._bounds===null),this._childBoundables.add(i)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[vs,B]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new ut,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._level=i}}}}])}(),Ke={reverseOrder:function(){return{compare:function(i,t){return t.compareTo(i)}}},min:function(i){return Ke.sort(i),i.get(0)},sort:function(i,t){var e=i.toArray();t?Oe.sort(e,t):Oe.sort(e);for(var n=i.iterator(),a=0,h=e.length;a<h;a++)n.next(),n.set(e[a])},singletonList:function(i){var t=new ut;return t.add(i),t}},Fo=function(){function i(){l(this,i)}return c(i,null,[{key:"maxDistance",value:function(t,e,n,a,h,g,d,k){var E=i.distance(t,e,h,g);return E=Math.max(E,i.distance(t,e,d,k)),E=Math.max(E,i.distance(n,a,h,g)),E=Math.max(E,i.distance(n,a,d,k))}},{key:"distance",value:function(t,e,n,a){var h=n-t,g=a-e;return Math.sqrt(h*h+g*g)}},{key:"maximumDistance",value:function(t,e){var n=Math.min(t.getMinX(),e.getMinX()),a=Math.min(t.getMinY(),e.getMinY()),h=Math.max(t.getMaxX(),e.getMaxX()),g=Math.max(t.getMaxY(),e.getMaxY());return i.distance(n,a,h,g)}},{key:"minMaxDistance",value:function(t,e){var n=t.getMinX(),a=t.getMinY(),h=t.getMaxX(),g=t.getMaxY(),d=e.getMinX(),k=e.getMinY(),E=e.getMaxX(),C=e.getMaxY(),L=i.maxDistance(n,a,n,g,d,k,d,C);return L=Math.min(L,i.maxDistance(n,a,n,g,d,k,E,k)),L=Math.min(L,i.maxDistance(n,a,n,g,E,C,d,C)),L=Math.min(L,i.maxDistance(n,a,n,g,E,C,E,k)),L=Math.min(L,i.maxDistance(n,a,h,a,d,k,d,C)),L=Math.min(L,i.maxDistance(n,a,h,a,d,k,E,k)),L=Math.min(L,i.maxDistance(n,a,h,a,E,C,d,C)),L=Math.min(L,i.maxDistance(n,a,h,a,E,C,E,k)),L=Math.min(L,i.maxDistance(h,g,n,g,d,k,d,C)),L=Math.min(L,i.maxDistance(h,g,n,g,d,k,E,k)),L=Math.min(L,i.maxDistance(h,g,n,g,E,C,d,C)),L=Math.min(L,i.maxDistance(h,g,n,g,E,C,E,k)),L=Math.min(L,i.maxDistance(h,g,h,a,d,k,d,C)),L=Math.min(L,i.maxDistance(h,g,h,a,d,k,E,k)),L=Math.min(L,i.maxDistance(h,g,h,a,E,C,d,C)),L=Math.min(L,i.maxDistance(h,g,h,a,E,C,E,k))}}])}(),Qe=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"maximumDistance",value:function(){return Fo.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var n=i.isComposite(this._boundable1),a=i.isComposite(this._boundable2);if(n&&a)return i.area(this._boundable1)>i.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(a)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new M("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(i.isComposite(this._boundable1)||i.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,e,n,a,h){for(var g=t.getChildBoundables().iterator();g.hasNext();){var d=g.next(),k=null;(k=n?new i(e,d,this._itemDistance):new i(d,e,this._itemDistance)).getDistance()<h&&a.add(k)}}},{key:"getBoundable",value:function(t){return t===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Kt}}])}(),ys=function(){return c(function i(){l(this,i)},[{key:"visitItem",value:function(i){}}])}(),Je=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"queryInternal",value:function(){if(ct(arguments[2],ys)&&arguments[0]instanceof Object&&arguments[1]instanceof Kt)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),a=0;a<n.size();a++){var h=n.get(a);this.getIntersectsOp().intersects(h.getBounds(),t)&&(h instanceof Kt?this.queryInternal(t,h,e):h instanceof pe?e.visitItem(h.getItem()):nt.shouldNeverReachHere())}else if(ct(arguments[2],be)&&arguments[0]instanceof Object&&arguments[1]instanceof Kt)for(var g=arguments[0],d=arguments[2],k=arguments[1].getChildBoundables(),E=0;E<k.size();E++){var C=k.get(E);this.getIntersectsOp().intersects(C.getBounds(),g)&&(C instanceof Kt?this.queryInternal(g,C,d):C instanceof pe?d.add(C.getItem()):nt.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Kt?t+=this.size(n):n instanceof pe&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,a=t.getChildBoundables().iterator();a.hasNext();){var h=a.next();h instanceof pe&&h.getItem()===e&&(n=h)}return n!==null&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new ut:t}if(arguments.length===1){for(var e=arguments[0],n=new ut,a=e.getChildBoundables().iterator();a.hasNext();){var h=a.next();if(h instanceof Kt){var g=this.itemsTree(h);g!==null&&n.add(g)}else h instanceof pe?n.add(h.getItem()):nt.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){nt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new pe(t,e))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var t=arguments[0],e=new ut;return this.boundablesAtLevel(t,this._root,e),e}if(arguments.length===3){var n=arguments[0],a=arguments[1],h=arguments[2];if(nt.isTrue(n>-2),a.getLevel()===n)return h.add(a),null;for(var g=a.getChildBoundables().iterator();g.hasNext();){var d=g.next();d instanceof Kt?this.boundablesAtLevel(n,d,h):(nt.isTrue(d instanceof pe),n===-1&&h.add(d))}return null}}},{key:"query",value:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new ut;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(arguments.length===2){var n=arguments[0],a=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,a)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(arguments.length===3){var n=arguments[0],a=arguments[1],h=arguments[2],g=this.removeItem(a,h);if(g)return!0;for(var d=null,k=a.getChildBoundables().iterator();k.hasNext();){var E=k.next();if(this.getIntersectsOp().intersects(E.getBounds(),n)&&E instanceof Kt&&(g=this.remove(n,E,h))){d=E;break}}return d!==null&&d.getChildBoundables().isEmpty()&&a.getChildBoundables().remove(d),g}}},{key:"createHigherLevels",value:function(t,e){nt.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Kt){var a=this.depth(n);a>t&&(t=a)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){nt.isTrue(!t.isEmpty());var n=new ut;n.add(this.createNode(e));var a=new ut(t);Ke.sort(a,this.getComparator());for(var h=a.iterator();h.hasNext();){var g=h.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(g)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[B]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new ut,this._nodeCapacity=null,arguments.length===0)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];nt.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();Je.IntersectsOp=function(){},Je.DEFAULT_NODE_CAPACITY=10;var qo=function(){return c(function i(){l(this,i)},[{key:"distance",value:function(i,t){}}])}(),le=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,n){nt.isTrue(e.length>0);for(var a=new ut,h=0;h<e.length;h++)a.addAll(this.createParentBoundablesFromVerticalSlice(e[h],n));return a}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.nearestNeighbourK(e,U.POSITIVE_INFINITY,n)}if(arguments.length===3){var a=arguments[0],h=arguments[2],g=arguments[1],d=new Wn;d.add(a);for(var k=new Wn;!d.isEmpty()&&g>=0;){var E=d.poll(),C=E.getDistance();if(C>=g)break;E.isLeaves()?k.size()<h?k.add(E):(k.peek().getDistance()>C&&(k.poll(),k.add(E)),g=k.peek().getDistance()):E.expandToQueue(d,g)}return t.getItems(k)}}},{key:"createNode",value:function(e){return new _s(e)}},{key:"size",value:function(){return arguments.length===0?w(t,"size",this,1).call(this):w(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Et))return w(t,"insert",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;w(t,"insert",this,1).call(this,e,n)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,n){for(var a=Math.trunc(Math.ceil(e.size()/n)),h=new Array(n).fill(null),g=e.iterator(),d=0;d<n;d++){h[d]=new ut;for(var k=0;g.hasNext()&&k<a;){var E=g.next();h[d].add(E),k++}}return h}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];return w(t,"query",this,1).call(this,e)}if(arguments.length===2){var n=arguments[0],a=arguments[1];w(t,"query",this,1).call(this,n,a)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return w(t,"createParentBoundables",this,1).call(this,e,n)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Et){var e=arguments[0],n=arguments[1];return w(t,"remove",this,1).call(this,e,n)}return w(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?w(t,"depth",this,1).call(this):w(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,n){nt.isTrue(!e.isEmpty());var a=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),h=new ut(e);Ke.sort(h,t.xComparator);var g=this.verticalSlices(h,Math.trunc(Math.ceil(Math.sqrt(a))));return this.createParentBoundablesFromVerticalSlices(g,n)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(ct(arguments[0],qo)){var e=arguments[0];if(this.isEmpty())return null;var n=new Qe(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(n)}if(arguments[0]instanceof Qe){var a=arguments[0],h=U.POSITIVE_INFINITY,g=null,d=new Wn;for(d.add(a);!d.isEmpty()&&h>0;){var k=d.poll(),E=k.getDistance();if(E>=h)break;k.isLeaves()?(h=E,g=k):k.expandToQueue(d,h)}return g===null?null:[g.getBoundable(0).getItem(),g.getBoundable(1).getItem()]}}else{if(arguments.length===2){var C=arguments[0],L=arguments[1];if(this.isEmpty()||C.isEmpty())return null;var X=new Qe(this.getRoot(),C.getRoot(),L);return this.nearestNeighbour(X)}if(arguments.length===3){var K=arguments[2],et=new pe(arguments[0],arguments[1]),at=new Qe(this.getRoot(),et,K);return this.nearestNeighbour(at)[0]}if(arguments.length===4){var dt=arguments[2],gt=arguments[3],pt=new pe(arguments[0],arguments[1]),Ot=new Qe(this.getRoot(),pt,dt);return this.nearestNeighbourK(Ot,gt)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1],a=U.POSITIVE_INFINITY,h=new Wn;for(h.add(e);!h.isEmpty();){var g=h.poll(),d=g.getDistance();if(d>n)return!1;if(g.maximumDistance()<=n)return!0;if(g.isLeaves()){if((a=d)<=n)return!0}else g.expandToQueue(h,a)}return!1}if(arguments.length===3){var k=arguments[0],E=arguments[1],C=arguments[2],L=new Qe(this.getRoot(),k.getRoot(),E);return this.isWithinDistance(L,C)}}},{key:"interfaces_",get:function(){return[Do,B]}}],[{key:"constructor_",value:function(){if(arguments.length===0)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];Je.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,n){return(e+n)/2}},{key:"getItems",value:function(e){for(var n=new Array(e.size()).fill(null),a=0;!e.isEmpty();){var h=e.poll();n[a]=h.getBoundable(0).getItem(),a++}return n}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(Je),_s=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"computeBounds",value:function(){for(var e=null,n=this.getChildBoundables().iterator();n.hasNext();){var a=n.next();e===null?e=new Et(a.getBounds()):e.expandToInclude(a.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];Kt.constructor_.call(this,e)}}])}(Kt);le.STRtreeNode=_s,le.xComparator=new(function(){return c(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[ht]}},{key:"compare",value:function(i,t){return Je.compareDoubles(le.centreX(i.getBounds()),le.centreX(t.getBounds()))}}])}()),le.yComparator=new(function(){return c(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[ht]}},{key:"compare",value:function(i,t){return Je.compareDoubles(le.centreY(i.getBounds()),le.centreY(t.getBounds()))}}])}()),le.intersectsOp=new(function(){return c(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(i,t){return i.intersects(t)}}])}()),le.DEFAULT_NODE_CAPACITY=10;var Go=function(){function i(){l(this,i)}return c(i,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,n){if(e.equals2D(n))return 0;var a=i.relativeSign(e.x,n.x),h=i.relativeSign(e.y,n.y);switch(t){case 0:return i.compareValue(a,h);case 1:return i.compareValue(h,a);case 2:return i.compareValue(h,-a);case 3:return i.compareValue(-a,h);case 4:return i.compareValue(-a,-h);case 5:return i.compareValue(-h,-a);case 6:return i.compareValue(-h,a);case 7:return i.compareValue(a,-h)}return nt.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),zo=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(i){var t=i;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?Go.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===i}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._segString=i,this.coord=new T(t),this.segmentIndex=e,this._segmentOctant=n,this._isInterior=!t.equals2D(i.getCoordinate(e))}}])}(),Yo=function(){return c(function i(){l(this,i)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Xo=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var i=new vn;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next();this.addEdgeCoordinates(e,n,i),e=n}return i.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var i=new ut;this.findCollapsesFromInsertedNodes(i),this.findCollapsesFromExistingVertices(i);for(var t=i.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2;if(e===2)return[new T(i.coord),new T(t.coord)];var n=this._edge.getCoordinate(t.segmentIndex),a=t.isInterior()||!t.coord.equals2D(n);a||e--;var h=new Array(e).fill(null),g=0;h[g++]=new T(i.coord);for(var d=i.segmentIndex+1;d<=t.segmentIndex;d++)h[g++]=this._edge.getCoordinate(d);return a&&(h[g]=new T(t.coord)),h}},{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"findCollapsesFromExistingVertices",value:function(i){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var n=this._edge.getCoordinate(t+2);e.equals2D(n)&&i.add(Gn.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(i,t,e){var n=this.createSplitEdgePts(i,t);e.add(n,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),a=this.createSplitEdge(e,n);i.add(a),e=n}}},{key:"findCollapseIndex",value:function(i,t,e){if(!i.coord.equals2D(t.coord))return!1;var n=t.segmentIndex-i.segmentIndex;return t.isInterior()||n--,n===1&&(e[0]=i.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(i){for(var t=new Array(1).fill(null),e=this.iterator(),n=e.next();e.hasNext();){var a=e.next();this.findCollapseIndex(n,a,t)&&i.add(Gn.valueOf(t[0])),n=a}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var i=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(i),i)}},{key:"createSplitEdge",value:function(i,t){var e=this.createSplitEdgePts(i,t);return new Fe(e,this._edge.getData())}},{key:"add",value:function(i,t){var e=new zo(this._edge,i,t,this._edge.getSegmentOctant(t)),n=this._nodeMap.get(e);return n!==null?(nt.isTrue(n.coord.equals2D(i),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(i){var t=this._edge.getCoordinates(),e=i.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new ft("bad split edge start point at "+e);var n=i.get(i.size()-1).getCoordinates(),a=n[n.length-1];if(!a.equals2D(t[t.length-1]))throw new ft("bad split edge end point at "+a)}}],[{key:"constructor_",value:function(){this._nodeMap=new pn,this._edge=null;var i=arguments[0];this._edge=i}}])}(),Bo=function(){function i(){l(this,i)}return c(i,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new M("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),a=Math.abs(e);return t>=0?e>=0?n>=a?0:1:n>=a?7:6:e>=0?n>=a?3:2:n>=a?4:5}if(arguments[0]instanceof T&&arguments[1]instanceof T){var h=arguments[0],g=arguments[1],d=g.x-h.x,k=g.y-h.y;if(d===0&&k===0)throw new M("Cannot compute the octant for two identical points "+h);return i.octant(d,k)}}}])}(),Uo=function(){return c(function i(){l(this,i)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(i){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(i){}},{key:"getData",value:function(){}}])}(),Vo=function(){return c(function i(){l(this,i)},[{key:"addIntersection",value:function(i,t){}},{key:"interfaces_",get:function(){return[Uo]}}])}(),Fe=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:Bo.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[1],a=arguments[3],h=new T(arguments[0].getIntersection(a));this.addIntersection(h,n)}}},{key:"toString",value:function(){return Ki.toLineString(new yn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,a=n+1;if(a<this._pts.length){var h=this._pts[a];t.equals2D(h)&&(n=a)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var a=0;a<t.getIntersectionNum();a++)this.addIntersection(t,e,n,a)}},{key:"interfaces_",get:function(){return[Vo]}}],[{key:"constructor_",value:function(){this._nodeList=new Xo(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var t=arguments[0],e=new ut;return i.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[1],a=arguments[0].iterator();a.hasNext();)a.next().getNodeList().addSplitEdges(n)}}])}(),Ut=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof i){var t=arguments[0],e=lt.index(this.p0,this.p1,t.p0),n=lt.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof T){var a=arguments[0];return lt.index(this.p0,this.p1,a)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new De;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof T){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new T(t);var e=this.projectionFactor(t),n=new T;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof i){var a=arguments[0],h=this.projectionFactor(a.p0),g=this.projectionFactor(a.p1);if(h>=1&&g>=1||h<=0&&g<=0)return null;var d=this.project(a.p0);h<0&&(d=this.p0),h>1&&(d=this.p1);var k=this.project(a.p1);return g<0&&(k=this.p0),g>1&&(k=this.p1),new i(d,k)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return t===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return ue.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return i.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,a=e*e+n*n;return a<=0?U.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/a}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),a=U.MAX_VALUE,h=null,g=this.closestPoint(t.p0);a=g.distance(t.p0),n[0]=g,n[1]=t.p0;var d=this.closestPoint(t.p1);(h=d.distance(t.p1))<a&&(a=h,n[0]=d,n[1]=t.p1);var k=t.closestPoint(this.p0);(h=k.distance(this.p0))<a&&(a=h,n[0]=this.p0,n[1]=k);var E=t.closestPoint(this.p1);return(h=E.distance(this.p1))<a&&(a=h,n[0]=this.p1,n[1]=E),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return Xi.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),a=this.p0.y+t*(this.p1.y-this.p0.y),h=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,d=Math.sqrt(h*h+g*g),k=0,E=0;if(e!==0){if(d<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");k=e*h/d,E=e*g/d}return new T(n-E,a+k)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||U.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),a=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),h=e*e+n*n,g=e*e-n*n,d=t.getX(),k=t.getY();return new T((-g*d-2*e*n*k-2*e*a)/h,(g*k-2*e*n*d-2*n*a)/h)}},{key:"distance",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return ue.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof T){var e=arguments[0];return ue.pointToSegment(e,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new T;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=U.doubleToLongBits(this.p0.x);t^=31*U.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=U.doubleToLongBits(this.p1.x);return n^=31*U.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))}},{key:"interfaces_",get:function(){return[z,B]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)i.constructor_.call(this,new T,new T);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var a=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3];i.constructor_.call(this,new T(a,h),new T(g,d))}}},{key:"midPoint",value:function(t,e){return new T((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),Ho=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var i=arguments[1],t=arguments[2],e=arguments[3];arguments[0].getLineSegment(i,this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Ut,this._overlapSeg2=new Ut}}])}(),ps=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(i,t){t.p0=this._pts[i],t.p1=this._pts[i+1]}},{key:"computeSelect",value:function(i,t,e,n){var a=this._pts[t],h=this._pts[e];if(e-t==1)return n.select(this,t),null;if(!i.intersects(a,h))return null;var g=Math.trunc((t+e)/2);t<g&&this.computeSelect(i,t,g,n),g<e&&this.computeSelect(i,g,e,n)}},{key:"getCoordinates",value:function(){for(var i=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)i[t++]=this._pts[e];return i}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var i=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,i,i._start,i._end,t)}else if(arguments.length===6){var e=arguments[0],n=arguments[1],a=arguments[2],h=arguments[3],g=arguments[4],d=arguments[5];if(n-e==1&&g-h==1)return d.overlap(this,e,a,h),null;if(!this.overlaps(e,n,a,h,g))return null;var k=Math.trunc((e+n)/2),E=Math.trunc((h+g)/2);e<k&&(h<E&&this.computeOverlaps(e,k,a,h,E,d),E<g&&this.computeOverlaps(e,k,a,E,g,d)),k<n&&(h<E&&this.computeOverlaps(k,n,a,h,E,d),E<g&&this.computeOverlaps(k,n,a,E,g,d))}}},{key:"setId",value:function(i){this._id=i}},{key:"select",value:function(i,t){this.computeSelect(i,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(this._env===null){var i=this._pts[this._start],t=this._pts[this._end];this._env=new Et(i,t)}return this._env}},{key:"overlaps",value:function(i,t,e,n,a){return Et.intersects(this._pts[i],this._pts[t],e._pts[n],e._pts[a])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._pts=i,this._start=t,this._end=e,this._context=n}}])}(),Zo=function(){function i(){l(this,i)}return c(i,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var a=Dt.quadrant(t[n],t[n+1]),h=e+1;h<t.length&&!(!t[h-1].equals2D(t[h])&&Dt.quadrant(t[h-1],t[h])!==a);)h++;return h-1}},{key:"getChains",value:function(){if(arguments.length===1){var t=arguments[0];return i.getChains(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1],a=new ut,h=0;do{var g=i.findChainEnd(e,h),d=new ps(e,h,g,n);a.add(d),h=g}while(h<e.length-1);return a}}}])}(),tr=function(){return c(function i(){l(this,i)},[{key:"computeNodes",value:function(i){}},{key:"getNodedSubstrings",value:function(){}}])}(),ks=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(i){this._segInt=i}},{key:"interfaces_",get:function(){return[tr]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this.setSegmentIntersector(i)}}}}])}(),er=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Fe.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var n=Zo.getChains(e.getCoordinates(),e).iterator();n.hasNext();){var a=n.next();a.setId(this._idCounter++),this._index.insert(a.getEnvelope(),a),this._monoChains.add(a)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var n=e.iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new xs(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var a=n.next(),h=this._index.query(a.getEnvelope()).iterator();h.hasNext();){var g=h.next();if(g.getId()>a.getId()&&(a.computeOverlaps(g,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new ut,this._index=new le,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var e=arguments[0];ks.constructor_.call(this,e)}}}}])}(ks),xs=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"overlap",value:function(){if(arguments.length!==4)return w(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],n=arguments[2],a=arguments[3],h=arguments[0].getContext(),g=n.getContext();this._si.processIntersections(h,e,g,a)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}])}(Ho);er.SegmentOverlapAction=xs;var ee=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"isDeletable",value:function(t,e,n,a){var h=this._inputLine[t],g=this._inputLine[e],d=this._inputLine[n];return!!this.isConcave(h,g,d)&&!!this.isShallow(h,g,d,a)&&this.isShallowSampled(h,g,t,n,a)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),a=!1;n<this._inputLine.length;){var h=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=i.DELETE,h=!0,a=!0),t=h?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return a}},{key:"isShallowConcavity",value:function(t,e,n,a){return lt.index(t,e,n)===this._angleOrientation&&ue.pointToSegment(e,t,n)<a}},{key:"isShallowSampled",value:function(t,e,n,a,h){var g=Math.trunc((a-n)/i.NUM_PTS_TO_CHECK);g<=0&&(g=1);for(var d=n;d<a;d+=g)if(!this.isShallow(t,e,this._inputLine[d],h))return!1;return!0}},{key:"isConcave",value:function(t,e,n){var a=lt.index(t,e,n)===this._angleOrientation;return a}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=lt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===i.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,n,a){return ue.pointToSegment(e,t,n)<a}},{key:"collapseLine",value:function(){for(var t=new vn,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==i.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=lt.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,e){return new i(t).simplify(e)}}])}();ee.INIT=0,ee.DELETE=1,ee.KEEP=1,ee.NUM_PTS_TO_CHECK=10;var Es=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getCoordinates",value:function(){return this._ptList.toArray(i.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new T(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var a=t.length-1;a>=0;a--)this.addPt(t[a])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return new $e().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new T(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ut}}])}();Es.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Vt=function(){function i(){l(this,i)}return c(i,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=i.PI_TIMES_2;for(;t<=-Math.PI;)t+=i.PI_TIMES_2;return t}},{key:"angle",value:function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],a=n.x-e.x,h=n.y-e.y;return Math.atan2(h,a)}}},{key:"isAcute",value:function(t,e,n){var a=t.x-e.x,h=t.y-e.y;return a*(n.x-e.x)+h*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var a=t.x-e.x,h=t.y-e.y;return a*(n.x-e.x)+h*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,n){var a=i.angle(e,t),h=i.angle(e,n);return Math.abs(h-a)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=i.PI_TIMES_2;t>=i.PI_TIMES_2&&(t=0)}else{for(;t>=i.PI_TIMES_2;)t-=i.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,n){var a=i.angle(e,t),h=i.angle(e,n);return i.diff(a,h)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var n=Math.sin(e-t);return n>0?i.COUNTERCLOCKWISE:n<0?i.CLOCKWISE:i.NONE}},{key:"angleBetweenOriented",value:function(t,e,n){var a=i.angle(e,t),h=i.angle(e,n)-a;return h<=-Math.PI?h+i.PI_TIMES_2:h>Math.PI?h-i.PI_TIMES_2:h}}])}();Vt.PI_TIMES_2=2*Math.PI,Vt.PI_OVER_2=Math.PI/2,Vt.PI_OVER_4=Math.PI/4,Vt.COUNTERCLOCKWISE=lt.COUNTERCLOCKWISE,Vt.CLOCKWISE=lt.CLOCKWISE,Vt.NONE=lt.COLLINEAR;var kn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=lt.index(this._s0,this._s1,this._s2),a=n===lt.CLOCKWISE&&this._side===H.LEFT||n===lt.COUNTERCLOCKWISE&&this._side===H.RIGHT;n===0?this.addCollinear(e):a?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new Ut(t,e),a=new Ut;this.computeOffsetSegment(n,H.LEFT,this._distance,a);var h=new Ut;this.computeOffsetSegment(n,H.RIGHT,this._distance,h);var g=e.x-t.x,d=e.y-t.y,k=Math.atan2(d,g);switch(this._bufParams.getEndCapStyle()){case b.CAP_ROUND:this._segList.addPt(a.p1),this.addDirectedFillet(e,k+Math.PI/2,k-Math.PI/2,lt.CLOCKWISE,this._distance),this._segList.addPt(h.p1);break;case b.CAP_FLAT:this._segList.addPt(a.p1),this._segList.addPt(h.p1);break;case b.CAP_SQUARE:var E=new T;E.x=Math.abs(this._distance)*Math.cos(k),E.y=Math.abs(this._distance)*Math.sin(k);var C=new T(a.p1.x+E.x,a.p1.y+E.y),L=new T(h.p1.x+E.x,h.p1.y+E.y);this._segList.addPt(C),this._segList.addPt(L)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,a){var h=Xi.intersection(e.p0,e.p1,n.p0,n.p1);if(h!==null&&(a<=0?1:h.distance(t)/Math.abs(a))<=this._bufParams.getMitreLimit())return this._segList.addPt(h),null;this.addLimitedMitreJoin(e,n,a,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===b.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===b.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new T(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new T(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new T(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new T(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,a,h){var g=e.x-t.x,d=e.y-t.y,k=Math.atan2(d,g),E=n.x-t.x,C=n.y-t.y,L=Math.atan2(C,E);a===lt.CLOCKWISE?k<=L&&(k+=2*Math.PI):k>=L&&(k-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,k,L,a,h),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,a){var h=this._seg0.p1,g=Vt.angle(h,this._seg0.p0),d=Vt.angleBetweenOriented(this._seg0.p0,h,this._seg1.p1)/2,k=Vt.normalize(g+d),E=Vt.normalize(k+Math.PI),C=a*n,L=n-C*Math.abs(Math.sin(d)),X=h.x+C*Math.cos(E),K=h.y+C*Math.sin(E),et=new T(X,K),at=new Ut(h,et),dt=at.pointAlongOffset(1,L),gt=at.pointAlongOffset(1,-L);this._side===H.LEFT?(this._segList.addPt(dt),this._segList.addPt(gt)):(this._segList.addPt(gt),this._segList.addPt(dt))}},{key:"addDirectedFillet",value:function(t,e,n,a,h){var g=a===lt.CLOCKWISE?-1:1,d=Math.abs(e-n),k=Math.trunc(d/this._filletAngleQuantum+.5);if(k<1)return null;for(var E=d/k,C=new T,L=0;L<k;L++){var X=e+g*L*E;C.x=t.x+h*Math.cos(X),C.y=t.y+h*Math.sin(X),this._segList.addPt(C)}}},{key:"computeOffsetSegment",value:function(t,e,n,a){var h=e===H.LEFT?1:-1,g=t.p1.x-t.p0.x,d=t.p1.y-t.p0.y,k=Math.sqrt(g*g+d*d),E=h*n*g/k,C=h*n*d/k;a.p0.x=t.p0.x-C,a.p0.y=t.p0.y+E,a.p1.x=t.p1.x-C,a.p1.y=t.p1.y+E}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new T((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var a=new T((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(a)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new T(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Es,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===b.JOIN_BEVEL||this._bufParams.getJoinStyle()===b.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,lt.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ut,this._seg1=new Ut,this._offset0=new Ut,this._offset1=new Ut,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new De,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===b.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}])}();kn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,kn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,kn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,kn.MAX_CLOSING_SEG_LEN_FACTOR=80;var $o=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,e===0)return null;var n=e<0,a=Math.abs(e),h=this.getSegGen(a);t.length<=1?this.computePointCurve(t[0],h):this.computeOffsetCurve(t,n,h);var g=h.getCoordinates();return n&&bt.reverse(g),g}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var a=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var h=ee.simplify(t,-a),g=h.length-1;n.initSideSegments(h[g],h[g-1],H.LEFT),n.addFirstSegment();for(var d=g-2;d>=0;d--)n.addNextSegment(h[d],!0)}else{n.addSegments(t,!1);var k=ee.simplify(t,a),E=k.length-1;n.initSideSegments(k[0],k[1],H.LEFT),n.addFirstSegment();for(var C=2;C<=E;C++)n.addNextSegment(k[C],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var a=this.simplifyTolerance(this._distance);e===H.RIGHT&&(a=-a);var h=ee.simplify(t,a),g=h.length-1;n.initSideSegments(h[g-1],h[0],e);for(var d=1;d<=g;d++){var k=d!==1;n.addNextSegment(h[d],k)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),a=ee.simplify(t,n),h=a.length-1;e.initSideSegments(a[0],a[1],H.LEFT);for(var g=2;g<=h;g++)e.addNextSegment(a[g],!0);e.addLastSegment(),e.addLineEndCap(a[h-1],a[h]);var d=ee.simplify(t,-n),k=d.length-1;e.initSideSegments(d[k],d[k-1],H.LEFT);for(var E=k-2;E>=0;E--)e.addNextSegment(d[E],!0);e.addLastSegment(),e.addLineEndCap(d[1],d[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case b.CAP_ROUND:e.createCircle(t);break;case b.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),a=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],a);else if(this._bufParams.isSingleSided()){var h=e<0;this.computeSingleSidedBufferCurve(t,h,a)}else this.computeLineBufferCurve(t,a);return a.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return i.copyCoordinates(t);var a=this.getSegGen(n);return this.computeRingBufferCurve(t,e,a),a.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var a=this.simplifyTolerance(this._distance);if(e){var h=ee.simplify(t,-a),g=h.length-1;n.initSideSegments(h[g],h[g-1],H.LEFT),n.addFirstSegment();for(var d=g-2;d>=0;d--)n.addNextSegment(h[d],!0)}else{var k=ee.simplify(t,a),E=k.length-1;n.initSideSegments(k[0],k[1],H.LEFT),n.addFirstSegment();for(var C=2;C<=E;C++)n.addNextSegment(k[C],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return t===0||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new kn(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new T(t[n]);return e}}])}(),Ns=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var i=arguments[0],t=new ut,e=this._subgraphs.iterator();e.hasNext();){var n=e.next(),a=n.getEnvelope();i.y<a.getMinY()||i.y>a.getMaxY()||this.findStabbedSegments(i,n.getDirectedEdges(),t)}return t}if(arguments.length===3){if(ct(arguments[2],be)&&arguments[0]instanceof T&&arguments[1]instanceof ji){for(var h=arguments[0],g=arguments[1],d=arguments[2],k=g.getEdge().getCoordinates(),E=0;E<k.length-1;E++)if(this._seg.p0=k[E],this._seg.p1=k[E+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<h.x||this._seg.isHorizontal()||h.y<this._seg.p0.y||h.y>this._seg.p1.y||lt.index(this._seg.p0,this._seg.p1,h)===lt.RIGHT)){var C=g.getDepth(H.LEFT);this._seg.p0.equals(k[E])||(C=g.getDepth(H.RIGHT));var L=new ws(this._seg,C);d.add(L)}}else if(ct(arguments[2],be)&&arguments[0]instanceof T&&ct(arguments[1],be))for(var X=arguments[0],K=arguments[2],et=arguments[1].iterator();et.hasNext();){var at=et.next();at.isForward()&&this.findStabbedSegments(X,at,K)}}}},{key:"getDepth",value:function(i){var t=this.findStabbedSegments(i);return t.size()===0?0:Ke.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Ut;var i=arguments[0];this._subgraphs=i}}])}(),ws=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(i){var t=i;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return e!==0||(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))!==0?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(i,t){var e=i.p0.compareTo(t.p0);return e!==0?e:i.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var i=arguments[0],t=arguments[1];this._upwardSeg=new Ut(i),this._leftDepth=t}}])}();Ns.DepthSegment=ws;var Is=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,null,[{key:"constructor_",value:function(){G.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(G),nr=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getY",value:function(){var t=this.y/this.w;if(U.isNaN(t)||U.isInfinite(t))throw new Is;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(U.isNaN(t)||U.isInfinite(t))throw new Is;return t}},{key:"getCoordinate",value:function(){var t=new T;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof i&&arguments[1]instanceof i){var a=arguments[0],h=arguments[1];this.x=a.y*h.w-h.y*a.w,this.y=h.x*a.w-a.x*h.w,this.w=a.x*h.y-h.x*a.y}else if(arguments[0]instanceof T&&arguments[1]instanceof T){var g=arguments[0],d=arguments[1];this.x=g.y-d.y,this.y=d.x-g.x,this.w=g.x*d.y-d.x*g.y}}else if(arguments.length===3){var k=arguments[0],E=arguments[1],C=arguments[2];this.x=k,this.y=E,this.w=C}else if(arguments.length===4){var L=arguments[0],X=arguments[1],K=arguments[2],et=arguments[3],at=L.y-X.y,dt=X.x-L.x,gt=L.x*X.y-X.x*L.y,pt=K.y-et.y,Ot=et.x-K.x,At=K.x*et.y-et.x*K.y;this.x=dt*At-Ot*gt,this.y=pt*gt-at*At,this.w=at*Ot-pt*dt}}}])}(),Wo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"area",value:function(){return i.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return i.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(t===null)throw new M("Supplied point is null.");return i.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return i.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return i.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return i.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return i.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return i.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return i.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,a){return t*a-e*n}},{key:"interpolateZ",value:function(t,e,n,a){var h=e.x,g=e.y,d=n.x-h,k=a.x-h,E=n.y-g,C=a.y-g,L=d*C-k*E,X=t.x-h,K=t.y-g,et=(C*X-k*K)/L,at=(-E*X+d*K)/L;return e.getZ()+et*(n.getZ()-e.getZ())+at*(a.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var a=t.distance(e),h=e.distance(n),g=n.distance(t),d=a;return h>d&&(d=h),g>d&&(d=g),d}},{key:"circumcentreDD",value:function(t,e,n){var a=ot.valueOf(t.x).subtract(n.x),h=ot.valueOf(t.y).subtract(n.y),g=ot.valueOf(e.x).subtract(n.x),d=ot.valueOf(e.y).subtract(n.y),k=ot.determinant(a,h,g,d).multiply(2),E=a.sqr().add(h.sqr()),C=g.sqr().add(d.sqr()),L=ot.determinant(h,E,d,C),X=ot.determinant(a,E,g,C),K=ot.valueOf(n.x).subtract(L.divide(k)).doubleValue(),et=ot.valueOf(n.y).add(X.divide(k)).doubleValue();return new T(K,et)}},{key:"isAcute",value:function(t,e,n){return!!Vt.isAcute(t,e,n)&&!!Vt.isAcute(e,n,t)&&!!Vt.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,e,n){var a=n.x,h=n.y,g=t.x-a,d=t.y-h,k=e.x-a,E=e.y-h,C=2*i.det(g,d,k,E),L=i.det(d,g*g+d*d,E,k*k+E*E),X=i.det(g,g*g+d*d,k,k*k+E*E);return new T(a-L/C,h+X/C)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,a=e.y-t.y,h=new nr(t.x+n/2,t.y+a/2,1),g=new nr(t.x-a+n/2,t.y+n+a/2,1);return new nr(h,g)}},{key:"angleBisector",value:function(t,e,n){var a=e.distance(t),h=a/(a+e.distance(n)),g=n.x-t.x,d=n.y-t.y;return new T(t.x+h*g,t.y+h*d)}},{key:"area3D",value:function(t,e,n){var a=e.x-t.x,h=e.y-t.y,g=e.getZ()-t.getZ(),d=n.x-t.x,k=n.y-t.y,E=n.getZ()-t.getZ(),C=h*E-g*k,L=g*d-a*E,X=a*k-h*d,K=C*C+L*L+X*X,et=Math.sqrt(K)/2;return et}},{key:"centroid",value:function(t,e,n){var a=(t.x+e.x+n.x)/3,h=(t.y+e.y+n.y)/3;return new T(a,h)}},{key:"inCentre",value:function(t,e,n){var a=e.distance(n),h=t.distance(n),g=t.distance(e),d=a+h+g,k=(a*t.x+h*e.x+g*n.x)/d,E=(a*t.y+h*e.y+g*n.y)/d;return new T(k,E)}}])}(),Ko=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(i,t,e,n,a){if(t===0&&i.length<dn.MINIMUM_VALID_SIZE)return null;var h=n,g=a;i.length>=dn.MINIMUM_VALID_SIZE&&lt.isCCW(i)&&(h=a,g=n,e=H.opposite(e));var d=this._curveBuilder.getRingCurve(i,e,t);this.addCurve(d,h,g)}},{key:"addRingBothSides",value:function(i,t){this.addRingSide(i,t,H.LEFT,I.EXTERIOR,I.INTERIOR),this.addRingSide(i,t,H.RIGHT,I.INTERIOR,I.EXTERIOR)}},{key:"addPoint",value:function(i){if(this._distance<=0)return null;var t=i.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,I.EXTERIOR,I.INTERIOR)}},{key:"addPolygon",value:function(i){var t=this._distance,e=H.LEFT;this._distance<0&&(t=-this._distance,e=H.RIGHT);var n=i.getExteriorRing(),a=bt.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&a.length<3)return null;this.addRingSide(a,t,e,I.EXTERIOR,I.INTERIOR);for(var h=0;h<i.getNumInteriorRing();h++){var g=i.getInteriorRingN(h),d=bt.removeRepeatedPoints(g.getCoordinates());this._distance>0&&this.isErodedCompletely(g,-this._distance)||this.addRingSide(d,t,H.opposite(e),I.INTERIOR,I.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(i,t){var e=new Wo(i[0],i[1],i[2]),n=e.inCentre();return ue.pointToSegment(n,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(i){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=bt.removeRepeatedPoints(i.getCoordinates());if(bt.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,I.EXTERIOR,I.INTERIOR)}}},{key:"addCurve",value:function(i,t,e){if(i===null||i.length<2)return null;var n=new Fe(i,new Wt(0,I.BOUNDARY,t,e));this._curveList.add(n)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(i){if(i.isEmpty())return null;if(i instanceof Bn)this.addPolygon(i);else if(i instanceof mn)this.addLineString(i);else if(i instanceof Bi)this.addPoint(i);else if(i instanceof Ui)this.addCollection(i);else if(i instanceof $i)this.addCollection(i);else if(i instanceof Zi)this.addCollection(i);else{if(!(i instanceof Bt))throw new Ie(i.getGeometryType());this.addCollection(i)}}},{key:"isErodedCompletely",value:function(i,t){var e=i.getCoordinates();if(e.length<4)return t<0;if(e.length===4)return this.isTriangleErodedCompletely(e,t);var n=i.getEnvelopeInternal(),a=Math.min(n.getHeight(),n.getWidth());return t<0&&2*Math.abs(t)>a}},{key:"addCollection",value:function(i){for(var t=0;t<i.getNumGeometries();t++){var e=i.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ut;var i=arguments[0],t=arguments[1],e=arguments[2];this._inputGeom=i,this._distance=t,this._curveBuilder=e}}])}(),Qo=function(){return c(function i(){l(this,i)},[{key:"locate",value:function(i){}}])}(),Jo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,i.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new qn;var t=this._parent.getGeometryN(this._index++);return t instanceof Bt?(this._subcollectionIterator=new i(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new Ie(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Yo]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof Bt)}}])}(),jo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"locate",value:function(t){return i.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[Qo]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return I.EXTERIOR;var n=e.getExteriorRing(),a=i.locatePointInRing(t,n);if(a!==I.INTERIOR)return a;for(var h=0;h<e.getNumInteriorRing();h++){var g=e.getInteriorRingN(h),d=i.locatePointInRing(t,g);if(d===I.BOUNDARY)return I.BOUNDARY;if(d===I.INTERIOR)return I.EXTERIOR}return I.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Qi.locateInRing(t,e.getCoordinates()):I.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return I.EXTERIOR!==i.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof Bn)return i.locatePointInPolygon(t,e);if(e instanceof Bt)for(var n=new Jo(e);n.hasNext();){var a=n.next();if(a!==e){var h=i.locateInGeometry(t,a);if(h!==I.EXTERIOR)return h}}return I.EXTERIOR}},{key:"isContained",value:function(t,e){return I.EXTERIOR!==i.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?I.EXTERIOR:e.getEnvelopeInternal().intersects(t)?i.locateInGeometry(t,e):I.EXTERIOR}}])}(),tl=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(i){this.getEdges();var t=this._edgeList.indexOf(i),e=t-1;return t===0&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(i){for(var t=I.NONE,e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.isArea(i)&&n.getLocation(i,H.LEFT)!==I.NONE&&(t=n.getLocation(i,H.LEFT))}if(t===I.NONE)return null;for(var a=t,h=this.iterator();h.hasNext();){var g=h.next(),d=g.getLabel();if(d.getLocation(i,H.ON)===I.NONE&&d.setLocation(i,H.ON,a),d.isArea(i)){var k=d.getLocation(i,H.LEFT),E=d.getLocation(i,H.RIGHT);if(E!==I.NONE){if(E!==a)throw new ye("side location conflict",g.getCoordinate());k===I.NONE&&nt.shouldNeverReachHere("found single null side (at "+g.getCoordinate()+")"),a=k}else nt.isTrue(d.getLocation(i,H.LEFT)===I.NONE,"found single null side"),d.setLocation(i,H.RIGHT,a),d.setLocation(i,H.LEFT,a)}}}},{key:"getCoordinate",value:function(){var i=this.iterator();return i.hasNext()?i.next().getCoordinate():null}},{key:"print",value:function(i){Zt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"isAreaLabelsConsistent",value:function(i){return this.computeEdgeEndLabels(i.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(i){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,n=t.get(e).getLabel().getLocation(i,H.LEFT);nt.isTrue(n!==I.NONE,"Found unlabelled area edge");for(var a=n,h=this.iterator();h.hasNext();){var g=h.next().getLabel();nt.isTrue(g.isArea(i),"Found non-area edge");var d=g.getLocation(i,H.LEFT),k=g.getLocation(i,H.RIGHT);if(d===k||k!==a)return!1;a=d}return!0}},{key:"findIndex",value:function(i){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===i)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new ut(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(i,t,e){return this._ptInAreaLocation[i]===I.NONE&&(this._ptInAreaLocation[i]=jo.locate(t,e[i].getGeometry())),this._ptInAreaLocation[i]}},{key:"toString",value:function(){var i=new fn;i.append("EdgeEndStar:   "+this.getCoordinate()),i.append(`
`);for(var t=this.iterator();t.hasNext();){var e=t.next();i.append(e),i.append(`
`)}return i.toString()}},{key:"computeEdgeEndLabels",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(i)}},{key:"computeLabelling",value:function(i){this.computeEdgeEndLabels(i[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var n=e.next().getLabel(),a=0;a<2;a++)n.isLine(a)&&n.getLocation(a)===I.BOUNDARY&&(t[a]=!0);for(var h=this.iterator();h.hasNext();)for(var g=h.next(),d=g.getLabel(),k=0;k<2;k++)if(d.isAnyNull(k)){var E=I.NONE;if(t[k])E=I.EXTERIOR;else{var C=g.getCoordinate();E=this.getLocation(k,C,i)}d.setAllLocationsIfNull(k,E)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(i,t){this._edgeMap.put(i,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new pn,this._edgeList=null,this._ptInAreaLocation=[I.NONE,I.NONE]}}])}(),el=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,n=null,a=this._SCANNING_FOR_INCOMING,h=0;h<this._resultAreaEdgeList.size();h++){var g=this._resultAreaEdgeList.get(h),d=g.getSym();if(g.getLabel().isArea())switch(e===null&&g.isInResult()&&(e=g),a){case this._SCANNING_FOR_INCOMING:if(!d.isInResult())continue;n=d,a=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!g.isInResult())continue;n.setNext(g),a=this._SCANNING_FOR_INCOMING}}if(a===this._LINKING_TO_OUTGOING){if(e===null)throw new ye("no outgoing dirEdge found",this.getCoordinate());nt.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}}},{key:"insert",value:function(e){var n=e;this.insertEdgeEnd(n,n)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),n=e.size();if(n<1)return null;var a=e.get(0);if(n===1)return a;var h=e.get(n-1),g=a.getQuadrant(),d=h.getQuadrant();return Dt.isNorthern(g)&&Dt.isNorthern(d)?a:Dt.isNorthern(g)||Dt.isNorthern(d)?a.getDy()!==0?a:h.getDy()!==0?h:(nt.shouldNeverReachHere("found two horizontal edges incident on node"),null):h}},{key:"print",value:function(e){Zt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var a=n.next();e.print("out "),a.print(e),e.println(),e.print("in "),a.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ut;for(var e=this.iterator();e.hasNext();){var n=e.next();(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var n=this.iterator();n.hasNext();){var a=n.next().getLabel();a.setAllLocationsIfNull(0,e.getLocation(0)),a.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,n=null,a=this._edgeList.size()-1;a>=0;a--){var h=this._edgeList.get(a),g=h.getSym();n===null&&(n=g),e!==null&&g.setNext(e),e=h}n.setNext(e)}},{key:"computeDepths",value:function(){if(arguments.length===1){var e=arguments[0],n=this.findIndex(e),a=e.getDepth(H.LEFT),h=e.getDepth(H.RIGHT),g=this.computeDepths(n+1,this._edgeList.size(),a);if(this.computeDepths(0,n,g)!==h)throw new ye("depth mismatch at "+e.getCoordinate())}else if(arguments.length===3){for(var d=arguments[1],k=arguments[2],E=arguments[0];E<d;E++){var C=this._edgeList.get(E);C.setEdgeDepths(H.RIGHT,k),k=C.getDepth(H.LEFT)}return k}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var n=null,a=null,h=this._SCANNING_FOR_INCOMING,g=this._resultAreaEdgeList.size()-1;g>=0;g--){var d=this._resultAreaEdgeList.get(g),k=d.getSym();switch(n===null&&d.getEdgeRing()===e&&(n=d),h){case this._SCANNING_FOR_INCOMING:if(k.getEdgeRing()!==e)continue;a=k,h=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(d.getEdgeRing()!==e)continue;a.setNextMin(d),h=this._SCANNING_FOR_INCOMING}}h===this._LINKING_TO_OUTGOING&&(nt.isTrue(n!==null,"found null for first outgoing dirEdge"),nt.isTrue(n.getEdgeRing()===e,"unable to link last incoming dirEdge"),a.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var e=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&e++;return e}if(arguments.length===1){for(var a=arguments[0],h=0,g=this.iterator();g.hasNext();)g.next().getEdgeRing()===a&&h++;return h}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=I.NONE,n=this.iterator();n.hasNext();){var a=n.next(),h=a.getSym();if(!a.isLineEdge()){if(a.isInResult()){e=I.INTERIOR;break}if(h.isInResult()){e=I.EXTERIOR;break}}}if(e===I.NONE)return null;for(var g=e,d=this.iterator();d.hasNext();){var k=d.next(),E=k.getSym();k.isLineEdge()?k.getEdge().setCovered(g===I.INTERIOR):(k.isInResult()&&(g=I.EXTERIOR),E.isInResult()&&(g=I.INTERIOR))}}},{key:"computeLabelling",value:function(e){w(t,"computeLabelling",this,1).call(this,e),this._label=new Wt(I.NONE);for(var n=this.iterator();n.hasNext();)for(var a=n.next().getEdge().getLabel(),h=0;h<2;h++){var g=a.getLocation(h);g!==I.INTERIOR&&g!==I.BOUNDARY||this._label.setLocation(h,I.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(tl),nl=function(i){function t(){return l(this,t),o(this,t)}return p(t,i),c(t,[{key:"createNode",value:function(e){return new $n(e,new el)}}])}(ms),Ss=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"compareTo",value:function(t){var e=t;return i.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=i.orientation(t)}},{key:"orientation",value:function(t){return bt.increasingDirection(t)===1}},{key:"compareOriented",value:function(t,e,n,a){for(var h=e?1:-1,g=a?1:-1,d=e?t.length:-1,k=a?n.length:-1,E=e?0:t.length-1,C=a?0:n.length-1;;){var L=t[E].compareTo(n[C]);if(L!==0)return L;var X=(E+=h)===d,K=(C+=g)===k;if(X&&!K)return-1;if(!X&&K)return 1;if(X&&K)return 0}}}])}(),il=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&i.print(","),i.print("(");for(var n=e.getCoordinates(),a=0;a<n.length;a++)a>0&&i.print(","),i.print(n[a].x+" "+n[a].y);i.println(")")}i.print(")  ")}},{key:"addAll",value:function(i){for(var t=i.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(i){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(i))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(i){return this._edges.get(i)}},{key:"findEqualEdge",value:function(i){var t=new Ss(i.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(i){this._edges.add(i);var t=new Ss(i.getCoordinates());this._ocaMap.put(t,i)}}],[{key:"constructor_",value:function(){this._edges=new ut,this._ocaMap=new pn}}])}(),Cs=function(){return c(function i(){l(this,i)},[{key:"processIntersections",value:function(i,t,e,n){}},{key:"isDone",value:function(){}}])}(),rl=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"isTrivialIntersection",value:function(t,e,n,a){if(t===n&&this._li.getIntersectionNum()===1){if(i.isAdjacentSegments(e,a))return!0;if(t.isClosed()){var h=t.size()-1;if(e===0&&a===h||a===0&&e===h)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,a){if(t===n&&e===a)return null;this.numTests++;var h=t.getCoordinates()[e],g=t.getCoordinates()[e+1],d=n.getCoordinates()[a],k=n.getCoordinates()[a+1];this._li.computeIntersection(h,g,d,k),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,a)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,a,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Cs]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return Math.abs(t-e)===1}}])}(),sl=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex),i.println(" dist = "+this.dist)}},{key:"compareTo",value:function(i){var t=i;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===i}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(i,t){return this.segmentIndex<i?-1:this.segmentIndex>i?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var i=arguments[0],t=arguments[1],e=arguments[2];this.coord=new T(i),this.segmentIndex=t,this.dist=e}}])}(),al=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),a=this.createSplitEdge(e,n);i.add(a),e=n}}},{key:"addEndpoints",value:function(){var i=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[i],i,0)}},{key:"createSplitEdge",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2,n=this.edge.pts[t.segmentIndex],a=t.dist>0||!t.coord.equals2D(n);a||e--;var h=new Array(e).fill(null),g=0;h[g++]=new T(i.coord);for(var d=i.segmentIndex+1;d<=t.segmentIndex;d++)h[g++]=this.edge.pts[d];return a&&(h[g]=t.coord),new Rs(h,new Wt(this.edge._label))}},{key:"add",value:function(i,t,e){var n=new sl(i,t,e),a=this._nodeMap.get(n);return a!==null?a:(this._nodeMap.put(n,n),n)}},{key:"isIntersection",value:function(i){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(i))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new pn,this.edge=null;var i=arguments[0];this.edge=i}}])}(),ul=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])||i.isTrue(this._matrix[I.INTERIOR][I.BOUNDARY])||i.isTrue(this._matrix[I.BOUNDARY][I.INTERIOR])||i.isTrue(this._matrix[I.BOUNDARY][I.BOUNDARY]))&&this._matrix[I.EXTERIOR][I.INTERIOR]===W.FALSE&&this._matrix[I.EXTERIOR][I.BOUNDARY]===W.FALSE}},{key:"isCoveredBy",value:function(){return(i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])||i.isTrue(this._matrix[I.INTERIOR][I.BOUNDARY])||i.isTrue(this._matrix[I.BOUNDARY][I.INTERIOR])||i.isTrue(this._matrix[I.BOUNDARY][I.BOUNDARY]))&&this._matrix[I.INTERIOR][I.EXTERIOR]===W.FALSE&&this._matrix[I.BOUNDARY][I.EXTERIOR]===W.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),a=e%3;this._matrix[n][a]=W.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var h=arguments[0],g=arguments[1],d=arguments[2];this._matrix[h][g]=d}}},{key:"isContains",value:function(){return i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&this._matrix[I.EXTERIOR][I.INTERIOR]===W.FALSE&&this._matrix[I.EXTERIOR][I.BOUNDARY]===W.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),a=e%3;this.setAtLeast(n,a,W.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var h=arguments[0],g=arguments[1],d=arguments[2];this._matrix[h][g]<d&&(this._matrix[h][g]=d)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&this._matrix[I.INTERIOR][I.EXTERIOR]===W.FALSE&&this._matrix[I.BOUNDARY][I.EXTERIOR]===W.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===W.A&&e===W.A||t===W.L&&e===W.L||t===W.L&&e===W.A||t===W.P&&e===W.A||t===W.P&&e===W.L)&&this._matrix[I.INTERIOR][I.INTERIOR]===W.FALSE&&(i.isTrue(this._matrix[I.INTERIOR][I.BOUNDARY])||i.isTrue(this._matrix[I.BOUNDARY][I.INTERIOR])||i.isTrue(this._matrix[I.BOUNDARY][I.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===W.P&&e===W.P||t===W.A&&e===W.A?i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&i.isTrue(this._matrix[I.INTERIOR][I.EXTERIOR])&&i.isTrue(this._matrix[I.EXTERIOR][I.INTERIOR]):t===W.L&&e===W.L&&this._matrix[I.INTERIOR][I.INTERIOR]===1&&i.isTrue(this._matrix[I.INTERIOR][I.EXTERIOR])&&i.isTrue(this._matrix[I.EXTERIOR][I.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&this._matrix[I.INTERIOR][I.EXTERIOR]===W.FALSE&&this._matrix[I.BOUNDARY][I.EXTERIOR]===W.FALSE&&this._matrix[I.EXTERIOR][I.INTERIOR]===W.FALSE&&this._matrix[I.EXTERIOR][I.BOUNDARY]===W.FALSE}},{key:"toString",value:function(){for(var t=new Vn("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,W.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(t.length!==9)throw new M("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!i.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[I.INTERIOR][I.INTERIOR]===W.FALSE&&this._matrix[I.INTERIOR][I.BOUNDARY]===W.FALSE&&this._matrix[I.BOUNDARY][I.INTERIOR]===W.FALSE&&this._matrix[I.BOUNDARY][I.BOUNDARY]===W.FALSE}},{key:"isCrosses",value:function(t,e){return t===W.P&&e===W.L||t===W.P&&e===W.A||t===W.L&&e===W.A?i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&i.isTrue(this._matrix[I.INTERIOR][I.EXTERIOR]):t===W.L&&e===W.P||t===W.A&&e===W.P||t===W.A&&e===W.L?i.isTrue(this._matrix[I.INTERIOR][I.INTERIOR])&&i.isTrue(this._matrix[I.EXTERIOR][I.INTERIOR]):t===W.L&&e===W.L&&this._matrix[I.INTERIOR][I.INTERIOR]===0}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(W.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];i.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof i){var e=arguments[0];i.constructor_.call(this),this._matrix[I.INTERIOR][I.INTERIOR]=e._matrix[I.INTERIOR][I.INTERIOR],this._matrix[I.INTERIOR][I.BOUNDARY]=e._matrix[I.INTERIOR][I.BOUNDARY],this._matrix[I.INTERIOR][I.EXTERIOR]=e._matrix[I.INTERIOR][I.EXTERIOR],this._matrix[I.BOUNDARY][I.INTERIOR]=e._matrix[I.BOUNDARY][I.INTERIOR],this._matrix[I.BOUNDARY][I.BOUNDARY]=e._matrix[I.BOUNDARY][I.BOUNDARY],this._matrix[I.BOUNDARY][I.EXTERIOR]=e._matrix[I.BOUNDARY][I.EXTERIOR],this._matrix[I.EXTERIOR][I.INTERIOR]=e._matrix[I.EXTERIOR][I.INTERIOR],this._matrix[I.EXTERIOR][I.BOUNDARY]=e._matrix[I.EXTERIOR][I.BOUNDARY],this._matrix[I.EXTERIOR][I.EXTERIOR]=e._matrix[I.EXTERIOR][I.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===W.SYM_DONTCARE||e===W.SYM_TRUE&&(t>=0||t===W.TRUE)||e===W.SYM_FALSE&&t===W.FALSE||e===W.SYM_P&&t===W.P||e===W.SYM_L&&t===W.L||e===W.SYM_A&&t===W.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[1];return new i(arguments[0]).matches(n)}}},{key:"isTrue",value:function(t){return t>=0||t===W.TRUE}}])}(),ol=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return t===null||t.length===0?null:(this.ensureCapacity(this._size+t.length),Zt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=Oe.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return Zt.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)i.constructor_.call(this,10);else if(arguments.length===1){var t=arguments[0];this._data=new Array(t).fill(null)}}}])}(),ll=function(){function i(){l(this,i)}return c(i,[{key:"getChainStartIndices",value:function(t){var e=0,n=new ol(Math.trunc(t.length/2));n.add(e);do{var a=this.findChainEnd(t,e);n.add(a),e=a}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=Dt.quadrant(t[e],t[e+1]),a=e+1;a<t.length&&Dt.quadrant(t[a-1],t[a])===n;)a++;return a-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,n=new ut;n.add(e);do{var a=this.findChainEnd(t,e);n.add(a),e=a}while(e<t.length-1);return i.toIntArray(n)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}])}(),hl=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t>e?t:e}},{key:"getMinX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[i],this.startIndex[i+1],t,t.startIndex[e],t.startIndex[e+1],n)}else if(arguments.length===6){var a=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3],k=arguments[4],E=arguments[5];if(h-a==1&&k-d==1)return E.addIntersections(this.e,a,g.e,d),null;if(!this.overlaps(a,h,g,d,k))return null;var C=Math.trunc((a+h)/2),L=Math.trunc((d+k)/2);a<C&&(d<L&&this.computeIntersectsForChain(a,C,g,d,L,E),L<k&&this.computeIntersectsForChain(a,C,g,L,k,E)),C<h&&(d<L&&this.computeIntersectsForChain(C,h,g,d,L,E),L<k&&this.computeIntersectsForChain(C,h,g,L,k,E))}}},{key:"overlaps",value:function(i,t,e,n,a){return Et.intersects(this.pts[i],this.pts[t],e.pts[n],e.pts[a])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(i,t){for(var e=0;e<this.startIndex.length-1;e++)for(var n=0;n<i.startIndex.length-1;n++)this.computeIntersectsForChain(e,i,n,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var i=arguments[0];this.e=i,this.pts=i.getCoordinates();var t=new ll;this.startIndex=t.getChainStartIndices(this.pts)}}])}(),Ts=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==i.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this._depth[n][1]===i.NULL_VALUE}if(arguments.length===2){var a=arguments[0],h=arguments[1];return this._depth[a][h]===i.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var a=0;this._depth[t][n]>e&&(a=1),this._depth[t][n]=a}}}},{key:"getDelta",value:function(t){return this._depth[t][H.RIGHT]-this._depth[t][H.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?I.EXTERIOR:I.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var a=t.getLocation(e,n);a!==I.EXTERIOR&&a!==I.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=i.depthAtLocation(a):this._depth[e][n]+=i.depthAtLocation(a))}else if(arguments.length===3){var h=arguments[0],g=arguments[1];arguments[2]===I.INTERIOR&&this._depth[h][g]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=i.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===I.EXTERIOR?0:t===I.INTERIOR?1:i.NULL_VALUE}}])}();Ts.NULL_VALUE=-1;var Rs=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,Wt.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var a=!0,h=!0,g=this.pts.length,d=0;d<this.pts.length;d++)if(this.pts[d].equals2D(n.pts[d])||(a=!1),this.pts[d].equals2D(n.pts[--g])||(h=!1),!a&&!h)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.print(","),e.print(this.pts[n].x+" "+this.pts[n].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)e.print(this.pts[n]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new hl(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Et;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,n,a,h){var g=new T(e.getIntersection(h)),d=n,k=e.getEdgeDistance(a,h),E=d+1;if(E<this.pts.length){var C=this.pts[E];g.equals2D(C)&&(d=E,k=0)}this.eiList.add(g,d,k)}},{key:"toString",value:function(){var e=new Vn;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.append(","),e.append(this.pts[n].x+" "+this.pts[n].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(e.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,n,a){for(var h=0;h<e.getIntersectionNum();h++)this.addIntersection(e,n,a,h)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new al(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ts,this._depthDelta=0,arguments.length===1){var e=arguments[0];t.constructor_.call(this,e,null)}else if(arguments.length===2){var n=arguments[0],a=arguments[1];this.pts=n,this._label=a}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof ul&&arguments[0]instanceof Wt))return w(t,"updateIM",this).apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,H.ON),e.getLocation(1,H.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,H.LEFT),e.getLocation(1,H.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,H.RIGHT),e.getLocation(1,H.RIGHT),2))}}])}(ls),Ls=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),a=t.getLabel();e.isPointwiseEqual(t)||(a=new Wt(t.getLabel())).flip(),n.merge(a);var h=i.depthDelta(a),g=e.getDepthDelta()+h;e.setDepthDelta(g)}else this._edgeList.add(t),t.setDepthDelta(i.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new ut,a=t.iterator();a.hasNext();){var h=a.next(),g=h.getRightmostCoordinate(),d=new Ns(n).getDepth(g);h.computeDepth(d),h.findResultEdges(),n.add(h),e.add(h.getDirectedEdges(),h.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new ut,n=t.getNodes().iterator();n.hasNext();){var a=n.next();if(!a.isVisited()){var h=new mo;h.create(a),e.add(h)}}return Ke.sort(e,Ke.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new er,n=new De;return n.setPrecisionModel(t),e.setSegmentIntersector(new rl(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var a=new $o(n,this._bufParams),h=new Ko(t,e,a).getCurves();if(h.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(h,n),this._graph=new ds(new nl),this._graph.addEdges(this._edgeList.getEdges());var g=this.createSubgraphs(this._graph),d=new Po(this._geomFact);this.buildSubgraphs(g,d);var k=d.getPolygons();return k.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(k)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var a=n.getNodedSubstrings().iterator();a.hasNext();){var h=a.next(),g=h.getCoordinates();if(g.length!==2||!g[0].equals2D(g[1])){var d=h.getData(),k=new Rs(h.getCoordinates(),new Wt(d));this.insertUniqueEdge(k)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new il;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,H.LEFT),n=t.getLocation(0,H.RIGHT);return e===I.INTERIOR&&n===I.EXTERIOR?1:e===I.EXTERIOR&&n===I.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new $e,n=new ut;t.hasNext();){var a=t.next(),h=e.createLineString(a.getCoordinates());n.add(h)}return e.buildGeometry(n)}}])}(),cl=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"rescale",value:function(){if(ct(arguments[0],ae))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],a=0;a<n.length;a++)n[a].x=n[a].x/this._scaleFactor+this._offsetX,n[a].y=n[a].y/this._scaleFactor+this._offsetY;n.length===2&&n[0].equals2D(n[1])&&Zt.out.println(n)}}},{key:"scale",value:function(){if(ct(arguments[0],ae)){for(var t=arguments[0],e=new ut(t.size()),n=t.iterator();n.hasNext();){var a=n.next();e.add(new Fe(this.scale(a.getCoordinates()),a.getData()))}return e}if(arguments[0]instanceof Array){for(var h=arguments[0],g=new Array(h.length).fill(null),d=0;d<h.length;d++)g[d]=new T(Math.round((h[d].x-this._offsetX)*this._scaleFactor),Math.round((h[d].y-this._offsetY)*this._scaleFactor),h[d].getZ());return bt.removeRepeatedPoints(g)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[tr]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];i.constructor_.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],a=arguments[1];this._noder=n,this._scaleFactor=a,this._isScaled=!this.isIntegerPrecision()}}}])}(),bs=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(arguments.length===2){for(var n=arguments[0],a=arguments[1].iterator();a.hasNext();)for(var h=a.next().getCoordinates(),g=1;g<h.length-1;g++)if(h[g].equals(n))throw new ft("found endpt/interior pt intersection at index "+g+" :pt "+n)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var a=n.next();this.checkInteriorIntersections(e,a)}else if(arguments.length===2)for(var h=arguments[0],g=arguments[1],d=h.getCoordinates(),k=g.getCoordinates(),E=0;E<d.length-1;E++)for(var C=0;C<k.length-1;C++)this.checkInteriorIntersections(h,E,g,C);else if(arguments.length===4){var L=arguments[0],X=arguments[1],K=arguments[2],et=arguments[3];if(L===K&&X===et)return null;var at=L.getCoordinates()[X],dt=L.getCoordinates()[X+1],gt=K.getCoordinates()[et],pt=K.getCoordinates()[et+1];if(this._li.computeIntersection(at,dt,gt,pt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,at,dt)||this.hasInteriorIntersection(this._li,gt,pt)))throw new ft("found non-noded intersection at "+at+"-"+dt+" and "+gt+"-"+pt)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0].getCoordinates(),a=0;a<n.length-2;a++)this.checkCollapse(n[a],n[a+1],n[a+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var a=0;a<t.getIntersectionNum();a++){var h=t.getIntersection(a);if(!h.equals(e)&&!h.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,e,n){if(t.equals(n))throw new ft("found non-noded collapse at "+i.fact.createLineString([t,e,n]))}}],[{key:"constructor_",value:function(){this._li=new De,this._segStrings=null;var t=arguments[0];this._segStrings=t}}])}();bs.fact=new $e;var ir=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),a=Math.max(t.x,e.x),h=Math.min(t.y,e.y),g=Math.max(t.y,e.y),d=this._maxx<n||this._minx>a||this._maxy<h||this._miny>g;if(d)return!1;var k=this.intersectsToleranceSquare(t,e);return nt.isTrue(!(d&&k),"Found bad envelope test"),k}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new T(this._maxx,this._maxy),this._corner[1]=new T(this._minx,this._maxy),this._corner[2]=new T(this._minx,this._miny),this._corner[3]=new T(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var t=i.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Et(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,a=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(a=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!a)||!!t.equals(this._pt)||!!e.equals(this._pt))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),a=t.getCoordinate(e+1);return!!this.intersects(n,a)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new M("Scale factor must be non-zero");e!==1&&(this._pt=new T(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new T,this._p1Scaled=new T),this.initCorners(this._pt)}}])}();ir.SAFE_ENV_EXPANSION_FACTOR=.75;var fl=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var i=arguments[1];arguments[0].getLineSegment(i,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Ut}}])}(),Ms=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var i=arguments[0];return this.snap(i,null,-1)}if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],a=t.getSafeEnvelope(),h=new Os(t,e,n);return this._index.query(a,new(function(){return c(function g(){l(this,g)},[{key:"interfaces_",get:function(){return[ys]}},{key:"visitItem",value:function(g){g.select(a,h)}}])}())),h.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var i=arguments[0];this._index=i}}])}(),Os=function(i){function t(){var e;return l(this,t),e=o(this,t),t.constructor_.apply(e,arguments),e}return p(t,i),c(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof ps))return w(t,"select",this,1).apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],a=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=a}}])}(fl);Ms.HotPixelSnapAction=Os;var gl=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(i,t,e,n){if(i===e&&t===n)return null;var a=i.getCoordinates()[t],h=i.getCoordinates()[t+1],g=e.getCoordinates()[n],d=e.getCoordinates()[n+1];if(this._li.computeIntersection(a,h,g,d),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var k=0;k<this._li.getIntersectionNum();k++)this._interiorIntersections.add(this._li.getIntersection(k));i.addIntersections(this._li,t,0),e.addIntersections(this._li,n,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Cs]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var i=arguments[0];this._li=i,this._interiorIntersections=new ut}}])}(),ml=function(){return c(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(i){var t=Fe.getNodedSubstrings(i),e=new bs(t);try{e.checkValid()}catch(n){if(!(n instanceof G))throw n;n.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Fe.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(i,t){var e=this.findInteriorIntersections(i,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(i)}},{key:"findInteriorIntersections",value:function(i,t){var e=new gl(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(i),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(ct(arguments[0],ae))for(var i=arguments[0].iterator();i.hasNext();){var t=i.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof Fe)for(var e=arguments[0],n=e.getCoordinates(),a=0;a<n.length;a++){var h=new ir(n[a],this._scaleFactor,this._li);this._pointSnapper.snap(h,e,a)&&e.addIntersection(n[a],a)}}},{key:"computeNodes",value:function(i){this._nodedSegStrings=i,this._noder=new er,this._pointSnapper=new Ms(this._noder.getIndex()),this.snapRound(i,this._li)}},{key:"computeIntersectionSnaps",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next(),n=new ir(e,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[tr]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var i=arguments[0];this._pm=i,this._li=new De,this._li.setPrecisionModel(i),this._scaleFactor=i.getScale()}}])}(),je=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return c(i,[{key:"bufferFixedPrecision",value:function(t){var e=new cl(new ml(new te(1)),t.getScale()),n=new Ls(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var t=i.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(h){if(!(h instanceof ye))throw h;this._saveException=h}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var e=arguments[0],n=i.precisionScaleFactor(this._argGeom,this._distance,e),a=new te(n);this.bufferFixedPrecision(a)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===te.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new Ls(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof ft))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new b,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(arguments.length===2){var t=arguments[1];return new i(arguments[0]).getResultGeometry(t)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof st&&typeof arguments[1]=="number"){var e=arguments[1],n=arguments[2],a=new i(arguments[0]);return a.setQuadrantSegments(n),a.getResultGeometry(e)}if(arguments[2]instanceof b&&arguments[0]instanceof st&&typeof arguments[1]=="number"){var h=arguments[1];return new i(arguments[0],arguments[2]).getResultGeometry(h)}}else if(arguments.length===4){var g=arguments[1],d=arguments[2],k=arguments[3],E=new i(arguments[0]);return E.setQuadrantSegments(d),E.setEndCapStyle(k),E.getResultGeometry(g)}}},{key:"precisionScaleFactor",value:function(t,e,n){var a=t.getEnvelopeInternal(),h=gn.max(Math.abs(a.getMaxX()),Math.abs(a.getMaxY()),Math.abs(a.getMinX()),Math.abs(a.getMinY()))+2*(e>0?e:0),g=n-Math.trunc(Math.log(h)/Math.log(10)+1);return Math.pow(10,g)}}])}();je.CAP_ROUND=b.CAP_ROUND,je.CAP_BUTT=b.CAP_FLAT,je.CAP_FLAT=b.CAP_FLAT,je.CAP_SQUARE=b.CAP_SQUARE,je.MAX_PRECISION_DIGITS=12;var dl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],As=function(){return c(function i(t){l(this,i),this.geometryFactory=t||new $e},[{key:"read",value:function(i){var t,e=(t=typeof i=="string"?JSON.parse(i):i).type;if(!Qt[e])throw new Error("Unknown GeoJSON type: "+t.type);return dl.indexOf(e)!==-1?Qt[e].call(this,t.coordinates):e==="GeometryCollection"?Qt[e].call(this,t.geometries):Qt[e].call(this,t)}},{key:"write",value:function(i){var t=i.getGeometryType();if(!he[t])throw new Error("Geometry is not supported");return he[t].call(this,i)}}])}(),Qt={Feature:function(i){var t={};for(var e in i)t[e]=i[e];if(i.geometry){var n=i.geometry.type;if(!Qt[n])throw new Error("Unknown GeoJSON type: "+i.type);t.geometry=this.read(i.geometry)}return i.bbox&&(t.bbox=Qt.bbox.call(this,i.bbox)),t},FeatureCollection:function(i){var t={};if(i.features){t.features=[];for(var e=0;e<i.features.length;++e)t.features.push(this.read(i.features[e]))}return i.bbox&&(t.bbox=this.parse.bbox.call(this,i.bbox)),t},coordinates:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(m(T,A(n)))}return t},bbox:function(i){return this.geometryFactory.createLinearRing([new T(i[0],i[1]),new T(i[2],i[1]),new T(i[2],i[3]),new T(i[0],i[3]),new T(i[0],i[1])])},Point:function(i){var t=m(T,A(i));return this.geometryFactory.createPoint(t)},MultiPoint:function(i){for(var t=[],e=0;e<i.length;++e)t.push(Qt.Point.call(this,i[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(i){var t=Qt.coordinates.call(this,i);return this.geometryFactory.createLineString(t)},MultiLineString:function(i){for(var t=[],e=0;e<i.length;++e)t.push(Qt.LineString.call(this,i[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(i){for(var t=Qt.coordinates.call(this,i[0]),e=this.geometryFactory.createLinearRing(t),n=[],a=1;a<i.length;++a){var h=i[a],g=Qt.coordinates.call(this,h),d=this.geometryFactory.createLinearRing(g);n.push(d)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(Qt.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(this.read(n))}return this.geometryFactory.createGeometryCollection(t)}},he={coordinate:function(i){var t=[i.x,i.y];return i.z&&t.push(i.z),i.m&&t.push(i.m),t},Point:function(i){return{type:"Point",coordinates:he.coordinate.call(this,i.getCoordinate())}},MultiPoint:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],a=he.Point.call(this,n);t.push(a.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(i){for(var t=[],e=i.getCoordinates(),n=0;n<e.length;++n){var a=e[n];t.push(he.coordinate.call(this,a))}return{type:"LineString",coordinates:t}},MultiLineString:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],a=he.LineString.call(this,n);t.push(a.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(i){var t=[],e=he.LineString.call(this,i._shell);t.push(e.coordinates);for(var n=0;n<i._holes.length;++n){var a=i._holes[n],h=he.LineString.call(this,a);t.push(h.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],a=he.Polygon.call(this,n);t.push(a.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],a=n.getGeometryType();t.push(he[a].call(this,n))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:je,GeoJSONReader:function(){return c(function i(t){l(this,i),this.parser=new As(t||new $e)},[{key:"read",value:function(i){return this.parser.read(i)}}])}(),GeoJSONWriter:function(){return c(function i(){l(this,i),this.parser=new As(this.geometryFactory)},[{key:"write",value:function(i){return this.parser.write(i)}}])}()}})})(Zu);var $g=Zu.exports;const Wg=Hg($g);function Le(){return new Li}function Li(){this.reset()}Li.prototype={constructor:Li,reset:function(){this.s=this.t=0},add:function(r){xa(ei,r,this.t),xa(this,ei.s,this.s),this.s?this.t+=ei.t:this.s=ei.t},valueOf:function(){return this.s}};var ei=new Li;function xa(r,s,u){var o=r.s=s+u,l=o-s,m=o-l;r.t=s-m+(u-l)}var It=1e-6,vt=Math.PI,ge=vt/2,Ea=vt/4,de=vt*2,Ce=180/vt,Jt=vt/180,Mt=Math.abs,Kg=Math.atan,un=Math.atan2,Tt=Math.cos,Rt=Math.sin,hn=Math.sqrt;function $u(r){return r>1?0:r<-1?vt:Math.acos(r)}function He(r){return r>1?ge:r<-1?-ge:Math.asin(r)}function Cn(){}function bi(r,s){r&&wa.hasOwnProperty(r.type)&&wa[r.type](r,s)}var Na={Feature:function(r,s){bi(r.geometry,s)},FeatureCollection:function(r,s){for(var u=r.features,o=-1,l=u.length;++o<l;)bi(u[o].geometry,s)}},wa={Sphere:function(r,s){s.sphere()},Point:function(r,s){r=r.coordinates,s.point(r[0],r[1],r[2])},MultiPoint:function(r,s){for(var u=r.coordinates,o=-1,l=u.length;++o<l;)r=u[o],s.point(r[0],r[1],r[2])},LineString:function(r,s){Sr(r.coordinates,s,0)},MultiLineString:function(r,s){for(var u=r.coordinates,o=-1,l=u.length;++o<l;)Sr(u[o],s,0)},Polygon:function(r,s){Ia(r.coordinates,s)},MultiPolygon:function(r,s){for(var u=r.coordinates,o=-1,l=u.length;++o<l;)Ia(u[o],s)},GeometryCollection:function(r,s){for(var u=r.geometries,o=-1,l=u.length;++o<l;)bi(u[o],s)}};function Sr(r,s,u){var o=-1,l=r.length-u,m;for(s.lineStart();++o<l;)m=r[o],s.point(m[0],m[1],m[2]);s.lineEnd()}function Ia(r,s){var u=-1,o=r.length;for(s.polygonStart();++u<o;)Sr(r[u],s,1);s.polygonEnd()}function Qg(r,s){r&&Na.hasOwnProperty(r.type)?Na[r.type](r,s):bi(r,s)}Le();Le();function Cr(r){return[un(r[1],r[0]),He(r[2])]}function on(r){var s=r[0],u=r[1],o=Tt(u);return[o*Tt(s),o*Rt(s),Rt(u)]}function ni(r,s){return r[0]*s[0]+r[1]*s[1]+r[2]*s[2]}function Mi(r,s){return[r[1]*s[2]-r[2]*s[1],r[2]*s[0]-r[0]*s[2],r[0]*s[1]-r[1]*s[0]]}function hr(r,s){r[0]+=s[0],r[1]+=s[1],r[2]+=s[2]}function ii(r,s){return[r[0]*s,r[1]*s,r[2]*s]}function Tr(r){var s=hn(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=s,r[1]/=s,r[2]/=s}Le();function Wu(r,s){function u(o,l){return o=r(o,l),s(o[0],o[1])}return r.invert&&s.invert&&(u.invert=function(o,l){return o=s.invert(o,l),o&&r.invert(o[0],o[1])}),u}function Rr(r,s){return[r>vt?r-de:r<-vt?r+de:r,s]}Rr.invert=Rr;function Jg(r,s,u){return(r%=de)?s||u?Wu(Ca(r),Ta(s,u)):Ca(r):s||u?Ta(s,u):Rr}function Sa(r){return function(s,u){return s+=r,[s>vt?s-de:s<-vt?s+de:s,u]}}function Ca(r){var s=Sa(r);return s.invert=Sa(-r),s}function Ta(r,s){var u=Tt(r),o=Rt(r),l=Tt(s),m=Rt(s);function f(c,y){var v=Tt(y),_=Tt(c)*v,p=Rt(c)*v,x=Rt(y),N=x*u+_*o;return[un(p*l-N*m,_*u-x*o),He(N*l+p*m)]}return f.invert=function(c,y){var v=Tt(y),_=Tt(c)*v,p=Rt(c)*v,x=Rt(y),N=x*l-p*m;return[un(p*l+x*m,_*u+N*o),He(N*u-_*o)]},f}function jg(r,s,u,o,l,m){if(u){var f=Tt(s),c=Rt(s),y=o*u;l==null?(l=s+o*de,m=s-y/2):(l=Ra(f,l),m=Ra(f,m),(o>0?l<m:l>m)&&(l+=o*de));for(var v,_=l;o>0?_>m:_<m;_-=y)v=Cr([f,-c*Tt(_),-c*Rt(_)]),r.point(v[0],v[1])}}function Ra(r,s){s=on(s),s[0]-=r,Tr(s);var u=$u(-s[1]);return((-s[2]<0?-u:u)+de-It)%de}function Ku(){var r=[],s;return{point:function(u,o){s.push([u,o])},lineStart:function(){r.push(s=[])},lineEnd:Cn,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var u=r;return r=[],s=null,u}}}function tm(r,s,u,o,l,m){var f=r[0],c=r[1],y=s[0],v=s[1],_=0,p=1,x=y-f,N=v-c,w;if(w=u-f,!(!x&&w>0)){if(w/=x,x<0){if(w<_)return;w<p&&(p=w)}else if(x>0){if(w>p)return;w>_&&(_=w)}if(w=l-f,!(!x&&w<0)){if(w/=x,x<0){if(w>p)return;w>_&&(_=w)}else if(x>0){if(w<_)return;w<p&&(p=w)}if(w=o-c,!(!N&&w>0)){if(w/=N,N<0){if(w<_)return;w<p&&(p=w)}else if(N>0){if(w>p)return;w>_&&(_=w)}if(w=m-c,!(!N&&w<0)){if(w/=N,N<0){if(w>p)return;w>_&&(_=w)}else if(N>0){if(w<_)return;w<p&&(p=w)}return _>0&&(r[0]=f+_*x,r[1]=c+_*N),p<1&&(s[0]=f+p*x,s[1]=c+p*N),!0}}}}}function fi(r,s){return Mt(r[0]-s[0])<It&&Mt(r[1]-s[1])<It}function ri(r,s,u,o){this.x=r,this.z=s,this.o=u,this.e=o,this.v=!1,this.n=this.p=null}function Qu(r,s,u,o,l){var m=[],f=[],c,y;if(r.forEach(function(w){if(!((A=w.length-1)<=0)){var A,q=w[0],R=w[A],P;if(fi(q,R)){for(l.lineStart(),c=0;c<A;++c)l.point((q=w[c])[0],q[1]);l.lineEnd();return}m.push(P=new ri(q,w,null,!0)),f.push(P.o=new ri(q,null,P,!1)),m.push(P=new ri(R,w,null,!1)),f.push(P.o=new ri(R,null,P,!0))}}),!!m.length){for(f.sort(s),La(m),La(f),c=0,y=f.length;c<y;++c)f[c].e=u=!u;for(var v=m[0],_,p;;){for(var x=v,N=!0;x.v;)if((x=x.n)===v)return;_=x.z,l.lineStart();do{if(x.v=x.o.v=!0,x.e){if(N)for(c=0,y=_.length;c<y;++c)l.point((p=_[c])[0],p[1]);else o(x.x,x.n.x,1,l);x=x.n}else{if(N)for(_=x.p.z,c=_.length-1;c>=0;--c)l.point((p=_[c])[0],p[1]);else o(x.x,x.p.x,-1,l);x=x.p}x=x.o,_=x.z,N=!N}while(!x.v);l.lineEnd()}}}function La(r){if(s=r.length){for(var s,u=0,o=r[0],l;++u<s;)o.n=l=r[u],l.p=o,o=l;o.n=l=r[0],l.p=o}}function Ju(r,s){return r<s?-1:r>s?1:r>=s?0:NaN}function em(r){return r.length===1&&(r=nm(r)),{left:function(s,u,o,l){for(o==null&&(o=0),l==null&&(l=s.length);o<l;){var m=o+l>>>1;r(s[m],u)<0?o=m+1:l=m}return o},right:function(s,u,o,l){for(o==null&&(o=0),l==null&&(l=s.length);o<l;){var m=o+l>>>1;r(s[m],u)>0?l=m:o=m+1}return o}}}function nm(r){return function(s,u){return Ju(r(s),u)}}em(Ju);function ju(r){for(var s=r.length,u,o=-1,l=0,m,f;++o<s;)l+=r[o].length;for(m=new Array(l);--s>=0;)for(f=r[s],u=f.length;--u>=0;)m[--l]=f[u];return m}var si=1e9,ai=-1e9;function im(r,s,u,o){function l(v,_){return r<=v&&v<=u&&s<=_&&_<=o}function m(v,_,p,x){var N=0,w=0;if(v==null||(N=f(v,p))!==(w=f(_,p))||y(v,_)<0^p>0)do x.point(N===0||N===3?r:u,N>1?o:s);while((N=(N+p+4)%4)!==w);else x.point(_[0],_[1])}function f(v,_){return Mt(v[0]-r)<It?_>0?0:3:Mt(v[0]-u)<It?_>0?2:1:Mt(v[1]-s)<It?_>0?1:0:_>0?3:2}function c(v,_){return y(v.x,_.x)}function y(v,_){var p=f(v,1),x=f(_,1);return p!==x?p-x:p===0?_[1]-v[1]:p===1?v[0]-_[0]:p===2?v[1]-_[1]:_[0]-v[0]}return function(v){var _=v,p=Ku(),x,N,w,A,q,R,P,b,G,M,D,z={point:V,lineStart:tt,lineEnd:it,polygonStart:j,polygonEnd:$};function V(F,O){l(F,O)&&_.point(F,O)}function B(){for(var F=0,O=0,Z=N.length;O<Z;++O)for(var J=N[O],Q=1,U=J.length,ht=J[0],ft,xt,nt=ht[0],Lt=ht[1];Q<U;++Q)ft=nt,xt=Lt,ht=J[Q],nt=ht[0],Lt=ht[1],xt<=o?Lt>o&&(nt-ft)*(o-xt)>(Lt-xt)*(r-ft)&&++F:Lt<=o&&(nt-ft)*(o-xt)<(Lt-xt)*(r-ft)&&--F;return F}function j(){_=p,x=[],N=[],D=!0}function $(){var F=B(),O=D&&F,Z=(x=ju(x)).length;(O||Z)&&(v.polygonStart(),O&&(v.lineStart(),m(null,null,1,v),v.lineEnd()),Z&&Qu(x,c,F,m,v),v.polygonEnd()),_=v,x=N=w=null}function tt(){z.point=S,N&&N.push(w=[]),M=!0,G=!1,P=b=NaN}function it(){x&&(S(A,q),R&&G&&p.rejoin(),x.push(p.result())),z.point=V,G&&_.lineEnd()}function S(F,O){var Z=l(F,O);if(N&&w.push([F,O]),M)A=F,q=O,R=Z,M=!1,Z&&(_.lineStart(),_.point(F,O));else if(Z&&G)_.point(F,O);else{var J=[P=Math.max(ai,Math.min(si,P)),b=Math.max(ai,Math.min(si,b))],Q=[F=Math.max(ai,Math.min(si,F)),O=Math.max(ai,Math.min(si,O))];tm(J,Q,r,s,u,o)?(G||(_.lineStart(),_.point(J[0],J[1])),_.point(Q[0],Q[1]),Z||_.lineEnd(),D=!1):Z&&(_.lineStart(),_.point(F,O),D=!1)}P=F,b=O,G=Z}return z}}var cr=Le();function rm(r,s){var u=s[0],o=s[1],l=[Rt(u),-Tt(u),0],m=0,f=0;cr.reset();for(var c=0,y=r.length;c<y;++c)if(_=(v=r[c]).length)for(var v,_,p=v[_-1],x=p[0],N=p[1]/2+Ea,w=Rt(N),A=Tt(N),q=0;q<_;++q,x=P,w=G,A=M,p=R){var R=v[q],P=R[0],b=R[1]/2+Ea,G=Rt(b),M=Tt(b),D=P-x,z=D>=0?1:-1,V=z*D,B=V>vt,j=w*G;if(cr.add(un(j*z*Rt(V),A*M+j*Tt(V))),m+=B?D+z*de:D,B^x>=u^P>=u){var $=Mi(on(p),on(R));Tr($);var tt=Mi(l,$);Tr(tt);var it=(B^D>=0?-1:1)*He(tt[2]);(o>it||o===it&&($[0]||$[1]))&&(f+=B^D>=0?1:-1)}}return(m<-1e-6||m<It&&cr<-1e-6)^f&1}Le();function ba(r){return r}Le();Le();var ln=1/0,Oi=ln,bn=-ln,Ai=bn,Ma={point:sm,lineStart:Cn,lineEnd:Cn,polygonStart:Cn,polygonEnd:Cn,result:function(){var r=[[ln,Oi],[bn,Ai]];return bn=Ai=-(Oi=ln=1/0),r}};function sm(r,s){r<ln&&(ln=r),r>bn&&(bn=r),s<Oi&&(Oi=s),s>Ai&&(Ai=s)}Le();function to(r,s,u,o){return function(l,m){var f=s(m),c=l.invert(o[0],o[1]),y=Ku(),v=s(y),_=!1,p,x,N,w={point:A,lineStart:R,lineEnd:P,polygonStart:function(){w.point=b,w.lineStart=G,w.lineEnd=M,x=[],p=[]},polygonEnd:function(){w.point=A,w.lineStart=R,w.lineEnd=P,x=ju(x);var D=rm(p,c);x.length?(_||(m.polygonStart(),_=!0),Qu(x,um,D,u,m)):D&&(_||(m.polygonStart(),_=!0),m.lineStart(),u(null,null,1,m),m.lineEnd()),_&&(m.polygonEnd(),_=!1),x=p=null},sphere:function(){m.polygonStart(),m.lineStart(),u(null,null,1,m),m.lineEnd(),m.polygonEnd()}};function A(D,z){var V=l(D,z);r(D=V[0],z=V[1])&&m.point(D,z)}function q(D,z){var V=l(D,z);f.point(V[0],V[1])}function R(){w.point=q,f.lineStart()}function P(){w.point=A,f.lineEnd()}function b(D,z){N.push([D,z]);var V=l(D,z);v.point(V[0],V[1])}function G(){v.lineStart(),N=[]}function M(){b(N[0][0],N[0][1]),v.lineEnd();var D=v.clean(),z=y.result(),V,B=z.length,j,$,tt;if(N.pop(),p.push(N),N=null,!!B){if(D&1){if($=z[0],(j=$.length-1)>0){for(_||(m.polygonStart(),_=!0),m.lineStart(),V=0;V<j;++V)m.point((tt=$[V])[0],tt[1]);m.lineEnd()}return}B>1&&D&2&&z.push(z.pop().concat(z.shift())),x.push(z.filter(am))}}return w}}function am(r){return r.length>1}function um(r,s){return((r=r.x)[0]<0?r[1]-ge-It:ge-r[1])-((s=s.x)[0]<0?s[1]-ge-It:ge-s[1])}const Oa=to(function(){return!0},om,hm,[-vt,-ge]);function om(r){var s=NaN,u=NaN,o=NaN,l;return{lineStart:function(){r.lineStart(),l=1},point:function(m,f){var c=m>0?vt:-vt,y=Mt(m-s);Mt(y-vt)<It?(r.point(s,u=(u+f)/2>0?ge:-ge),r.point(o,u),r.lineEnd(),r.lineStart(),r.point(c,u),r.point(m,u),l=0):o!==c&&y>=vt&&(Mt(s-o)<It&&(s-=o*It),Mt(m-c)<It&&(m-=c*It),u=lm(s,u,m,f),r.point(o,u),r.lineEnd(),r.lineStart(),r.point(c,u),l=0),r.point(s=m,u=f),o=c},lineEnd:function(){r.lineEnd(),s=u=NaN},clean:function(){return 2-l}}}function lm(r,s,u,o){var l,m,f=Rt(r-u);return Mt(f)>It?Kg((Rt(s)*(m=Tt(o))*Rt(u)-Rt(o)*(l=Tt(s))*Rt(r))/(l*m*f)):(s+o)/2}function hm(r,s,u,o){var l;if(r==null)l=u*ge,o.point(-vt,l),o.point(0,l),o.point(vt,l),o.point(vt,0),o.point(vt,-l),o.point(0,-l),o.point(-vt,-l),o.point(-vt,0),o.point(-vt,l);else if(Mt(r[0]-s[0])>It){var m=r[0]<s[0]?vt:-vt;l=u*m/2,o.point(-m,l),o.point(0,l),o.point(m,l)}else o.point(s[0],s[1])}function cm(r,s){var u=Tt(r),o=u>0,l=Mt(u)>It;function m(_,p,x,N){jg(N,r,s,x,_,p)}function f(_,p){return Tt(_)*Tt(p)>u}function c(_){var p,x,N,w,A;return{lineStart:function(){w=N=!1,A=1},point:function(q,R){var P=[q,R],b,G=f(q,R),M=o?G?0:v(q,R):G?v(q+(q<0?vt:-vt),R):0;if(!p&&(w=N=G)&&_.lineStart(),G!==N&&(b=y(p,P),(!b||fi(p,b)||fi(P,b))&&(P[0]+=It,P[1]+=It,G=f(P[0],P[1]))),G!==N)A=0,G?(_.lineStart(),b=y(P,p),_.point(b[0],b[1])):(b=y(p,P),_.point(b[0],b[1]),_.lineEnd()),p=b;else if(l&&p&&o^G){var D;!(M&x)&&(D=y(P,p,!0))&&(A=0,o?(_.lineStart(),_.point(D[0][0],D[0][1]),_.point(D[1][0],D[1][1]),_.lineEnd()):(_.point(D[1][0],D[1][1]),_.lineEnd(),_.lineStart(),_.point(D[0][0],D[0][1])))}G&&(!p||!fi(p,P))&&_.point(P[0],P[1]),p=P,N=G,x=M},lineEnd:function(){N&&_.lineEnd(),p=null},clean:function(){return A|(w&&N)<<1}}}function y(_,p,x){var N=on(_),w=on(p),A=[1,0,0],q=Mi(N,w),R=ni(q,q),P=q[0],b=R-P*P;if(!b)return!x&&_;var G=u*R/b,M=-u*P/b,D=Mi(A,q),z=ii(A,G),V=ii(q,M);hr(z,V);var B=D,j=ni(z,B),$=ni(B,B),tt=j*j-$*(ni(z,z)-1);if(!(tt<0)){var it=hn(tt),S=ii(B,(-j-it)/$);if(hr(S,z),S=Cr(S),!x)return S;var F=_[0],O=p[0],Z=_[1],J=p[1],Q;O<F&&(Q=F,F=O,O=Q);var U=O-F,ht=Mt(U-vt)<It,ft=ht||U<It;if(!ht&&J<Z&&(Q=Z,Z=J,J=Q),ft?ht?Z+J>0^S[1]<(Mt(S[0]-F)<It?Z:J):Z<=S[1]&&S[1]<=J:U>vt^(F<=S[0]&&S[0]<=O)){var xt=ii(B,(-j+it)/$);return hr(xt,z),[S,Cr(xt)]}}}function v(_,p){var x=o?r:vt-r,N=0;return _<-x?N|=1:_>x&&(N|=2),p<-x?N|=4:p>x&&(N|=8),N}return to(f,c,m,o?[0,-r]:[-vt,r-vt])}function eo(r){return function(s){var u=new Lr;for(var o in r)u[o]=r[o];return u.stream=s,u}}function Lr(){}Lr.prototype={constructor:Lr,point:function(r,s){this.stream.point(r,s)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function no(r,s,u){var o=s[1][0]-s[0][0],l=s[1][1]-s[0][1],m=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),m!=null&&r.clipExtent(null),Qg(u,r.stream(Ma));var f=Ma.result(),c=Math.min(o/(f[1][0]-f[0][0]),l/(f[1][1]-f[0][1])),y=+s[0][0]+(o-c*(f[1][0]+f[0][0]))/2,v=+s[0][1]+(l-c*(f[1][1]+f[0][1]))/2;return m!=null&&r.clipExtent(m),r.scale(c*150).translate([y,v])}function fm(r,s,u){return no(r,[[0,0],s],u)}var Aa=16,gm=Tt(30*Jt);function Pa(r,s){return+s?dm(r,s):mm(r)}function mm(r){return eo({point:function(s,u){s=r(s,u),this.stream.point(s[0],s[1])}})}function dm(r,s){function u(o,l,m,f,c,y,v,_,p,x,N,w,A,q){var R=v-o,P=_-l,b=R*R+P*P;if(b>4*s&&A--){var G=f+x,M=c+N,D=y+w,z=hn(G*G+M*M+D*D),V=He(D/=z),B=Mt(Mt(D)-1)<It||Mt(m-p)<It?(m+p)/2:un(M,G),j=r(B,V),$=j[0],tt=j[1],it=$-o,S=tt-l,F=P*it-R*S;(F*F/b>s||Mt((R*it+P*S)/b-.5)>.3||f*x+c*N+y*w<gm)&&(u(o,l,m,f,c,y,$,tt,B,G/=z,M/=z,D,A,q),q.point($,tt),u($,tt,B,G,M,D,v,_,p,x,N,w,A,q))}}return function(o){var l,m,f,c,y,v,_,p,x,N,w,A,q={point:R,lineStart:P,lineEnd:G,polygonStart:function(){o.polygonStart(),q.lineStart=M},polygonEnd:function(){o.polygonEnd(),q.lineStart=P}};function R(V,B){V=r(V,B),o.point(V[0],V[1])}function P(){p=NaN,q.point=b,o.lineStart()}function b(V,B){var j=on([V,B]),$=r(V,B);u(p,x,_,N,w,A,p=$[0],x=$[1],_=V,N=j[0],w=j[1],A=j[2],Aa,o),o.point(p,x)}function G(){q.point=R,o.lineEnd()}function M(){P(),q.point=D,q.lineEnd=z}function D(V,B){b(l=V,B),m=p,f=x,c=N,y=w,v=A,q.point=b}function z(){u(p,x,_,N,w,A,m,f,l,c,y,v,Aa,o),q.lineEnd=G,G()}return q}}var vm=eo({point:function(r,s){this.stream.point(r*Jt,s*Jt)}});function ym(r){return _m(function(){return r})()}function _m(r){var s,u=150,o=480,l=250,m,f,c=0,y=0,v=0,_=0,p=0,x,N,w=null,A=Oa,q=null,R,P,b,G=ba,M=.5,D=Pa($,M),z,V;function B(S){return S=N(S[0]*Jt,S[1]*Jt),[S[0]*u+m,f-S[1]*u]}function j(S){return S=N.invert((S[0]-m)/u,(f-S[1])/u),S&&[S[0]*Ce,S[1]*Ce]}function $(S,F){return S=s(S,F),[S[0]*u+m,f-S[1]*u]}B.stream=function(S){return z&&V===S?z:z=vm(A(x,D(G(V=S))))},B.clipAngle=function(S){return arguments.length?(A=+S?cm(w=S*Jt,6*Jt):(w=null,Oa),it()):w*Ce},B.clipExtent=function(S){return arguments.length?(G=S==null?(q=R=P=b=null,ba):im(q=+S[0][0],R=+S[0][1],P=+S[1][0],b=+S[1][1]),it()):q==null?null:[[q,R],[P,b]]},B.scale=function(S){return arguments.length?(u=+S,tt()):u},B.translate=function(S){return arguments.length?(o=+S[0],l=+S[1],tt()):[o,l]},B.center=function(S){return arguments.length?(c=S[0]%360*Jt,y=S[1]%360*Jt,tt()):[c*Ce,y*Ce]},B.rotate=function(S){return arguments.length?(v=S[0]%360*Jt,_=S[1]%360*Jt,p=S.length>2?S[2]%360*Jt:0,tt()):[v*Ce,_*Ce,p*Ce]},B.precision=function(S){return arguments.length?(D=Pa($,M=S*S),it()):hn(M)},B.fitExtent=function(S,F){return no(B,S,F)},B.fitSize=function(S,F){return fm(B,S,F)};function tt(){N=Wu(x=Jg(v,_,p),s);var S=s(c,y);return m=o-S[0]*u,f=l+S[1]*u,it()}function it(){return z=V=null,B}return function(){return s=r.apply(this,arguments),B.invert=s.invert&&j,tt()}}function io(r){return function(s,u){var o=Tt(s),l=Tt(u),m=r(o*l);return[m*l*Rt(s),m*Rt(u)]}}function ro(r){return function(s,u){var o=hn(s*s+u*u),l=r(o),m=Rt(l),f=Tt(l);return[un(s*m,o*f),He(o&&u*m/o)]}}var pm=io(function(r){return hn(2/(1+r))});pm.invert=ro(function(r){return 2*He(r/2)});var so=io(function(r){return(r=$u(r))&&r/Rt(r)});so.invert=ro(function(r){return r});function km(){return ym(so).scale(79.4188).clipAngle(180-.001)}function Da(r,s){return[r,s]}Da.invert=Da;var{BufferOp:xm,GeoJSONReader:Em,GeoJSONWriter:Nm}=Wg;function wm(r,s,u){u=u||{};var o=u.units||"kilometers",l=u.steps||8;if(!r)throw new Error("geojson is required");if(typeof u!="object")throw new Error("options must be an object");if(typeof l!="number")throw new Error("steps must be an number");if(s===void 0)throw new Error("radius is required");if(l<=0)throw new Error("steps must be greater than 0");var m=[];switch(r.type){case"GeometryCollection":return Hu(r,function(f){var c=gi(f,s,o,l);c&&m.push(c)}),Ir(m);case"FeatureCollection":return pa(r,function(f){var c=gi(f,s,o,l);c&&pa(c,function(y){y&&m.push(y)})}),Ir(m)}return gi(r,s,o,l)}function gi(r,s,u,o){var l=r.properties||{},m=r.type==="Feature"?r.geometry:r;if(m.type==="GeometryCollection"){var f=[];return Hu(r,function(A){var q=gi(A,s,u,o);q&&f.push(q)}),Ir(f)}var c=Im(m),y={type:m.type,coordinates:uo(m.coordinates,c)},v=new Em,_=v.read(y),p=qg(Gg(s,u),"meters"),x=xm.bufferOp(_,p,o),N=new Nm;if(x=N.write(x),!ao(x.coordinates)){var w={type:x.type,coordinates:oo(x.coordinates,c)};return Bu(w,l)}}function ao(r){return Array.isArray(r[0])?ao(r[0]):isNaN(r[0])}function uo(r,s){return typeof r[0]!="object"?s(r):r.map(function(u){return uo(u,s)})}function oo(r,s){return typeof r[0]!="object"?s.invert(r):r.map(function(u){return oo(u,s)})}function Im(r){var s=Zg(r).geometry.coordinates,u=[-s[0],-s[1]];return km().rotate(u).scale(Gt)}function Fa(r,s,u){const o=r.slice();return o[10]=s[u],o}function qa(r){let s,u=[],o=new Map,l=Xt(r[2]);const m=f=>f[10].x+"-"+f[10].y;for(let f=0;f<l.length;f+=1){let c=Fa(r,l,f),y=m(c);o.set(y,u[f]=Ga(y,c))}return{c(){s=Ct("g");for(let f=0;f<u.length;f+=1)u[f].c()},l(f){s=St(f,"g",{});var c=_t(s);for(let y=0;y<u.length;y+=1)u[y].l(c);c.forEach(rt)},m(f,c){Nt(f,s,c);for(let y=0;y<u.length;y+=1)u[y]&&u[y].m(s,null);r[7](s)},p(f,c){c&5&&(l=Xt(f[2]),u=Or(u,c,m,1,f,l,o,s,Mr,Ga,null,Fa))},d(f){f&&rt(s);for(let c=0;c<u.length;c+=1)u[c].d();r[7](null)}}}function Ga(r,s){let u,o,l,m;return{key:r,first:null,c(){u=Ct("rect"),this.h()},l(f){u=St(f,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0}),_t(u).forEach(rt),this.h()},h(){Y(u,"x",o=s[10].x),Y(u,"y",l=s[10].y),Y(u,"width",s[0]),Y(u,"height",s[0]),Y(u,"class",m=Ys("pixel "+s[10].type)+" svelte-16qqz0h"),this.first=u},m(f,c){Nt(f,u,c)},p(f,c){s=f,c&4&&o!==(o=s[10].x)&&Y(u,"x",o),c&4&&l!==(l=s[10].y)&&Y(u,"y",l),c&1&&Y(u,"width",s[0]),c&1&&Y(u,"height",s[0]),c&4&&m!==(m=Ys("pixel "+s[10].type)+" svelte-16qqz0h")&&Y(u,"class",m)},d(f){f&&rt(u)}}}function Sm(r){let s,u=r[2].length>0&&qa(r);return{c(){u&&u.c(),s=Yt()},l(o){u&&u.l(o),s=Yt()},m(o,l){u&&u.m(o,l),Nt(o,s,l)},p(o,[l]){o[2].length>0?u?u.p(o,l):(u=qa(o),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},i:Ne,o:Ne,d(o){o&&rt(s),u&&u.d(o)}}}const Cm=5;function Tm(r,s,u){let{xScale:o}=s,{yScale:l}=s,{width:m=window.innerWidth}=s,{height:f=window.innerHeight}=s,{gridSize:c=2.5}=s,y=null,v,_=[];br(async()=>{try{y=await(await fetch("/map1.geojson")).json(),o&&l&&p()}catch(N){console.error("Error loading map.geojson",N)}});function p(){u(2,_=[]);const N=Math.ceil(m/c),w=Math.ceil(f/c),A=y.features.filter(G=>G.geometry.type==="Polygon"||G.geometry.type==="MultiPolygon"),R=y.features.filter(G=>{var M;return(G.geometry.type==="LineString"||G.geometry.type==="MultiLineString")&&((M=G.properties)==null?void 0:M.highway)}).map((G,M)=>{try{const D=wm(G,Cm,{units:"meters"});return D.id=G.id||M,D}catch(D){return console.error("Buffer error",D),null}}).filter(G=>G);let P=0;function b(G){var D,z,V;const M=performance.now();for(;P<w&&((G==null?void 0:G.timeRemaining())>0||performance.now()-M<8);){for(let B=0;B<N;B++){const j=B*c,$=P*c,tt=o.invert(j+c/2),it=l.invert($+c/2),S=Uu([tt,it]);let F=null;for(let O of R)if(ka(S,O)){F="street";break}if(!F){for(let O of A)if(ka(S,O)){((D=O.properties)==null?void 0:D.leisure)==="park"?F="park":((z=O.properties)==null?void 0:z.natural)==="water"||(V=O.properties)!=null&&V.waterway?F="water":F="other";break}}F&&u(2,_=[..._,{x:j,y:$,type:F}])}P++}P<w&&(window.requestIdleCallback?requestIdleCallback(b):requestAnimationFrame(()=>b()))}window.requestIdleCallback?requestIdleCallback(b):requestAnimationFrame(()=>b())}function x(N){hu[N?"unshift":"push"](()=>{v=N,u(1,v)})}return r.$$set=N=>{"xScale"in N&&u(3,o=N.xScale),"yScale"in N&&u(4,l=N.yScale),"width"in N&&u(5,m=N.width),"height"in N&&u(6,f=N.height),"gridSize"in N&&u(0,c=N.gridSize)},[c,v,_,o,l,m,f,x]}class Rm extends On{constructor(s){super(),An(this,s,Tm,Sm,Mn,{xScale:3,yScale:4,width:5,height:6,gridSize:0})}}function za(r,s,u){const o=r.slice();return o[18]=s[u],o[20]=u,o}function Ya(r,s,u){const o=r.slice();return o[18]=s[u],o}function Xa(r,s,u){const o=r.slice();return o[23]=s[u],o[20]=u,o}function Lm(r){let s,u;return{c(){s=Ct("circle"),this.h()},l(o){s=St(o,"circle",{r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),_t(s).forEach(rt),this.h()},h(){Y(s,"r",r[6]),Y(s,"fill","none"),Y(s,"stroke",u=r[18].color),Y(s,"stroke-width","0.1"),Y(s,"class","svelte-10xeg6j")},m(o,l){Nt(o,s,l)},p(o,l){l&2&&u!==(u=o[18].color)&&Y(s,"stroke",u)},d(o){o&&rt(s)}}}function bm(r){let s,u=Xt(Array(r[18].numRings)),o=[];for(let l=0;l<u.length;l+=1)o[l]=Ba(Xa(r,u,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();s=Yt()},l(l){for(let m=0;m<o.length;m+=1)o[m].l(l);s=Yt()},m(l,m){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(l,m);Nt(l,s,m)},p(l,m){if(m&194){u=Xt(Array(l[18].numRings));let f;for(f=0;f<u.length;f+=1){const c=Xa(l,u,f);o[f]?o[f].p(c,m):(o[f]=Ba(c),o[f].c(),o[f].m(s.parentNode,s))}for(;f<o.length;f+=1)o[f].d(1);o.length=u.length}},d(l){l&&rt(s),Pi(o,l)}}}function Ba(r){let s,u;return{c(){s=Ct("circle"),this.h()},l(o){s=St(o,"circle",{r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),_t(s).forEach(rt),this.h()},h(){Y(s,"r",r[6]+r[20]*r[7]),Y(s,"fill","none"),Y(s,"stroke",u=r[18].color),Y(s,"stroke-width","0.1"),Y(s,"class","svelte-10xeg6j")},m(o,l){Nt(o,s,l)},p(o,l){l&2&&u!==(u=o[18].color)&&Y(s,"stroke",u)},d(o){o&&rt(s)}}}function Ua(r,s){let u,o;function l(c,y){return c[18].numRings>0?bm:Lm}let m=l(s),f=m(s);return{key:r,first:null,c(){u=Ct("g"),f.c(),this.h()},l(c){u=St(c,"g",{class:!0,transform:!0});var y=_t(u);f.l(y),y.forEach(rt),this.h()},h(){Y(u,"class","node svelte-10xeg6j"),Y(u,"transform",o="translate("+s[18].x+", "+s[18].y+")"),this.first=u},m(c,y){Nt(c,u,y),f.m(u,null)},p(c,y){s=c,m===(m=l(s))&&f?f.p(s,y):(f.d(1),f=m(s),f&&(f.c(),f.m(u,null))),y&2&&o!==(o="translate("+s[18].x+", "+s[18].y+")")&&Y(u,"transform",o)},d(c){c&&rt(u),f.d()}}}function Va(r){let s,u,o,l,m=Xt(r[2].slice(0,r[2].length-1)),f=[];for(let c=0;c<m.length;c+=1)f[c]=Za(za(r,m,c));return{c(){s=Ct("g"),u=Ct("defs"),o=Ct("marker"),l=Ct("polygon");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){s=St(c,"g",{class:!0});var y=_t(s);u=St(y,"defs",{});var v=_t(u);o=St(v,"marker",{id:!0,markerWidth:!0,markerHeight:!0,refX:!0,refY:!0,orient:!0});var _=_t(o);l=St(_,"polygon",{points:!0,fill:!0}),_t(l).forEach(rt),_.forEach(rt),v.forEach(rt);for(let p=0;p<f.length;p+=1)f[p].l(y);y.forEach(rt),this.h()},h(){Y(l,"points","0 0, 6 2, 0 4"),Y(l,"fill","blue"),Y(o,"id","arrowhead"),Y(o,"markerWidth","6"),Y(o,"markerHeight","4"),Y(o,"refX","3"),Y(o,"refY","2"),Y(o,"orient","auto"),Y(s,"class","curator-path svelte-10xeg6j")},m(c,y){Nt(c,s,y),kt(s,u),kt(u,o),kt(o,l);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(s,null)},p(c,y){if(y&4){m=Xt(c[2].slice(0,c[2].length-1));let v;for(v=0;v<m.length;v+=1){const _=za(c,m,v);f[v]?f[v].p(_,y):(f[v]=Za(_),f[v].c(),f[v].m(s,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=m.length}},d(c){c&&rt(s),Pi(f,c)}}}function Ha(r){let s,u;return{c(){s=Ct("path"),this.h()},l(o){s=St(o,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"marker-end":!0,class:!0}),_t(s).forEach(rt),this.h()},h(){Y(s,"d",u=Ja(r[18],r[2][r[20]+1])),Y(s,"fill","none"),Y(s,"stroke","blue"),Y(s,"stroke-width",".5"),Y(s,"marker-end","url(#arrowhead)"),Y(s,"class","svelte-10xeg6j")},m(o,l){Nt(o,s,l)},p(o,l){l&4&&u!==(u=Ja(o[18],o[2][o[20]+1]))&&Y(s,"d",u)},d(o){o&&rt(s)}}}function Za(r){let s,u=r[2][r[20]+1]&&Ha(r);return{c(){u&&u.c(),s=Yt()},l(o){u&&u.l(o),s=Yt()},m(o,l){u&&u.m(o,l),Nt(o,s,l)},p(o,l){o[2][o[20]+1]?u?u.p(o,l):(u=Ha(o),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},d(o){o&&rt(s),u&&u.d(o)}}}function Mm(r){let s,u,o,l=[],m=new Map,f,c,y;o=new Rm({props:{transform:r[5],xScale:r[3],yScale:r[4]}});let v=Xt(r[1]);const _=x=>x[18].id;for(let x=0;x<v.length;x+=1){let N=Ya(r,v,x),w=_(N);m.set(w,l[x]=Ua(w,N))}let p=r[2].length>1&&Va(r);return{c(){s=Ct("svg"),u=Ct("g"),pi(o.$$.fragment);for(let x=0;x<l.length;x+=1)l[x].c();f=Yt(),p&&p.c(),this.h()},l(x){s=St(x,"svg",{style:!0,class:!0});var N=_t(s);u=St(N,"g",{transform:!0});var w=_t(u);_i(o.$$.fragment,w);for(let A=0;A<l.length;A+=1)l[A].l(w);f=Yt(),p&&p.l(w),w.forEach(rt),N.forEach(rt),this.h()},h(){Y(u,"transform",c="translate("+r[5].x+", "+r[5].y+") scale("+r[5].k+")"),Xs(s,"width","100%"),Xs(s,"height","100vh"),Y(s,"class","svelte-10xeg6j")},m(x,N){Nt(x,s,N),kt(s,u),yi(o,u,null);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(u,null);kt(u,f),p&&p.m(u,null),r[11](s),y=!0},p(x,[N]){const w={};N&32&&(w.transform=x[5]),N&8&&(w.xScale=x[3]),N&16&&(w.yScale=x[4]),o.$set(w),N&194&&(v=Xt(x[1]),l=Or(l,N,_,1,x,v,m,u,Mr,Ua,f,Ya)),x[2].length>1?p?p.p(x,N):(p=Va(x),p.c(),p.m(u,null)):p&&(p.d(1),p=null),(!y||N&32&&c!==(c="translate("+x[5].x+", "+x[5].y+") scale("+x[5].k+")"))&&Y(u,"transform",c)},i(x){y||(re(o.$$.fragment,x),y=!0)},o(x){Re(o.$$.fragment,x),y=!1},d(x){x&&rt(s),vi(o);for(let N=0;N<l.length;N+=1)l[N].d();p&&p.d(),r[11](null)}}}const $a=1,Wa=1,Ka=10,Qa=5;function Om(r){return"DarkSeaGreen"}function Ja(r,s,u=20){const o=s.x-r.x,l=s.y-r.y,m=(r.x+s.x)/2,f=(r.y+s.y)/2,c=Math.sqrt(o*o+l*l)||1,y=-l/c,v=o/c,_=m+y*u,p=f+v*u;return`M ${r.x} ${r.y} Q ${_} ${p} ${s.x} ${s.y}`}function Am(r,s,u){let o,{data:l=[]}=s,{currentYear:m}=s,{selectedCuratorData:f=null}=s,c,y=[],v,_,p=Ur;const x=$a+(Ka-1)*Wa,N=Qa/2/x,w=$a*N,A=Wa*N,q=x*N,R=Qa;function P(){const M=c.clientWidth,D=c.clientHeight,z=l.map(F=>parseFloat(F.LONGITUDE)).filter(F=>!isNaN(F)),V=l.map(F=>parseFloat(F.LATITUDE)).filter(F=>!isNaN(F));let B=Vs(z),j=Us(z),$=Vs(V),tt=Us(V);const it=(j-B)*.2,S=(tt-$)*.2;B-=it,j+=it,$-=S,tt+=S,u(3,v=wr().domain([B,j]).range([0,M])),u(4,_=wr().domain([$,tt]).range([D,0]))}function b(){return!l||!c||m===void 0?[]:(P(),l.map((D,z)=>{const V=parseFloat(D.LONGITUDE),B=parseFloat(D.LATITUDE),j=parseInt(D.ACC_YR),$=parseInt(D.last_date);if(isNaN(V)||isNaN(B)||isNaN(j)||isNaN($))return null;let tt=0;m>=j&&(tt=Math.floor((m-j)/10),tt=Math.min(tt,Ka));let it=tt>0?w+(tt-1)*A:w;it=Math.min(it,q);const S=v(V),F=_(B),O=Math.floor(S/R),Z=Math.floor(F/R),J=O*R+R/2,Q=Z*R+R/2;return{id:D.PLANTID?D.PLANTID:z,x:J,y:Q,accYear:j,lastDate:$,numRings:tt,outerRadius:it,color:Om()}}).filter(Boolean))}br(()=>{const M=Fg().scaleExtent([1,10]).on("zoom",D=>{u(5,p=D.transform)});Te(c).call(M)});function G(M){hu[M?"unshift":"push"](()=>{c=M,u(0,c)})}return r.$$set=M=>{"data"in M&&u(8,l=M.data),"currentYear"in M&&u(9,m=M.currentYear),"selectedCuratorData"in M&&u(10,f=M.selectedCuratorData)},r.$$.update=()=>{if(r.$$.dirty&769&&l&&c&&m!==void 0&&u(1,y=b()),r.$$.dirty&1030&&f&&f.PlantDates){const D=[...f.PlantDates].sort((z,V)=>z.Date-V.Date).map(z=>String(z.PlantID).toLowerCase());u(2,o=y.filter(z=>D.includes(String(z.id).toLowerCase()))),o.sort((z,V)=>D.indexOf(String(z.id).toLowerCase())-D.indexOf(String(V.id).toLowerCase()))}},u(2,o=[]),[c,y,o,v,_,p,w,A,l,m,f,G]}class Pm extends On{constructor(s){super(),An(this,s,Am,Mm,Mn,{data:8,currentYear:9,selectedCuratorData:10})}}function ja(r,s,u){const o=r.slice();return o[2]=s[u],o[4]=u,o}function Dm(r){let s,u="1",o,l;return{c(){s=Ct("text"),o=fe(u),l=fe(` year
          `),this.h()},l(m){s=St(m,"text",{x:!0,y:!0,dy:!0,"text-anchor":!0,fill:!0,"font-size":!0});var f=_t(s);o=ce(f,u),l=ce(f,` year
          `),f.forEach(rt),this.h()},h(){Y(s,"x","25"),Y(s,"y",-(Vr+r[4]*Hr)),Y(s,"dy","1.2em"),Y(s,"text-anchor","middle"),Y(s,"fill","black"),Y(s,"font-size","10")},m(m,f){Nt(m,s,f),kt(s,o),kt(s,l)},p:Ne,d(m){m&&rt(s)}}}function Fm(r){let s,u=r[4]*10+"",o,l;return{c(){s=Ct("text"),o=fe(u),l=fe(` years
          `),this.h()},l(m){s=St(m,"text",{x:!0,y:!0,dy:!0,"text-anchor":!0,fill:!0,"font-size":!0});var f=_t(s);o=ce(f,u),l=ce(f,` years
          `),f.forEach(rt),this.h()},h(){Y(s,"x","25"),Y(s,"y",-(Vr+r[4]*Hr)),Y(s,"dy","1.2em"),Y(s,"text-anchor","middle"),Y(s,"fill","black"),Y(s,"font-size","10")},m(m,f){Nt(m,s,f),kt(s,o),kt(s,l)},p:Ne,d(m){m&&rt(s)}}}function tu(r){let s,u;function o(f,c){return f[4]>0?Fm:Dm}let m=o(r)(r);return{c(){s=Ct("circle"),m.c(),u=Yt(),this.h()},l(f){s=St(f,"circle",{r:!0,fill:!0,stroke:!0,"stroke-width":!0}),_t(s).forEach(rt),m.l(f),u=Yt(),this.h()},h(){Y(s,"r",Vr+r[4]*Hr),Y(s,"fill","none"),Y(s,"stroke","#888"),Y(s,"stroke-width","1")},m(f,c){Nt(f,s,c),m.m(f,c),Nt(f,u,c)},p(f,c){m.p(f,c)},d(f){f&&(rt(s),rt(u)),m.d(f)}}}function qm(r){let s,u,o,l=Xt(Array(eu+1)),m=[];for(let f=0;f<l.length;f+=1)m[f]=tu(ja(r,l,f));return{c(){s=Be("div"),u=Ct("svg"),o=Ct("g");for(let f=0;f<m.length;f+=1)m[f].c();this.h()},l(f){s=Xe(f,"DIV",{class:!0});var c=_t(s);u=St(c,"svg",{class:!0,width:!0,height:!0});var y=_t(u);o=St(y,"g",{transform:!0});var v=_t(o);for(let _=0;_<m.length;_+=1)m[_].l(v);v.forEach(rt),y.forEach(rt),c.forEach(rt),this.h()},h(){Y(o,"transform","translate(75, 60)"),Y(u,"class","infographic"),Y(u,"width","150"),Y(u,"height","120"),Y(s,"class","legend-container svelte-lugs7g")},m(f,c){Nt(f,s,c),kt(s,u),kt(u,o);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(o,null)},p(f,[c]){if(c&0){l=Xt(Array(eu+1));let y;for(y=0;y<l.length;y+=1){const v=ja(f,l,y);m[y]?m[y].p(v,c):(m[y]=tu(v),m[y].c(),m[y].m(o,null))}for(;y<m.length;y+=1)m[y].d(1);m.length=l.length}},i:Ne,o:Ne,d(f){f&&rt(s),Pi(m,f)}}}const eu=4,Vr=10,Hr=20;function Gm(r,s,u){let{classColorMapping:o}=s;return r.$$set=l=>{"classColorMapping"in l&&u(0,o=l.classColorMapping)},[o]}class zm extends On{constructor(s){super(),An(this,s,Gm,qm,Mn,{classColorMapping:0})}}function nu(r,s,u){const o=r.slice();return o[7]=s[u],o}function iu(r,s,u){const o=r.slice();return o[11]=s[u],o}function fr(r){const s=r.slice(),u=Um(s[7]);return s[10]=u,s}function ru(r){let s,u,o,l=r[10].minDate+"",m,f,c=r[10].maxDate+"",y,v,_=r[10].count+"",p,x,N=r[10].count===1?"":"s",w;function A(P,b){return P[10].maxDate!==P[10].minDate?Xm:Ym}let q=A(r),R=q(r);return{c(){s=Ct("svg"),u=Ct("line"),R.c(),o=Ct("text"),m=fe(l),f=Ct("text"),y=fe(c),v=Ct("text"),p=fe(_),x=fe(" annotation"),w=fe(N),this.h()},l(P){s=St(P,"svg",{class:!0,width:!0,height:!0});var b=_t(s);u=St(b,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),_t(u).forEach(rt),R.l(b),o=St(b,"text",{x:!0,y:!0,"font-size":!0,fill:!0,class:!0});var G=_t(o);m=ce(G,l),G.forEach(rt),f=St(b,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var M=_t(f);y=ce(M,c),M.forEach(rt),v=St(b,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var D=_t(v);p=ce(D,_),x=ce(D," annotation"),w=ce(D,N),D.forEach(rt),b.forEach(rt),this.h()},h(){Y(u,"x1","10"),Y(u,"y1","20"),Y(u,"x2","190"),Y(u,"y2","20"),Y(u,"stroke","#ccc"),Y(u,"stroke-width","2"),Y(u,"class","svelte-8ex126"),Y(o,"x","10"),Y(o,"y","15"),Y(o,"font-size","10"),Y(o,"fill","#333"),Y(o,"class","svelte-8ex126"),Y(f,"x","190"),Y(f,"y","15"),Y(f,"font-size","10"),Y(f,"fill","#333"),Y(f,"text-anchor","end"),Y(f,"class","svelte-8ex126"),Y(v,"x","100"),Y(v,"y","35"),Y(v,"font-size","10"),Y(v,"fill","#333"),Y(v,"text-anchor","middle"),Y(v,"class","svelte-8ex126"),Y(s,"class","histogram svelte-8ex126"),Y(s,"width","200"),Y(s,"height","40")},m(P,b){Nt(P,s,b),kt(s,u),R.m(s,null),kt(s,o),kt(o,m),kt(s,f),kt(f,y),kt(s,v),kt(v,p),kt(v,x),kt(v,w)},p(P,b){q===(q=A(P))&&R?R.p(P,b):(R.d(1),R=q(P),R&&(R.c(),R.m(s,o))),b&1&&l!==(l=P[10].minDate+"")&&wn(m,l),b&1&&c!==(c=P[10].maxDate+"")&&wn(y,c),b&1&&_!==(_=P[10].count+"")&&wn(p,_),b&1&&N!==(N=P[10].count===1?"":"s")&&wn(w,N)},d(P){P&&rt(s),R.d()}}}function Ym(r){let s;return{c(){s=Ct("circle"),this.h()},l(u){s=St(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),_t(s).forEach(rt),this.h()},h(){Y(s,"cx","100"),Y(s,"cy","20"),Y(s,"r","4"),Y(s,"fill","blue"),Y(s,"class","svelte-8ex126")},m(u,o){Nt(u,s,o)},p:Ne,d(u){u&&rt(s)}}}function Xm(r){let s,u=Xt(r[10].dates),o=[];for(let l=0;l<u.length;l+=1)o[l]=su(iu(r,u,l));return{c(){for(let l=0;l<o.length;l+=1)o[l].c();s=Yt()},l(l){for(let m=0;m<o.length;m+=1)o[m].l(l);s=Yt()},m(l,m){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(l,m);Nt(l,s,m)},p(l,m){if(m&1){u=Xt(l[10].dates);let f;for(f=0;f<u.length;f+=1){const c=iu(l,u,f);o[f]?o[f].p(c,m):(o[f]=su(c),o[f].c(),o[f].m(s.parentNode,s))}for(;f<o.length;f+=1)o[f].d(1);o.length=u.length}},d(l){l&&rt(s),Pi(o,l)}}}function su(r){let s,u;return{c(){s=Ct("circle"),this.h()},l(o){s=St(o,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),_t(s).forEach(rt),this.h()},h(){Y(s,"cx",u=uu(r[11],r[10].minDate,r[10].maxDate)),Y(s,"cy","20"),Y(s,"r","2"),Y(s,"fill","blue"),Y(s,"class","svelte-8ex126")},m(o,l){Nt(o,s,l)},p(o,l){l&1&&u!==(u=uu(o[11],o[10].minDate,o[10].maxDate))&&Y(s,"cx",u)},d(o){o&&rt(s)}}}function au(r,s){let u,o,l=s[7].CuratorName+"",m,f,c,y,v,_=s[7].PlantDates&&s[7].PlantDates.length>0&&ru(fr(s));function p(){return s[5](s[7])}return{key:r,first:null,c(){u=Be("li"),o=Be("div"),m=fe(l),f=di(),_&&_.c(),c=di(),this.h()},l(x){u=Xe(x,"LI",{class:!0});var N=_t(u);o=Xe(N,"DIV",{class:!0});var w=_t(o);m=ce(w,l),w.forEach(rt),f=mi(N),_&&_.l(N),c=mi(N),N.forEach(rt),this.h()},h(){Y(o,"class","curator-name svelte-8ex126"),Y(u,"class","svelte-8ex126"),Bs(u,"selected",s[7].CuratorName===s[1]),this.first=u},m(x,N){Nt(x,u,N),kt(u,o),kt(o,m),kt(u,f),_&&_.m(u,null),kt(u,c),y||(v=_l(u,"click",p),y=!0)},p(x,N){s=x,N&1&&l!==(l=s[7].CuratorName+"")&&wn(m,l),s[7].PlantDates&&s[7].PlantDates.length>0?_?_.p(fr(s),N):(_=ru(fr(s)),_.c(),_.m(u,c)):_&&(_.d(1),_=null),N&3&&Bs(u,"selected",s[7].CuratorName===s[1])},d(x){x&&rt(u),_&&_.d(),y=!1,v()}}}function Bm(r){let s,u,o=[],l=new Map,m=Xt(r[0]);const f=c=>c[7].CuratorName;for(let c=0;c<m.length;c+=1){let y=nu(r,m,c),v=f(y);l.set(v,o[c]=au(v,y))}return{c(){s=Be("aside"),u=Be("ul");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){s=Xe(c,"ASIDE",{class:!0});var y=_t(s);u=Xe(y,"UL",{class:!0});var v=_t(u);for(let _=0;_<o.length;_+=1)o[_].l(v);v.forEach(rt),y.forEach(rt),this.h()},h(){Y(u,"class","svelte-8ex126"),Y(s,"class","curator-sidebar svelte-8ex126")},m(c,y){Nt(c,s,y),kt(s,u);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(u,null)},p(c,[y]){y&7&&(m=Xt(c[0]),o=Or(o,y,f,1,c,m,l,u,Mr,au,null,nu))},i:Ne,o:Ne,d(c){c&&rt(s);for(let y=0;y<o.length;y+=1)o[y].d()}}}function Um(r){const s=r.PlantDates.map(l=>l.Date),u=Math.min(...s),o=Math.max(...s);return{minDate:u,maxDate:o,count:s.length,dates:s}}function uu(r,s,u){return u===s?100:10+(r-s)/(u-s)*180}function Vm(r,s,u){let o,l,{curatorData:m=[]}=s,{initialCurator:f=""}=s;const c=yl();function y(_){u(1,l=_);const p=m.find(x=>x.CuratorName.toLowerCase()===_.toLowerCase());c("curatorChange",{selectedCuratorData:p})}const v=_=>y(_.CuratorName);return r.$$set=_=>{"curatorData"in _&&u(3,m=_.curatorData),"initialCurator"in _&&u(4,f=_.initialCurator)},r.$$.update=()=>{r.$$.dirty&8&&u(0,o=m.slice().sort((_,p)=>_.CuratorName.localeCompare(p.CuratorName))),r.$$.dirty&17&&u(1,l=f||(o.length>0?o[0]:""))},[o,l,y,m,f,v]}class Hm extends On{constructor(s){super(),An(this,s,Vm,Bm,Mn,{curatorData:3,initialCurator:4})}}function ou(r){let s,u,o,l,m,f=r[1].length>0&&lu(r);return l=new Hm({props:{curatorData:r[0]}}),l.$on("curatorChange",r[4]),{c(){s=Be("div"),u=Be("div"),f&&f.c(),o=di(),pi(l.$$.fragment),this.h()},l(c){s=Xe(c,"DIV",{class:!0});var y=_t(s);u=Xe(y,"DIV",{class:!0});var v=_t(u);f&&f.l(v),v.forEach(rt),o=mi(y),_i(l.$$.fragment,y),y.forEach(rt),this.h()},h(){Y(u,"class","main svelte-dgiw5l"),Y(s,"class","container svelte-dgiw5l")},m(c,y){Nt(c,s,y),kt(s,u),f&&f.m(u,null),kt(s,o),yi(l,s,null),m=!0},p(c,y){c[1].length>0?f?(f.p(c,y),y&2&&re(f,1)):(f=lu(c),f.c(),re(f,1),f.m(u,null)):f&&(fu(),Re(f,1,1,()=>{f=null}),cu());const v={};y&1&&(v.curatorData=c[0]),l.$set(v)},i(c){m||(re(f),re(l.$$.fragment,c),m=!0)},o(c){Re(f),Re(l.$$.fragment,c),m=!1},d(c){c&&rt(s),f&&f.d(),vi(l)}}}function lu(r){let s,u,o,l;return s=new Pm({props:{data:r[1],currentYear:r[2],selectedCuratorData:r[3]}}),o=new zm({props:{classColorMapping:r[5]}}),{c(){pi(s.$$.fragment),u=di(),pi(o.$$.fragment)},l(m){_i(s.$$.fragment,m),u=mi(m),_i(o.$$.fragment,m)},m(m,f){yi(s,m,f),Nt(m,u,f),yi(o,m,f),l=!0},p(m,f){const c={};f&2&&(c.data=m[1]),f&4&&(c.currentYear=m[2]),f&8&&(c.selectedCuratorData=m[3]),s.$set(c)},i(m){l||(re(s.$$.fragment,m),re(o.$$.fragment,m),l=!0)},o(m){Re(s.$$.fragment,m),Re(o.$$.fragment,m),l=!1},d(m){m&&rt(u),vi(s,m),vi(o,m)}}}function Zm(r){let s,u,o=r[1].length>0&&r[0].length>0&&ou(r);return{c(){o&&o.c(),s=Yt()},l(l){o&&o.l(l),s=Yt()},m(l,m){o&&o.m(l,m),Nt(l,s,m),u=!0},p(l,[m]){l[1].length>0&&l[0].length>0?o?(o.p(l,m),m&3&&re(o,1)):(o=ou(l),o.c(),re(o,1),o.m(s.parentNode,s)):o&&(fu(),Re(o,1,1,()=>{o=null}),cu())},i(l){u||(re(o),u=!0)},o(l){Re(o),u=!1},d(l){l&&rt(s),o&&o.d(l)}}}function $m(r,s,u){let o=[],l=[],m=2011,f,c=null;br(async()=>{const _=await fetch("data/ArnArbPlantsGEO.json");u(1,o=await _.json()),Math.min(...o.map(x=>parseInt(x.ACC_YR))),f=Math.max(...o.map(x=>parseInt(x.ACC_YR))),u(2,m=f);const p=await fetch("data/Curator_Plants_Dates.json");u(0,l=await p.json()),l.length>0&&u(3,c=l[0])});function y(_){u(3,c=_.detail.selectedCuratorData)}const v={Eudicot:"#d7191c",Ginkgoopsida:"#fdae61",Monocot:"#ffffbf",Lycopodiopsida:"#abdda4",Pinopsida:"#2b83ba"};return r.$$.update=()=>{r.$$.dirty&1&&console.log(l)},[l,o,m,c,y,v]}class Qm extends On{constructor(s){super(),An(this,s,$m,Zm,Mn,{})}}export{Qm as component};
