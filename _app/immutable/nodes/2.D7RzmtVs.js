import{s as X,n as $,d as m,i as b,p as O,r as ne,O as N,h as k,P as A,x as u,Q as ie,R as se,e as D,v as ze,z as Fe,f as I,l as P,y as ce,k as S,j as F,m as T,t as L,S as Le,b as q,T as ue,U as Be}from"../chunks/Cxw3WnS6.js";import{S as Q,i as J,d as ee,t as G,a as U,m as te,e as ae,b as re,c as Re,g as Se}from"../chunks/CGTxhxGg.js";import{i as Te,e as z,u as Ae,d as Ie,a as fe,z as Ue,s as he,m as Ve}from"../chunks/CcNL7MI7.js";function _e(o,e,t){const a=o.slice();return a[3]=e[t],a[5]=t,a}function ge(o){let e,t=[],a=new Map,r=z(o[0]);const n=i=>i[3].id||i[5];for(let i=0;i<r.length;i+=1){let l=_e(o,r,i),s=n(l);a.set(s,t[i]=de(s,l))}return{c(){e=A("g");for(let i=0;i<t.length;i+=1)t[i].c()},l(i){e=N(i,"g",{});var l=k(e);for(let s=0;s<t.length;s+=1)t[s].l(l);l.forEach(m)},m(i,l){b(i,e,l);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(i,l){l&3&&(r=z(i[0]),t=Ae(t,l,n,1,i,r,a,e,Ie,de,null,_e))},d(i){i&&m(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function de(o,e){let t,a,r;return{key:o,first:null,c(){t=A("path"),this.h()},l(n){t=N(n,"path",{d:!0,class:!0}),k(t).forEach(m),this.h()},h(){u(t,"d",a=e[1](e[3])),u(t,"class",r=ie("pixel "+e[3].properties.type)+" svelte-vrt0xx"),this.first=t},m(n,i){b(n,t,i)},p(n,i){e=n,i&3&&a!==(a=e[1](e[3]))&&u(t,"d",a),i&1&&r!==(r=ie("pixel "+e[3].properties.type)+" svelte-vrt0xx")&&u(t,"class",r)},d(n){n&&m(t)}}}function qe(o){let e,t=o[0]&&o[1]&&ge(o);return{c(){t&&t.c(),e=O()},l(a){t&&t.l(a),e=O()},m(a,r){t&&t.m(a,r),b(a,e,r)},p(a,[r]){a[0]&&a[1]?t?t.p(a,r):(t=ge(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(a){a&&m(e),t&&t.d(a)}}}function Oe(o,e,t){let{projection:a}=e,r=null,n=null;return ne(async()=>{try{const l=await(await fetch("map/grid_5px.geojson")).json();t(0,r=l.features),t(1,n=Te().projection(a))}catch(i){console.error("Error loading map:",i)}}),o.$$set=i=>{"projection"in i&&t(2,a=i.projection)},[r,n,a]}class Ge extends Q{constructor(e){super(),J(this,e,Oe,qe,X,{projection:2})}}function me(o,e,t){const a=o.slice();return a[14]=e[t],a}function pe(o){let e,t,a,r,n,i,l;return{c(){e=A("circle"),this.h()},l(s){e=N(s,"circle",{cx:!0,cy:!0,r:!0,fill:!0,"fill-opacity":!0,stroke:!0,"stroke-width":!0,class:!0}),k(e).forEach(m),this.h()},h(){u(e,"cx",t=o[14].x),u(e,"cy",a=o[14].y),u(e,"r",r=o[14].radius),u(e,"fill",n=o[5](o[14].avgYear)),u(e,"fill-opacity",i=o[3].length?o[3].includes(o[14])?1:.1:1),u(e,"stroke",l=o[5](o[14].avgYear)),u(e,"stroke-width","0.2"),u(e,"class","dot svelte-4aocx0")},m(s,h){b(s,e,h)},p(s,h){h&4&&t!==(t=s[14].x)&&u(e,"cx",t),h&4&&a!==(a=s[14].y)&&u(e,"cy",a),h&4&&r!==(r=s[14].radius)&&u(e,"r",r),h&4&&n!==(n=s[5](s[14].avgYear))&&u(e,"fill",n),h&12&&i!==(i=s[3].length?s[3].includes(s[14])?1:.1:1)&&u(e,"fill-opacity",i),h&4&&l!==(l=s[5](s[14].avgYear))&&u(e,"stroke",l)},d(s){s&&m(e)}}}function He(o){let e,t,a,r,n;a=new Ge({props:{projection:o[0]}});let i=z(o[2]),l=[];for(let s=0;s<i.length;s+=1)l[s]=pe(me(o,i,s));return{c(){e=A("svg"),t=A("g"),re(a.$$.fragment);for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=N(s,"svg",{class:!0});var h=k(e);t=N(h,"g",{transform:!0});var _=k(t);ae(a.$$.fragment,_);for(let f=0;f<l.length;f+=1)l[f].l(_);_.forEach(m),h.forEach(m),this.h()},h(){u(t,"transform",r="translate("+o[4].x+", "+o[4].y+") scale("+o[4].k+")"),u(e,"class","svelte-4aocx0")},m(s,h){b(s,e,h),D(e,t),te(a,t,null);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(t,null);o[9](e),n=!0},p(s,[h]){const _={};if(h&1&&(_.projection=s[0]),a.$set(_),h&44){i=z(s[2]);let f;for(f=0;f<i.length;f+=1){const d=me(s,i,f);l[f]?l[f].p(d,h):(l[f]=pe(d),l[f].c(),l[f].m(t,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=i.length}(!n||h&16&&r!==(r="translate("+s[4].x+", "+s[4].y+") scale("+s[4].k+")"))&&u(t,"transform",r)},i(s){n||(U(a.$$.fragment,s),n=!0)},o(s){G(a.$$.fragment,s),n=!1},d(s){s&&m(e),ee(a),se(l,s),o[9](null)}}}const R=4;function We(o,e,t){let{data:a=[]}=e,{currentYear:r}=e,{selectedCuratorData:n=null}=e,{projection:i}=e,l,s=[],h=[],_=fe,f;const d=R/2;function w(){if(!a||!l||!i||r===void 0)return[];const c=new Map;a.forEach((v,E)=>{const y=parseFloat(v.LONGITUDE),M=parseFloat(v.LATITUDE),Y=parseInt(v.ACC_YR);if(isNaN(y)||isNaN(M)||isNaN(Y))return;const[V,K]=i([y,M]);if(!V||!K)return;const Z=Math.floor(V/R),x=Math.floor(K/R),H=`${Z}-${x}`,le=Z*R+R/2,B=x*R+R/2,W=Math.max(0,r-Y),Pe=Math.min(W/100,1),Me=Math.max(.5,Pe*d),oe={accYear:Y,radius:Me,plantID:v.PLANTID?String(v.PLANTID).toLowerCase():String(E)};c.has(H)?c.get(H).records.push(oe):c.set(H,{x:le,y:B,records:[oe]})});const g=[];for(const[v,E]of c.entries()){const{x:y,y:M,records:Y}=E,V=Y.length,K=Y.reduce((B,W)=>B+W.radius,0),Z=Y.reduce((B,W)=>B+W.accYear,0),x=K/V,H=Math.floor(Z/V),le=Y.map(B=>B.plantID);g.push({id:v,x:y,y:M,avgYear:H,radius:x,plantIDs:le,count:V})}return g}ne(async()=>{if(await ze(),!l)return;f=Ue().scaleExtent([2,14]).on("zoom",Y=>{t(4,_=Y.transform)}),he(l).call(f);const c=l.clientWidth,g=l.clientHeight,v=2,E=c/2-v*(c/2.8),y=g/2-v*(g/2.2),M=fe.translate(E,y).scale(v);he(l).call(f.transform,M),t(4,_=M)});const C={"1870s":"#154406","1880s":"#2E5912","1890s":"#4A6F1D","1900s":"#67862A","1910s":"#839E38","1920s":"#9FB748","1930s":"#BCCF5A","1940s":"#DAC86A","1950s":"#F5B94F","1960s":"#E0963C","1970s":"#C06B2B","1980s":"#A34826","1990s":"#883421","2000s":"#6E241D","2010s":"#541916",Unknown:"#A0A0A0"};function p(c){if(!c||isNaN(c))return C.Unknown;const g=`${Math.floor(c/10)*10}s`;return C[g]||C.Unknown}function j(c){Fe[c?"unshift":"push"](()=>{l=c,t(1,l)})}return o.$$set=c=>{"data"in c&&t(6,a=c.data),"currentYear"in c&&t(7,r=c.currentYear),"selectedCuratorData"in c&&t(8,n=c.selectedCuratorData),"projection"in c&&t(0,i=c.projection)},o.$$.update=()=>{if(o.$$.dirty&194&&a&&l&&r!==void 0&&t(2,s=w()),o.$$.dirty&260)if(n!=null&&n.PlantDates){const c=[],g=[...n.PlantDates].sort((v,E)=>v.Date-E.Date);for(const v of g){const E=String(v.PlantID).toLowerCase(),y=s.find(M=>{var Y;return(Y=M.plantIDs)==null?void 0:Y.includes(E)});y&&!c.includes(y)&&c.push(y)}t(3,h=c)}else t(3,h=[])},[i,l,s,h,_,p,a,r,n,j]}class Xe extends Q{constructor(e){super(),J(this,e,We,He,X,{data:6,currentYear:7,selectedCuratorData:8,projection:0})}}function ve(o,e,t){const a=o.slice();return a[2]=e[t],a}function De(o){let e,t,a,r,n=o[2]+"",i,l;return{c(){e=P("div"),t=P("div"),a=T(),r=P("span"),i=L(n),l=T(),this.h()},l(s){e=I(s,"DIV",{class:!0});var h=k(e);t=I(h,"DIV",{class:!0,style:!0}),k(t).forEach(m),a=S(h),r=I(h,"SPAN",{class:!0});var _=k(r);i=F(_,n),_.forEach(m),l=S(h),h.forEach(m),this.h()},h(){u(t,"class","color-box svelte-uqwyjj"),ce(t,"background-color",o[0][o[2]]),u(r,"class","label svelte-uqwyjj"),u(e,"class","swatch-row svelte-uqwyjj")},m(s,h){b(s,e,h),D(e,t),D(e,a),D(e,r),D(r,i),D(e,l)},p(s,h){h&1&&ce(t,"background-color",s[0][s[2]])},d(s){s&&m(e)}}}function Qe(o){let e,t,a=z(o[1]),r=[];for(let n=0;n<a.length;n+=1)r[n]=De(ve(o,a,n));return{c(){e=P("div"),t=P("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=I(n,"DIV",{class:!0});var i=k(e);t=I(i,"DIV",{class:!0});var l=k(t);for(let s=0;s<r.length;s+=1)r[s].l(l);l.forEach(m),i.forEach(m),this.h()},h(){u(t,"class","color-swatch-section svelte-uqwyjj"),u(e,"class","legend-container svelte-uqwyjj")},m(n,i){b(n,e,i),D(e,t);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(t,null)},p(n,[i]){if(i&3){a=z(n[1]);let l;for(l=0;l<a.length;l+=1){const s=ve(n,a,l);r[l]?r[l].p(s,i):(r[l]=De(s),r[l].c(),r[l].m(t,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=a.length}},i:$,o:$,d(n){n&&m(e),se(r,n)}}}function Je(o,e,t){let{clusterColorMapping:a}=e;const r=Object.keys(a);return o.$$set=n=>{"clusterColorMapping"in n&&t(0,a=n.clusterColorMapping)},[a,r]}class Ke extends Q{constructor(e){super(),J(this,e,Je,Qe,X,{clusterColorMapping:0})}}function ke(o,e,t){const a=o.slice();return a[14]=e[t],a}function Ce(o,e,t){const a=o.slice();return a[21]=e[t],a}function Ze(o){const e=o.slice(),t=e[14].PlantDates.reduce((i,l)=>{const s=l.Date;return i[s]=(i[s]||0)+1,i},{});e[17]=t;const a=Object.entries(e[17]).sort((i,l)=>i[0]-l[0]);e[18]=a;const r=Math.max(...e[18].map(([i,l])=>l));e[19]=r;const n=e[18].map(function(...l){return o[11](e[19],...l)}).join(" ");return e[20]=n,e}function je(o){let e,t=o[6](o[14].CuratorName)+"",a;return{c(){e=P("p"),a=L(t),this.h()},l(r){e=I(r,"P",{class:!0});var n=k(e);a=F(n,t),n.forEach(m),this.h()},h(){u(e,"class","curator-info svelte-1uxudxj")},m(r,n){b(r,e,n),D(e,a)},p(r,n){n&4&&t!==(t=r[6](r[14].CuratorName)+"")&&q(a,t)},d(r){r&&m(e)}}}function we(o){let e,t,a,r,n,i,l,s=o[14].PlantDates.length+"",h,_,f=o[14].PlantDates.length===1?"":"s",d;function w(c,g){return c[14].PlantDates.length>1?ye:xe}function C(c,g){return g===ye?Ze(c):c}let p=w(o),j=p(C(o,p));return{c(){e=A("svg"),t=A("line"),j.c(),a=A("text"),r=L(o[0]),n=A("text"),i=L(o[1]),l=A("text"),h=L(s),_=L(" annotation"),d=L(f),this.h()},l(c){e=N(c,"svg",{class:!0,width:!0,height:!0});var g=k(e);t=N(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),k(t).forEach(m),j.l(g),a=N(g,"text",{x:!0,y:!0,"font-size":!0,fill:!0,class:!0});var v=k(a);r=F(v,o[0]),v.forEach(m),n=N(g,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var E=k(n);i=F(E,o[1]),E.forEach(m),l=N(g,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var y=k(l);h=F(y,s),_=F(y," annotation"),d=F(y,f),y.forEach(m),g.forEach(m),this.h()},h(){u(t,"x1","10"),u(t,"y1","12"),u(t,"x2","310"),u(t,"y2","12"),u(t,"stroke","#ccc"),u(t,"stroke-width","1"),u(t,"class","svelte-1uxudxj"),u(a,"x","10"),u(a,"y","8"),u(a,"font-size","8"),u(a,"fill","#333"),u(a,"class","svelte-1uxudxj"),u(n,"x","310"),u(n,"y","8"),u(n,"font-size","8"),u(n,"fill","#333"),u(n,"text-anchor","end"),u(n,"class","svelte-1uxudxj"),u(l,"x","160"),u(l,"y","23"),u(l,"font-size","8"),u(l,"fill","#333"),u(l,"text-anchor","middle"),u(l,"class","svelte-1uxudxj"),u(e,"class","histogram svelte-1uxudxj"),u(e,"width","320"),u(e,"height","25")},m(c,g){b(c,e,g),D(e,t),j.m(e,null),D(e,a),D(a,r),D(e,n),D(n,i),D(e,l),D(l,h),D(l,_),D(l,d)},p(c,g){p===(p=w(c))&&j?j.p(C(c,p),g):(j.d(1),j=p(C(c,p)),j&&(j.c(),j.m(e,a))),g&1&&q(r,c[0]),g&2&&q(i,c[1]),g&4&&s!==(s=c[14].PlantDates.length+"")&&q(h,s),g&4&&f!==(f=c[14].PlantDates.length===1?"":"s")&&q(d,f)},d(c){c&&m(e),j.d()}}}function xe(o){let e,t=z(o[14].PlantDates),a=[];for(let r=0;r<t.length;r+=1)a[r]=be(Ce(o,t,r));return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=O()},l(r){for(let n=0;n<a.length;n+=1)a[n].l(r);e=O()},m(r,n){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(r,n);b(r,e,n)},p(r,n){if(n&36){t=z(r[14].PlantDates);let i;for(i=0;i<t.length;i+=1){const l=Ce(r,t,i);a[i]?a[i].p(l,n):(a[i]=be(l),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=t.length}},d(r){r&&m(e),se(a,r)}}}function ye(o){let e,t;return{c(){e=A("polyline"),this.h()},l(a){e=N(a,"polyline",{fill:!0,stroke:!0,"stroke-width":!0,points:!0,class:!0}),k(e).forEach(m),this.h()},h(){u(e,"fill","none"),u(e,"stroke","green"),u(e,"stroke-width","1"),u(e,"points",t=o[20]),u(e,"class","svelte-1uxudxj")},m(a,r){b(a,e,r)},p(a,r){r&4&&t!==(t=a[20])&&u(e,"points",t)},d(a){a&&m(e)}}}function be(o){let e,t;return{c(){e=A("circle"),this.h()},l(a){e=N(a,"circle",{cx:!0,cy:!0,r:!0,class:!0}),k(e).forEach(m),this.h()},h(){u(e,"cx",t=o[5](o[21].Date)),u(e,"cy","12"),u(e,"r","1"),u(e,"class","svelte-1uxudxj")},m(a,r){b(a,e,r)},p(a,r){r&4&&t!==(t=a[5](a[21].Date))&&u(e,"cx",t)},d(a){a&&m(e)}}}function Ee(o,e){let t,a,r=Ye(e[14].CuratorName)+"",n,i,l,s,h,_,f=e[14].CuratorName===e[3]&&je(e),d=e[14].PlantDates&&e[14].PlantDates.length>0&&we(e);function w(){return e[12](e[14])}return{key:o,first:null,c(){t=P("li"),a=P("p"),n=L(r),i=T(),f&&f.c(),l=T(),d&&d.c(),s=T(),this.h()},l(C){t=I(C,"LI",{class:!0});var p=k(t);a=I(p,"P",{class:!0});var j=k(a);n=F(j,r),j.forEach(m),i=S(p),f&&f.l(p),l=S(p),d&&d.l(p),s=S(p),p.forEach(m),this.h()},h(){u(a,"class","curator-name svelte-1uxudxj"),u(t,"class","svelte-1uxudxj"),ue(t,"selected",e[14].CuratorName===e[3]),this.first=t},m(C,p){b(C,t,p),D(t,a),D(a,n),D(t,i),f&&f.m(t,null),D(t,l),d&&d.m(t,null),D(t,s),h||(_=Be(t,"click",w),h=!0)},p(C,p){e=C,p&4&&r!==(r=Ye(e[14].CuratorName)+"")&&q(n,r),e[14].CuratorName===e[3]?f?f.p(e,p):(f=je(e),f.c(),f.m(t,l)):f&&(f.d(1),f=null),e[14].PlantDates&&e[14].PlantDates.length>0?d?d.p(e,p):(d=we(e),d.c(),d.m(t,s)):d&&(d.d(1),d=null),p&12&&ue(t,"selected",e[14].CuratorName===e[3])},d(C){C&&m(t),f&&f.d(),d&&d.d(),h=!1,_()}}}function $e(o){let e,t,a,r,n=[],i=new Map,l;t=new Ke({props:{clusterColorMapping:o[7]}});let s=z(o[2]);const h=_=>_[14].CuratorName;for(let _=0;_<s.length;_+=1){let f=ke(o,s,_),d=h(f);i.set(d,n[_]=Ee(d,f))}return{c(){e=P("aside"),re(t.$$.fragment),a=T(),r=P("ul");for(let _=0;_<n.length;_+=1)n[_].c();this.h()},l(_){e=I(_,"ASIDE",{class:!0});var f=k(e);ae(t.$$.fragment,f),a=S(f),r=I(f,"UL",{class:!0});var d=k(r);for(let w=0;w<n.length;w+=1)n[w].l(d);d.forEach(m),f.forEach(m),this.h()},h(){u(r,"class","svelte-1uxudxj"),u(e,"class","curator-sidebar svelte-1uxudxj")},m(_,f){b(_,e,f),te(t,e,null),D(e,a),D(e,r);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(r,null);l=!0},p(_,[f]){f&127&&(s=z(_[2]),n=Ae(n,f,h,1,_,s,i,r,Ie,Ee,null,ke))},i(_){l||(U(t.$$.fragment,_),l=!0)},o(_){G(t.$$.fragment,_),l=!1},d(_){_&&m(e),ee(t);for(let f=0;f<n.length;f+=1)n[f].d()}}}function et(o){return o&&o.length>0?Math.min(...o):1/0}function Ye(o){return o.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function tt(o,e,t){let a,r,{minYear:n}=e,{maxYear:i}=e,{curatorData:l=[]}=e,{curatorInfoData:s=[]}=e,{initialCurator:h=""}=e;const _=Le();function f(c){t(3,r=c);const g=l.find(v=>v.CuratorName.toLowerCase()===c.toLowerCase());_("curatorChange",{selectedCuratorData:g})}function d(c){return i===n?160:10+(c-n)/(i-n)*300}function w(c){const g=s.find(v=>v.Name.toLowerCase()===c.toLowerCase());return(g==null?void 0:g.Information)||""}const C={"1870s":"#154406","1880s":"#2E5912","1890s":"#4A6F1D","1900s":"#67862A","1910s":"#839E38","1920s":"#9FB748","1930s":"#BCCF5A","1940s":"#DAC86A","1950s":"#F5B94F","1960s":"#E0963C","1970s":"#C06B2B","1980s":"#A34826","1990s":"#883421","2000s":"#6E241D","2010s":"#541916",Unknown:"#A0A0A0"},p=(c,[g,v])=>{const E=d(+g),M=12-(6+v/c*6);return`${E},${M}`},j=c=>f(c.CuratorName);return o.$$set=c=>{"minYear"in c&&t(0,n=c.minYear),"maxYear"in c&&t(1,i=c.maxYear),"curatorData"in c&&t(8,l=c.curatorData),"curatorInfoData"in c&&t(9,s=c.curatorInfoData),"initialCurator"in c&&t(10,h=c.initialCurator)},o.$$.update=()=>{o.$$.dirty&256&&t(2,a=l.map(c=>{var g;return{...c,minDate:et((g=c.PlantDates)==null?void 0:g.map(v=>v.Date))}}).sort((c,g)=>c.minDate-g.minDate)),o.$$.dirty&1028&&t(3,r=h||(a.length>0?a[0].CuratorName:""))},[n,i,a,r,f,d,w,C,l,s,h,p,j]}class at extends Q{constructor(e){super(),J(this,e,tt,$e,X,{minYear:0,maxYear:1,curatorData:8,curatorInfoData:9,initialCurator:10})}}function Ne(o){let e,t,a,r,n,i;return a=new Xe({props:{data:o[0],currentYear:o[3],selectedCuratorData:o[6],minYear:o[4],maxYear:o[5],projection:o[7]}}),n=new at({props:{curatorData:o[1],curatorInfoData:o[2],minYear:o[4],maxYear:o[5]}}),n.$on("curatorChange",o[8]),{c(){e=P("div"),t=P("div"),re(a.$$.fragment),r=T(),re(n.$$.fragment),this.h()},l(l){e=I(l,"DIV",{class:!0});var s=k(e);t=I(s,"DIV",{class:!0});var h=k(t);ae(a.$$.fragment,h),h.forEach(m),r=S(s),ae(n.$$.fragment,s),s.forEach(m),this.h()},h(){u(t,"class","main svelte-1tjw1ao"),u(e,"class","container svelte-1tjw1ao")},m(l,s){b(l,e,s),D(e,t),te(a,t,null),D(e,r),te(n,e,null),i=!0},p(l,s){const h={};s&1&&(h.data=l[0]),s&8&&(h.currentYear=l[3]),s&64&&(h.selectedCuratorData=l[6]),s&16&&(h.minYear=l[4]),s&32&&(h.maxYear=l[5]),s&128&&(h.projection=l[7]),a.$set(h);const _={};s&2&&(_.curatorData=l[1]),s&4&&(_.curatorInfoData=l[2]),s&16&&(_.minYear=l[4]),s&32&&(_.maxYear=l[5]),n.$set(_)},i(l){i||(U(a.$$.fragment,l),U(n.$$.fragment,l),i=!0)},o(l){G(a.$$.fragment,l),G(n.$$.fragment,l),i=!1},d(l){l&&m(e),ee(a),ee(n)}}}function rt(o){let e,t,a=o[0].length>0&&o[1].length>0&&o[2].length>0&&o[7]&&Ne(o);return{c(){a&&a.c(),e=O()},l(r){a&&a.l(r),e=O()},m(r,n){a&&a.m(r,n),b(r,e,n),t=!0},p(r,[n]){r[0].length>0&&r[1].length>0&&r[2].length>0&&r[7]?a?(a.p(r,n),n&135&&U(a,1)):(a=Ne(r),a.c(),U(a,1),a.m(e.parentNode,e)):a&&(Se(),G(a,1,1,()=>{a=null}),Re())},i(r){t||(U(a),t=!0)},o(r){G(a),t=!1},d(r){r&&m(e),a&&a.d(r)}}}let lt=1e3,nt=800;function st(o,e,t){let a=[],r=[],n=[],i=2011,l,s,h=null,_=[],f=null;ne(async()=>{const w=await fetch("data/ArnArbPlantsinfo.json");t(0,a=await w.json()),t(4,l=Math.min(...a.map(g=>parseInt(g.ACC_YR)))),t(5,s=Math.max(...a.map(g=>parseInt(g.ACC_YR)))),t(3,i=s);const C=await fetch("data/Curator_Plants_Dates.json");t(1,r=await C.json()),r.length>0&&t(6,h=r[0]);const p=await fetch("data/Curatorinfo.json");t(2,n=await p.json()),console.log(n),_=(await(await fetch("map/grid_3px.geojson")).json()).features,t(7,f=Ve().fitExtent([[0,0],[lt,nt]],{type:"FeatureCollection",features:_}))});function d(w){t(6,h=w.detail.selectedCuratorData)}return[a,r,n,i,l,s,h,f,d]}class ut extends Q{constructor(e){super(),J(this,e,st,rt,X,{})}}export{ut as component};
