import{s as W,n as T,d as m,i as w,p as H,r as le,O as A,h as b,P as M,x as f,Q as fe,e as D,v as Be,z as Fe,f as I,R as Te,l as N,S as se,y as he,j as R,k as S,t as U,m as B,T as Se,b as x,U as ge,V as Re}from"../chunks/Dtisy6-B.js";import{S as Q,i as J,d as $,t as V,a as F,m as ee,e as te,b as re,c as Ue,g as Ve}from"../chunks/BPUxpTHK.js";import{i as He,e as P,u as oe,d as ie,a as me,z as Oe,s as _e,m as Xe}from"../chunks/Bnte12vH.js";const qe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function de(o,e,t){const r=o.slice();return r[3]=e[t],r[5]=t,r}function pe(o){let e,t=[],r=new Map,a=P(o[0]);const l=n=>n[3].id||n[5];for(let n=0;n<a.length;n+=1){let s=de(o,a,n),c=l(s);r.set(c,t[n]=Ce(c,s))}return{c(){e=M("g");for(let n=0;n<t.length;n+=1)t[n].c()},l(n){e=A(n,"g",{});var s=b(e);for(let c=0;c<t.length;c+=1)t[c].l(s);s.forEach(m)},m(n,s){w(n,e,s);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(n,s){s&3&&(a=P(n[0]),t=oe(t,s,l,1,n,a,r,e,ie,Ce,null,de))},d(n){n&&m(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function Ce(o,e){let t,r,a;return{key:o,first:null,c(){t=M("path"),this.h()},l(l){t=A(l,"path",{d:!0,class:!0}),b(t).forEach(m),this.h()},h(){f(t,"d",r=e[1](e[3])),f(t,"class",a=fe("pixel "+e[3].properties.type)+" svelte-vrt0xx"),this.first=t},m(l,n){w(l,t,n)},p(l,n){e=l,n&3&&r!==(r=e[1](e[3]))&&f(t,"d",r),n&1&&a!==(a=fe("pixel "+e[3].properties.type)+" svelte-vrt0xx")&&f(t,"class",a)},d(l){l&&m(t)}}}function Ge(o){let e,t=o[0]&&o[1]&&pe(o);return{c(){t&&t.c(),e=H()},l(r){t&&t.l(r),e=H()},m(r,a){t&&t.m(r,a),w(r,e,a)},p(r,[a]){r[0]&&r[1]?t?t.p(r,a):(t=pe(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:T,o:T,d(r){r&&m(e),t&&t.d(r)}}}function We(o,e,t){let{projection:r}=e,a=null,l=null;return le(async()=>{try{const s=await(await fetch("map/grid_5px.geojson")).json();t(0,a=s.features),t(1,l=He().projection(r))}catch(n){console.error("Error loading map:",n)}}),o.$$set=n=>{"projection"in n&&t(2,r=n.projection)},[a,l,r]}class Qe extends Q{constructor(e){super(),J(this,e,We,Ge,W,{projection:2})}}const{Map:Je}=qe;function ke(o,e,t){const r=o.slice();return r[15]=e[t],r}function ve(o,e){let t,r,a,l,n,s,c;return{key:o,first:null,c(){t=M("circle"),this.h()},l(i){t=A(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0,"fill-opacity":!0,stroke:!0,"stroke-width":!0,class:!0}),b(t).forEach(m),this.h()},h(){f(t,"cx",r=e[15].x),f(t,"cy",a=e[15].y),f(t,"r",l=e[15].radius),f(t,"fill",n=e[5](e[15].avgYear)),f(t,"fill-opacity",s=e[3].length>0&&e[3].includes(e[15])?1:.1),f(t,"stroke",c=e[5](e[15].avgYear)),f(t,"stroke-width","0.2"),f(t,"class","dot svelte-1rm5e1i"),this.first=t},m(i,u){w(i,t,u)},p(i,u){e=i,u&2&&r!==(r=e[15].x)&&f(t,"cx",r),u&2&&a!==(a=e[15].y)&&f(t,"cy",a),u&2&&l!==(l=e[15].radius)&&f(t,"r",l),u&2&&n!==(n=e[5](e[15].avgYear))&&f(t,"fill",n),u&10&&s!==(s=e[3].length>0&&e[3].includes(e[15])?1:.1)&&f(t,"fill-opacity",s),u&2&&c!==(c=e[5](e[15].avgYear))&&f(t,"stroke",c)},d(i){i&&m(t)}}}function Ke(o){let e,t,r,a=[],l=new Je,n;r=new Qe({props:{projection:o[0]}});let s=P(o[1]);const c=i=>i[15].id;for(let i=0;i<s.length;i+=1){let u=ke(o,s,i),h=c(u);l.set(h,a[i]=ve(h,u))}return{c(){e=M("svg"),t=M("g"),re(r.$$.fragment);for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=A(i,"svg",{width:!0,height:!0,class:!0});var u=b(e);t=A(u,"g",{transform:!0});var h=b(t);te(r.$$.fragment,h);for(let p=0;p<a.length;p+=1)a[p].l(h);h.forEach(m),u.forEach(m),this.h()},h(){f(t,"transform",o[4]),f(e,"width","100%"),f(e,"height","100vh"),f(e,"class","svelte-1rm5e1i")},m(i,u){w(i,e,u),D(e,t),ee(r,t,null);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(t,null);o[10](e),n=!0},p(i,[u]){const h={};u&1&&(h.projection=i[0]),r.$set(h),u&42&&(s=P(i[1]),a=oe(a,u,c,1,i,s,l,t,ie,ve,null,ke)),(!n||u&16)&&f(t,"transform",i[4])},i(i){n||(F(r.$$.fragment,i),n=!0)},o(i){V(r.$$.fragment,i),n=!1},d(i){i&&m(e),$(r);for(let u=0;u<a.length;u+=1)a[u].d();o[10](null)}}}const Z=2.5,Ze=5,De=1;function xe(o,e,t){let r,{data:a=[]}=e,{currentYear:l}=e,{selectedCuratorData:n=null}=e,{projection:s}=e,c,i=me,u,h=[],p=[];const k={"1870s":"#184A2C","1880s":"#2A5D34","1890s":"#3C713C","1900s":"#4F8646","1910s":"#639C52","1920s":"#7BB35F","1930s":"#9DC46C","1940s":"#C1D67A","1950s":"#E1C169","1960s":"#D4A55C","1970s":"#C68850","1980s":"#B86B45","1990s":"#9C4E3A","2000s":"#80342F","2010s":"#662426",Unknown:"#CCCCCC"};function _(g){if(!g||isNaN(g))return k.Unknown;const d=`${Math.floor(g/10)*10}s`;return k[d]||k.Unknown}function v(){if(!a.length||!s||l==null)return[];const g=new Map;a.forEach((Y,E)=>{const y=parseFloat(Y.LONGITUDE),O=parseFloat(Y.LATITUDE),j=parseInt(Y.ACC_YR,10);if(isNaN(y)||isNaN(O)||isNaN(j))return;const[L,X]=s([y,O]);if(L==null||X==null||isNaN(L)||isNaN(X))return;const K=Math.floor(L/Z),q=Math.floor(X/Z),z=`${K}-${q}`,G=K*Z+Z/2,ae=q*Z+Z/2,ce=Math.max(0,l-j),ne=Math.min(ce/100,1),ue={radius:(De+ne*(Ze-De))/2,accYear:j,plantID:Y.PLANTID?String(Y.PLANTID).toLowerCase():String(E)};g.has(z)?g.get(z).records.push(ue):g.set(z,{x:G,y:ae,records:[ue]})});const d=[];for(const[Y,E]of g){const{x:y,y:O,records:j}=E,L=j.length,X=j.reduce((z,G)=>z+G.radius,0)/L,K=Math.floor(j.reduce((z,G)=>z+G.accYear,0)/L),q=j.map(z=>z.plantID);d.push({id:Y,x:y,y:O,radius:X,avgYear:K,plantIDs:q})}return d}le(async()=>{if(await Be(),!c)return;u=Oe().scaleExtent([2,14]).on("zoom",E=>{t(9,i=E.transform)}),_e(c).call(u);const g=c.clientWidth,d=c.clientHeight,Y=me.translate(g/2-2*(g/2.8),d/2-2*(d/2.2)).scale(2);_e(c).call(u.transform,Y)});function C(g){Fe[g?"unshift":"push"](()=>{c=g,t(2,c)})}return o.$$set=g=>{"data"in g&&t(6,a=g.data),"currentYear"in g&&t(7,l=g.currentYear),"selectedCuratorData"in g&&t(8,n=g.selectedCuratorData),"projection"in g&&t(0,s=g.projection)},o.$$.update=()=>{if(o.$$.dirty&512&&t(4,r=`translate(${i.x}, ${i.y}) scale(${i.k})`),o.$$.dirty&258)if(n!=null&&n.PlantDates){const g=[],d=[...n.PlantDates].sort((Y,E)=>Y.Date-E.Date);for(const Y of d){const E=String(Y.PlantID).toLowerCase(),y=h.find(O=>{var j;return(j=O.plantIDs)==null?void 0:j.includes(E)});y&&!g.includes(y)&&g.push(y)}t(3,p=g)}else t(3,p=[])},t(1,h=v()),[s,h,c,p,r,_,a,l,n,i,C]}class $e extends Q{constructor(e){super(),J(this,e,xe,Ke,W,{data:6,currentYear:7,selectedCuratorData:8,projection:0})}}function et(o){let e,t=`<h1 class="svelte-1ckskit">The Living Library of Trees</h1> <p class="svelte-1ckskit">The project visualizes the intertwined histories of plants and experts at
    the Arnold Arboretum. Drawing on centuries of archival material, the project
    combines close reading with deep learning to explore how knowledge has
    circulated through this living museum. By mapping the interconnected
    biographies of trees and curators, the interactive platform invites
    audiences to find their own path through the Arboretum and discover stories
    of infrastructure, care, and interspecies affinities.</p> <p class="svelte-1ckskit">A research project by <a href="https://mlml.io/p/arnold-arboretum/" target="_blank">metaLAB</a></p>`;return{c(){e=N("section"),e.innerHTML=t},l(r){e=I(r,"SECTION",{"data-svelte-h":!0}),Te(e)!=="svelte-1b2m2t0"&&(e.innerHTML=t)},m(r,a){w(r,e,a)},p:T,i:T,o:T,d(r){r&&m(e)}}}class tt extends Q{constructor(e){super(),J(this,e,null,et,W,{})}}function be(o,e,t){const r=o.slice();return r[2]=e[t],r}function we(o){let e,t,r=o[2]+"",a,l,n,s;return{c(){e=N("div"),t=N("span"),a=U(r),l=B(),n=N("div"),s=B(),this.h()},l(c){e=I(c,"DIV",{class:!0});var i=b(e);t=I(i,"SPAN",{class:!0});var u=b(t);a=R(u,r),u.forEach(m),l=S(i),n=I(i,"DIV",{class:!0,style:!0}),b(n).forEach(m),s=S(i),i.forEach(m),this.h()},h(){f(t,"class","label svelte-x9p4y9"),f(n,"class","color-box svelte-x9p4y9"),he(n,"background-color",o[0][o[2]]),f(e,"class","swatch-row svelte-x9p4y9")},m(c,i){w(c,e,i),D(e,t),D(t,a),D(e,l),D(e,n),D(e,s)},p(c,i){i&1&&he(n,"background-color",c[0][c[2]])},d(c){c&&m(e)}}}function rt(o){let e,t,r=P(o[1]),a=[];for(let l=0;l<r.length;l+=1)a[l]=we(be(o,r,l));return{c(){e=N("div"),t=N("div");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var n=b(e);t=I(n,"DIV",{class:!0});var s=b(t);for(let c=0;c<a.length;c+=1)a[c].l(s);s.forEach(m),n.forEach(m),this.h()},h(){f(t,"class","color-swatch-section svelte-x9p4y9"),f(e,"class","legend-container svelte-x9p4y9")},m(l,n){w(l,e,n),D(e,t);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(t,null)},p(l,[n]){if(n&3){r=P(l[1]);let s;for(s=0;s<r.length;s+=1){const c=be(l,r,s);a[s]?a[s].p(c,n):(a[s]=we(c),a[s].c(),a[s].m(t,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}},i:T,o:T,d(l){l&&m(e),se(a,l)}}}function at(o,e,t){let{clusterColorMapping:r}=e;const a=Object.keys(r);return o.$$set=l=>{"clusterColorMapping"in l&&t(0,r=l.clusterColorMapping)},[r,a]}class nt extends Q{constructor(e){super(),J(this,e,at,rt,W,{clusterColorMapping:0})}}function Ye(o,e,t){const r=o.slice();return r[11]=e[t],r}function ye(o,e,t){const r=o.slice();return r[21]=e[t],r}function Ee(o,e,t){const r=o.slice();return r[18]=e[t],r}function lt(o){const e=o.slice(),t=e[11].PlantDates.reduce((n,s)=>{const c=s.Date;return n[c]=(n[c]||0)+1,n},{});e[14]=t;const r=Object.entries(e[14]).sort((n,s)=>+n[0]-+s[0]);e[15]=r;const a=Math.max(...e[15].map(([n,s])=>s));e[16]=a;const l=e[7](e[15],e[16],2);return e[17]=l,e}function Ie(o){let e,t=o[5](o[11].CuratorName)+"",r;return{c(){e=N("p"),r=U(t),this.h()},l(a){e=I(a,"P",{class:!0});var l=b(e);r=R(l,t),l.forEach(m),this.h()},h(){f(e,"class","curator-info svelte-1a0akbn")},m(a,l){w(a,e,l),D(e,r)},p(a,l){l&1&&t!==(t=a[5](a[11].CuratorName)+"")&&x(r,t)},d(a){a&&m(e)}}}function Ne(o){let e,t,r,a,l,n,s,c=o[11].PlantDates.length+"",i,u,h=o[11].PlantDates.length===1?"":"s",p;function k(g,d){return g[11].PlantDates.length>1?je:st}function _(g,d){return d===je?lt(g):g}let v=k(o),C=v(_(o,v));return{c(){e=M("svg"),t=M("line"),C.c(),r=M("text"),a=U(o[2]),l=M("text"),n=U(o[3]),s=M("text"),i=U(c),u=U(" annotation"),p=U(h),this.h()},l(g){e=A(g,"svg",{class:!0,width:!0,height:!0});var d=b(e);t=A(d,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),b(t).forEach(m),C.l(d),r=A(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,class:!0});var Y=b(r);a=R(Y,o[2]),Y.forEach(m),l=A(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var E=b(l);n=R(E,o[3]),E.forEach(m),s=A(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var y=b(s);i=R(y,c),u=R(y," annotation"),p=R(y,h),y.forEach(m),d.forEach(m),this.h()},h(){f(t,"x1","10"),f(t,"y1","12"),f(t,"x2","310"),f(t,"y2","12"),f(t,"stroke","#ccc"),f(t,"stroke-width","1"),f(t,"class","svelte-1a0akbn"),f(r,"x","10"),f(r,"y","8"),f(r,"font-size","8"),f(r,"fill","#333"),f(r,"class","svelte-1a0akbn"),f(l,"x","310"),f(l,"y","8"),f(l,"font-size","8"),f(l,"fill","#333"),f(l,"text-anchor","end"),f(l,"class","svelte-1a0akbn"),f(s,"x","160"),f(s,"y","23"),f(s,"font-size","8"),f(s,"fill","#333"),f(s,"text-anchor","middle"),f(s,"class","svelte-1a0akbn"),f(e,"class","histogram svelte-1a0akbn"),f(e,"width","320"),f(e,"height","25")},m(g,d){w(g,e,d),D(e,t),C.m(e,null),D(e,r),D(r,a),D(e,l),D(l,n),D(e,s),D(s,i),D(s,u),D(s,p)},p(g,d){v===(v=k(g))&&C?C.p(_(g,v),d):(C.d(1),C=v(_(g,v)),C&&(C.c(),C.m(e,r))),d&4&&x(a,g[2]),d&8&&x(n,g[3]),d&1&&c!==(c=g[11].PlantDates.length+"")&&x(i,c),d&1&&h!==(h=g[11].PlantDates.length===1?"":"s")&&x(p,h)},d(g){g&&m(e),C.d()}}}function st(o){let e,t=P(o[11].PlantDates),r=[];for(let a=0;a<t.length;a+=1)r[a]=Ae(ye(o,t,a));return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=H()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=H()},m(a,l){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(a,l);w(a,e,l)},p(a,l){if(l&65){t=P(a[11].PlantDates);let n;for(n=0;n<t.length;n+=1){const s=ye(a,t,n);r[n]?r[n].p(s,l):(r[n]=Ae(s),r[n].c(),r[n].m(e.parentNode,e))}for(;n<r.length;n+=1)r[n].d(1);r.length=t.length}},d(a){a&&m(e),se(r,a)}}}function je(o){let e,t=P(o[17]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Me(Ee(o,t,a));return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=H()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=H()},m(a,l){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(a,l);w(a,e,l)},p(a,l){if(l&129){t=P(a[17]);let n;for(n=0;n<t.length;n+=1){const s=Ee(a,t,n);r[n]?r[n].p(s,l):(r[n]=Me(s),r[n].c(),r[n].m(e.parentNode,e))}for(;n<r.length;n+=1)r[n].d(1);r.length=t.length}},d(a){a&&m(e),se(r,a)}}}function Ae(o){let e,t;return{c(){e=M("circle"),this.h()},l(r){e=A(r,"circle",{cx:!0,cy:!0,r:!0,class:!0}),b(e).forEach(m),this.h()},h(){f(e,"cx",t=o[6](o[21].Date)),f(e,"cy","12"),f(e,"r","1"),f(e,"class","svelte-1a0akbn")},m(r,a){w(r,e,a)},p(r,a){a&1&&t!==(t=r[6](r[21].Date))&&f(e,"cx",t)},d(r){r&&m(e)}}}function Me(o){let e,t;return{c(){e=M("polyline"),this.h()},l(r){e=A(r,"polyline",{fill:!0,stroke:!0,"stroke-width":!0,points:!0,class:!0}),b(e).forEach(m),this.h()},h(){f(e,"fill","none"),f(e,"stroke","green"),f(e,"stroke-width","1"),f(e,"points",t=o[18]),f(e,"class","histogram-segment svelte-1a0akbn")},m(r,a){w(r,e,a)},p(r,a){a&1&&t!==(t=r[18])&&f(e,"points",t)},d(r){r&&m(e)}}}function Pe(o,e){var _;let t,r,a=Le(e[11].CuratorName)+"",l,n,s,c,i,u,h=e[11].CuratorName===e[1]&&Ie(e),p=((_=e[11].PlantDates)==null?void 0:_.length)&&Ne(e);function k(){return e[9](e[11])}return{key:o,first:null,c(){t=N("li"),r=N("p"),l=U(a),n=B(),h&&h.c(),s=B(),p&&p.c(),c=B(),this.h()},l(v){t=I(v,"LI",{class:!0});var C=b(t);r=I(C,"P",{class:!0});var g=b(r);l=R(g,a),g.forEach(m),n=S(C),h&&h.l(C),s=S(C),p&&p.l(C),c=S(C),C.forEach(m),this.h()},h(){f(r,"class","curator-name svelte-1a0akbn"),f(t,"class","svelte-1a0akbn"),ge(t,"selected",e[11].CuratorName===e[1]),this.first=t},m(v,C){w(v,t,C),D(t,r),D(r,l),D(t,n),h&&h.m(t,null),D(t,s),p&&p.m(t,null),D(t,c),i||(u=Re(t,"click",k),i=!0)},p(v,C){var g;e=v,C&1&&a!==(a=Le(e[11].CuratorName)+"")&&x(l,a),e[11].CuratorName===e[1]?h?h.p(e,C):(h=Ie(e),h.c(),h.m(t,s)):h&&(h.d(1),h=null),(g=e[11].PlantDates)!=null&&g.length?p?p.p(e,C):(p=Ne(e),p.c(),p.m(t,c)):p&&(p.d(1),p=null),C&3&&ge(t,"selected",e[11].CuratorName===e[1])},d(v){v&&m(t),h&&h.d(),p&&p.d(),i=!1,u()}}}function ot(o){let e,t,r="A list of all the Curators who contributed to the arboretum. Click a name to view the trees they worked on.",a,l=[],n=new Map,s=P(o[0]);const c=i=>i[11].CuratorName;for(let i=0;i<s.length;i+=1){let u=Ye(o,s,i),h=c(u);n.set(h,l[i]=Pe(h,u))}return{c(){e=N("ul"),t=N("p"),t.textContent=r,a=B();for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=I(i,"UL",{class:!0});var u=b(e);t=I(u,"P",{class:!0,"data-svelte-h":!0}),Te(t)!=="svelte-vyzu2q"&&(t.textContent=r),a=S(u);for(let h=0;h<l.length;h+=1)l[h].l(u);u.forEach(m),this.h()},h(){f(t,"class","curator-description svelte-1a0akbn"),f(e,"class","svelte-1a0akbn")},m(i,u){w(i,e,u),D(e,t),D(e,a);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null)},p(i,[u]){u&255&&(s=P(i[0]),l=oe(l,u,c,1,i,s,n,e,ie,Pe,null,Ye))},i:T,o:T,d(i){i&&m(e);for(let u=0;u<l.length;u+=1)l[u].d()}}}function Le(o){return o.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function it(o,e,t){let{curators:r=[]}=e,{selectedCurator:a}=e,{minYear:l}=e,{maxYear:n}=e,{curatorInfoData:s=[]}=e;const c=Se();function i(_){c("select",{curatorName:_})}function u(_){const v=s.find(C=>C.Name.toLowerCase()===_.toLowerCase());return(v==null?void 0:v.Information)||""}function h(_){return n===l?160:10+(_-l)/(n-l)*300}function p(_,v,C=5){if(_.length===0)return[];const g=[];let d=[];const[Y,E]=_[0],y=h(+Y),j=12-(6+E/v*6);d.push(`${y},${j}`);for(let L=1;L<_.length;L++){const[X,K]=_[L],q=+X,[z]=_[L-1],G=+z;q-G>C&&(d.length>0&&g.push(d.join(" ")),d=[]);const ae=h(q),ne=12-(6+K/v*6);d.push(`${ae},${ne}`)}return d.length>0&&g.push(d.join(" ")),g}const k=_=>i(_.CuratorName);return o.$$set=_=>{"curators"in _&&t(0,r=_.curators),"selectedCurator"in _&&t(1,a=_.selectedCurator),"minYear"in _&&t(2,l=_.minYear),"maxYear"in _&&t(3,n=_.maxYear),"curatorInfoData"in _&&t(8,s=_.curatorInfoData)},[r,a,l,n,i,u,h,p,s,k]}class ct extends Q{constructor(e){super(),J(this,e,it,ot,W,{curators:0,selectedCurator:1,minYear:2,maxYear:3,curatorInfoData:8})}}function ut(o){let e,t,r,a,l,n,s;return t=new tt({}),a=new nt({props:{clusterColorMapping:o[6]}}),n=new ct({props:{curators:o[4],selectedCurator:o[3],minYear:o[0],maxYear:o[1],curatorInfoData:o[2]}}),n.$on("select",o[5]),{c(){e=N("aside"),re(t.$$.fragment),r=B(),re(a.$$.fragment),l=B(),re(n.$$.fragment),this.h()},l(c){e=I(c,"ASIDE",{class:!0});var i=b(e);te(t.$$.fragment,i),r=S(i),te(a.$$.fragment,i),l=S(i),te(n.$$.fragment,i),i.forEach(m),this.h()},h(){f(e,"class","curator-sidebar svelte-9ba6kl")},m(c,i){w(c,e,i),ee(t,e,null),D(e,r),ee(a,e,null),D(e,l),ee(n,e,null),s=!0},p(c,[i]){const u={};i&16&&(u.curators=c[4]),i&8&&(u.selectedCurator=c[3]),i&1&&(u.minYear=c[0]),i&2&&(u.maxYear=c[1]),i&4&&(u.curatorInfoData=c[2]),n.$set(u)},i(c){s||(F(t.$$.fragment,c),F(a.$$.fragment,c),F(n.$$.fragment,c),s=!0)},o(c){V(t.$$.fragment,c),V(a.$$.fragment,c),V(n.$$.fragment,c),s=!1},d(c){c&&m(e),$(t),$(a),$(n)}}}function ft(o){return o&&o.length>0?Math.min(...o):1/0}function ht(o,e,t){let r,a,{minYear:l}=e,{maxYear:n}=e,{curatorData:s=[]}=e,{curatorInfoData:c=[]}=e,{initialCurator:i=""}=e;const u=Se();function h(k){t(3,a=k.detail.curatorName);const _=s.find(v=>v.CuratorName.toLowerCase()===a.toLowerCase());u("curatorChange",{selectedCuratorData:_})}const p={"1870s":"#184A2C","1880s":"#2A5D34","1890s":"#3C713C","1900s":"#4F8646","1910s":"#639C52","1920s":"#7BB35F","1930s":"#9DC46C","1940s":"#C1D67A","1950s":"#E1C169","1960s":"#D4A55C","1970s":"#C68850","1980s":"#B86B45","1990s":"#9C4E3A","2000s":"#80342F","2010s":"#662426",Unknown:"#CCCCCC"};return o.$$set=k=>{"minYear"in k&&t(0,l=k.minYear),"maxYear"in k&&t(1,n=k.maxYear),"curatorData"in k&&t(7,s=k.curatorData),"curatorInfoData"in k&&t(2,c=k.curatorInfoData),"initialCurator"in k&&t(8,i=k.initialCurator)},o.$$.update=()=>{o.$$.dirty&128&&t(4,r=s.map(k=>{var _;return{...k,minDate:ft((_=k.PlantDates)==null?void 0:_.map(v=>v.Date))}}).sort((k,_)=>k.minDate-_.minDate)),o.$$.dirty&256&&t(3,a=i)},[l,n,c,a,r,h,p,s,i]}class gt extends Q{constructor(e){super(),J(this,e,ht,ut,W,{minYear:0,maxYear:1,curatorData:7,curatorInfoData:2,initialCurator:8})}}function ze(o){let e,t,r,a,l,n;return r=new $e({props:{data:o[0],currentYear:o[3],selectedCuratorData:o[6],minYear:o[4],maxYear:o[5],projection:o[7]}}),l=new gt({props:{curatorData:o[1],curatorInfoData:o[2],minYear:o[4],maxYear:o[5]}}),l.$on("curatorChange",o[8]),{c(){e=N("div"),t=N("div"),re(r.$$.fragment),a=B(),re(l.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var c=b(e);t=I(c,"DIV",{class:!0});var i=b(t);te(r.$$.fragment,i),i.forEach(m),a=S(c),te(l.$$.fragment,c),c.forEach(m),this.h()},h(){f(t,"class","main svelte-ucod3x"),f(e,"class","container svelte-ucod3x")},m(s,c){w(s,e,c),D(e,t),ee(r,t,null),D(e,a),ee(l,e,null),n=!0},p(s,c){const i={};c&1&&(i.data=s[0]),c&8&&(i.currentYear=s[3]),c&64&&(i.selectedCuratorData=s[6]),c&16&&(i.minYear=s[4]),c&32&&(i.maxYear=s[5]),c&128&&(i.projection=s[7]),r.$set(i);const u={};c&2&&(u.curatorData=s[1]),c&4&&(u.curatorInfoData=s[2]),c&16&&(u.minYear=s[4]),c&32&&(u.maxYear=s[5]),l.$set(u)},i(s){n||(F(r.$$.fragment,s),F(l.$$.fragment,s),n=!0)},o(s){V(r.$$.fragment,s),V(l.$$.fragment,s),n=!1},d(s){s&&m(e),$(r),$(l)}}}function mt(o){let e,t,r=o[0].length>0&&o[1].length>0&&o[2].length>0&&o[7]&&ze(o);return{c(){r&&r.c(),e=H()},l(a){r&&r.l(a),e=H()},m(a,l){r&&r.m(a,l),w(a,e,l),t=!0},p(a,[l]){a[0].length>0&&a[1].length>0&&a[2].length>0&&a[7]?r?(r.p(a,l),l&135&&F(r,1)):(r=ze(a),r.c(),F(r,1),r.m(e.parentNode,e)):r&&(Ve(),V(r,1,1,()=>{r=null}),Ue())},i(a){t||(F(r),t=!0)},o(a){V(r),t=!1},d(a){a&&m(e),r&&r.d(a)}}}let _t=1e3,dt=800;function pt(o,e,t){let r=[],a=[],l=[],n=2011,s,c,i=null,u=[],h=null;le(async()=>{const k=await fetch("data/ArnArbPlantsinfo.json");t(0,r=await k.json()),t(4,s=Math.min(...r.map(d=>parseInt(d.ACC_YR)))),t(5,c=Math.max(...r.map(d=>parseInt(d.ACC_YR)))),t(3,n=c);const _=await fetch("data/Curator_Plants_Dates.json");t(1,a=await _.json()),a.length>0&&t(6,i=a);const v=await fetch("data/Curatorinfo.json");t(2,l=await v.json()),console.log(l),u=(await(await fetch("map/grid_3px.geojson")).json()).features,t(7,h=Xe().fitExtent([[0,0],[_t,dt]],{type:"FeatureCollection",features:u}))});function p(k){t(6,i=k.detail.selectedCuratorData)}return[r,a,l,n,s,c,i,h,p]}class wt extends Q{constructor(e){super(),J(this,e,pt,mt,W,{})}}export{wt as component};
