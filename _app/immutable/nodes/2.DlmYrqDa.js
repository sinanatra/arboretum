import{s as J,n as ee,d as m,i as Y,p as R,r as ie,O as j,h as D,P as I,x as h,Q as _e,e as C,v as Fe,z as Te,R as ce,f as z,l as P,y as oe,k as V,j as F,m as H,t as T,S as Re,b as q,T as ge,U as Ue}from"../chunks/Cxw3WnS6.js";import{S as K,i as Z,d as te,t as Q,a as O,m as ne,e as re,b as le,c as Ve,g as He}from"../chunks/CGTxhxGg.js";import{i as Oe,e as M,u as ue,d as fe,a as de,z as Xe,s as me,m as Ge}from"../chunks/CcNL7MI7.js";const We=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function pe(o,e,t){const n=o.slice();return n[3]=e[t],n[5]=t,n}function Ce(o){let e,t=[],n=new Map,r=M(o[0]);const l=a=>a[3].id||a[5];for(let a=0;a<r.length;a+=1){let s=pe(o,r,a),i=l(s);n.set(i,t[a]=ve(i,s))}return{c(){e=I("g");for(let a=0;a<t.length;a+=1)t[a].c()},l(a){e=j(a,"g",{});var s=D(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(m)},m(a,s){Y(a,e,s);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(a,s){s&3&&(r=M(a[0]),t=ue(t,s,l,1,a,r,n,e,fe,ve,null,pe))},d(a){a&&m(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function ve(o,e){let t,n,r;return{key:o,first:null,c(){t=I("path"),this.h()},l(l){t=j(l,"path",{d:!0,class:!0}),D(t).forEach(m),this.h()},h(){h(t,"d",n=e[1](e[3])),h(t,"class",r=_e("pixel "+e[3].properties.type)+" svelte-vrt0xx"),this.first=t},m(l,a){Y(l,t,a)},p(l,a){e=l,a&3&&n!==(n=e[1](e[3]))&&h(t,"d",n),a&1&&r!==(r=_e("pixel "+e[3].properties.type)+" svelte-vrt0xx")&&h(t,"class",r)},d(l){l&&m(t)}}}function qe(o){let e,t=o[0]&&o[1]&&Ce(o);return{c(){t&&t.c(),e=R()},l(n){t&&t.l(n),e=R()},m(n,r){t&&t.m(n,r),Y(n,e,r)},p(n,[r]){n[0]&&n[1]?t?t.p(n,r):(t=Ce(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ee,o:ee,d(n){n&&m(e),t&&t.d(n)}}}function Qe(o,e,t){let{projection:n}=e,r=null,l=null;return ie(async()=>{try{const s=await(await fetch("map/grid_5px.geojson")).json();t(0,r=s.features),t(1,l=Oe().projection(n))}catch(a){console.error("Error loading map:",a)}}),o.$$set=a=>{"projection"in a&&t(2,n=a.projection)},[r,l,n]}class Je extends K{constructor(e){super(),Z(this,e,Qe,qe,J,{projection:2})}}const{Map:Ke}=We;function De(o,e,t){const n=o.slice();return n[15]=e[t],n}function ke(o,e){let t,n,r,l,a,s,i;return{key:o,first:null,c(){t=I("circle"),this.h()},l(c){t=j(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0,"fill-opacity":!0,stroke:!0,"stroke-width":!0,class:!0}),D(t).forEach(m),this.h()},h(){h(t,"cx",n=e[15].x),h(t,"cy",r=e[15].y),h(t,"r",l=e[15].radius),h(t,"fill",a=e[5](e[15].avgYear)),h(t,"fill-opacity",s=e[3].length>0&&e[3].includes(e[15])?1:.1),h(t,"stroke",i=e[5](e[15].avgYear)),h(t,"stroke-width","0.2"),h(t,"class","dot svelte-1rm5e1i"),this.first=t},m(c,f){Y(c,t,f)},p(c,f){e=c,f&2&&n!==(n=e[15].x)&&h(t,"cx",n),f&2&&r!==(r=e[15].y)&&h(t,"cy",r),f&2&&l!==(l=e[15].radius)&&h(t,"r",l),f&2&&a!==(a=e[5](e[15].avgYear))&&h(t,"fill",a),f&10&&s!==(s=e[3].length>0&&e[3].includes(e[15])?1:.1)&&h(t,"fill-opacity",s),f&2&&i!==(i=e[5](e[15].avgYear))&&h(t,"stroke",i)},d(c){c&&m(t)}}}function Ze(o){let e,t,n,r=[],l=new Ke,a;n=new Je({props:{projection:o[0]}});let s=M(o[1]);const i=c=>c[15].id;for(let c=0;c<s.length;c+=1){let f=De(o,s,c),_=i(f);l.set(_,r[c]=ke(_,f))}return{c(){e=I("svg"),t=I("g"),le(n.$$.fragment);for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=j(c,"svg",{width:!0,height:!0,class:!0});var f=D(e);t=j(f,"g",{transform:!0});var _=D(t);re(n.$$.fragment,_);for(let g=0;g<r.length;g+=1)r[g].l(_);_.forEach(m),f.forEach(m),this.h()},h(){h(t,"transform",o[4]),h(e,"width","100%"),h(e,"height","100vh"),h(e,"class","svelte-1rm5e1i")},m(c,f){Y(c,e,f),C(e,t),ne(n,t,null);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(t,null);o[10](e),a=!0},p(c,[f]){const _={};f&1&&(_.projection=c[0]),n.$set(_),f&42&&(s=M(c[1]),r=ue(r,f,i,1,c,s,l,t,fe,ke,null,De)),(!a||f&16)&&h(t,"transform",c[4])},i(c){a||(O(n.$$.fragment,c),a=!0)},o(c){Q(n.$$.fragment,c),a=!1},d(c){c&&m(e),te(n);for(let f=0;f<r.length;f+=1)r[f].d();o[10](null)}}}const W=2.5,xe=5,we=1;function $e(o,e,t){let n,{data:r=[]}=e,{currentYear:l}=e,{selectedCuratorData:a=null}=e,{projection:s}=e,i,c=de,f,_=[],g=[];const b={"1870s":"#184A2C","1880s":"#2A5D34","1890s":"#3C713C","1900s":"#4F8646","1910s":"#639C52","1920s":"#7BB35F","1930s":"#9DC46C","1940s":"#C1D67A","1950s":"#E1C169","1960s":"#D4A55C","1970s":"#C68850","1980s":"#B86B45","1990s":"#9C4E3A","2000s":"#80342F","2010s":"#662426",Unknown:"#CCCCCC"};function y(u){if(!u||isNaN(u))return b.Unknown;const d=`${Math.floor(u/10)*10}s`;return b[d]||b.Unknown}function p(){if(!r.length||!s||l==null)return[];const u=new Map;r.forEach((v,E)=>{const k=parseFloat(v.LONGITUDE),S=parseFloat(v.LATITUDE),N=parseInt(v.ACC_YR,10);if(isNaN(k)||isNaN(S)||isNaN(N))return;const[B,X]=s([k,S]);if(B==null||X==null||isNaN(B)||isNaN(X))return;const G=Math.floor(B/W),L=Math.floor(X/W),A=`${G}-${L}`,U=G*W+W/2,x=L*W+W/2,ae=Math.max(0,l-N),se=Math.min(ae/100,1),$={radius:(we+se*(xe-we))/2,accYear:N,plantID:v.PLANTID?String(v.PLANTID).toLowerCase():String(E)};u.has(A)?u.get(A).records.push($):u.set(A,{x:U,y:x,records:[$]})});const d=[];for(const[v,E]of u){const{x:k,y:S,records:N}=E,B=N.length,X=N.reduce((A,U)=>A+U.radius,0)/B,G=Math.floor(N.reduce((A,U)=>A+U.accYear,0)/B),L=N.map(A=>A.plantID);d.push({id:v,x:k,y:S,radius:X,avgYear:G,plantIDs:L})}return d}ie(async()=>{if(await Fe(),!i)return;f=Xe().scaleExtent([2,14]).on("zoom",E=>{t(9,c=E.transform)}),me(i).call(f);const u=i.clientWidth,d=i.clientHeight,v=de.translate(u/2-2*(u/2.8),d/2-2*(d/2.2)).scale(2);me(i).call(f.transform,v)});function w(u){Te[u?"unshift":"push"](()=>{i=u,t(2,i)})}return o.$$set=u=>{"data"in u&&t(6,r=u.data),"currentYear"in u&&t(7,l=u.currentYear),"selectedCuratorData"in u&&t(8,a=u.selectedCuratorData),"projection"in u&&t(0,s=u.projection)},o.$$.update=()=>{if(o.$$.dirty&512&&t(4,n=`translate(${c.x}, ${c.y}) scale(${c.k})`),o.$$.dirty&258)if(a!=null&&a.PlantDates){const u=[],d=[...a.PlantDates].sort((v,E)=>v.Date-E.Date);for(const v of d){const E=String(v.PlantID).toLowerCase(),k=_.find(S=>{var N;return(N=S.plantIDs)==null?void 0:N.includes(E)});k&&!u.includes(k)&&u.push(k)}t(3,g=u)}else t(3,g=[])},t(1,_=p()),[s,_,i,g,n,y,r,l,a,c,w]}class et extends K{constructor(e){super(),Z(this,e,$e,Ze,J,{data:6,currentYear:7,selectedCuratorData:8,projection:0})}}function be(o,e,t){const n=o.slice();return n[2]=e[t],n}function ye(o){let e,t,n,r,l=o[2]+"",a,s;return{c(){e=P("div"),t=P("div"),n=H(),r=P("span"),a=T(l),s=H(),this.h()},l(i){e=z(i,"DIV",{class:!0});var c=D(e);t=z(c,"DIV",{class:!0,style:!0}),D(t).forEach(m),n=V(c),r=z(c,"SPAN",{class:!0});var f=D(r);a=F(f,l),f.forEach(m),s=V(c),c.forEach(m),this.h()},h(){h(t,"class","color-box svelte-mfvoar"),oe(t,"background-color",o[0][o[2]]),h(r,"class","label svelte-mfvoar"),h(e,"class","swatch-row svelte-mfvoar")},m(i,c){Y(i,e,c),C(e,t),C(e,n),C(e,r),C(r,a),C(e,s)},p(i,c){c&1&&oe(t,"background-color",i[0][i[2]])},d(i){i&&m(e)}}}function tt(o){let e,t,n=M(o[1]),r=[];for(let l=0;l<n.length;l+=1)r[l]=ye(be(o,n,l));return{c(){e=P("div"),t=P("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=z(l,"DIV",{class:!0});var a=D(e);t=z(a,"DIV",{class:!0});var s=D(t);for(let i=0;i<r.length;i+=1)r[i].l(s);s.forEach(m),a.forEach(m),this.h()},h(){h(t,"class","color-swatch-section svelte-mfvoar"),h(e,"class","legend-container svelte-mfvoar")},m(l,a){Y(l,e,a),C(e,t);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(t,null)},p(l,[a]){if(a&3){n=M(l[1]);let s;for(s=0;s<n.length;s+=1){const i=be(l,n,s);r[s]?r[s].p(i,a):(r[s]=ye(i),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:ee,o:ee,d(l){l&&m(e),ce(r,l)}}}function nt(o,e,t){let{clusterColorMapping:n}=e;const r=Object.keys(n);return o.$$set=l=>{"clusterColorMapping"in l&&t(0,n=l.clusterColorMapping)},[n,r]}class rt extends K{constructor(e){super(),Z(this,e,nt,tt,J,{clusterColorMapping:0})}}function Ye(o,e,t){const n=o.slice();return n[14]=e[t],n}function Ee(o,e,t){const n=o.slice();return n[24]=e[t],n}function Ne(o,e,t){const n=o.slice();return n[21]=e[t],n[23]=t,n}function lt(o){const e=o.slice(),t=e[14].PlantDates.reduce((a,s)=>{const i=s.Date;return a[i]=(a[i]||0)+1,a},{});e[17]=t;const n=Object.entries(e[17]).sort((a,s)=>+a[0]-+s[0]);e[18]=n;const r=Math.max(...e[18].map(([a,s])=>s));e[19]=r;const l=e[8](e[18],e[19],2);return e[20]=l,e}function je(o){let e,t=o[6](o[14].CuratorName)+"",n;return{c(){e=P("p"),n=T(t),this.h()},l(r){e=z(r,"P",{class:!0});var l=D(e);n=F(l,t),l.forEach(m),this.h()},h(){h(e,"class","curator-info svelte-183ndnz")},m(r,l){Y(r,e,l),C(e,n)},p(r,l){l&4&&t!==(t=r[6](r[14].CuratorName)+"")&&q(n,t)},d(r){r&&m(e)}}}function Ie(o){let e,t,n,r,l,a,s,i=o[14].PlantDates.length+"",c,f,_=o[14].PlantDates.length===1?"":"s",g;function b(u,d){return u[14].PlantDates.length>1?ze:at}function y(u,d){return d===ze?lt(u):u}let p=b(o),w=p(y(o,p));return{c(){e=I("svg"),t=I("line"),w.c(),n=I("text"),r=T(o[0]),l=I("text"),a=T(o[1]),s=I("text"),c=T(i),f=T(" annotation"),g=T(_),this.h()},l(u){e=j(u,"svg",{class:!0,width:!0,height:!0});var d=D(e);t=j(d,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),D(t).forEach(m),w.l(d),n=j(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,class:!0});var v=D(n);r=F(v,o[0]),v.forEach(m),l=j(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var E=D(l);a=F(E,o[1]),E.forEach(m),s=j(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var k=D(s);c=F(k,i),f=F(k," annotation"),g=F(k,_),k.forEach(m),d.forEach(m),this.h()},h(){h(t,"x1","10"),h(t,"y1","12"),h(t,"x2","310"),h(t,"y2","12"),h(t,"stroke","#ccc"),h(t,"stroke-width","1"),h(t,"class","svelte-183ndnz"),h(n,"x","10"),h(n,"y","8"),h(n,"font-size","8"),h(n,"fill","#333"),h(n,"class","svelte-183ndnz"),h(l,"x","310"),h(l,"y","8"),h(l,"font-size","8"),h(l,"fill","#333"),h(l,"text-anchor","end"),h(l,"class","svelte-183ndnz"),h(s,"x","160"),h(s,"y","23"),h(s,"font-size","8"),h(s,"fill","#333"),h(s,"text-anchor","middle"),h(s,"class","svelte-183ndnz"),h(e,"class","histogram svelte-183ndnz"),h(e,"width","320"),h(e,"height","25")},m(u,d){Y(u,e,d),C(e,t),w.m(e,null),C(e,n),C(n,r),C(e,l),C(l,a),C(e,s),C(s,c),C(s,f),C(s,g)},p(u,d){p===(p=b(u))&&w?w.p(y(u,p),d):(w.d(1),w=p(y(u,p)),w&&(w.c(),w.m(e,n))),d&1&&q(r,u[0]),d&2&&q(a,u[1]),d&4&&i!==(i=u[14].PlantDates.length+"")&&q(c,i),d&4&&_!==(_=u[14].PlantDates.length===1?"":"s")&&q(g,_)},d(u){u&&m(e),w.d()}}}function at(o){let e,t=M(o[14].PlantDates),n=[];for(let r=0;r<t.length;r+=1)n[r]=Pe(Ee(o,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=R()},l(r){for(let l=0;l<n.length;l+=1)n[l].l(r);e=R()},m(r,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,l);Y(r,e,l)},p(r,l){if(l&36){t=M(r[14].PlantDates);let a;for(a=0;a<t.length;a+=1){const s=Ee(r,t,a);n[a]?n[a].p(s,l):(n[a]=Pe(s),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&m(e),ce(n,r)}}}function ze(o){let e,t=M(o[20]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Me(Ne(o,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=R()},l(r){for(let l=0;l<n.length;l+=1)n[l].l(r);e=R()},m(r,l){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,l);Y(r,e,l)},p(r,l){if(l&260){t=M(r[20]);let a;for(a=0;a<t.length;a+=1){const s=Ne(r,t,a);n[a]?n[a].p(s,l):(n[a]=Me(s),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&m(e),ce(n,r)}}}function Pe(o){let e,t;return{c(){e=I("circle"),this.h()},l(n){e=j(n,"circle",{cx:!0,cy:!0,r:!0,class:!0}),D(e).forEach(m),this.h()},h(){h(e,"cx",t=o[5](o[24].Date)),h(e,"cy","12"),h(e,"r","1"),h(e,"class","svelte-183ndnz")},m(n,r){Y(n,e,r)},p(n,r){r&4&&t!==(t=n[5](n[24].Date))&&h(e,"cx",t)},d(n){n&&m(e)}}}function Me(o){let e,t;return{c(){e=I("polyline"),this.h()},l(n){e=j(n,"polyline",{fill:!0,stroke:!0,"stroke-width":!0,points:!0,class:!0,style:!0}),D(e).forEach(m),this.h()},h(){h(e,"fill","none"),h(e,"stroke","green"),h(e,"stroke-width","1"),h(e,"points",t=o[21]),h(e,"class","histogram-segment svelte-183ndnz"),oe(e,"transition","stroke-dasharray 0.3s ease-in-out")},m(n,r){Y(n,e,r)},p(n,r){r&4&&t!==(t=n[21])&&h(e,"points",t)},d(n){n&&m(e)}}}function Ae(o,e){let t,n,r=Le(e[14].CuratorName)+"",l,a,s,i,c,f,_=e[14].CuratorName===e[3]&&je(e),g=e[14].PlantDates&&e[14].PlantDates.length>0&&Ie(e);function b(){return e[12](e[14])}return{key:o,first:null,c(){t=P("li"),n=P("p"),l=T(r),a=H(),_&&_.c(),s=H(),g&&g.c(),i=H(),this.h()},l(y){t=z(y,"LI",{class:!0});var p=D(t);n=z(p,"P",{class:!0});var w=D(n);l=F(w,r),w.forEach(m),a=V(p),_&&_.l(p),s=V(p),g&&g.l(p),i=V(p),p.forEach(m),this.h()},h(){h(n,"class","curator-name svelte-183ndnz"),h(t,"class","svelte-183ndnz"),ge(t,"selected",e[14].CuratorName===e[3]),this.first=t},m(y,p){Y(y,t,p),C(t,n),C(n,l),C(t,a),_&&_.m(t,null),C(t,s),g&&g.m(t,null),C(t,i),c||(f=Ue(t,"click",b),c=!0)},p(y,p){e=y,p&4&&r!==(r=Le(e[14].CuratorName)+"")&&q(l,r),e[14].CuratorName===e[3]?_?_.p(e,p):(_=je(e),_.c(),_.m(t,s)):_&&(_.d(1),_=null),e[14].PlantDates&&e[14].PlantDates.length>0?g?g.p(e,p):(g=Ie(e),g.c(),g.m(t,i)):g&&(g.d(1),g=null),p&12&&ge(t,"selected",e[14].CuratorName===e[3])},d(y){y&&m(t),_&&_.d(),g&&g.d(),c=!1,f()}}}function st(o){let e,t,n,r,l=[],a=new Map,s;t=new rt({props:{clusterColorMapping:o[7]}});let i=M(o[2]);const c=f=>f[14].CuratorName;for(let f=0;f<i.length;f+=1){let _=Ye(o,i,f),g=c(_);a.set(g,l[f]=Ae(g,_))}return{c(){e=P("aside"),le(t.$$.fragment),n=H(),r=P("ul");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){e=z(f,"ASIDE",{class:!0});var _=D(e);re(t.$$.fragment,_),n=V(_),r=z(_,"UL",{class:!0});var g=D(r);for(let b=0;b<l.length;b+=1)l[b].l(g);g.forEach(m),_.forEach(m),this.h()},h(){h(r,"class","svelte-183ndnz"),h(e,"class","curator-sidebar svelte-183ndnz")},m(f,_){Y(f,e,_),ne(t,e,null),C(e,n),C(e,r);for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(r,null);s=!0},p(f,[_]){_&383&&(i=M(f[2]),l=ue(l,_,c,1,f,i,a,r,fe,Ae,null,Ye))},i(f){s||(O(t.$$.fragment,f),s=!0)},o(f){Q(t.$$.fragment,f),s=!1},d(f){f&&m(e),te(t);for(let _=0;_<l.length;_+=1)l[_].d()}}}function ot(o){return o&&o.length>0?Math.min(...o):1/0}function Le(o){return o.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function it(o,e,t){let n,r,{minYear:l}=e,{maxYear:a}=e,{curatorData:s=[]}=e,{curatorInfoData:i=[]}=e,{initialCurator:c=""}=e;const f=Re();function _(u){t(3,r=u);const d=s.find(v=>v.CuratorName.toLowerCase()===u.toLowerCase());f("curatorChange",{selectedCuratorData:d})}function g(u){return a===l?160:10+(u-l)/(a-l)*300}function b(u){const d=i.find(v=>v.Name.toLowerCase()===u.toLowerCase());return(d==null?void 0:d.Information)||""}const y={"1870s":"#184A2C","1880s":"#2A5D34","1890s":"#3C713C","1900s":"#4F8646","1910s":"#639C52","1920s":"#7BB35F","1930s":"#9DC46C","1940s":"#C1D67A","1950s":"#E1C169","1960s":"#D4A55C","1970s":"#C68850","1980s":"#B86B45","1990s":"#9C4E3A","2000s":"#80342F","2010s":"#662426",Unknown:"#CCCCCC"};function p(u,d,v=5){if(u.length===0)return[];const E=[];let k=[];const[S,N]=u[0],B=g(+S),G=12-(6+N/d*6);k.push(`${B},${G}`);for(let L=1;L<u.length;L++){const[A,U]=u[L],x=+A,[ae]=u[L-1],se=+ae;x-se>v&&(k.length>0&&E.push(k.join(" ")),k=[]);const he=g(x),$=12-(6+U/d*6);k.push(`${he},${$}`)}return k.length>0&&E.push(k.join(" ")),E}const w=u=>_(u.CuratorName);return o.$$set=u=>{"minYear"in u&&t(0,l=u.minYear),"maxYear"in u&&t(1,a=u.maxYear),"curatorData"in u&&t(9,s=u.curatorData),"curatorInfoData"in u&&t(10,i=u.curatorInfoData),"initialCurator"in u&&t(11,c=u.initialCurator)},o.$$.update=()=>{o.$$.dirty&512&&t(2,n=s.map(u=>{var d;return{...u,minDate:ot((d=u.PlantDates)==null?void 0:d.map(v=>v.Date))}}).sort((u,d)=>u.minDate-d.minDate)),o.$$.dirty&2052&&t(3,r=c||(n.length>0?n[0].CuratorName:""))},[l,a,n,r,_,g,b,y,p,s,i,c,w]}class ct extends K{constructor(e){super(),Z(this,e,it,st,J,{minYear:0,maxYear:1,curatorData:9,curatorInfoData:10,initialCurator:11})}}function Se(o){let e,t,n,r,l,a;return n=new et({props:{data:o[0],currentYear:o[3],selectedCuratorData:o[6],minYear:o[4],maxYear:o[5],projection:o[7]}}),l=new ct({props:{curatorData:o[1],curatorInfoData:o[2],minYear:o[4],maxYear:o[5]}}),l.$on("curatorChange",o[8]),{c(){e=P("div"),t=P("div"),le(n.$$.fragment),r=H(),le(l.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var i=D(e);t=z(i,"DIV",{class:!0});var c=D(t);re(n.$$.fragment,c),c.forEach(m),r=V(i),re(l.$$.fragment,i),i.forEach(m),this.h()},h(){h(t,"class","main svelte-1tjw1ao"),h(e,"class","container svelte-1tjw1ao")},m(s,i){Y(s,e,i),C(e,t),ne(n,t,null),C(e,r),ne(l,e,null),a=!0},p(s,i){const c={};i&1&&(c.data=s[0]),i&8&&(c.currentYear=s[3]),i&64&&(c.selectedCuratorData=s[6]),i&16&&(c.minYear=s[4]),i&32&&(c.maxYear=s[5]),i&128&&(c.projection=s[7]),n.$set(c);const f={};i&2&&(f.curatorData=s[1]),i&4&&(f.curatorInfoData=s[2]),i&16&&(f.minYear=s[4]),i&32&&(f.maxYear=s[5]),l.$set(f)},i(s){a||(O(n.$$.fragment,s),O(l.$$.fragment,s),a=!0)},o(s){Q(n.$$.fragment,s),Q(l.$$.fragment,s),a=!1},d(s){s&&m(e),te(n),te(l)}}}function ut(o){let e,t,n=o[0].length>0&&o[1].length>0&&o[2].length>0&&o[7]&&Se(o);return{c(){n&&n.c(),e=R()},l(r){n&&n.l(r),e=R()},m(r,l){n&&n.m(r,l),Y(r,e,l),t=!0},p(r,[l]){r[0].length>0&&r[1].length>0&&r[2].length>0&&r[7]?n?(n.p(r,l),l&135&&O(n,1)):(n=Se(r),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(He(),Q(n,1,1,()=>{n=null}),Ve())},i(r){t||(O(n),t=!0)},o(r){Q(n),t=!1},d(r){r&&m(e),n&&n.d(r)}}}let ft=1e3,ht=800;function _t(o,e,t){let n=[],r=[],l=[],a=2011,s,i,c=null,f=[],_=null;ie(async()=>{const b=await fetch("data/ArnArbPlantsinfo.json");t(0,n=await b.json()),t(4,s=Math.min(...n.map(d=>parseInt(d.ACC_YR)))),t(5,i=Math.max(...n.map(d=>parseInt(d.ACC_YR)))),t(3,a=i);const y=await fetch("data/Curator_Plants_Dates.json");t(1,r=await y.json()),r.length>0&&t(6,c=r[0]);const p=await fetch("data/Curatorinfo.json");t(2,l=await p.json()),console.log(l),f=(await(await fetch("map/grid_3px.geojson")).json()).features,t(7,_=Ge().fitExtent([[0,0],[ft,ht]],{type:"FeatureCollection",features:f}))});function g(b){t(6,c=b.detail.selectedCuratorData)}return[n,r,l,a,s,i,c,_,g]}class pt extends K{constructor(e){super(),Z(this,e,_t,ut,J,{})}}export{pt as component};
