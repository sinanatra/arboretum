import{s as W,n as T,d as m,i as w,p as H,r as le,O as A,h as b,P as M,x as f,Q as fe,e as D,v as Be,z as Fe,f as I,R as Te,l as N,S as se,y as he,k as S,j as R,m as B,t as U,T as Se,b as x,U as ge,V as Re}from"../chunks/Dtisy6-B.js";import{S as Q,i as J,d as $,t as V,a as F,m as ee,e as te,b as re,c as Ue,g as Ve}from"../chunks/BPUxpTHK.js";import{i as He,e as P,u as oe,d as ie,a as me,z as Oe,s as _e,m as Xe}from"../chunks/Bnte12vH.js";const qe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function de(o,e,t){const r=o.slice();return r[3]=e[t],r[5]=t,r}function pe(o){let e,t=[],r=new Map,n=P(o[0]);const a=l=>l[3].id||l[5];for(let l=0;l<n.length;l+=1){let s=de(o,n,l),c=a(s);r.set(c,t[l]=ve(c,s))}return{c(){e=M("g");for(let l=0;l<t.length;l+=1)t[l].c()},l(l){e=A(l,"g",{});var s=b(e);for(let c=0;c<t.length;c+=1)t[c].l(s);s.forEach(m)},m(l,s){w(l,e,s);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(l,s){s&3&&(n=P(l[0]),t=oe(t,s,a,1,l,n,r,e,ie,ve,null,de))},d(l){l&&m(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function ve(o,e){let t,r,n;return{key:o,first:null,c(){t=M("path"),this.h()},l(a){t=A(a,"path",{d:!0,class:!0}),b(t).forEach(m),this.h()},h(){f(t,"d",r=e[1](e[3])),f(t,"class",n=fe("pixel "+e[3].properties.type)+" svelte-vrt0xx"),this.first=t},m(a,l){w(a,t,l)},p(a,l){e=a,l&3&&r!==(r=e[1](e[3]))&&f(t,"d",r),l&1&&n!==(n=fe("pixel "+e[3].properties.type)+" svelte-vrt0xx")&&f(t,"class",n)},d(a){a&&m(t)}}}function Ge(o){let e,t=o[0]&&o[1]&&pe(o);return{c(){t&&t.c(),e=H()},l(r){t&&t.l(r),e=H()},m(r,n){t&&t.m(r,n),w(r,e,n)},p(r,[n]){r[0]&&r[1]?t?t.p(r,n):(t=pe(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:T,o:T,d(r){r&&m(e),t&&t.d(r)}}}function We(o,e,t){let{projection:r}=e,n=null,a=null;return le(async()=>{try{const s=await(await fetch("map/grid_5px.geojson")).json();t(0,n=s.features),t(1,a=He().projection(r))}catch(l){console.error("Error loading map:",l)}}),o.$$set=l=>{"projection"in l&&t(2,r=l.projection)},[n,a,r]}class Qe extends Q{constructor(e){super(),J(this,e,We,Ge,W,{projection:2})}}const{Map:Je}=qe;function Ce(o,e,t){const r=o.slice();return r[15]=e[t],r}function ke(o,e){let t,r,n,a,l,s,c;return{key:o,first:null,c(){t=M("circle"),this.h()},l(i){t=A(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0,"fill-opacity":!0,stroke:!0,"stroke-width":!0,class:!0}),b(t).forEach(m),this.h()},h(){f(t,"cx",r=e[15].x),f(t,"cy",n=e[15].y),f(t,"r",a=e[15].radius),f(t,"fill",l=e[5](e[15].avgYear)),f(t,"fill-opacity",s=e[3].length>0&&e[3].includes(e[15])?1:.1),f(t,"stroke",c=e[5](e[15].avgYear)),f(t,"stroke-width","0.2"),f(t,"class","dot svelte-1rm5e1i"),this.first=t},m(i,u){w(i,t,u)},p(i,u){e=i,u&2&&r!==(r=e[15].x)&&f(t,"cx",r),u&2&&n!==(n=e[15].y)&&f(t,"cy",n),u&2&&a!==(a=e[15].radius)&&f(t,"r",a),u&2&&l!==(l=e[5](e[15].avgYear))&&f(t,"fill",l),u&10&&s!==(s=e[3].length>0&&e[3].includes(e[15])?1:.1)&&f(t,"fill-opacity",s),u&2&&c!==(c=e[5](e[15].avgYear))&&f(t,"stroke",c)},d(i){i&&m(t)}}}function Ke(o){let e,t,r,n=[],a=new Je,l;r=new Qe({props:{projection:o[0]}});let s=P(o[1]);const c=i=>i[15].id;for(let i=0;i<s.length;i+=1){let u=Ce(o,s,i),h=c(u);a.set(h,n[i]=ke(h,u))}return{c(){e=M("svg"),t=M("g"),re(r.$$.fragment);for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=A(i,"svg",{width:!0,height:!0,class:!0});var u=b(e);t=A(u,"g",{transform:!0});var h=b(t);te(r.$$.fragment,h);for(let p=0;p<n.length;p+=1)n[p].l(h);h.forEach(m),u.forEach(m),this.h()},h(){f(t,"transform",o[4]),f(e,"width","100%"),f(e,"height","100vh"),f(e,"class","svelte-1rm5e1i")},m(i,u){w(i,e,u),D(e,t),ee(r,t,null);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(t,null);o[10](e),l=!0},p(i,[u]){const h={};u&1&&(h.projection=i[0]),r.$set(h),u&42&&(s=P(i[1]),n=oe(n,u,c,1,i,s,a,t,ie,ke,null,Ce)),(!l||u&16)&&f(t,"transform",i[4])},i(i){l||(F(r.$$.fragment,i),l=!0)},o(i){V(r.$$.fragment,i),l=!1},d(i){i&&m(e),$(r);for(let u=0;u<n.length;u+=1)n[u].d();o[10](null)}}}const Z=2.5,Ze=5,De=1;function xe(o,e,t){let r,{data:n=[]}=e,{currentYear:a}=e,{selectedCuratorData:l=null}=e,{projection:s}=e,c,i=me,u,h=[],p=[];const C={"1870s":"#184A2C","1880s":"#2A5D34","1890s":"#3C713C","1900s":"#4F8646","1910s":"#639C52","1920s":"#7BB35F","1930s":"#9DC46C","1940s":"#C1D67A","1950s":"#E1C169","1960s":"#D4A55C","1970s":"#C68850","1980s":"#B86B45","1990s":"#9C4E3A","2000s":"#80342F","2010s":"#662426",Unknown:"#CCCCCC"};function _(g){if(!g||isNaN(g))return C.Unknown;const d=`${Math.floor(g/10)*10}s`;return C[d]||C.Unknown}function k(){if(!n.length||!s||a==null)return[];const g=new Map;n.forEach((y,E)=>{const Y=parseFloat(y.LONGITUDE),O=parseFloat(y.LATITUDE),j=parseInt(y.ACC_YR,10);if(isNaN(Y)||isNaN(O)||isNaN(j))return;const[L,X]=s([Y,O]);if(L==null||X==null||isNaN(L)||isNaN(X))return;const K=Math.floor(L/Z),q=Math.floor(X/Z),z=`${K}-${q}`,G=K*Z+Z/2,ne=q*Z+Z/2,ce=Math.max(0,a-j),ae=Math.min(ce/100,1),ue={radius:(De+ae*(Ze-De))/2,accYear:j,plantID:y.PLANTID?String(y.PLANTID).toLowerCase():String(E)};g.has(z)?g.get(z).records.push(ue):g.set(z,{x:G,y:ne,records:[ue]})});const d=[];for(const[y,E]of g){const{x:Y,y:O,records:j}=E,L=j.length,X=j.reduce((z,G)=>z+G.radius,0)/L,K=Math.floor(j.reduce((z,G)=>z+G.accYear,0)/L),q=j.map(z=>z.plantID);d.push({id:y,x:Y,y:O,radius:X,avgYear:K,plantIDs:q})}return d}le(async()=>{if(await Be(),!c)return;u=Oe().scaleExtent([2,14]).on("zoom",E=>{t(9,i=E.transform)}),_e(c).call(u);const g=c.clientWidth,d=c.clientHeight,y=me.translate(g/2-2*(g/2.8),d/2-2*(d/2.2)).scale(2);_e(c).call(u.transform,y)});function v(g){Fe[g?"unshift":"push"](()=>{c=g,t(2,c)})}return o.$$set=g=>{"data"in g&&t(6,n=g.data),"currentYear"in g&&t(7,a=g.currentYear),"selectedCuratorData"in g&&t(8,l=g.selectedCuratorData),"projection"in g&&t(0,s=g.projection)},o.$$.update=()=>{if(o.$$.dirty&512&&t(4,r=`translate(${i.x}, ${i.y}) scale(${i.k})`),o.$$.dirty&258)if(l!=null&&l.PlantDates){const g=[],d=[...l.PlantDates].sort((y,E)=>y.Date-E.Date);for(const y of d){const E=String(y.PlantID).toLowerCase(),Y=h.find(O=>{var j;return(j=O.plantIDs)==null?void 0:j.includes(E)});Y&&!g.includes(Y)&&g.push(Y)}t(3,p=g)}else t(3,p=[])},t(1,h=k()),[s,h,c,p,r,_,n,a,l,i,v]}class $e extends Q{constructor(e){super(),J(this,e,xe,Ke,W,{data:6,currentYear:7,selectedCuratorData:8,projection:0})}}function et(o){let e,t=`<h1 class="svelte-1ckskit">The Living Library of Trees</h1> <p class="svelte-1ckskit">The project visualizes the intertwined histories of plants and experts at
    the Arnold Arboretum. Drawing on centuries of archival material, the project
    combines close reading with deep learning to explore how knowledge has
    circulated through this living museum. By mapping the interconnected
    biographies of trees and curators, the interactive platform invites
    audiences to find their own path through the Arboretum and discover stories
    of infrastructure, care, and interspecies affinities.</p> <p class="svelte-1ckskit">A research project by <a href="https://mlml.io/p/arnold-arboretum/" target="_blank">metaLAB</a></p>`;return{c(){e=N("section"),e.innerHTML=t},l(r){e=I(r,"SECTION",{"data-svelte-h":!0}),Te(e)!=="svelte-1b2m2t0"&&(e.innerHTML=t)},m(r,n){w(r,e,n)},p:T,i:T,o:T,d(r){r&&m(e)}}}class tt extends Q{constructor(e){super(),J(this,e,null,et,W,{})}}function be(o,e,t){const r=o.slice();return r[2]=e[t],r}function we(o){let e,t,r,n,a=o[2]+"",l,s;return{c(){e=N("div"),t=N("div"),r=B(),n=N("span"),l=U(a),s=B(),this.h()},l(c){e=I(c,"DIV",{class:!0});var i=b(e);t=I(i,"DIV",{class:!0,style:!0}),b(t).forEach(m),r=S(i),n=I(i,"SPAN",{class:!0});var u=b(n);l=R(u,a),u.forEach(m),s=S(i),i.forEach(m),this.h()},h(){f(t,"class","color-box svelte-8ti3fm"),he(t,"background-color",o[0][o[2]]),f(n,"class","label svelte-8ti3fm"),f(e,"class","swatch-row svelte-8ti3fm")},m(c,i){w(c,e,i),D(e,t),D(e,r),D(e,n),D(n,l),D(e,s)},p(c,i){i&1&&he(t,"background-color",c[0][c[2]])},d(c){c&&m(e)}}}function rt(o){let e,t,r=P(o[1]),n=[];for(let a=0;a<r.length;a+=1)n[a]=we(be(o,r,a));return{c(){e=N("div"),t=N("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0});var l=b(e);t=I(l,"DIV",{class:!0});var s=b(t);for(let c=0;c<n.length;c+=1)n[c].l(s);s.forEach(m),l.forEach(m),this.h()},h(){f(t,"class","color-swatch-section svelte-8ti3fm"),f(e,"class","legend-container svelte-8ti3fm")},m(a,l){w(a,e,l),D(e,t);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(a,[l]){if(l&3){r=P(a[1]);let s;for(s=0;s<r.length;s+=1){const c=be(a,r,s);n[s]?n[s].p(c,l):(n[s]=we(c),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},i:T,o:T,d(a){a&&m(e),se(n,a)}}}function nt(o,e,t){let{clusterColorMapping:r}=e;const n=Object.keys(r);return o.$$set=a=>{"clusterColorMapping"in a&&t(0,r=a.clusterColorMapping)},[r,n]}class at extends Q{constructor(e){super(),J(this,e,nt,rt,W,{clusterColorMapping:0})}}function ye(o,e,t){const r=o.slice();return r[11]=e[t],r}function Ye(o,e,t){const r=o.slice();return r[21]=e[t],r}function Ee(o,e,t){const r=o.slice();return r[18]=e[t],r}function lt(o){const e=o.slice(),t=e[11].PlantDates.reduce((l,s)=>{const c=s.Date;return l[c]=(l[c]||0)+1,l},{});e[14]=t;const r=Object.entries(e[14]).sort((l,s)=>+l[0]-+s[0]);e[15]=r;const n=Math.max(...e[15].map(([l,s])=>s));e[16]=n;const a=e[7](e[15],e[16],2);return e[17]=a,e}function Ie(o){let e,t=o[5](o[11].CuratorName)+"",r;return{c(){e=N("p"),r=U(t),this.h()},l(n){e=I(n,"P",{class:!0});var a=b(e);r=R(a,t),a.forEach(m),this.h()},h(){f(e,"class","curator-info svelte-d0byv6")},m(n,a){w(n,e,a),D(e,r)},p(n,a){a&1&&t!==(t=n[5](n[11].CuratorName)+"")&&x(r,t)},d(n){n&&m(e)}}}function Ne(o){let e,t,r,n,a,l,s,c=o[11].PlantDates.length+"",i,u,h=o[11].PlantDates.length===1?"":"s",p;function C(g,d){return g[11].PlantDates.length>1?je:st}function _(g,d){return d===je?lt(g):g}let k=C(o),v=k(_(o,k));return{c(){e=M("svg"),t=M("line"),v.c(),r=M("text"),n=U(o[2]),a=M("text"),l=U(o[3]),s=M("text"),i=U(c),u=U(" annotation"),p=U(h),this.h()},l(g){e=A(g,"svg",{class:!0,width:!0,height:!0});var d=b(e);t=A(d,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),b(t).forEach(m),v.l(d),r=A(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,class:!0});var y=b(r);n=R(y,o[2]),y.forEach(m),a=A(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var E=b(a);l=R(E,o[3]),E.forEach(m),s=A(d,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var Y=b(s);i=R(Y,c),u=R(Y," annotation"),p=R(Y,h),Y.forEach(m),d.forEach(m),this.h()},h(){f(t,"x1","10"),f(t,"y1","12"),f(t,"x2","310"),f(t,"y2","12"),f(t,"stroke","#ccc"),f(t,"stroke-width","1"),f(t,"class","svelte-d0byv6"),f(r,"x","10"),f(r,"y","8"),f(r,"font-size","8"),f(r,"fill","#333"),f(r,"class","svelte-d0byv6"),f(a,"x","310"),f(a,"y","8"),f(a,"font-size","8"),f(a,"fill","#333"),f(a,"text-anchor","end"),f(a,"class","svelte-d0byv6"),f(s,"x","160"),f(s,"y","23"),f(s,"font-size","8"),f(s,"fill","#333"),f(s,"text-anchor","middle"),f(s,"class","svelte-d0byv6"),f(e,"class","histogram svelte-d0byv6"),f(e,"width","320"),f(e,"height","25")},m(g,d){w(g,e,d),D(e,t),v.m(e,null),D(e,r),D(r,n),D(e,a),D(a,l),D(e,s),D(s,i),D(s,u),D(s,p)},p(g,d){k===(k=C(g))&&v?v.p(_(g,k),d):(v.d(1),v=k(_(g,k)),v&&(v.c(),v.m(e,r))),d&4&&x(n,g[2]),d&8&&x(l,g[3]),d&1&&c!==(c=g[11].PlantDates.length+"")&&x(i,c),d&1&&h!==(h=g[11].PlantDates.length===1?"":"s")&&x(p,h)},d(g){g&&m(e),v.d()}}}function st(o){let e,t=P(o[11].PlantDates),r=[];for(let n=0;n<t.length;n+=1)r[n]=Ae(Ye(o,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=H()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);e=H()},m(n,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,a);w(n,e,a)},p(n,a){if(a&65){t=P(n[11].PlantDates);let l;for(l=0;l<t.length;l+=1){const s=Ye(n,t,l);r[l]?r[l].p(s,a):(r[l]=Ae(s),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=t.length}},d(n){n&&m(e),se(r,n)}}}function je(o){let e,t=P(o[17]),r=[];for(let n=0;n<t.length;n+=1)r[n]=Me(Ee(o,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=H()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);e=H()},m(n,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,a);w(n,e,a)},p(n,a){if(a&129){t=P(n[17]);let l;for(l=0;l<t.length;l+=1){const s=Ee(n,t,l);r[l]?r[l].p(s,a):(r[l]=Me(s),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=t.length}},d(n){n&&m(e),se(r,n)}}}function Ae(o){let e,t;return{c(){e=M("circle"),this.h()},l(r){e=A(r,"circle",{cx:!0,cy:!0,r:!0,class:!0}),b(e).forEach(m),this.h()},h(){f(e,"cx",t=o[6](o[21].Date)),f(e,"cy","12"),f(e,"r","1"),f(e,"class","svelte-d0byv6")},m(r,n){w(r,e,n)},p(r,n){n&1&&t!==(t=r[6](r[21].Date))&&f(e,"cx",t)},d(r){r&&m(e)}}}function Me(o){let e,t;return{c(){e=M("polyline"),this.h()},l(r){e=A(r,"polyline",{fill:!0,stroke:!0,"stroke-width":!0,points:!0,class:!0}),b(e).forEach(m),this.h()},h(){f(e,"fill","none"),f(e,"stroke","green"),f(e,"stroke-width","1"),f(e,"points",t=o[18]),f(e,"class","histogram-segment svelte-d0byv6")},m(r,n){w(r,e,n)},p(r,n){n&1&&t!==(t=r[18])&&f(e,"points",t)},d(r){r&&m(e)}}}function Pe(o,e){var _;let t,r,n=Le(e[11].CuratorName)+"",a,l,s,c,i,u,h=e[11].CuratorName===e[1]&&Ie(e),p=((_=e[11].PlantDates)==null?void 0:_.length)&&Ne(e);function C(){return e[9](e[11])}return{key:o,first:null,c(){t=N("li"),r=N("p"),a=U(n),l=B(),h&&h.c(),s=B(),p&&p.c(),c=B(),this.h()},l(k){t=I(k,"LI",{class:!0});var v=b(t);r=I(v,"P",{class:!0});var g=b(r);a=R(g,n),g.forEach(m),l=S(v),h&&h.l(v),s=S(v),p&&p.l(v),c=S(v),v.forEach(m),this.h()},h(){f(r,"class","curator-name svelte-d0byv6"),f(t,"class","svelte-d0byv6"),ge(t,"selected",e[11].CuratorName===e[1]),this.first=t},m(k,v){w(k,t,v),D(t,r),D(r,a),D(t,l),h&&h.m(t,null),D(t,s),p&&p.m(t,null),D(t,c),i||(u=Re(t,"click",C),i=!0)},p(k,v){var g;e=k,v&1&&n!==(n=Le(e[11].CuratorName)+"")&&x(a,n),e[11].CuratorName===e[1]?h?h.p(e,v):(h=Ie(e),h.c(),h.m(t,s)):h&&(h.d(1),h=null),(g=e[11].PlantDates)!=null&&g.length?p?p.p(e,v):(p=Ne(e),p.c(),p.m(t,c)):p&&(p.d(1),p=null),v&3&&ge(t,"selected",e[11].CuratorName===e[1])},d(k){k&&m(t),h&&h.d(),p&&p.d(),i=!1,u()}}}function ot(o){let e,t,r="A list of all the Curators who contributed to the arboretum. Click a name to view the trees they worked on.",n,a=[],l=new Map,s=P(o[0]);const c=i=>i[11].CuratorName;for(let i=0;i<s.length;i+=1){let u=ye(o,s,i),h=c(u);l.set(h,a[i]=Pe(h,u))}return{c(){e=N("ul"),t=N("p"),t.textContent=r,n=B();for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=I(i,"UL",{class:!0});var u=b(e);t=I(u,"P",{class:!0,"data-svelte-h":!0}),Te(t)!=="svelte-vyzu2q"&&(t.textContent=r),n=S(u);for(let h=0;h<a.length;h+=1)a[h].l(u);u.forEach(m),this.h()},h(){f(t,"class","curator-description svelte-d0byv6"),f(e,"class","svelte-d0byv6")},m(i,u){w(i,e,u),D(e,t),D(e,n);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null)},p(i,[u]){u&255&&(s=P(i[0]),a=oe(a,u,c,1,i,s,l,e,ie,Pe,null,ye))},i:T,o:T,d(i){i&&m(e);for(let u=0;u<a.length;u+=1)a[u].d()}}}function Le(o){return o.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function it(o,e,t){let{curators:r=[]}=e,{selectedCurator:n}=e,{minYear:a}=e,{maxYear:l}=e,{curatorInfoData:s=[]}=e;const c=Se();function i(_){c("select",{curatorName:_})}function u(_){const k=s.find(v=>v.Name.toLowerCase()===_.toLowerCase());return(k==null?void 0:k.Information)||""}function h(_){return l===a?160:10+(_-a)/(l-a)*300}function p(_,k,v=5){if(_.length===0)return[];const g=[];let d=[];const[y,E]=_[0],Y=h(+y),j=12-(6+E/k*6);d.push(`${Y},${j}`);for(let L=1;L<_.length;L++){const[X,K]=_[L],q=+X,[z]=_[L-1],G=+z;q-G>v&&(d.length>0&&g.push(d.join(" ")),d=[]);const ne=h(q),ae=12-(6+K/k*6);d.push(`${ne},${ae}`)}return d.length>0&&g.push(d.join(" ")),g}const C=_=>i(_.CuratorName);return o.$$set=_=>{"curators"in _&&t(0,r=_.curators),"selectedCurator"in _&&t(1,n=_.selectedCurator),"minYear"in _&&t(2,a=_.minYear),"maxYear"in _&&t(3,l=_.maxYear),"curatorInfoData"in _&&t(8,s=_.curatorInfoData)},[r,n,a,l,i,u,h,p,s,C]}class ct extends Q{constructor(e){super(),J(this,e,it,ot,W,{curators:0,selectedCurator:1,minYear:2,maxYear:3,curatorInfoData:8})}}function ut(o){let e,t,r,n,a,l,s;return t=new tt({}),n=new at({props:{clusterColorMapping:o[6]}}),l=new ct({props:{curators:o[4],selectedCurator:o[3],minYear:o[0],maxYear:o[1],curatorInfoData:o[2]}}),l.$on("select",o[5]),{c(){e=N("aside"),re(t.$$.fragment),r=B(),re(n.$$.fragment),a=B(),re(l.$$.fragment),this.h()},l(c){e=I(c,"ASIDE",{class:!0});var i=b(e);te(t.$$.fragment,i),r=S(i),te(n.$$.fragment,i),a=S(i),te(l.$$.fragment,i),i.forEach(m),this.h()},h(){f(e,"class","curator-sidebar svelte-9ba6kl")},m(c,i){w(c,e,i),ee(t,e,null),D(e,r),ee(n,e,null),D(e,a),ee(l,e,null),s=!0},p(c,[i]){const u={};i&16&&(u.curators=c[4]),i&8&&(u.selectedCurator=c[3]),i&1&&(u.minYear=c[0]),i&2&&(u.maxYear=c[1]),i&4&&(u.curatorInfoData=c[2]),l.$set(u)},i(c){s||(F(t.$$.fragment,c),F(n.$$.fragment,c),F(l.$$.fragment,c),s=!0)},o(c){V(t.$$.fragment,c),V(n.$$.fragment,c),V(l.$$.fragment,c),s=!1},d(c){c&&m(e),$(t),$(n),$(l)}}}function ft(o){return o&&o.length>0?Math.min(...o):1/0}function ht(o,e,t){let r,n,{minYear:a}=e,{maxYear:l}=e,{curatorData:s=[]}=e,{curatorInfoData:c=[]}=e,{initialCurator:i=""}=e;const u=Se();function h(C){t(3,n=C.detail.curatorName);const _=s.find(k=>k.CuratorName.toLowerCase()===n.toLowerCase());u("curatorChange",{selectedCuratorData:_})}const p={"1870s":"#184A2C","1880s":"#2A5D34","1890s":"#3C713C","1900s":"#4F8646","1910s":"#639C52","1920s":"#7BB35F","1930s":"#9DC46C","1940s":"#C1D67A","1950s":"#E1C169","1960s":"#D4A55C","1970s":"#C68850","1980s":"#B86B45","1990s":"#9C4E3A","2000s":"#80342F","2010s":"#662426",Unknown:"#CCCCCC"};return o.$$set=C=>{"minYear"in C&&t(0,a=C.minYear),"maxYear"in C&&t(1,l=C.maxYear),"curatorData"in C&&t(7,s=C.curatorData),"curatorInfoData"in C&&t(2,c=C.curatorInfoData),"initialCurator"in C&&t(8,i=C.initialCurator)},o.$$.update=()=>{o.$$.dirty&128&&t(4,r=s.map(C=>{var _;return{...C,minDate:ft((_=C.PlantDates)==null?void 0:_.map(k=>k.Date))}}).sort((C,_)=>C.minDate-_.minDate)),o.$$.dirty&256&&t(3,n=i)},[a,l,c,n,r,h,p,s,i]}class gt extends Q{constructor(e){super(),J(this,e,ht,ut,W,{minYear:0,maxYear:1,curatorData:7,curatorInfoData:2,initialCurator:8})}}function ze(o){let e,t,r,n,a,l;return r=new $e({props:{data:o[0],currentYear:o[3],selectedCuratorData:o[6],minYear:o[4],maxYear:o[5],projection:o[7]}}),a=new gt({props:{curatorData:o[1],curatorInfoData:o[2],minYear:o[4],maxYear:o[5]}}),a.$on("curatorChange",o[8]),{c(){e=N("div"),t=N("div"),re(r.$$.fragment),n=B(),re(a.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var c=b(e);t=I(c,"DIV",{class:!0});var i=b(t);te(r.$$.fragment,i),i.forEach(m),n=S(c),te(a.$$.fragment,c),c.forEach(m),this.h()},h(){f(t,"class","main svelte-ucod3x"),f(e,"class","container svelte-ucod3x")},m(s,c){w(s,e,c),D(e,t),ee(r,t,null),D(e,n),ee(a,e,null),l=!0},p(s,c){const i={};c&1&&(i.data=s[0]),c&8&&(i.currentYear=s[3]),c&64&&(i.selectedCuratorData=s[6]),c&16&&(i.minYear=s[4]),c&32&&(i.maxYear=s[5]),c&128&&(i.projection=s[7]),r.$set(i);const u={};c&2&&(u.curatorData=s[1]),c&4&&(u.curatorInfoData=s[2]),c&16&&(u.minYear=s[4]),c&32&&(u.maxYear=s[5]),a.$set(u)},i(s){l||(F(r.$$.fragment,s),F(a.$$.fragment,s),l=!0)},o(s){V(r.$$.fragment,s),V(a.$$.fragment,s),l=!1},d(s){s&&m(e),$(r),$(a)}}}function mt(o){let e,t,r=o[0].length>0&&o[1].length>0&&o[2].length>0&&o[7]&&ze(o);return{c(){r&&r.c(),e=H()},l(n){r&&r.l(n),e=H()},m(n,a){r&&r.m(n,a),w(n,e,a),t=!0},p(n,[a]){n[0].length>0&&n[1].length>0&&n[2].length>0&&n[7]?r?(r.p(n,a),a&135&&F(r,1)):(r=ze(n),r.c(),F(r,1),r.m(e.parentNode,e)):r&&(Ve(),V(r,1,1,()=>{r=null}),Ue())},i(n){t||(F(r),t=!0)},o(n){V(r),t=!1},d(n){n&&m(e),r&&r.d(n)}}}let _t=1e3,dt=800;function pt(o,e,t){let r=[],n=[],a=[],l=2011,s,c,i=null,u=[],h=null;le(async()=>{const C=await fetch("data/ArnArbPlantsinfo.json");t(0,r=await C.json()),t(4,s=Math.min(...r.map(d=>parseInt(d.ACC_YR)))),t(5,c=Math.max(...r.map(d=>parseInt(d.ACC_YR)))),t(3,l=c);const _=await fetch("data/Curator_Plants_Dates.json");t(1,n=await _.json()),n.length>0&&t(6,i=n);const k=await fetch("data/Curatorinfo.json");t(2,a=await k.json()),console.log(a),u=(await(await fetch("map/grid_3px.geojson")).json()).features,t(7,h=Xe().fitExtent([[0,0],[_t,dt]],{type:"FeatureCollection",features:u}))});function p(C){t(6,i=C.detail.selectedCuratorData)}return[r,n,a,l,s,c,i,h,p]}class wt extends Q{constructor(e){super(),J(this,e,pt,mt,W,{})}}export{wt as component};
