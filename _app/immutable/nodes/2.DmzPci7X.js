import{s as x,n as re,d as g,i as k,p as Q,r as fe,O as N,h as v,P as I,x as u,Q as _e,R as ie,e as D,v as Oe,z as Te,f as A,l as M,y as ge,k as U,j as B,m as V,t as S,S as Ue,T as me,U as Ve,b as X}from"../chunks/Cxw3WnS6.js";import{S as $,i as ee,d as se,t as J,a as T,m as ae,e as le,b as oe,c as We,g as Ge}from"../chunks/CGTxhxGg.js";import{i as He,e as P,u as Be,d as Se,a as de,z as Xe,s as pe,m as Qe}from"../chunks/CcNL7MI7.js";function ve(i,e,t){const n=i.slice();return n[3]=e[t],n[5]=t,n}function De(i){let e,t=[],n=new Map,a=P(i[0]);const s=o=>o[3].id||o[5];for(let o=0;o<a.length;o+=1){let r=ve(i,a,o),l=s(r);n.set(l,t[o]=ke(l,r))}return{c(){e=I("g");for(let o=0;o<t.length;o+=1)t[o].c()},l(o){e=N(o,"g",{});var r=v(e);for(let l=0;l<t.length;l+=1)t[l].l(r);r.forEach(g)},m(o,r){k(o,e,r);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(o,r){r&3&&(a=P(o[0]),t=Be(t,r,s,1,o,a,n,e,Se,ke,null,ve))},d(o){o&&g(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function ke(i,e){let t,n,a;return{key:i,first:null,c(){t=I("path"),this.h()},l(s){t=N(s,"path",{d:!0,class:!0}),v(t).forEach(g),this.h()},h(){u(t,"d",n=e[1](e[3])),u(t,"class",a=_e("pixel "+e[3].properties.type)+" svelte-vrt0xx"),this.first=t},m(s,o){k(s,t,o)},p(s,o){e=s,o&3&&n!==(n=e[1](e[3]))&&u(t,"d",n),o&1&&a!==(a=_e("pixel "+e[3].properties.type)+" svelte-vrt0xx")&&u(t,"class",a)},d(s){s&&g(t)}}}function Je(i){let e,t=i[0]&&i[1]&&De(i);return{c(){t&&t.c(),e=Q()},l(n){t&&t.l(n),e=Q()},m(n,a){t&&t.m(n,a),k(n,e,a)},p(n,[a]){n[0]&&n[1]?t?t.p(n,a):(t=De(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:re,o:re,d(n){n&&g(e),t&&t.d(n)}}}function Ke(i,e,t){let{projection:n}=e,a=null,s=null;return fe(async()=>{try{const r=await(await fetch("map/grid_5px.geojson")).json();t(0,a=r.features),t(1,s=He().projection(n))}catch(o){console.error("Error loading map:",o)}}),i.$$set=o=>{"projection"in o&&t(2,n=o.projection)},[a,s,n]}class Ze extends ${constructor(e){super(),ee(this,e,Ke,Je,x,{projection:2})}}function Ce(i,e,t){const n=i.slice();return n[18]=e[t],n}function be(i,e,t){const n=i.slice();return n[21]=e[t],n[23]=t,n}function je(i){let e,t,n,a;return{c(){e=I("circle"),this.h()},l(s){e=N(s,"circle",{r:!0,fill:!0,stroke:!0,"stroke-opacity":!0,class:!0}),v(e).forEach(g),this.h()},h(){u(e,"r",t=i[5]+(i[18].numRings>0?i[23]*i[6]:0)),u(e,"fill","none"),u(e,"stroke",n=i[7](i[18].avgYear)),u(e,"stroke-opacity",a=i[3].length?i[3].includes(i[18])?1:.4:1),u(e,"class","node-ring svelte-q0pm9q")},m(s,o){k(s,e,o)},p(s,o){o&4&&t!==(t=s[5]+(s[18].numRings>0?s[23]*s[6]:0))&&u(e,"r",t),o&4&&n!==(n=s[7](s[18].avgYear))&&u(e,"stroke",n),o&12&&a!==(a=s[3].length?s[3].includes(s[18])?1:.4:1)&&u(e,"stroke-opacity",a)},d(s){s&&g(e)}}}function ye(i){let e,t,n=P(Array(i[18].numRings||1)),a=[];for(let s=0;s<n.length;s+=1)a[s]=je(be(i,n,s));return{c(){e=I("g");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=N(s,"g",{class:!0,transform:!0});var o=v(e);for(let r=0;r<a.length;r+=1)a[r].l(o);o.forEach(g),this.h()},h(){u(e,"class","node svelte-q0pm9q"),u(e,"transform",t="translate("+i[18].x+", "+i[18].y+")")},m(s,o){k(s,e,o);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(e,null)},p(s,o){if(o&236){n=P(Array(s[18].numRings||1));let r;for(r=0;r<n.length;r+=1){const l=be(s,n,r);a[r]?a[r].p(l,o):(a[r]=je(l),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}o&4&&t!==(t="translate("+s[18].x+", "+s[18].y+")")&&u(e,"transform",t)},d(s){s&&g(e),ie(a,s)}}}function xe(i){let e,t,n,a,s;n=new Ze({props:{projection:i[0]}});let o=P(i[2]),r=[];for(let l=0;l<o.length;l+=1)r[l]=ye(Ce(i,o,l));return{c(){e=I("svg"),t=I("g"),oe(n.$$.fragment);for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=N(l,"svg",{class:!0});var f=v(e);t=N(f,"g",{transform:!0});var c=v(t);le(n.$$.fragment,c);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(g),f.forEach(g),this.h()},h(){u(t,"transform",a="translate("+i[4].x+", "+i[4].y+") scale("+i[4].k+")"),u(e,"class","svelte-q0pm9q")},m(l,f){k(l,e,f),D(e,t),ae(n,t,null);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null);i[11](e),s=!0},p(l,[f]){const c={};if(f&1&&(c.projection=l[0]),n.$set(c),f&236){o=P(l[2]);let h;for(h=0;h<o.length;h+=1){const p=Ce(l,o,h);r[h]?r[h].p(p,f):(r[h]=ye(p),r[h].c(),r[h].m(t,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=o.length}(!s||f&16&&a!==(a="translate("+l[4].x+", "+l[4].y+") scale("+l[4].k+")"))&&u(t,"transform",a)},i(l){s||(T(n.$$.fragment,l),s=!0)},o(l){J(n.$$.fragment,l),s=!1},d(l){l&&g(e),se(n),ie(r,l),i[11](null)}}}const O=4,we=10,Ee=1,Ye=1;function $e(i,e,t){let{data:n=[]}=e,{currentYear:a}=e,{selectedCuratorData:s=null}=e,{projection:o}=e,r,l=[],f=[],c=de,h;const p=Ee+(we-1)*Ye,C=O/2/p,E=Ee*C,j=Ye*C,b=p*C;function _(){if(!n||!r||!o||a===void 0)return[];const d=new Map;n.forEach((y,z)=>{const q=parseFloat(y.LONGITUDE),F=parseFloat(y.LATITUDE),w=parseInt(y.ACC_YR);if(isNaN(q)||isNaN(F)||isNaN(w))return;const[G,te]=o([q,F]);if(!G||!te)return;const ne=Math.floor(G/O),H=Math.floor(te/O),K=`${ne}-${H}`,ce=ne*O+O/2,ue=H*O+O/2;let L=a>=w?Math.min(Math.floor((a-w)/10),we):0;const Z=L>0?E+(L-1)*j:E,he={accYear:w,numRings:L,outerRadius:Z,plantID:y.PLANTID?String(y.PLANTID).toLowerCase():String(z)};d.has(K)?d.get(K).records.push(he):d.set(K,{x:ce,y:ue,records:[he]})});const R=[];for(const[y,z]of d.entries()){const{x:q,y:F,records:w}=z,G=w.length,te=w.reduce((L,Z)=>L+Z.numRings,0),ne=w.reduce((L,Z)=>L+Z.accYear,0),H=Math.floor(te/G),K=Math.min(H>0?E+(H-1)*j:E,b),ce=Math.floor(ne/G),ue=w.map(L=>L.plantID);R.push({id:y,x:q,y:F,avgYear:ce,numRings:H,outerRadius:K,plantIDs:ue,count:G})}return R}fe(async()=>{if(await Oe(),!r)return;h=Xe().scaleExtent([2,14]).on("zoom",w=>{t(4,c=w.transform)}),pe(r).call(h);const d=r.clientWidth,R=r.clientHeight,y=2,z=d/2-y*(d/2.8),q=R/2-y*(R/2.2),F=de.translate(z,q).scale(y);pe(r).call(h.transform,F),t(4,c=F)});const m={"1870s":"#154406","1880s":"#2E5912","1890s":"#4A6F1D","1900s":"#67862A","1910s":"#839E38","1920s":"#9FB748","1930s":"#BCCF5A","1940s":"#DAC86A","1950s":"#F5B94F","1960s":"#E0963C","1970s":"#C06B2B","1980s":"#A34826","1990s":"#883421","2000s":"#6E241D","2010s":"#541916",Unknown:"#A0A0A0"};function Y(d){if(!d||isNaN(d))return m.Unknown;const R=`${Math.floor(d/10)*10}s`;return m[R]||m.Unknown}function W(d){Te[d?"unshift":"push"](()=>{r=d,t(1,r)})}return i.$$set=d=>{"data"in d&&t(8,n=d.data),"currentYear"in d&&t(9,a=d.currentYear),"selectedCuratorData"in d&&t(10,s=d.selectedCuratorData),"projection"in d&&t(0,o=d.projection)},i.$$.update=()=>{if(i.$$.dirty&770&&n&&r&&a!==void 0&&t(2,l=_()),i.$$.dirty&1028)if(s!=null&&s.PlantDates){const d=[],R=[...s.PlantDates].sort((y,z)=>y.Date-z.Date);for(const y of R){const z=String(y.PlantID).toLowerCase(),q=l.find(F=>{var w;return(w=F.plantIDs)==null?void 0:w.includes(z)});q&&!d.includes(q)&&d.push(q)}t(3,f=d)}else t(3,f=[])},[o,r,l,f,c,E,j,Y,n,a,s,W]}class et extends ${constructor(e){super(),ee(this,e,$e,xe,x,{data:8,currentYear:9,selectedCuratorData:10,projection:0})}}function Ne(i,e,t){const n=i.slice();return n[2]=e[t],n}function Ie(i){let e,t,n,a,s=i[2]+"",o,r;return{c(){e=M("div"),t=M("div"),n=V(),a=M("span"),o=S(s),r=V(),this.h()},l(l){e=A(l,"DIV",{class:!0});var f=v(e);t=A(f,"DIV",{class:!0,style:!0}),v(t).forEach(g),n=U(f),a=A(f,"SPAN",{class:!0});var c=v(a);o=B(c,s),c.forEach(g),r=U(f),f.forEach(g),this.h()},h(){u(t,"class","color-box svelte-uqwyjj"),ge(t,"background-color",i[0][i[2]]),u(a,"class","label svelte-uqwyjj"),u(e,"class","swatch-row svelte-uqwyjj")},m(l,f){k(l,e,f),D(e,t),D(e,n),D(e,a),D(a,o),D(e,r)},p(l,f){f&1&&ge(t,"background-color",l[0][l[2]])},d(l){l&&g(e)}}}function tt(i){let e,t,n=P(i[1]),a=[];for(let s=0;s<n.length;s+=1)a[s]=Ie(Ne(i,n,s));return{c(){e=M("div"),t=M("div");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=A(s,"DIV",{class:!0});var o=v(e);t=A(o,"DIV",{class:!0});var r=v(t);for(let l=0;l<a.length;l+=1)a[l].l(r);r.forEach(g),o.forEach(g),this.h()},h(){u(t,"class","color-swatch-section svelte-uqwyjj"),u(e,"class","legend-container svelte-uqwyjj")},m(s,o){k(s,e,o),D(e,t);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(t,null)},p(s,[o]){if(o&3){n=P(s[1]);let r;for(r=0;r<n.length;r+=1){const l=Ne(s,n,r);a[r]?a[r].p(l,o):(a[r]=Ie(l),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},i:re,o:re,d(s){s&&g(e),ie(a,s)}}}function nt(i,e,t){let{clusterColorMapping:n}=e;const a=Object.keys(n);return i.$$set=s=>{"clusterColorMapping"in s&&t(0,n=s.clusterColorMapping)},[n,a]}class rt extends ${constructor(e){super(),ee(this,e,nt,tt,x,{clusterColorMapping:0})}}function Ae(i,e,t){const n=i.slice();return n[14]=e[t],n}function Me(i,e,t){const n=i.slice();return n[21]=e[t],n}function st(i){const e=i.slice(),t=e[14].PlantDates.reduce((o,r)=>{const l=r.Date;return o[l]=(o[l]||0)+1,o},{});e[17]=t;const n=Object.entries(e[17]).sort((o,r)=>o[0]-r[0]);e[18]=n;const a=Math.max(...e[18].map(([o,r])=>r));e[19]=a;const s=e[18].map(function(...r){return i[11](e[19],...r)}).join(" ");return e[20]=s,e}function Pe(i){let e,t=i[14].CuratorName+"",n,a,s,o=i[6](i[14].CuratorName)+"",r;return{c(){e=M("p"),n=S(t),a=V(),s=M("p"),r=S(o),this.h()},l(l){e=A(l,"P",{class:!0});var f=v(e);n=B(f,t),f.forEach(g),a=U(l),s=A(l,"P",{class:!0});var c=v(s);r=B(c,o),c.forEach(g),this.h()},h(){u(e,"class","curator-name svelte-bqdjus"),u(s,"class","curator-info svelte-bqdjus")},m(l,f){k(l,e,f),D(e,n),k(l,a,f),k(l,s,f),D(s,r)},p(l,f){f&4&&t!==(t=l[14].CuratorName+"")&&X(n,t),f&4&&o!==(o=l[6](l[14].CuratorName)+"")&&X(r,o)},d(l){l&&(g(e),g(a),g(s))}}}function Re(i){let e,t,n,a,s,o,r,l=i[14].PlantDates.length+"",f,c,h=i[14].PlantDates.length===1?"":"s",p;function C(_,m){return _[14].PlantDates.length>1?qe:at}function E(_,m){return m===qe?st(_):_}let j=C(i),b=j(E(i,j));return{c(){e=I("svg"),t=I("line"),b.c(),n=I("text"),a=S(i[0]),s=I("text"),o=S(i[1]),r=I("text"),f=S(l),c=S(" annotation"),p=S(h),this.h()},l(_){e=N(_,"svg",{class:!0,width:!0,height:!0});var m=v(e);t=N(m,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,class:!0}),v(t).forEach(g),b.l(m),n=N(m,"text",{x:!0,y:!0,"font-size":!0,fill:!0,class:!0});var Y=v(n);a=B(Y,i[0]),Y.forEach(g),s=N(m,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var W=v(s);o=B(W,i[1]),W.forEach(g),r=N(m,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,class:!0});var d=v(r);f=B(d,l),c=B(d," annotation"),p=B(d,h),d.forEach(g),m.forEach(g),this.h()},h(){u(t,"x1","10"),u(t,"y1","12"),u(t,"x2","310"),u(t,"y2","12"),u(t,"stroke","#ccc"),u(t,"stroke-width","1"),u(t,"class","svelte-bqdjus"),u(n,"x","10"),u(n,"y","8"),u(n,"font-size","8"),u(n,"fill","#333"),u(n,"class","svelte-bqdjus"),u(s,"x","310"),u(s,"y","8"),u(s,"font-size","8"),u(s,"fill","#333"),u(s,"text-anchor","end"),u(s,"class","svelte-bqdjus"),u(r,"x","160"),u(r,"y","23"),u(r,"font-size","8"),u(r,"fill","#333"),u(r,"text-anchor","middle"),u(r,"class","svelte-bqdjus"),u(e,"class","histogram svelte-bqdjus"),u(e,"width","320"),u(e,"height","25")},m(_,m){k(_,e,m),D(e,t),b.m(e,null),D(e,n),D(n,a),D(e,s),D(s,o),D(e,r),D(r,f),D(r,c),D(r,p)},p(_,m){j===(j=C(_))&&b?b.p(E(_,j),m):(b.d(1),b=j(E(_,j)),b&&(b.c(),b.m(e,n))),m&1&&X(a,_[0]),m&2&&X(o,_[1]),m&4&&l!==(l=_[14].PlantDates.length+"")&&X(f,l),m&4&&h!==(h=_[14].PlantDates.length===1?"":"s")&&X(p,h)},d(_){_&&g(e),b.d()}}}function at(i){let e,t=P(i[14].PlantDates),n=[];for(let a=0;a<t.length;a+=1)n[a]=ze(Me(i,t,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Q()},l(a){for(let s=0;s<n.length;s+=1)n[s].l(a);e=Q()},m(a,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,s);k(a,e,s)},p(a,s){if(s&36){t=P(a[14].PlantDates);let o;for(o=0;o<t.length;o+=1){const r=Me(a,t,o);n[o]?n[o].p(r,s):(n[o]=ze(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(a){a&&g(e),ie(n,a)}}}function qe(i){let e,t;return{c(){e=I("polyline"),this.h()},l(n){e=N(n,"polyline",{fill:!0,stroke:!0,"stroke-width":!0,points:!0,class:!0}),v(e).forEach(g),this.h()},h(){u(e,"fill","none"),u(e,"stroke","blue"),u(e,"stroke-width","1"),u(e,"points",t=i[20]),u(e,"class","svelte-bqdjus")},m(n,a){k(n,e,a)},p(n,a){a&4&&t!==(t=n[20])&&u(e,"points",t)},d(n){n&&g(e)}}}function ze(i){let e,t;return{c(){e=I("circle"),this.h()},l(n){e=N(n,"circle",{cx:!0,cy:!0,r:!0,class:!0}),v(e).forEach(g),this.h()},h(){u(e,"cx",t=i[5](i[21].Date)),u(e,"cy","12"),u(e,"r","1"),u(e,"class","svelte-bqdjus")},m(n,a){k(n,e,a)},p(n,a){a&4&&t!==(t=n[5](n[21].Date))&&u(e,"cx",t)},d(n){n&&g(e)}}}function Fe(i,e){let t,n,a,s,o,r=e[14].CuratorName===e[3]&&Pe(e),l=e[14].PlantDates&&e[14].PlantDates.length>0&&Re(e);function f(){return e[12](e[14])}return{key:i,first:null,c(){t=M("li"),r&&r.c(),n=V(),l&&l.c(),a=V(),this.h()},l(c){t=A(c,"LI",{class:!0});var h=v(t);r&&r.l(h),n=U(h),l&&l.l(h),a=U(h),h.forEach(g),this.h()},h(){u(t,"class","svelte-bqdjus"),me(t,"selected",e[14].CuratorName===e[3]),this.first=t},m(c,h){k(c,t,h),r&&r.m(t,null),D(t,n),l&&l.m(t,null),D(t,a),s||(o=Ve(t,"click",f),s=!0)},p(c,h){e=c,e[14].CuratorName===e[3]?r?r.p(e,h):(r=Pe(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[14].PlantDates&&e[14].PlantDates.length>0?l?l.p(e,h):(l=Re(e),l.c(),l.m(t,a)):l&&(l.d(1),l=null),h&12&&me(t,"selected",e[14].CuratorName===e[3])},d(c){c&&g(t),r&&r.d(),l&&l.d(),s=!1,o()}}}function lt(i){let e,t,n,a,s=[],o=new Map,r;t=new rt({props:{clusterColorMapping:i[7]}});let l=P(i[2]);const f=c=>c[14].CuratorName;for(let c=0;c<l.length;c+=1){let h=Ae(i,l,c),p=f(h);o.set(p,s[c]=Fe(p,h))}return{c(){e=M("aside"),oe(t.$$.fragment),n=V(),a=M("ul");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){e=A(c,"ASIDE",{class:!0});var h=v(e);le(t.$$.fragment,h),n=U(h),a=A(h,"UL",{class:!0});var p=v(a);for(let C=0;C<s.length;C+=1)s[C].l(p);p.forEach(g),h.forEach(g),this.h()},h(){u(a,"class","svelte-bqdjus"),u(e,"class","curator-sidebar svelte-bqdjus")},m(c,h){k(c,e,h),ae(t,e,null),D(e,n),D(e,a);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(a,null);r=!0},p(c,[h]){h&127&&(l=P(c[2]),s=Be(s,h,f,1,c,l,o,a,Se,Fe,null,Ae))},i(c){r||(T(t.$$.fragment,c),r=!0)},o(c){J(t.$$.fragment,c),r=!1},d(c){c&&g(e),se(t);for(let h=0;h<s.length;h+=1)s[h].d()}}}function ot(i){return i&&i.length>0?Math.min(...i):1/0}function it(i,e,t){let n,a,{minYear:s}=e,{maxYear:o}=e,{curatorData:r=[]}=e,{curatorInfoData:l=[]}=e,{initialCurator:f=""}=e;const c=Ue();function h(_){t(3,a=_);const m=r.find(Y=>Y.CuratorName.toLowerCase()===_.toLowerCase());c("curatorChange",{selectedCuratorData:m})}function p(_){return o===s?160:10+(_-s)/(o-s)*300}function C(_){const m=l.find(Y=>Y.Name.toLowerCase()===_.toLowerCase());return(m==null?void 0:m.Information)||""}const E={"1870s":"#154406","1880s":"#2E5912","1890s":"#4A6F1D","1900s":"#67862A","1910s":"#839E38","1920s":"#9FB748","1930s":"#BCCF5A","1940s":"#DAC86A","1950s":"#F5B94F","1960s":"#E0963C","1970s":"#C06B2B","1980s":"#A34826","1990s":"#883421","2000s":"#6E241D","2010s":"#541916",Unknown:"#A0A0A0"},j=(_,[m,Y])=>{const W=p(+m),R=12-(6+Y/_*6);return`${W},${R}`},b=_=>h(_.CuratorName);return i.$$set=_=>{"minYear"in _&&t(0,s=_.minYear),"maxYear"in _&&t(1,o=_.maxYear),"curatorData"in _&&t(8,r=_.curatorData),"curatorInfoData"in _&&t(9,l=_.curatorInfoData),"initialCurator"in _&&t(10,f=_.initialCurator)},i.$$.update=()=>{i.$$.dirty&256&&t(2,n=r.map(_=>{var m;return{..._,minDate:ot((m=_.PlantDates)==null?void 0:m.map(Y=>Y.Date))}}).sort((_,m)=>_.minDate-m.minDate)),i.$$.dirty&1028&&t(3,a=f||(n.length>0?n[0].CuratorName:""))},[s,o,n,a,h,p,C,E,r,l,f,j,b]}class ct extends ${constructor(e){super(),ee(this,e,it,lt,x,{minYear:0,maxYear:1,curatorData:8,curatorInfoData:9,initialCurator:10})}}function Le(i){let e,t,n,a,s,o;return n=new et({props:{data:i[0],currentYear:i[3],selectedCuratorData:i[6],minYear:i[4],maxYear:i[5],projection:i[7]}}),s=new ct({props:{curatorData:i[1],curatorInfoData:i[2],minYear:i[4],maxYear:i[5]}}),s.$on("curatorChange",i[8]),{c(){e=M("div"),t=M("div"),oe(n.$$.fragment),a=V(),oe(s.$$.fragment),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=v(e);t=A(l,"DIV",{class:!0});var f=v(t);le(n.$$.fragment,f),f.forEach(g),a=U(l),le(s.$$.fragment,l),l.forEach(g),this.h()},h(){u(t,"class","main svelte-1tjw1ao"),u(e,"class","container svelte-1tjw1ao")},m(r,l){k(r,e,l),D(e,t),ae(n,t,null),D(e,a),ae(s,e,null),o=!0},p(r,l){const f={};l&1&&(f.data=r[0]),l&8&&(f.currentYear=r[3]),l&64&&(f.selectedCuratorData=r[6]),l&16&&(f.minYear=r[4]),l&32&&(f.maxYear=r[5]),l&128&&(f.projection=r[7]),n.$set(f);const c={};l&2&&(c.curatorData=r[1]),l&4&&(c.curatorInfoData=r[2]),l&16&&(c.minYear=r[4]),l&32&&(c.maxYear=r[5]),s.$set(c)},i(r){o||(T(n.$$.fragment,r),T(s.$$.fragment,r),o=!0)},o(r){J(n.$$.fragment,r),J(s.$$.fragment,r),o=!1},d(r){r&&g(e),se(n),se(s)}}}function ut(i){let e,t,n=i[0].length>0&&i[1].length>0&&i[2].length>0&&i[7]&&Le(i);return{c(){n&&n.c(),e=Q()},l(a){n&&n.l(a),e=Q()},m(a,s){n&&n.m(a,s),k(a,e,s),t=!0},p(a,[s]){a[0].length>0&&a[1].length>0&&a[2].length>0&&a[7]?n?(n.p(a,s),s&135&&T(n,1)):(n=Le(a),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(Ge(),J(n,1,1,()=>{n=null}),We())},i(a){t||(T(n),t=!0)},o(a){J(n),t=!1},d(a){a&&g(e),n&&n.d(a)}}}let ft=1e3,ht=800;function _t(i,e,t){let n=[],a=[],s=[],o=2011,r,l,f=null,c=[],h=null;fe(async()=>{const C=await fetch("data/ArnArbPlantsinfo.json");t(0,n=await C.json()),t(4,r=Math.min(...n.map(m=>parseInt(m.ACC_YR)))),t(5,l=Math.max(...n.map(m=>parseInt(m.ACC_YR)))),t(3,o=l);const E=await fetch("data/Curator_Plants_Dates.json");t(1,a=await E.json()),a.length>0&&t(6,f=a[0]);const j=await fetch("data/Curatorinfo.json");t(2,s=await j.json()),console.log(s),c=(await(await fetch("map/grid_3px.geojson")).json()).features,t(7,h=Qe().fitExtent([[0,0],[ft,ht]],{type:"FeatureCollection",features:c}))});function p(C){t(6,f=C.detail.selectedCuratorData)}return[n,a,s,o,r,l,f,h,p]}class pt extends ${constructor(e){super(),ee(this,e,_t,ut,x,{})}}export{pt as component};
