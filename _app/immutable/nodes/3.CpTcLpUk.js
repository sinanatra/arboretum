import{s as Vr,n as $i,d as gt,A as Ta,b as Hr,i as bt,e as Gt,V as tr,x as at,f as Re,h as Lt,j as _n,k as jn,p as ee,l as Oe,t as pn,m as Jn,r as Kn,z as Ca,y as er,O as Qt,P as $t,R as Zr}from"../chunks/C2CFgrAZ.js";import{S as Wr,i as jr,t as We,a as ke,c as Jr,g as Kr,d as La,m as Ra,e as Oa,b as ba}from"../chunks/w_dtK-mc.js";import{z as Ma,s as nr,i as ir,e as be,u as Pa,d as Aa,m as rr,a as sr,l as ar}from"../chunks/PMpw4u_E.js";const ue=11102230246251565e-32,Ct=134217729,Da=(3+8*ue)*ue;function Hn(o,h,v,c,l){let y,k,f,C,S=h[0],E=c[0],d=0,I=0;E>S==E>-S?(y=S,S=h[++d]):(y=E,E=c[++I]);let x=0;if(d<o&&I<v)for(E>S==E>-S?(k=S+y,f=y-(k-S),S=h[++d]):(k=E+y,f=y-(k-E),E=c[++I]),y=k,f!==0&&(l[x++]=f);d<o&&I<v;)E>S==E>-S?(k=y+S,C=k-y,f=y-(k-C)+(S-C),S=h[++d]):(k=y+E,C=k-y,f=y-(k-C)+(E-C),E=c[++I]),y=k,f!==0&&(l[x++]=f);for(;d<o;)k=y+S,C=k-y,f=y-(k-C)+(S-C),S=h[++d],y=k,f!==0&&(l[x++]=f);for(;I<v;)k=y+E,C=k-y,f=y-(k-C)+(E-C),E=c[++I],y=k,f!==0&&(l[x++]=f);return(y!==0||x===0)&&(l[x++]=y),x}function Fa(o,h){let v=h[0];for(let c=1;c<o;c++)v+=h[c];return v}function Je(o){return new Float64Array(o)}const Ga=(3+16*ue)*ue,qa=(2+12*ue)*ue,Ya=(9+64*ue)*ue*ue,Le=Je(4),ur=Je(8),or=Je(12),lr=Je(16),Ot=Je(4);function za(o,h,v,c,l,y,k){let f,C,S,E,d,I,x,p,L,P,b,A,M,Y,G,D,U,z;const F=o-l,Z=v-l,W=h-y,$=c-y;Y=F*$,I=Ct*F,x=I-(I-F),p=F-x,I=Ct*$,L=I-(I-$),P=$-L,G=p*P-(Y-x*L-p*L-x*P),D=W*Z,I=Ct*W,x=I-(I-W),p=W-x,I=Ct*Z,L=I-(I-Z),P=Z-L,U=p*P-(D-x*L-p*L-x*P),b=G-U,d=G-b,Le[0]=G-(b+d)+(d-U),A=Y+b,d=A-Y,M=Y-(A-d)+(b-d),b=M-D,d=M-b,Le[1]=M-(b+d)+(d-D),z=A+b,d=z-A,Le[2]=A-(z-d)+(b-d),Le[3]=z;let Q=Fa(4,Le),O=qa*k;if(Q>=O||-Q>=O||(d=o-F,f=o-(F+d)+(d-l),d=v-Z,S=v-(Z+d)+(d-l),d=h-W,C=h-(W+d)+(d-y),d=c-$,E=c-($+d)+(d-y),f===0&&C===0&&S===0&&E===0)||(O=Ya*k+Da*Math.abs(Q),Q+=F*E+$*f-(W*S+Z*C),Q>=O||-Q>=O))return Q;Y=f*$,I=Ct*f,x=I-(I-f),p=f-x,I=Ct*$,L=I-(I-$),P=$-L,G=p*P-(Y-x*L-p*L-x*P),D=C*Z,I=Ct*C,x=I-(I-C),p=C-x,I=Ct*Z,L=I-(I-Z),P=Z-L,U=p*P-(D-x*L-p*L-x*P),b=G-U,d=G-b,Ot[0]=G-(b+d)+(d-U),A=Y+b,d=A-Y,M=Y-(A-d)+(b-d),b=M-D,d=M-b,Ot[1]=M-(b+d)+(d-D),z=A+b,d=z-A,Ot[2]=A-(z-d)+(b-d),Ot[3]=z;const J=Hn(4,Le,4,Ot,ur);Y=F*E,I=Ct*F,x=I-(I-F),p=F-x,I=Ct*E,L=I-(I-E),P=E-L,G=p*P-(Y-x*L-p*L-x*P),D=W*S,I=Ct*W,x=I-(I-W),p=W-x,I=Ct*S,L=I-(I-S),P=S-L,U=p*P-(D-x*L-p*L-x*P),b=G-U,d=G-b,Ot[0]=G-(b+d)+(d-U),A=Y+b,d=A-Y,M=Y-(A-d)+(b-d),b=M-D,d=M-b,Ot[1]=M-(b+d)+(d-D),z=A+b,d=z-A,Ot[2]=A-(z-d)+(b-d),Ot[3]=z;const et=Hn(J,ur,4,Ot,or);Y=f*E,I=Ct*f,x=I-(I-f),p=f-x,I=Ct*E,L=I-(I-E),P=E-L,G=p*P-(Y-x*L-p*L-x*P),D=C*S,I=Ct*C,x=I-(I-C),p=C-x,I=Ct*S,L=I-(I-S),P=S-L,U=p*P-(D-x*L-p*L-x*P),b=G-U,d=G-b,Ot[0]=G-(b+d)+(d-U),A=Y+b,d=A-Y,M=Y-(A-d)+(b-d),b=M-D,d=M-b,Ot[1]=M-(b+d)+(d-D),z=A+b,d=z-A,Ot[2]=A-(z-d)+(b-d),Ot[3]=z;const ct=Hn(et,or,4,Ot,lr);return lr[ct-1]}function Ba(o,h,v,c,l,y){const k=(h-y)*(v-l),f=(o-l)*(c-y),C=k-f,S=Math.abs(k+f);return Math.abs(C)>=Ga*S?C:-za(o,h,v,c,l,y,S)}var Pt=63710088e-1,Qr={centimeters:Pt*100,centimetres:Pt*100,degrees:360/(2*Math.PI),feet:Pt*3.28084,inches:Pt*39.37,kilometers:Pt/1e3,kilometres:Pt/1e3,meters:Pt,metres:Pt,miles:Pt/1609.344,millimeters:Pt*1e3,millimetres:Pt*1e3,nauticalmiles:Pt/1852,radians:1,yards:Pt*1.0936};function $r(o,h,v={}){const c={type:"Feature"};return(v.id===0||v.id)&&(c.id=v.id),v.bbox&&(c.bbox=v.bbox),c.properties=h||{},c.geometry=o,c}function ts(o,h,v={}){if(!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hr(o[0])||!hr(o[1]))throw new Error("coordinates must contain numbers");return $r({type:"Point",coordinates:o},h,v)}function Qn(o,h={}){const v={type:"FeatureCollection"};return h.id&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.features=o,v}function Ua(o,h="kilometers"){const v=Qr[h];if(!v)throw new Error(h+" units is invalid");return o*v}function Xa(o,h="kilometers"){const v=Qr[h];if(!v)throw new Error(h+" units is invalid");return o/v}function hr(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)}function Va(o){if(!o)throw new Error("coord is required");if(!Array.isArray(o)){if(o.type==="Feature"&&o.geometry!==null&&o.geometry.type==="Point")return[...o.geometry.coordinates];if(o.type==="Point")return[...o.coordinates]}if(Array.isArray(o)&&o.length>=2&&!Array.isArray(o[0])&&!Array.isArray(o[1]))return[...o];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ha(o){return o.type==="Feature"?o.geometry:o}function es(o,h,v){if(o!==null)for(var c,l,y,k,f,C,S,E=0,d=0,I,x=o.type,p=x==="FeatureCollection",L=x==="Feature",P=p?o.features.length:1,b=0;b<P;b++){S=p?o.features[b].geometry:L?o.geometry:o,I=S?S.type==="GeometryCollection":!1,f=I?S.geometries.length:1;for(var A=0;A<f;A++){var M=0,Y=0;if(k=I?S.geometries[A]:S,k!==null){C=k.coordinates;var G=k.type;switch(E=0,G){case null:break;case"Point":if(h(C,d,b,M,Y)===!1)return!1;d++,M++;break;case"LineString":case"MultiPoint":for(c=0;c<C.length;c++){if(h(C[c],d,b,M,Y)===!1)return!1;d++,G==="MultiPoint"&&M++}G==="LineString"&&M++;break;case"Polygon":case"MultiLineString":for(c=0;c<C.length;c++){for(l=0;l<C[c].length-E;l++){if(h(C[c][l],d,b,M,Y)===!1)return!1;d++}G==="MultiLineString"&&M++,G==="Polygon"&&Y++}G==="Polygon"&&M++;break;case"MultiPolygon":for(c=0;c<C.length;c++){for(Y=0,l=0;l<C[c].length;l++){for(y=0;y<C[c][l].length-E;y++){if(h(C[c][l][y],d,b,M,Y)===!1)return!1;d++}Y++}M++}break;case"GeometryCollection":for(c=0;c<k.geometries.length;c++)if(es(k.geometries[c],h)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function cr(o,h){if(o.type==="Feature")h(o,0);else if(o.type==="FeatureCollection")for(var v=0;v<o.features.length&&h(o.features[v],v)!==!1;v++);}function ns(o,h){var v,c,l,y,k,f,C,S,E,d,I=0,x=o.type==="FeatureCollection",p=o.type==="Feature",L=x?o.features.length:1;for(v=0;v<L;v++){for(f=x?o.features[v].geometry:p?o.geometry:o,S=x?o.features[v].properties:p?o.properties:{},E=x?o.features[v].bbox:p?o.bbox:void 0,d=x?o.features[v].id:p?o.id:void 0,C=f?f.type==="GeometryCollection":!1,k=C?f.geometries.length:1,l=0;l<k;l++){if(y=C?f.geometries[l]:f,y===null){if(h(null,I,S,E,d)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(h(y,I,S,E,d)===!1)return!1;break}case"GeometryCollection":{for(c=0;c<y.geometries.length;c++)if(h(y.geometries[c],I,S,E,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function Za(o,h={}){if(o.bbox!=null&&h.recompute!==!0)return o.bbox;const v=[1/0,1/0,-1/0,-1/0];return es(o,c=>{v[0]>c[0]&&(v[0]=c[0]),v[1]>c[1]&&(v[1]=c[1]),v[2]<c[0]&&(v[2]=c[0]),v[3]<c[1]&&(v[3]=c[1])}),v}function Wa(o,h){var v,c,l=0,y,k,f,C,S,E,d,I=o[0],x=o[1],p=h.length;for(v=0;v<p;v++){c=0;var L=h[v],P=L.length-1;if(E=L[0],E[0]!==L[P][0]&&E[1]!==L[P][1])throw new Error("First and last coordinates in a ring must be the same");for(k=E[0]-I,f=E[1]-x,c;c<P;c++){if(d=L[c+1],C=d[0]-I,S=d[1]-x,f===0&&S===0){if(C<=0&&k>=0||k<=0&&C>=0)return 0}else if(S>=0&&f<=0||S<=0&&f>=0){if(y=Ba(k,C,f,S,0,0),y===0)return 0;(y>0&&S>0&&f<=0||y<0&&S<=0&&f>0)&&l++}E=d,f=S,k=C}}return l%2!==0}function fr(o,h,v={}){if(!o)throw new Error("point is required");if(!h)throw new Error("polygon is required");const c=Va(o),l=Ha(h),y=l.type,k=h.bbox;let f=l.coordinates;if(k&&ja(c,k)===!1)return!1;y==="Polygon"&&(f=[f]);let C=!1;for(var S=0;S<f.length;++S){const E=Wa(c,f[S]);if(E===0)return!v.ignoreBoundary;E&&(C=!0)}return C}function ja(o,h){return h[0]<=o[0]&&h[1]<=o[1]&&h[2]>=o[0]&&h[3]>=o[1]}var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ka(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Qa(o,h={}){const v=Za(o),c=(v[0]+v[2])/2,l=(v[1]+v[3])/2;return ts([c,l],h.properties,h)}var is={exports:{}};(function(o,h){(function(v,c){o.exports=c()})(Ja,function(){function v(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=Array(t);e<t;e++)n[e]=i[e];return n}function c(i,t,e){return t=E(t),function(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(n)}(i,I()?Reflect.construct(t,e||[],E(i).constructor):t.apply(i,e))}function l(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function y(i,t,e){if(I())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var r=new(i.bind.apply(i,n));return e&&x(r,e.prototype),r}function k(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,P(n.key),n)}}function f(i,t,e){return t&&k(i.prototype,t),e&&k(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function C(i,t){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=b(i))||t){e&&(i=e);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(g){throw g},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){e=e.call(i)},n:function(){var g=e.next();return a=g.done,g},e:function(g){u=!0,s=g},f:function(){try{a||e.return==null||e.return()}finally{if(u)throw s}}}}function S(){return S=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,t,e){var n=function(s,a){for(;!{}.hasOwnProperty.call(s,a)&&(s=E(s))!==null;);return s}(i,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?i:e):r.value}},S.apply(null,arguments)}function E(i){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(i)}function d(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&x(i,t)}function I(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I=function(){return!!i})()}function x(i,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},x(i,t)}function p(i,t,e,n){var r=S(E(1&n?i.prototype:i),t,e);return 2&n&&typeof r=="function"?function(s){return r.apply(e,s)}:r}function L(i){return function(t){if(Array.isArray(t))return v(t)}(i)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(i)||b(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P(i){var t=function(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i,"string");return typeof t=="symbol"?t:t+""}function b(i,t){if(i){if(typeof i=="string")return v(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(i,t):void 0}}function A(i){var t=typeof Map=="function"?new Map:void 0;return A=function(e){if(e===null||!function(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return y(e,arguments,E(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),x(n,e)},A(i)}var M=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=i.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=i.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==i.JOIN_ROUND&&(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=i.CAP_ROUND,this._joinStyle=i.JOIN_ROUND,this._mitreLimit=i.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=i.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(a),this.setMitreLimit(u)}}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();M.CAP_ROUND=1,M.CAP_FLAT=2,M.CAP_SQUARE=3,M.JOIN_ROUND=1,M.JOIN_MITRE=2,M.JOIN_BEVEL=3,M.DEFAULT_QUADRANT_SEGMENTS=8,M.DEFAULT_MITRE_LIMIT=5,M.DEFAULT_SIMPLIFY_FACTOR=.01;var Y=function(i){function t(e){var n;return l(this,t),(n=c(this,t,[e])).name=Object.keys({Exception:t})[0],n}return d(t,i),f(t,[{key:"toString",value:function(){return this.message}}])}(A(Error)),G=function(i){function t(e){var n;return l(this,t),(n=c(this,t,[e])).name=Object.keys({IllegalArgumentException:t})[0],n}return d(t,i),f(t)}(Y),D=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}();function U(){}function z(){}function F(){}var Z,W,$,Q,O,J,et,ct,Et=function(){return f(function i(){l(this,i)},null,[{key:"equalsWithTolerance",value:function(i,t,e){return Math.abs(i-t)<=e}}])}(),kt=function(){return f(function i(t,e){l(this,i),this.low=e||0,this.high=t||0},null,[{key:"toBinaryString",value:function(i){var t,e="";for(t=2147483648;t>0;t>>>=1)e+=(i.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)e+=(i.low&t)===t?"1":"0";return e}}])}();function V(){}function St(){}V.NaN=NaN,V.isNaN=function(i){return Number.isNaN(i)},V.isInfinite=function(i){return!Number.isFinite(i)},V.MAX_VALUE=Number.MAX_VALUE,V.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,V.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(J=2146435072,et=new Float64Array(1),ct=new Int32Array(et.buffer),V.doubleToLongBits=function(i){et[0]=i;var t=0|ct[0],e=0|ct[1];return(e&J)===J&&1048575&e&&t!==0&&(t=0,e=2146959360),new kt(e,t)},V.longBitsToDouble=function(i){return ct[0]=i.low,ct[1]=i.high,et[0]}):(Z=1023,W=Math.log2,$=Math.floor,Q=Math.pow,O=function(){for(var i=53;i>0;i--){var t=Q(2,i)-1;if($(W(t))+1===i)return t}return 0}(),V.doubleToLongBits=function(i){var t,e,n,r,s,a,u,g,m;if(i<0||1/i===Number.NEGATIVE_INFINITY?(a=1<<31,i=-i):a=0,i===0)return new kt(g=a,m=0);if(i===1/0)return new kt(g=2146435072|a,m=0);if(i!=i)return new kt(g=2146959360,m=0);if(r=0,m=0,(t=$(i))>1)if(t<=O)(r=$(W(t)))<=20?(m=0,g=t<<20-r&1048575):(m=t%(e=Q(2,n=r-20))<<32-n,g=t/e&1048575);else for(n=t,m=0;(n=$(e=n/2))!==0;)r++,m>>>=1,m|=(1&g)<<31,g>>>=1,e!==n&&(g|=524288);if(u=r+Z,s=t===0,t=i-t,r<52&&t!==0)for(n=0;;){if((e=2*t)>=1?(t=e-1,s?(u--,s=!1):(n<<=1,n|=1,r++)):(t=e,s?--u==0&&(r++,s=!1):(n<<=1,r++)),r===20)g|=n,n=0;else if(r===52){m|=n;break}if(e===1){r<20?g|=n<<20-r:r<52&&(m|=n<<52-r);break}}return g|=u<<20,new kt(g|=a,m)},V.longBitsToDouble=function(i){var t,e,n,r,s=i.high,a=i.low,u=s&1<<31?-1:1;for(n=((2146435072&s)>>20)-Z,r=0,e=1<<19,t=1;t<=20;t++)s&e&&(r+=Q(2,-t)),e>>>=1;for(e=1<<31,t=21;t<=52;t++)a&e&&(r+=Q(2,-t)),e>>>=1;if(n===-1023){if(r===0)return 0*u;n=-1022}else{if(n===1024)return r===0?u/0:NaN;r+=1}return u*r*Q(2,n)});var xt=function(i){function t(e){var n;return l(this,t),(n=c(this,t,[e])).name=Object.keys({RuntimeException:t})[0],n}return d(t,i),f(t)}(Y),Mt=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,null,[{key:"constructor_",value:function(){if(arguments.length===0)xt.constructor_.call(this);else if(arguments.length===1){var e=arguments[0];xt.constructor_.call(this,e)}}}])}(xt),st=function(){function i(){l(this,i)}return f(i,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)i.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new Mt("Should never reach here"+(t!==null?": "+t:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var t=arguments[0];i.isTrue(t,null)}else if(arguments.length===2){var e=arguments[1];if(!arguments[0])throw e===null?new Mt:new Mt(e)}}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];i.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(n))throw new Mt("Expected "+n+" but encountered "+r+(s!==null?": "+s:""))}}}])}(),ie=new ArrayBuffer(8),ps=new Float64Array(ie),ri=new Int32Array(ie),T=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getM",value:function(){return V.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case i.X:this.x=e;break;case i.Y:this.y=e;break;case i.Z:this.setZ(e);break;default:throw new G("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!!Et.equalsWithTolerance(this.x,e.x,n)&&!!Et.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new G("Invalid ordinate index: "+i.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.getZ()}throw new G("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||V.isNaN(this.getZ())&&V.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof i&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return Et.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return st.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+r*r)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*t+i.hashCode(this.x))+i.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[U,z,F]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)i.constructor_.call(this,0,0);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.x,t.y,t.getZ())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];i.constructor_.call(this,e,n,i.NULL_ORDINATE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];this.x=r,this.y=s,this.z=a}}},{key:"hashCode",value:function(t){return ps[0]=t,ri[0]^ri[1]}}])}(),ks=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compare",value:function(t,e){var n=i.compare(t.x,e.x);if(n!==0)return n;var r=i.compare(t.y,e.y);return r!==0?r:this._dimensionsToTest<=2?0:i.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[St]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)i.constructor_.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new G("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:V.isNaN(t)?V.isNaN(e)?0:-1:V.isNaN(e)?1:0}}])}();T.DimensionalComparator=ks,T.NULL_ORDINATE=V.NaN,T.X=0,T.Y=1,T.Z=2,T.M=3;var mt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new i;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new i(e,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof i){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof T){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){if(arguments[0]instanceof T&&arguments[1]instanceof T){var n=arguments[0],r=arguments[1];return!this.isNull()&&!((n.x<r.x?n.x:r.x)>this._maxx)&&!((n.x>r.x?n.x:r.x)<this._minx)&&!((n.y<r.y?n.y:r.y)>this._maxy)&&!((n.y>r.y?n.y:r.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],a=arguments[1];return!this.isNull()&&!(s>this._maxx||s<this._minx||a>this._maxy||a<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof T){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}}},{key:"centre",value:function(){return this.isNull()?null:new T((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],g=arguments[3];s<a?(this._minx=s,this._maxx=a):(this._minx=a,this._maxx=s),u<g?(this._miny=u,this._maxy=g):(this._miny=g,this._maxy=u)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+T.hashCode(this._minx))+T.hashCode(this._maxx))+T.hashCode(this._miny))+T.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[U,F]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],g=arguments[3];this.init(s,a,u,g)}}},{key:"intersects",value:function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],g=Math.min(a.x,u.x),m=Math.max(a.x,u.x),N=Math.min(r.x,s.x),w=Math.max(r.x,s.x);return!(N>m)&&!(w<g)&&(g=Math.min(a.y,u.y),m=Math.max(a.y,u.y),N=Math.min(r.y,s.y),w=Math.max(r.y,s.y),!(N>m)&&!(w<g))}}}])}(),j=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(i.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return t!==null&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(arguments.length===1){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(arguments.length===2){var n=arguments[0],r=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,r)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION)throw new G("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return this.envelope!=null&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=this._envelope==null?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new mt(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var s=n.next(),a=r.next(),u=s.compareTo(a);if(u!==0)return u}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===i.TYPECODE_MULTIPOINT||this.getTypeCode()===i.TYPECODE_MULTILINESTRING||this.getTypeCode()===i.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[z,U,F]}},{key:"getClass",value:function(){return i}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1}}])}();j.constructor_=function(i){i&&(this._envelope=null,this._userData=null,this._factory=i,this._SRID=i.getSRID())},j.TYPECODE_POINT=0,j.TYPECODE_MULTIPOINT=1,j.TYPECODE_LINESTRING=2,j.TYPECODE_LINEARRING=3,j.TYPECODE_MULTILINESTRING=4,j.TYPECODE_POLYGON=5,j.TYPECODE_MULTIPOLYGON=6,j.TYPECODE_GEOMETRYCOLLECTION=7,j.TYPENAME_POINT="Point",j.TYPENAME_MULTIPOINT="MultiPoint",j.TYPENAME_LINESTRING="LineString",j.TYPENAME_LINEARRING="LinearRing",j.TYPENAME_MULTILINESTRING="MultiLineString",j.TYPENAME_POLYGON="Polygon",j.TYPENAME_MULTIPOLYGON="MultiPolygon",j.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",j.geometryChangedFilter={get interfaces_(){return[D]},filter:function(i){i.geometryChangedAction()}};var _=function(){function i(){l(this,i)}return f(i,null,[{key:"toLocationSymbol",value:function(t){switch(t){case i.EXTERIOR:return"e";case i.BOUNDARY:return"b";case i.INTERIOR:return"i";case i.NONE:return"-"}throw new G("Unknown location value: "+t)}}])}();_.INTERIOR=0,_.BOUNDARY=1,_.EXTERIOR=2,_.NONE=-1;var Zt=function(){return f(function i(){l(this,i)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Ke=function(i){function t(e){var n;return l(this,t),(n=c(this,t,[e])).name=Object.keys({NoSuchElementException:t})[0],n}return d(t,i),f(t)}(Y),oe=function(i){function t(e){var n;return l(this,t),(n=c(this,t,[e])).name=Object.keys({UnsupportedOperationException:t})[0],n}return d(t,i),f(t)}(Y),si=function(i){function t(){return l(this,t),c(this,t,arguments)}return d(t,i),f(t,[{key:"contains",value:function(){}}])}(Zt),Sn=function(i){function t(e){var n;return l(this,t),(n=c(this,t)).map=new Map,e instanceof Zt&&n.addAll(e),n}return d(t,i),f(t,[{key:"contains",value:function(e){var n=e.hashCode?e.hashCode():e;return!!this.map.has(n)}},{key:"add",value:function(e){var n=e.hashCode?e.hashCode():e;return!this.map.has(n)&&!!this.map.set(n,e)}},{key:"addAll",value:function(e){var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.add(s)}}catch(a){r.e(a)}finally{r.f()}return!0}},{key:"remove",value:function(){throw new oe}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Es(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(si),Es=function(){return f(function i(t){l(this,i),this.iterator=t.values();var e=this.iterator.next(),n=e.done,r=e.value;this.done=n,this.value=r},[{key:"next",value:function(){if(this.done)throw new Ke;var i=this.value,t=this.iterator.next(),e=t.done,n=t.value;return this.done=e,this.value=n,i}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new oe}}])}(),q=function(){function i(){l(this,i)}return f(i,null,[{key:"opposite",value:function(t){return t===i.LEFT?i.RIGHT:t===i.RIGHT?i.LEFT:t}}])}();q.ON=0,q.LEFT=1,q.RIGHT=2;var ai=function(i){function t(e){var n;return l(this,t),(n=c(this,t,[e])).name=Object.keys({EmptyStackException:t})[0],n}return d(t,i),f(t)}(Y),ui=function(i){function t(e){var n;return l(this,t),(n=c(this,t,[e])).name=Object.keys({IndexOutOfBoundsException:t})[0],n}return d(t,i),f(t)}(Y),fe=function(i){function t(){return l(this,t),c(this,t,arguments)}return d(t,i),f(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Zt),xs=function(i){function t(){var e;return l(this,t),(e=c(this,t)).array=[],e}return d(t,i),f(t,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new ui;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(this.array.length===0)throw new ai;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new ai;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(fe);function rt(i,t){return i.interfaces_&&i.interfaces_.indexOf(t)>-1}var Fe=function(){return f(function i(t){l(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),Qe=function(){function i(t){l(this,i),this.value=t}return f(i,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new i(t)}}])}(),wn=function(){return f(function i(){l(this,i)},null,[{key:"isWhitespace",value:function(i){return i<=32&&i>=0||i===127}},{key:"toUpperCase",value:function(i){return i.toUpperCase()}}])}(),nt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var n=this.abs(),r=i.magnitude(n._hi),s=i.TEN.pow(r);(n=n.divide(s)).gt(i.TEN)?(n=n.divide(i.TEN),r+=1):n.lt(i.ONE)&&(n=n.multiply(i.TEN),r-=1);for(var a=r+1,u=new Fe,g=i.MAX_PRINT_DIGITS-1,m=0;m<=g;m++){t&&m===a&&u.append(".");var N=Math.trunc(n._hi);if(N<0)break;var w=!1,R=0;N>9?(w=!0,R="9"):R="0"+N,u.append(R),n=n.subtract(i.valueOf(N)).multiply(i.TEN),w&&n.selfAdd(i.TEN);var X=!0,H=i.magnitude(n._hi);if(H<0&&Math.abs(H)>=g-m&&(X=!1),!X)break}return e[0]=r,u.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof i){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n,r,s,a,u=arguments[0],g=arguments[1],m=null,N=null,w=null,R=null;return s=this._hi/u,R=(m=(w=i.SPLIT*s)-(m=w-s))*(N=(R=i.SPLIT*u)-(N=R-u))-(a=s*u)+m*(r=u-N)+(n=s-m)*N+n*r,R=s+(w=(this._hi-a-R+this._lo-s*g)/u),this._hi=R,this._lo=s-R+w,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof i){var t,e,n,r,s=arguments[0],a=null,u=null,g=null,m=null;return t=(n=this._hi/s._hi)-(a=(g=i.SPLIT*n)-(a=g-n)),m=a*(u=(m=i.SPLIT*s._hi)-(u=m-s._hi))-(r=n*s._hi)+a*(e=s._hi-u)+t*u+t*e,new i(m=n+(g=(this._hi-r-m+this._lo-n*s._lo)/s._hi),n-m+g)}if(typeof arguments[0]=="number"){var N=arguments[0];return V.isNaN(N)?i.createNaN():i.copy(this).selfDivide(N,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(t===0)return i.valueOf(1);var e=new i(this),n=i.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return i.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new i(t,e)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return i.valueOf(0);if(this.isNegative())return i.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=i.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e,n,r,s,a,u=arguments[0],g=null;return g=(r=this._hi+u)-(s=r-this._hi),n=(a=(g=u-s+(this._hi-g))+this._lo)+(r-(e=r+a)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(arguments.length===2){var m,N,w,R,X=arguments[0],H=arguments[1],K=null,lt=null,ut=null;w=this._hi+X,N=this._lo+H,lt=w-(ut=w-this._hi),K=N-(R=N-this._lo);var vt=(m=w+(ut=(lt=X-ut+(this._hi-lt))+N))+(ut=(K=H-R+(this._lo-K))+(ut+(w-m))),wt=ut+(m-vt);return this._hi=vt,this._lo=wt,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n,r,s=arguments[0],a=arguments[1],u=null,g=null,m=null,N=null;u=(m=i.SPLIT*this._hi)-this._hi,N=i.SPLIT*s,u=m-u,n=this._hi-u,g=N-s;var w=(m=this._hi*s)+(N=u*(g=N-g)-m+u*(r=s-g)+n*g+n*r+(this._hi*a+this._lo*s)),R=N+(u=m-w);return this._hi=w,this._lo=R,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return i.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new i(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new i(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return t.isNaN()?i.createNaN():i.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return V.isNaN(e)?i.createNaN():i.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return V.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=i.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,s=n;if(n.charAt(0)===".")s="0"+n;else if(r<0)s="0."+i.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var a=r-n.length;s=n+i.stringOfChar("0",a)+".0"}return this.isNegative()?"-"+s:s}},{key:"reciprocal",value:function(){var t,e,n,r,s=null,a=null,u=null,g=null;t=(n=1/this._hi)-(s=(u=i.SPLIT*n)-(s=u-n)),a=(g=i.SPLIT*this._hi)-this._hi;var m=n+(u=(1-(r=n*this._hi)-(g=s*(a=g-a)-r+s*(e=this._hi-a)+t*a+t*e)-n*this._lo)/this._hi);return new i(m,n-m+u)}},{key:"toSciNotation",value:function(){if(this.isZero())return i.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=i.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var s="";n.length>1&&(s=n.substring(1));var a=n.charAt(0)+"."+s;return this.isNegative()?"-"+a+r:a+r}},{key:"abs",value:function(){return this.isNaN()?i.NaN:this.isNegative()?this.negate():new i(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return i.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return i.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof i){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?i.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[F,U,z]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];i.constructor_.call(this,i.parse(n))}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.init(r,s)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];return i.determinant(i.valueOf(t),i.valueOf(e),i.valueOf(n),i.valueOf(r))}if(arguments[3]instanceof i&&arguments[2]instanceof i&&arguments[0]instanceof i&&arguments[1]instanceof i){var s=arguments[1],a=arguments[2],u=arguments[3];return arguments[0].multiply(u).selfSubtract(s.multiply(a))}}},{key:"sqr",value:function(t){return i.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var t=arguments[0];return i.parse(t)}if(typeof arguments[0]=="number")return new i(arguments[0])}},{key:"sqrt",value:function(t){return i.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var e=0,n=t.length;wn.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var s=t.charAt(e);s!=="-"&&s!=="+"||(e++,s==="-"&&(r=!0))}for(var a=new i,u=0,g=0,m=0,N=!1;!(e>=n);){var w=t.charAt(e);if(e++,wn.isDigit(w)){var R=w-"0";a.selfMultiply(i.TEN),a.selfAdd(R),u++}else{if(w!=="."){if(w==="e"||w==="E"){var X=t.substring(e);try{m=Qe.parseInt(X)}catch(vt){throw vt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+X+" in string "+t):vt}break}throw new NumberFormatException("Unexpected character '"+w+"' at position "+e+" in string "+t)}g=u,N=!0}}var H=a;N||(g=u);var K=u-g-m;if(K===0)H=a;else if(K>0){var lt=i.TEN.pow(K);H=a.divide(lt)}else if(K<0){var ut=i.TEN.pow(-K);H=a.multiply(ut)}return r?H.negate():H}},{key:"createNaN",value:function(){return new i(V.NaN,V.NaN)}},{key:"copy",value:function(t){return new i(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r}},{key:"stringOfChar",value:function(t,e){for(var n=new Fe,r=0;r<e;r++)n.append(t);return n.toString()}}])}();nt.PI=new nt(3.141592653589793,12246467991473532e-32),nt.TWO_PI=new nt(6.283185307179586,24492935982947064e-32),nt.PI_2=new nt(1.5707963267948966,6123233995736766e-32),nt.E=new nt(2.718281828459045,14456468917292502e-32),nt.NaN=new nt(V.NaN,V.NaN),nt.EPS=123259516440783e-46,nt.SPLIT=134217729,nt.MAX_PRINT_DIGITS=32,nt.TEN=nt.valueOf(10),nt.ONE=nt.valueOf(1),nt.SCI_NOT_EXPONENT_CHAR="E",nt.SCI_NOT_ZERO="0.0E0";var Tn=function(){function i(){l(this,i)}return f(i,null,[{key:"orientationIndex",value:function(t,e,n){var r=i.orientationIndexFilter(t,e,n);if(r<=1)return r;var s=nt.valueOf(e.x).selfAdd(-t.x),a=nt.valueOf(e.y).selfAdd(-t.y),u=nt.valueOf(n.x).selfAdd(-e.x),g=nt.valueOf(n.y).selfAdd(-e.y);return s.selfMultiply(g).selfSubtract(a.selfMultiply(u)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof nt&&arguments[2]instanceof nt&&arguments[0]instanceof nt&&arguments[1]instanceof nt){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],g=nt.valueOf(r),m=nt.valueOf(s),N=nt.valueOf(a),w=nt.valueOf(u);return g.multiply(w).selfSubtract(m.multiply(N)).signum()}}},{key:"intersection",value:function(t,e,n,r){var s=new nt(t.y).selfSubtract(e.y),a=new nt(e.x).selfSubtract(t.x),u=new nt(t.x).selfMultiply(e.y).selfSubtract(new nt(e.x).selfMultiply(t.y)),g=new nt(n.y).selfSubtract(r.y),m=new nt(r.x).selfSubtract(n.x),N=new nt(n.x).selfMultiply(r.y).selfSubtract(new nt(r.x).selfMultiply(n.y)),w=a.multiply(N).selfSubtract(m.multiply(u)),R=g.multiply(u).selfSubtract(s.multiply(N)),X=s.multiply(m).selfSubtract(g.multiply(a)),H=w.selfDivide(X).doubleValue(),K=R.selfDivide(X).doubleValue();return V.isNaN(H)||V.isInfinite(H)||V.isNaN(K)||V.isInfinite(K)?null:new T(H,K)}},{key:"orientationIndexFilter",value:function(t,e,n){var r=null,s=(t.x-n.x)*(e.y-n.y),a=(t.y-n.y)*(e.x-n.x),u=s-a;if(s>0){if(a<=0)return i.signum(u);r=s+a}else{if(!(s<0)||a>=0)return i.signum(u);r=-s-a}var g=i.DP_SAFE_EPSILON*r;return u>=g||-u>=g?i.signum(u):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}])}();Tn.DP_SAFE_EPSILON=1e-15;var ot=function(){return f(function i(){l(this,i)},[{key:"getM",value:function(i){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(i,t)}return V.NaN}},{key:"setOrdinate",value:function(i,t,e){}},{key:"getZ",value:function(i){return this.hasZ()?this.getOrdinate(i,2):V.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(i,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(i){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(i){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(i){}},{key:"copy",value:function(){}},{key:"getY",value:function(i){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[z]}}])}();ot.X=0,ot.Y=1,ot.Z=2,ot.M=3;var it=function(){function i(){l(this,i)}return f(i,null,[{key:"index",value:function(t,e,n){return Tn.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new G("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,s=1;s<=e;s++){var a=t[s];a.y>n.y&&(n=a,r=s)}var u=r;do(u-=1)<0&&(u=e);while(t[u].equals2D(n)&&u!==r);var g=r;do g=(g+1)%e;while(t[g].equals2D(n)&&g!==r);var m=t[u],N=t[g];if(m.equals2D(n)||N.equals2D(n)||m.equals2D(N))return!1;var w=i.index(m,n,N);return w===0?m.x>N.x:w>0}if(rt(arguments[0],ot)){var R=arguments[0],X=R.size()-1;if(X<3)throw new G("Ring has fewer than 4 points, so orientation cannot be determined");for(var H=R.getCoordinate(0),K=0,lt=1;lt<=X;lt++){var ut=R.getCoordinate(lt);ut.y>H.y&&(H=ut,K=lt)}var vt=null,wt=K;do(wt-=1)<0&&(wt=X),vt=R.getCoordinate(wt);while(vt.equals2D(H)&&wt!==K);var Tt=null,pe=K;do pe=(pe+1)%X,Tt=R.getCoordinate(pe);while(Tt.equals2D(H)&&pe!==K);if(vt.equals2D(H)||Tt.equals2D(H)||vt.equals2D(Tt))return!1;var He=i.index(vt,H,Tt);return He===0?vt.x>Tt.x:He>0}}}])}();it.CLOCKWISE=-1,it.RIGHT=it.CLOCKWISE,it.COUNTERCLOCKWISE=1,it.LEFT=it.COUNTERCLOCKWISE,it.COLLINEAR=0,it.STRAIGHT=it.COLLINEAR;var Is=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(i,t){var e=this.getRightmostSideOfSegment(i,t);return e<0&&(e=this.getRightmostSideOfSegment(i,t-1)),e<0&&(this._minCoord=null,this.checkForRightmostCoordinate(i)),e}},{key:"findRightmostEdgeAtVertex",value:function(){var i=this._minDe.getEdge().getCoordinates();st.isTrue(this._minIndex>0&&this._minIndex<i.length,"rightmost point expected to be interior vertex of edge");var t=i[this._minIndex-1],e=i[this._minIndex+1],n=it.index(this._minCoord,e,t),r=!1;(t.y<this._minCoord.y&&e.y<this._minCoord.y&&n===it.COUNTERCLOCKWISE||t.y>this._minCoord.y&&e.y>this._minCoord.y&&n===it.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(i,t){var e=i.getEdge().getCoordinates();if(t<0||t+1>=e.length||e[t].y===e[t+1].y)return-1;var n=q.LEFT;return e[t].y<e[t+1].y&&(n=q.RIGHT),n}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(i){for(var t=i.getEdge().getCoordinates(),e=0;e<t.length-1;e++)(this._minCoord===null||t[e].x>this._minCoord.x)&&(this._minDe=i,this._minIndex=e,this._minCoord=t[e])}},{key:"findRightmostEdgeAtNode",value:function(){var i=this._minDe.getNode().getEdges();this._minDe=i.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();e.isForward()&&this.checkForRightmostCoordinate(e)}st.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===q.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),re=function(i){function t(e,n){var r;return l(this,t),(r=c(this,t,[n?e+" [ "+n+" ]":e])).pt=n?new T(n):void 0,r.name=Object.keys({TopologyException:t})[0],r}return d(t,i),f(t,[{key:"getCoordinate",value:function(){return this.pt}}])}(xt),Ns=function(){return f(function i(){l(this,i),this.array=[]},[{key:"addLast",value:function(i){this.array.push(i)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),tt=function(i){function t(e){var n;return l(this,t),(n=c(this,t)).array=[],e instanceof Zt&&n.addAll(e),n}return d(t,i),f(t,[{key:"interfaces_",get:function(){return[fe,Zt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return arguments.length===1?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.array.push(s)}}catch(a){r.e(a)}finally{r.f()}}},{key:"set",value:function(e,n){var r=this.array[e];return this.array[e]=n,r}},{key:"iterator",value:function(){return new Ss(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new ui;return this.array[e]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(e){e?this.array.sort(function(n,r){return e.compare(n,r)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var n=0,r=this.array.length;n<r;n++)if(this.array[n]===e)return!!this.array.splice(n,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(fe),Ss=function(){return f(function i(t){l(this,i),this.arrayList=t,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Ke;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(i){return this.arrayList.set(this.position-1,i)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),ws=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();)i.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(i){for(var t=null,e=i.getEdges().iterator();e.hasNext();){var n=e.next();if(n.isVisited()||n.getSym().isVisited()){t=n;break}}if(t===null)throw new re("unable to find edge to compute depths at "+i.getCoordinate());i.getEdges().computeDepths(t);for(var r=i.getEdges().iterator();r.hasNext();){var s=r.next();s.setVisited(!0),this.copySymDepths(s)}}},{key:"computeDepth",value:function(i){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(q.RIGHT,i),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(i){this.addReachable(i),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();){var t=i.next();t.getDepth(q.RIGHT)>=1&&t.getDepth(q.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(i){var t=new Sn,e=new Ns,n=i.getNode();for(e.addLast(n),t.add(n),i.setVisited(!0);!e.isEmpty();){var r=e.removeFirst();t.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var a=s.next().getSym();if(!a.isVisited()){var u=a.getNode();t.contains(u)||(e.addLast(u),t.add(u))}}}}},{key:"compareTo",value:function(i){var t=i;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var i=new mt,t=this._dirEdgeList.iterator();t.hasNext();)for(var e=t.next().getEdge().getCoordinates(),n=0;n<e.length-1;n++)i.expandToInclude(e[n]);this._env=i}return this._env}},{key:"addReachable",value:function(i){var t=new xs;for(t.add(i);!t.empty();){var e=t.pop();this.add(e,t)}}},{key:"copySymDepths",value:function(i){var t=i.getSym();t.setDepth(q.LEFT,i.getDepth(q.RIGHT)),t.setDepth(q.RIGHT,i.getDepth(q.LEFT))}},{key:"add",value:function(i,t){i.setVisited(!0),this._nodes.add(i);for(var e=i.getEdges().iterator();e.hasNext();){var n=e.next();this._dirEdgeList.add(n);var r=n.getSym().getNode();r.isVisited()||t.push(r)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new tt,this._nodes=new tt,this._rightMostCoord=null,this._env=null,this._finder=new Is}}])}(),Cn=function(){return f(function i(){l(this,i)},null,[{key:"intersection",value:function(i,t,e,n){var r=i.x<t.x?i.x:t.x,s=i.y<t.y?i.y:t.y,a=i.x>t.x?i.x:t.x,u=i.y>t.y?i.y:t.y,g=e.x<n.x?e.x:n.x,m=e.y<n.y?e.y:n.y,N=e.x>n.x?e.x:n.x,w=e.y>n.y?e.y:n.y,R=((r>g?r:g)+(a<N?a:N))/2,X=((s>m?s:m)+(u<w?u:w))/2,H=i.x-R,K=i.y-X,lt=t.x-R,ut=t.y-X,vt=e.x-R,wt=e.y-X,Tt=n.x-R,pe=n.y-X,He=K-ut,Zi=lt-H,Wi=H*ut-lt*K,ji=wt-pe,Ji=Tt-vt,Ki=vt*pe-Tt*wt,Qi=He*Ji-ji*Zi,Xn=(Zi*Ki-Ji*Wi)/Qi,Vn=(ji*Wi-He*Ki)/Qi;return V.isNaN(Xn)||V.isInfinite(Xn)||V.isNaN(Vn)||V.isInfinite(Vn)?null:new T(Xn+R,Vn+X)}}])}(),qt=function(){return f(function i(){l(this,i)},null,[{key:"arraycopy",value:function(i,t,e,n,r){for(var s=0,a=t;a<t+r;a++)e[n+s]=i[a],s++}},{key:"getProperty",value:function(i){return{"line.separator":`
`}[i]}}])}(),Ge=function(){function i(){l(this,i)}return f(i,null,[{key:"log10",value:function(t){var e=Math.log(t);return V.isInfinite(e)||V.isNaN(e)?e:e/i.LOG_10}},{key:"min",value:function(t,e,n,r){var s=t;return e<s&&(s=e),n<s&&(s=n),r<s&&(s=r),s}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1],a=arguments[2];return r<s?s:r>a?a:r}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(arguments.length===3){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(arguments.length===4){var r=arguments[1],s=arguments[2],a=arguments[3],u=arguments[0];return r>u&&(u=r),s>u&&(u=s),a>u&&(u=a),u}}},{key:"average",value:function(t,e){return(t+e)/2}}])}();Ge.LOG_10=Math.log(10);var Wt=function(){function i(){l(this,i)}return f(i,null,[{key:"segmentToSegment",value:function(t,e,n,r){if(t.equals(e))return i.pointToSegment(t,n,r);if(n.equals(r))return i.pointToSegment(r,t,e);var s=!1;if(mt.intersects(t,e,n,r)){var a=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(a===0)s=!0;else{var u=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),g=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/a,m=u/a;(m<0||m>1||g<0||g>1)&&(s=!0)}}else s=!0;return s?Ge.min(i.pointToSegment(t,n,r),i.pointToSegment(e,n,r),i.pointToSegment(n,t,e),i.pointToSegment(r,t,e)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),s=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;if(s<=0)return t.distance(e);if(s>=1)return t.distance(n);var a=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(a)*Math.sqrt(r)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(s)*Math.sqrt(r)}},{key:"pointToSegmentString",value:function(t,e){if(e.length===0)throw new G("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=i.pointToSegment(t,e[r],e[r+1]);s<n&&(n=s)}return n}}])}(),oi=function(){return f(function i(){l(this,i)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||rt(arguments[0],ot);else if(arguments.length!==2){if(arguments.length===3){var i=arguments[0],t=arguments[1];return this.create(i,t)}}}}])}(),$e=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),Ts=function(){return f(function i(){l(this,i)},null,[{key:"ofLine",value:function(i){var t=i.size();if(t<=1)return 0;var e=0,n=new T;i.getCoordinate(0,n);for(var r=n.x,s=n.y,a=1;a<t;a++){i.getCoordinate(a,n);var u=n.x,g=n.y,m=u-r,N=g-s;e+=Math.sqrt(m*m+N*N),r=u,s=g}return e}}])}(),li=f(function i(){l(this,i)}),ge=function(){function i(){l(this,i)}return f(i,null,[{key:"copyCoord",value:function(t,e,n,r){for(var s=Math.min(t.getDimension(),n.getDimension()),a=0;a<s;a++)n.setOrdinate(r,a,t.getOrdinate(e,a))}},{key:"isRing",value:function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,ot.X)===t.getOrdinate(e-1,ot.X)&&t.getOrdinate(0,ot.Y)===t.getOrdinate(e-1,ot.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(rt(arguments[0],ot)&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1];i.scroll(t,e,i.isRing(t))}else if(rt(arguments[0],ot)&&arguments[1]instanceof T){var n=arguments[0],r=arguments[1],s=i.indexOf(r,n);if(s<=0)return null;i.scroll(n,s)}}else if(arguments.length===3){var a=arguments[0],u=arguments[1],g=arguments[2];if(u<=0)return null;for(var m=a.copy(),N=g?a.size()-1:a.size(),w=0;w<N;w++)for(var R=0;R<a.getDimension();R++)a.setOrdinate(w,R,m.getOrdinate((u+w)%N,R));if(g)for(var X=0;X<a.getDimension();X++)a.setOrdinate(N,X,a.getOrdinate(0,X))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),s=0;s<n;s++)for(var a=0;a<r;a++){var u=t.getOrdinate(s,a),g=e.getOrdinate(s,a);if(t.getOrdinate(s,a)!==e.getOrdinate(s,a)&&(!V.isNaN(u)||!V.isNaN(g)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var t=arguments[0];return i.minCoordinateIndex(t,0,t.size()-1)}if(arguments.length===3){for(var e=arguments[0],n=arguments[2],r=-1,s=null,a=arguments[1];a<=n;a++){var u=e.getCoordinate(a);(s===null||s.compareTo(u)>0)&&(s=u,r=a)}return r}}},{key:"extend",value:function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();if(i.copy(e,0,r,0,s),s>0)for(var a=s;a<n;a++)i.copy(e,s-1,r,a,1);return r}},{key:"reverse",value:function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)i.swap(t,r,e-r)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var s=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,s)}}},{key:"copy",value:function(t,e,n,r,s){for(var a=0;a<s;a++)i.copyCoord(t,e+a,n,r+a)}},{key:"ensureValidRing",value:function(t,e){var n=e.size();return n===0?e:n<=3?i.createClosedRing(t,e,4):e.getOrdinate(0,ot.X)===e.getOrdinate(n-1,ot.X)&&e.getOrdinate(0,ot.Y)===e.getOrdinate(n-1,ot.Y)?e:i.createClosedRing(t,e,n+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,ot.X)&&t.y===e.getOrdinate(n,ot.Y))return n;return-1}},{key:"createClosedRing",value:function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();i.copy(e,0,r,0,s);for(var a=s;a<n;a++)i.copy(e,0,r,a,1);return r}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var r=t.getCoordinate(n);(e===null||e.compareTo(r)>0)&&(e=r)}return e}}])}(),B=function(){function i(){l(this,i)}return f(i,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case i.FALSE:return i.SYM_FALSE;case i.TRUE:return i.SYM_TRUE;case i.DONTCARE:return i.SYM_DONTCARE;case i.P:return i.SYM_P;case i.L:return i.SYM_L;case i.A:return i.SYM_A}throw new G("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(wn.toUpperCase(t)){case i.SYM_FALSE:return i.FALSE;case i.SYM_TRUE:return i.TRUE;case i.SYM_DONTCARE:return i.DONTCARE;case i.SYM_P:return i.P;case i.SYM_L:return i.L;case i.SYM_A:return i.A}throw new G("Unknown dimension symbol: "+t)}}])}();B.P=0,B.L=1,B.A=2,B.FALSE=-1,B.TRUE=-2,B.DONTCARE=-3,B.SYM_FALSE="F",B.SYM_TRUE="T",B.SYM_DONTCARE="*",B.SYM_P="0",B.SYM_L="1",B.SYM_A="2";var tn=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),en=function(){return f(function i(){l(this,i)},[{key:"filter",value:function(i,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),qe=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new mt:this._points.expandEnvelope(new mt)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof j){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var s=0;s<this._points.size();s++)if(!this.equal(this._points.getCoordinate(s),r._points.getCoordinate(s),n))return!1;return!0}return p(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var n=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(n))>0){var r=this._points.copy();ge.reverse(r),this._points=r}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?B.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return ge.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return j.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Ts.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var e=arguments[0],n=0,r=0;n<this._points.size()&&r<e._points.size();){var s=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(r));if(s!==0)return s;n++,r++}return n<this._points.size()?1:r<e._points.size()?-1:0}if(arguments.length===2){var a=arguments[0];return arguments[1].compare(this._points,a._points)}}},{key:"apply",value:function(){if(rt(arguments[0],$e))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(this._points.getCoordinate(n));else if(rt(arguments[0],en)){var r=arguments[0];if(this._points.size()===0)return null;for(var s=0;s<this._points.size()&&(r.filter(this._points,s),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else rt(arguments[0],tn)?arguments[0].filter(this):rt(arguments[0],D)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new oe}},{key:"isEquivalentClass",value:function(e){return e instanceof t}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return j.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(e){if(e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),e.size()===1)throw new G("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var n=0;n<this._points.size();n++)if(this._points.getCoordinate(n).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[li]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];j.constructor_.call(this,n),this.init(e)}}}}])}(j),hi=f(function i(){l(this,i)}),Ln=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new mt;var e=new mt;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new t(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof j){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return p(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return B.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return j.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0];return arguments[1].compare(this._coordinates,n._coordinates)}}},{key:"apply",value:function(){if(rt(arguments[0],$e)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(rt(arguments[0],en)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else rt(arguments[0],tn)?arguments[0].filter(this):rt(arguments[0],D)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return j.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(e){e===null&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),st.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[hi]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],n=arguments[1];j.constructor_.call(this,n),this.init(e)}}])}(j),ci=function(){function i(){l(this,i)}return f(i,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(i.ofRingSigned(t))}if(rt(arguments[0],ot)){var e=arguments[0];return Math.abs(i.ofRingSigned(e))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var s=t[r].x-n,a=t[r+1].y;e+=s*(t[r-1].y-a)}return e/2}if(rt(arguments[0],ot)){var u=arguments[0],g=u.size();if(g<3)return 0;var m=new T,N=new T,w=new T;u.getCoordinate(0,N),u.getCoordinate(1,w);var R=N.x;w.x-=R;for(var X=0,H=1;H<g-1;H++)m.y=N.y,N.x=w.x,N.y=w.y,u.getCoordinate(H+1,w),w.x-=R,X+=N.x*(m.y-w.y);return X/2}}}])}(),ve=function(){return f(function i(){l(this,i)},null,[{key:"sort",value:function(){var i=arguments,t=arguments[0];if(arguments.length===1)t.sort(function(R,X){return R.compareTo(X)});else if(arguments.length===2)t.sort(function(R,X){return i[1].compare(R,X)});else if(arguments.length===3){var e=t.slice(arguments[1],arguments[2]);e.sort();var n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var r,s=C(n);try{for(s.s();!(r=s.n()).done;){var a=r.value;t.push(a)}}catch(R){s.e(R)}finally{s.f()}}else if(arguments.length===4){var u=t.slice(arguments[1],arguments[2]);u.sort(function(R,X){return i[3].compare(R,X)});var g=t.slice(0,arguments[1]).concat(u,t.slice(arguments[2],t.length));t.splice(0,t.length);var m,N=C(g);try{for(N.s();!(m=N.n()).done;){var w=m.value;t.push(w)}}catch(R){N.e(R)}finally{N.f()}}}},{key:"asList",value:function(i){var t,e=new tt,n=C(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.add(r)}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"copyOf",value:function(i,t){return i.slice(0,t)}}])}(),fi=f(function i(){l(this,i)}),nn=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),n=-1,r=this._shell.getCoordinates(),s=0;s<r.length;s++)e[++n]=r[s];for(var a=0;a<this._holes.length;a++)for(var u=this._holes[a].getCoordinates(),g=0;g<u.length;g++)e[++n]=u[g];return e}},{key:"getArea",value:function(){var e=0;e+=ci.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++)e-=ci.ofRing(this._holes[n].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<this._holes.length;r++)n[r]=this._holes[r].copy();return new t(e,n,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var e=this._shell.getCoordinateSequence(),n=this.getEnvelopeInternal(),r=0;r<5;r++){var s=e.getX(r);if(s!==n.getMinX()&&s!==n.getMaxX())return!1;var a=e.getY(r);if(a!==n.getMinY()&&a!==n.getMaxY())return!1}for(var u=e.getX(0),g=e.getY(0),m=1;m<=4;m++){var N=e.getX(m),w=e.getY(m);if(N!==u==(w!==g))return!1;u=N,g=w}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof j){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,s=this._shell,a=r._shell;if(!s.equalsExact(a,n)||this._holes.length!==r._holes.length)return!1;for(var u=0;u<this._holes.length;u++)if(!this._holes[u].equalsExact(r._holes[u],n))return!1;return!0}return p(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);ve.sort(this._holes)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var s=n.getCoordinateSequence(),a=ge.minCoordinateIndex(s,0,s.size()-2);ge.scroll(s,a,!0),it.isCCW(s)===r&&ge.reverse(s)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),n=new Array(this.getNumInteriorRing()).fill(null),r=0;r<n.length;r++)n[r]=this.getInteriorRingN(r).reverse();return this.getFactory().createPolygon(e,n)}},{key:"getTypeCode",value:function(){return j.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)e+=this._holes[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)e+=this._holes[n].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,n){var r=e.copy();return this.normalize(r,n),r}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(arguments.length===2){var s=arguments[1],a=arguments[0],u=this._shell,g=a._shell,m=u.compareToSameClass(g,s);if(m!==0)return m;for(var N=this.getNumInteriorRing(),w=a.getNumInteriorRing(),R=0;R<N&&R<w;){var X=this.getInteriorRingN(R),H=a.getInteriorRingN(R),K=X.compareToSameClass(H,s);if(K!==0)return K;R++}return R<N?1:R<w?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],$e)){var e=arguments[0];this._shell.apply(e);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(e)}else if(rt(arguments[0],en)){var r=arguments[0];if(this._shell.apply(r),!r.isDone())for(var s=0;s<this._holes.length&&(this._holes[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],tn))arguments[0].filter(this);else if(rt(arguments[0],D)){var a=arguments[0];a.filter(this),this._shell.apply(a);for(var u=0;u<this._holes.length;u++)this._holes[u].apply(a)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++)e[n+1]=this._holes[n];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return j.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[fi]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],n=arguments[1],r=arguments[2];if(j.constructor_.call(this,r),e===null&&(e=this.getFactory().createLinearRing()),n===null&&(n=[]),j.hasNullElements(n))throw new G("holes must not contain null elements");if(e.isEmpty()&&j.hasNonEmptyElements(n))throw new G("shell is empty but holes are not");this._shell=e,this._holes=n}}])}(j),Cs=function(i){function t(){return l(this,t),c(this,t,arguments)}return d(t,i),f(t)}(si),gi=function(i){function t(e){var n;return l(this,t),(n=c(this,t)).array=[],e instanceof Zt&&n.addAll(e),n}return d(t,i),f(t,[{key:"contains",value:function(e){var n,r=C(this.array);try{for(r.s();!(n=r.n()).done;)if(n.value.compareTo(e)===0)return!0}catch(s){r.e(s)}finally{r.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var n=0,r=this.array.length;n<r;n++)if(this.array[n].compareTo(e)===1)return!!this.array.splice(n,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.add(s)}}catch(a){r.e(a)}finally{r.f()}return!0}},{key:"remove",value:function(){throw new oe}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Ls(this.array)}}])}(Cs),Ls=function(){return f(function i(t){l(this,i),this.array=t,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Ke;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new oe}}])}(),At=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeEnvelopeInternal",value:function(){for(var e=new mt,n=0;n<this._geometries.length;n++)e.expandToInclude(this._geometries[n].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),n=-1,r=0;r<this._geometries.length;r++)for(var s=this._geometries[r].getCoordinates(),a=0;a<s.length;a++)e[++n]=s[a];return e}},{key:"getArea",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof j){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var s=0;s<this._geometries.length;s++)if(!this._geometries[s].equalsExact(r._geometries[s],n))return!1;return!0}return p(t,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();ve.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=B.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,n=new tt(e),r=0;r<e;r++)n.add(this._geometries[r].reverse());return this.getFactory().buildGeometry(n)}},{key:"getTypeCode",value:function(){return j.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=B.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,this._geometries[n].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,n=0;n<this._geometries.length;n++)e+=this._geometries[n].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var e=arguments[0],n=new gi(ve.asList(this._geometries)),r=new gi(ve.asList(e._geometries));return this.compare(n,r)}if(arguments.length===2){for(var s=arguments[1],a=arguments[0],u=this.getNumGeometries(),g=a.getNumGeometries(),m=0;m<u&&m<g;){var N=this.getGeometryN(m),w=a.getGeometryN(m),R=N.compareToSameClass(w,s);if(R!==0)return R;m++}return m<u?1:m<g?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],$e))for(var e=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(e);else if(rt(arguments[0],en)){var r=arguments[0];if(this._geometries.length===0)return null;for(var s=0;s<this._geometries.length&&(this._geometries[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],tn)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)this._geometries[u].apply(a)}else if(rt(arguments[0],D)){var g=arguments[0];g.filter(this);for(var m=0;m<this._geometries.length;m++)this._geometries[m].apply(g)}}},{key:"getBoundary",value:function(){return j.checkNotGeometryCollection(this),st.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return j.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var e=arguments[0],n=arguments[1];if(j.constructor_.call(this,n),e===null&&(e=[]),j.hasNullElements(e))throw new G("geometries must not contain null elements");this._geometries=e}}}}])}(j),Rn=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof j){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&p(t,"equalsExact",this,1).call(this,e,n)}return p(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return p(t,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return B.FALSE}},{key:"getTypeCode",value:function(){return j.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return j.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[hi]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];At.constructor_.call(this,e,n)}}])}(At),Ye=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){return new t(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return B.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||p(t,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return ge.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return j.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!p(t,"isClosed",this,1).call(this))throw new G("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new G("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return j.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];qe.constructor_.call(this,e,n),this.validateConstruction()}}])}(qe);Ye.MINIMUM_VALID_SIZE=4;var me=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;default:throw new G("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return T.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y}throw new G("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new G("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)T.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];T.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof T){var n=arguments[0];T.constructor_.call(this,n.x,n.y)}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];T.constructor_.call(this,r,s,T.NULL_ORDINATE)}}}])}(T);me.X=0,me.Y=1,me.Z=-1,me.M=-1;var ye=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.M:this._m=n;break;default:throw new G("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return T.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.M:return this._m}throw new G("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new G("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)T.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];T.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof T){var n=arguments[0];T.constructor_.call(this,n.x,n.y),this._m=this.getM()}}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];T.constructor_.call(this,r,s,T.NULL_ORDINATE),this._m=a}}}])}(T);ye.X=0,ye.Y=1,ye.Z=-1,ye.M=2;var On=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,n){switch(e){case T.X:this.x=n;break;case T.Y:this.y=n;break;case T.Z:this.z=n;break;case T.M:this._m=n;break;default:throw new G("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case T.X:return this.x;case T.Y:return this.y;case T.Z:return this.getZ();case T.M:return this.getM()}throw new G("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new t(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)T.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof t){var e=arguments[0];T.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof T){var n=arguments[0];T.constructor_.call(this,n),this._m=this.getM()}}else if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];T.constructor_.call(this,r,s,a),this._m=u}}}])}(T),rn=function(){function i(){l(this,i)}return f(i,null,[{key:"measures",value:function(t){return t instanceof me?0:t instanceof ye||t instanceof On?1:0}},{key:"dimension",value:function(t){return t instanceof me?2:t instanceof ye?3:t instanceof On?4:3}},{key:"create",value:function(){if(arguments.length===1){var t=arguments[0];return i.create(t,0)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e===2?new me:e===3&&n===0?new T:e===3&&n===1?new ye:e===4&&n===1?new On:new T}}}])}(),ze=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&rt(arguments[0],Zt)){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return p(t,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var e=p(t,"clone",this,1).call(this),n=0;n<this.size();n++)e.add(n,this.get(n).clone());return e}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(t.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(t.coordArrayType);for(var e=this.size(),n=new Array(e).fill(null),r=0;r<e;r++)n[r]=this.get(e-r-1);return n}}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];return p(t,"add",this,1).call(this,e)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof T&&typeof arguments[1]=="boolean"){var s=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(s))return null;p(t,"add",this,1).call(this,s)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var a=arguments[0],u=arguments[1];return this.add(a,u),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var g=arguments[0],m=arguments[1];if(arguments[2])for(var N=0;N<g.length;N++)this.add(g[N],m);else for(var w=g.length-1;w>=0;w--)this.add(g[w],m);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof T){var R=arguments[0],X=arguments[1];if(!arguments[2]){var H=this.size();if(H>0&&(R>0&&this.get(R-1).equals2D(X)||R<H&&this.get(R).equals2D(X)))return null}p(t,"add",this,1).call(this,R,X)}}else if(arguments.length===4){var K=arguments[0],lt=arguments[1],ut=arguments[2],vt=arguments[3],wt=1;ut>vt&&(wt=-1);for(var Tt=ut;Tt!==vt;Tt+=wt)this.add(K[Tt],lt);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}}}])}(tt);ze.coordArrayType=new Array(0).fill(null);var It=function(){function i(){l(this,i)}return f(i,null,[{key:"isRing",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:"ptNotInList",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(i.indexOf(r,e)<0)return r}return null}},{key:"scroll",value:function(t,e){var n=i.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);qt.arraycopy(t,n,r,0,t.length-n),qt.arraycopy(t,0,r,t.length-n,n),qt.arraycopy(r,0,t,0,t.length)}},{key:"equals",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];if(r===s)return!0;if(r===null||s===null||r.length!==s.length)return!1;for(var u=0;u<r.length;u++)if(a.compare(r[u],s[u])!==0)return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new ze,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(t===null||t.length===0)return 0;var e,n=0,r=C(t);try{for(r.s();!(e=r.n()).done;){var s=e.value;n=Math.max(n,rn.measures(s))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return i.hasRepeatedPoints(t)?new ze(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var s=t[r];t[r]=t[e-r],t[e-r]=s}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var r=new Array(e).fill(null);if(e===0)return r;for(var s=0,a=0;a<t.length;a++)t[a]!==null&&(r[s++]=t[a]);return r}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(arguments.length===5)for(var r=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],g=arguments[4],m=0;m<g;m++)a[u+m]=r[s+m].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n],s=e[t.length-n-1];if(r.compareTo(s)!==0)return!1}return!0}},{key:"envelope",value:function(t){for(var e=new mt,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(i.coordArrayType)}},{key:"dimension",value:function(t){if(t===null||t.length===0)return 3;var e,n=0,r=C(t);try{for(r.s();!(e=r.n()).done;){var s=e.value;n=Math.max(n,rn.dimension(s))}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(r!==0)return r}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(r!==0)return r;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=Ge.clamp(e,0,t.length);var r=(n=Ge.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var s=new Array(r).fill(null);if(r===0)return s;for(var a=0,u=e;u<=n;u++)s[a++]=t[u];return s}}])}(),Rs=function(){return f(function i(){l(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;return It.compare(e,n)}},{key:"interfaces_",get:function(){return[St]}}])}(),Os=function(){return f(function i(){l(this,i)},[{key:"compare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;var r=It.compare(e,n);return It.isEqualReversed(e,n)?0:r}},{key:"OLDcompare",value:function(i,t){var e=i,n=t;if(e.length<n.length)return-1;if(e.length>n.length)return 1;if(e.length===0)return 0;for(var r=It.increasingDirection(e),s=It.increasingDirection(n),a=r>0?0:e.length-1,u=s>0?0:e.length-1,g=0;g<e.length;g++){var m=e[a].compareTo(n[u]);if(m!==0)return m;a+=r,u+=s}return 0}},{key:"interfaces_",get:function(){return[St]}}])}();It.ForwardComparator=Rs,It.BidirectionalComparator=Os,It.coordArrayType=new Array(0).fill(null);var sn=function(){return f(function i(t){l(this,i),this.str=t},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,t){this.str=this.str.substr(0,i)+t+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),Be=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():V.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case ot.X:this._coordinates[t].x=n;break;case ot.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():V.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case ot.X:return this._coordinates[t].x;case ot.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}if(arguments.length===2){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return rn.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new i(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new sn(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ot,F]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];i.constructor_.call(this,t,It.dimension(t),It.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new T}else if(rt(arguments[0],ot)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var s=0;s<this._coordinates.length;s++)this._coordinates[s]=r.getCoordinateCopy(s)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];i.constructor_.call(this,a,u,It.measures(a))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var g=arguments[0],m=arguments[1];this._coordinates=new Array(g).fill(null),this._dimension=m;for(var N=0;N<g;N++)this._coordinates[N]=rn.create(m)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var w=arguments[0],R=arguments[1],X=arguments[2];this._dimension=R,this._measures=X,this._coordinates=w===null?new Array(0).fill(null):w}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var H=arguments[0],K=arguments[1],lt=arguments[2];this._coordinates=new Array(H).fill(null),this._dimension=K,this._measures=lt;for(var ut=0;ut<H;ut++)this._coordinates[ut]=this.createCoordinate()}}}}])}(),bn=function(){function i(){l(this,i)}return f(i,[{key:"readResolve",value:function(){return i.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Be(arguments[0]);if(rt(arguments[0],ot))return new Be(arguments[0])}else{if(arguments.length===2){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Be(arguments[0],t)}if(arguments.length===3){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Be(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[oi,F]}}],[{key:"instance",value:function(){return i.instanceObject}}])}();bn.instanceObject=new bn;var Mn=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof j){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&p(t,"equalsExact",this,1).call(this,e,n)}return p(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return j.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new tt,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getBoundary(),s=0;s<r.getNumGeometries();s++)e.add(r.getGeometryN(s));var a=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(a))}},{key:"getGeometryType",value:function(){return j.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[fi]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];At.constructor_.call(this,e,n)}}])}(At),vi=function(){return f(function i(){l(this,i)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),bs=function(i){function t(){var e;return l(this,t),(e=c(this,t)).map=new Map,e}return d(t,i),f(t,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,n){return this.map.set(e,n),n}},{key:"values",value:function(){for(var e=new tt,n=this.map.values(),r=n.next();!r.done;)e.add(r.value),r=n.next();return e}},{key:"entrySet",value:function(){var e=new Sn;return this.map.entries().forEach(function(n){return e.add(n)}),e}},{key:"size",value:function(){return this.map.size()}}])}(vi),Vt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return Qe.compare(n,r)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===i.FLOATING||this._modelType===i.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===i.FLOATING?t="Floating":this._modelType===i.FLOATING_SINGLE?t="Floating-Single":this._modelType===i.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var t=arguments[0];return V.isNaN(t)||this._modelType===i.FLOATING_SINGLE?t:this._modelType===i.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof T){var e=arguments[0];if(this._modelType===i.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===i.FLOATING?t=16:this._modelType===i.FLOATING_SINGLE?t=6:this._modelType===i.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[F,U]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=i.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof xe){var t=arguments[0];this._modelType=t,t===i.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this._modelType=i.FIXED,this.setScale(e)}else if(arguments[0]instanceof i){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),xe=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"readResolve",value:function(){return i.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[F]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,i.nameToTypeMap.put(t,this)}}])}();xe.nameToTypeMap=new bs,Vt.Type=xe,Vt.FIXED=new xe("FIXED"),Vt.FLOATING=new xe("FLOATING"),Vt.FLOATING_SINGLE=new xe("FLOATING SINGLE"),Vt.maximumPreciseValue=9007199254740992;var Pn=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),n=0;n<e.length;n++)e[n]=this._geometries[n].copy();return new t(e,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof j){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&p(t,"equalsExact",this,1).call(this,e,n)}return p(t,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?B.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return j.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new oe}},{key:"getGeometryType",value:function(){return j.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[li]}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];At.constructor_.call(this,e,n)}}])}(At),Ie=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new G("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new T(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new T(t.getMinX(),t.getMinY()),new T(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new T(t.getMinX(),t.getMinY()),new T(t.getMinX(),t.getMaxY()),new T(t.getMaxX(),t.getMaxY()),new T(t.getMaxX(),t.getMinY()),new T(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ot))return new qe(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new Pn(null,this):arguments.length===1?new Pn(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,n=!1,r=!1,s=t.iterator();s.hasNext();){var a=s.next(),u=a.getTypeCode();e===null&&(e=u),u!==e&&(n=!0),a instanceof At&&(r=!0)}if(e===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(i.toGeometryArray(t));var g=t.iterator().next();if(t.size()>1){if(g instanceof nn)return this.createMultiPolygon(i.toPolygonArray(t));if(g instanceof qe)return this.createMultiLineString(i.toLineStringArray(t));if(g instanceof Ln)return this.createMultiPoint(i.toPointArray(t));st.shouldNeverReachHere("Unhandled geometry type: "+g.getGeometryType())}return g}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(rt(arguments[0],ot))return new Ln(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(rt(arguments[0],ot)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Ye){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2)return new nn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new At(null,this):arguments.length===1?new At(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ot))return new Ye(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Mn(null,this):arguments.length===1?new Mn(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Rn(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Rn(arguments[0],this);if(rt(arguments[0],ot)){var t=arguments[0];if(t===null)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());ge.copy(t,n,r,0,1),e[n]=this.createPoint(r)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[F]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)i.constructor_.call(this,new Vt,0);else if(arguments.length===1){if(rt(arguments[0],oi)){var t=arguments[0];i.constructor_.call(this,new Vt,0,t)}else if(arguments[0]instanceof Vt){var e=arguments[0];i.constructor_.call(this,e,0,i.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];i.constructor_.call(this,n,r,i.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this._precisionModel=s,this._coordinateSequenceFactory=u,this._SRID=a}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return bn.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),An="XY",Ms="XYZ",Ps="XYM",As="XYZM",mi={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},yi="EMPTY",an=1,se=2,le=3,di=4,Ne=5,Ds=6;for(var Fs in mi)mi[Fs].toUpperCase();var Gs=function(){return f(function i(t){l(this,i),this.wkt=t,this.index_=-1},[{key:"isAlpha_",value:function(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"}},{key:"isNumeric_",value:function(i,t){return i>="0"&&i<="9"||i=="."&&!(t!==void 0&&t)}},{key:"isWhiteSpace_",value:function(i){return i==" "||i=="	"||i=="\r"||i==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var i,t=this.nextChar_(),e=this.index_,n=t;if(t=="(")i=se;else if(t==",")i=Ne;else if(t==")")i=le;else if(this.isNumeric_(t)||t=="-")i=di,n=this.readNumber_();else if(this.isAlpha_(t))i=an,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t!=="")throw new Error("Unexpected character: "+t);i=Ds}return{position:e,value:n,type:i}}},{key:"readNumber_",value:function(){var i,t=this.index_,e=!1,n=!1;do i=="."?e=!0:i!="e"&&i!="E"||(n=!0),i=this.nextChar_();while(this.isNumeric_(i,e)||!n&&(i=="e"||i=="E")||n&&(i=="-"||i=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var i,t=this.index_;do i=this.nextChar_();while(this.isAlpha_(i));return this.wkt.substring(t,this.index_--).toUpperCase()}}])}(),qs=function(){return f(function i(t,e){l(this,i),this.lexer_=t,this.token_,this.layout_=An,this.factory=e},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(i){return this.token_.type==i}},{key:"match",value:function(i){var t=this.isTokenType(i);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var i=An,t=this.token_;if(this.isTokenType(an)){var e=t.value;e==="Z"?i=Ms:e==="M"?i=Ps:e==="ZM"&&(i=As),i!==An&&this.consume_()}return i}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(se)){var i=[];do i.push(this.parseGeometry_());while(this.match(Ne));if(this.match(le))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(se)){var i=this.parsePoint_();if(this.match(le))return i}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(se)){var i=this.parsePointList_();if(this.match(le))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(se)){var i=this.parseLineStringTextList_();if(this.match(le))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var i;if(this.match(se)){if(i=this.token_.type==se?this.parsePointTextList_():this.parsePointList_(),this.match(le))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(se)){var i=this.parseLineStringTextList_();if(this.match(le))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(se)){var i=this.parsePolygonTextList_();if(this.match(le))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var i=[],t=this.layout_.length,e=0;e<t;++e){var n=this.token_;if(!this.match(di))break;i.push(n.value)}if(i.length==t)return i;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var i=[this.parsePoint_()];this.match(Ne);)i.push(this.parsePoint_());return i}},{key:"parsePointTextList_",value:function(){for(var i=[this.parsePointText_()];this.match(Ne);)i.push(this.parsePointText_());return i}},{key:"parseLineStringTextList_",value:function(){for(var i=[this.parseLineStringText_()];this.match(Ne);)i.push(this.parseLineStringText_());return i}},{key:"parsePolygonTextList_",value:function(){for(var i=[this.parsePolygonText_()];this.match(Ne);)i.push(this.parsePolygonText_());return i}},{key:"isEmptyGeometry_",value:function(){var i=this.isTokenType(an)&&this.token_.value==yi;return i&&this.consume_(),i}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var i=this.factory,t=function(K){return y(T,L(K))},e=function(K){var lt=K.map(function(ut){return i.createLinearRing(ut.map(t))});return lt.length>1?i.createPolygon(lt[0],lt.slice(1)):i.createPolygon(lt[0])},n=this.token_;if(this.match(an)){var r=n.value;if(this.layout_=this.parseGeometryLayout_(),r=="GEOMETRYCOLLECTION"){var s=this.parseGeometryCollectionText_();return i.createGeometryCollection(s)}switch(r){case"POINT":var a=this.parsePointText_();return a?i.createPoint(y(T,L(a))):i.createPoint();case"LINESTRING":var u=this.parseLineStringText_().map(t);return i.createLineString(u);case"LINEARRING":var g=this.parseLineStringText_().map(t);return i.createLinearRing(g);case"POLYGON":var m=this.parsePolygonText_();return m&&m.length!==0?e(m):i.createPolygon();case"MULTIPOINT":var N=this.parseMultiPointText_();if(!N||N.length===0)return i.createMultiPoint();var w=N.map(t).map(function(K){return i.createPoint(K)});return i.createMultiPoint(w);case"MULTILINESTRING":var R=this.parseMultiLineStringText_().map(function(K){return i.createLineString(K.map(t))});return i.createMultiLineString(R);case"MULTIPOLYGON":var X=this.parseMultiPolygonText_();if(!X||X.length===0)return i.createMultiPolygon();var H=X.map(e);return i.createMultiPolygon(H);default:throw new Error("Invalid geometry type: "+r)}}throw new Error(this.formatErrorMessage_())}}])}();function _i(i){if(i.isEmpty())return"";var t=i.getCoordinate(),e=[t.x,t.y];return t.z===void 0||Number.isNaN(t.z)||e.push(t.z),t.m===void 0||Number.isNaN(t.m)||e.push(t.m),e.join(" ")}function Ue(i){for(var t=i.getCoordinates().map(function(s){var a=[s.x,s.y];return s.z===void 0||Number.isNaN(s.z)||a.push(s.z),s.m===void 0||Number.isNaN(s.m)||a.push(s.m),a}),e=[],n=0,r=t.length;n<r;++n)e.push(t[n].join(" "));return e.join(", ")}function pi(i){var t=[];t.push("("+Ue(i.getExteriorRing())+")");for(var e=0,n=i.getNumInteriorRing();e<n;++e)t.push("("+Ue(i.getInteriorRingN(e))+")");return t.join(", ")}var Ys={Point:_i,LineString:Ue,LinearRing:Ue,Polygon:pi,MultiPoint:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+_i(i.getGeometryN(e))+")");return t.join(", ")},MultiLineString:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+Ue(i.getGeometryN(e))+")");return t.join(", ")},MultiPolygon:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push("("+pi(i.getGeometryN(e))+")");return t.join(", ")},GeometryCollection:function(i){for(var t=[],e=0,n=i.getNumGeometries();e<n;++e)t.push(ki(i.getGeometryN(e)));return t.join(", ")}};function ki(i){var t=i.getGeometryType(),e=Ys[t];t=t.toUpperCase();var n=function(r){var s="";if(r.isEmpty())return s;var a=r.getCoordinate();return a.z===void 0||Number.isNaN(a.z)||(s+="Z"),a.m===void 0||Number.isNaN(a.m)||(s+="M"),s}(i);return n.length>0&&(t+=" "+n),i.isEmpty()?t+" "+yi:t+" ("+e(i)+")"}var zs=function(){return f(function i(t){l(this,i),this.geometryFactory=t||new Ie,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(i){var t=new Gs(i);return new qs(t,this.geometryFactory).parse()}},{key:"write",value:function(i){return ki(i)}}])}(),Dn=function(){return f(function i(t){l(this,i),this.parser=new zs(t)},[{key:"write",value:function(i){return this.parser.write(i)}}],[{key:"toLineString",value:function(i,t){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+i.x+" "+i.y+", "+t.x+" "+t.y+" )"}}])}(),yt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new sn;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==i.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return i.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===i.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Dn.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Dn.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new T,this._intPt[1]=new T,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var r=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y),a=-1;if(t.equals(e))a=0;else if(t.equals(n))a=r>s?r:s;else{var u=Math.abs(t.x-e.x),g=Math.abs(t.y-e.y);(a=r>s?u:g)!==0||t.equals(e)||(a=Math.max(u,g))}return st.isTrue(!(a===0&&!t.equals(e)),"Bad distance calculation"),a}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=Math.sqrt(r*r+s*s);return st.isTrue(!(a===0&&!t.equals(e)),"Invalid distance calculation"),a}}])}();yt.DONT_INTERSECT=0,yt.DO_INTERSECT=1,yt.COLLINEAR=2,yt.NO_INTERSECTION=0,yt.POINT_INTERSECTION=1,yt.COLLINEAR_INTERSECTION=2;var de=function(i){function t(){return l(this,t),c(this,t)}return d(t,i),f(t,[{key:"isInSegmentEnvelopes",value:function(e){var n=new mt(this._inputLines[0][0],this._inputLines[0][1]),r=new mt(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(e)&&r.contains(e)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return p(t,"computeIntersection",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,mt.intersects(n,r,e)&&it.index(n,r,e)===0&&it.index(r,n,e)===0)return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=yt.POINT_INTERSECTION,null;this._result=yt.NO_INTERSECTION}},{key:"intersection",value:function(e,n,r,s){var a=this.intersectionSafe(e,n,r,s);return this.isInSegmentEnvelopes(a)||(a=new T(t.nearestEndpoint(e,n,r,s))),this._precisionModel!==null&&this._precisionModel.makePrecise(a),a}},{key:"checkDD",value:function(e,n,r,s,a){var u=Tn.intersection(e,n,r,s),g=this.isInSegmentEnvelopes(u);qt.out.println("DD in env = "+g+"  --------------------- "+u),a.distance(u)>1e-4&&qt.out.println("Distance = "+a.distance(u))}},{key:"intersectionSafe",value:function(e,n,r,s){var a=Cn.intersection(e,n,r,s);return a===null&&(a=t.nearestEndpoint(e,n,r,s)),a}},{key:"computeCollinearIntersection",value:function(e,n,r,s){var a=mt.intersects(e,n,r),u=mt.intersects(e,n,s),g=mt.intersects(r,s,e),m=mt.intersects(r,s,n);return a&&u?(this._intPt[0]=r,this._intPt[1]=s,yt.COLLINEAR_INTERSECTION):g&&m?(this._intPt[0]=e,this._intPt[1]=n,yt.COLLINEAR_INTERSECTION):a&&g?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||u||m?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):a&&m?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||u||g?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):u&&g?(this._intPt[0]=s,this._intPt[1]=e,!s.equals(e)||a||m?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):u&&m?(this._intPt[0]=s,this._intPt[1]=n,!s.equals(n)||a||g?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):yt.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,n,r,s){if(this._isProper=!1,!mt.intersects(e,n,r,s))return yt.NO_INTERSECTION;var a=it.index(e,n,r),u=it.index(e,n,s);if(a>0&&u>0||a<0&&u<0)return yt.NO_INTERSECTION;var g=it.index(r,s,e),m=it.index(r,s,n);return g>0&&m>0||g<0&&m<0?yt.NO_INTERSECTION:a===0&&u===0&&g===0&&m===0?this.computeCollinearIntersection(e,n,r,s):(a===0||u===0||g===0||m===0?(this._isProper=!1,e.equals2D(r)||e.equals2D(s)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(s)?this._intPt[0]=n:a===0?this._intPt[0]=new T(r):u===0?this._intPt[0]=new T(s):g===0?this._intPt[0]=new T(e):m===0&&(this._intPt[0]=new T(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,s)),yt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,n,r,s){var a=e,u=Wt.pointToSegment(e,r,s),g=Wt.pointToSegment(n,r,s);return g<u&&(u=g,a=n),(g=Wt.pointToSegment(r,e,n))<u&&(u=g,a=r),(g=Wt.pointToSegment(s,e,n))<u&&(u=g,a=s),a}}])}(yt),Bs=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var s=it.index(t,e,this._p);if(s===it.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(s=-s),s===it.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==_.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?_.BOUNDARY:this._crossingCount%2==1?_.INTERIOR:_.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof T&&rt(arguments[1],ot)){for(var t=arguments[1],e=new i(arguments[0]),n=new T,r=new T,s=1;s<t.size();s++)if(t.getCoordinate(s,n),t.getCoordinate(s-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof T&&arguments[1]instanceof Array){for(var a=arguments[1],u=new i(arguments[0]),g=1;g<a.length;g++){var m=a[g],N=a[g-1];if(u.countSegment(m,N),u.isOnSegment())return u.getLocation()}return u.getLocation()}}}])}(),Fn=function(){function i(){l(this,i)}return f(i,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof T&&rt(arguments[1],ot)){for(var t=arguments[0],e=arguments[1],n=new de,r=new T,s=new T,a=e.size(),u=1;u<a;u++)if(e.getCoordinate(u-1,r),e.getCoordinate(u,s),n.computeIntersection(t,r,s),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof T&&arguments[1]instanceof Array){for(var g=arguments[0],m=arguments[1],N=new de,w=1;w<m.length;w++){var R=m[w-1],X=m[w];if(N.computeIntersection(g,R,X),N.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return Bs.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return i.locateInRing(t,e)!==_.EXTERIOR}}])}(),Yt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==_.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===_.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[q.ON]=this.location[q.ON],e[q.LEFT]=_.NONE,e[q.RIGHT]=_.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===_.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[q.LEFT];this.location[q.LEFT]=this.location[q.RIGHT],this.location[q.RIGHT]=t}},{key:"toString",value:function(){var t=new Fe;return this.location.length>1&&t.append(_.toLocationSymbol(this.location[q.LEFT])),t.append(_.toLocationSymbol(this.location[q.ON])),this.location.length>1&&t.append(_.toLocationSymbol(this.location[q.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[q.ON]=t,this.location[q.LEFT]=e,this.location[q.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:_.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===_.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(q.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(_.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[q.ON]=e}else if(arguments[0]instanceof i){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[q.ON]=s,this.location[q.LEFT]=a,this.location[q.RIGHT]=u}}}])}(),zt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new Yt(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(q.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new Fe;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(q.ON,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.elt[n].setLocation(r,s)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Yt(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Yt(t),this.elt[1]=new Yt(t)}else if(arguments[0]instanceof i){var e=arguments[0];this.elt[0]=new Yt(e.elt[0]),this.elt[1]=new Yt(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[0]=new Yt(_.NONE),this.elt[1]=new Yt(_.NONE),this.elt[n].setLocation(r)}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this.elt[0]=new Yt(s,a,u),this.elt[1]=new Yt(s,a,u)}else if(arguments.length===4){var g=arguments[0],m=arguments[1],N=arguments[2],w=arguments[3];this.elt[0]=new Yt(_.NONE,_.NONE,_.NONE),this.elt[1]=new Yt(_.NONE,_.NONE,_.NONE),this.elt[g].setLocations(m,N,w)}}},{key:"toLineLabel",value:function(t){for(var e=new i(_.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}}])}(),un=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var i=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)i[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(i),this._isHole=it.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(i){this._startDe=i;var t=i,e=!0;do{if(t===null)throw new re("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new re("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var n=t.getLabel();st.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(t.getEdge(),t.isForward(),e),e=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(i){return this._pts.get(i)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var i=this._startDe;do{var t=i.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),i=this.getNext(i)}while(i!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(i,t,e){var n=i.getCoordinates();if(t){var r=1;e&&(r=0);for(var s=r;s<n.length;s++)this._pts.add(n[s])}else{var a=n.length-2;e&&(a=n.length-1);for(var u=a;u>=0;u--)this._pts.add(n[u])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var i=this._startDe;do i.getEdge().setInResult(!0),i=i.getNext();while(i!==this._startDe)}},{key:"containsPoint",value:function(i){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(i)||!Fn.isInRing(i,t.getCoordinates()))return!1;for(var e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(i))return!1;return!0}},{key:"addHole",value:function(i){this._holes.add(i)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var i=arguments[0];this.mergeLabel(i,0),this.mergeLabel(i,1)}else if(arguments.length===2){var t=arguments[1],e=arguments[0].getLocation(t,q.RIGHT);if(e===_.NONE)return null;if(this._label.getLocation(t)===_.NONE)return this._label.setLocation(t,e),null}}},{key:"setShell",value:function(i){this._shell=i,i!==null&&i.addHole(this)}},{key:"toPolygon",value:function(i){for(var t=new Array(this._holes.size()).fill(null),e=0;e<this._holes.size();e++)t[e]=this._holes.get(e).getLinearRing();return i.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new tt,this._pts=new tt,this._label=new zt(_.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new tt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var i=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(i),this.computeRing()}}}}])}(),Us=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"setEdgeRing",value:function(e,n){e.setMinEdgeRing(n)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];un.constructor_.call(this,e,n)}}])}(un),Xs=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"buildMinimalRings",value:function(){var e=new tt,n=this._startDe;do{if(n.getMinEdgeRing()===null){var r=new Us(n,this._geometryFactory);e.add(r)}n=n.getNext()}while(n!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,n){e.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext();while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],n=arguments[1];un.constructor_.call(this,e,n)}}])}(un),Ei=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(i){this._isVisited=i}},{key:"setInResult",value:function(i){this._isInResult=i}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(i){this._label=i}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(i){this._isCovered=i,this._isCoveredSet=!0}},{key:"updateIM",value:function(i){st.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(i)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._label=i}}}}])}(),on=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,n){var r=_.NONE;if(r=this._label.getLocation(n),!e.isNull(n)){var s=e.getLocation(n);r!==_.BOUNDARY&&(r=s)}return r}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return p(t,"setLabel",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];this._label===null?this._label=new zt(e,n):this._label.setLocation(e,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof t){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof zt)for(var n=arguments[0],r=0;r<2;r++){var s=this.computeMergedLocation(n,r);this._label.getLocation(r)===_.NONE&&this._label.setLocation(r,s)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(this._label===null)return null;var n=_.NONE;this._label!==null&&(n=this._label.getLocation(e));var r=null;switch(n){case _.BOUNDARY:r=_.INTERIOR;break;case _.INTERIOR:default:r=_.BOUNDARY}this._label.setLocation(e,r)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new zt(0,_.NONE)}}])}(Ei),Vs=function(i){function t(){return l(this,t),c(this,t,arguments)}return d(t,i),f(t)}(vi);function xi(i){return i==null?0:i.color}function ft(i){return i==null?null:i.parent}function jt(i,t){i!==null&&(i.color=t)}function Gn(i){return i==null?null:i.left}function Ii(i){return i==null?null:i.right}var Xe=function(i){function t(){var e;return l(this,t),(e=c(this,t)).root_=null,e.size_=0,e}return d(t,i),f(t,[{key:"get",value:function(e){for(var n=this.root_;n!==null;){var r=e.compareTo(n.key);if(r<0)n=n.left;else{if(!(r>0))return n.value;n=n.right}}return null}},{key:"put",value:function(e,n){if(this.root_===null)return this.root_={key:e,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,s,a=this.root_;do if(r=a,(s=e.compareTo(a.key))<0)a=a.left;else{if(!(s>0)){var u=a.value;return a.value=n,u}a=a.right}while(a!==null);var g={key:e,left:null,right:null,value:n,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return s<0?r.left=g:r.right=g,this.fixAfterInsertion(g),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var n;for(e.color=1;e!=null&&e!==this.root_&&e.parent.color===1;)ft(e)===Gn(ft(ft(e)))?xi(n=Ii(ft(ft(e))))===1?(jt(ft(e),0),jt(n,0),jt(ft(ft(e)),1),e=ft(ft(e))):(e===Ii(ft(e))&&(e=ft(e),this.rotateLeft(e)),jt(ft(e),0),jt(ft(ft(e)),1),this.rotateRight(ft(ft(e)))):xi(n=Gn(ft(ft(e))))===1?(jt(ft(e),0),jt(n,0),jt(ft(ft(e)),1),e=ft(ft(e))):(e===Gn(ft(e))&&(e=ft(e),this.rotateRight(e)),jt(ft(e),0),jt(ft(ft(e)),1),this.rotateLeft(ft(ft(e))));this.root_.color=0}},{key:"values",value:function(){var e=new tt,n=this.getFirstEntry();if(n!==null)for(e.add(n.value);(n=t.successor(n))!==null;)e.add(n.value);return e}},{key:"entrySet",value:function(){var e=new Sn,n=this.getFirstEntry();if(n!==null)for(e.add(n);(n=t.successor(n))!==null;)e.add(n);return e}},{key:"rotateLeft",value:function(e){if(e!=null){var n=e.right;e.right=n.left,n.left!=null&&(n.left.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.left===e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}}},{key:"rotateRight",value:function(e){if(e!=null){var n=e.left;e.left=n.right,n.right!=null&&(n.right.parent=e),n.parent=e.parent,e.parent==null?this.root_=n:e.parent.right===e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var n=this.root_;n!==null;){var r=e.compareTo(n.key);if(r<0)n=n.left;else{if(!(r>0))return!0;n=n.right}}return!1}}],[{key:"successor",value:function(e){var n;if(e===null)return null;if(e.right!==null){for(n=e.right;n.left!==null;)n=n.left;return n}n=e.parent;for(var r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}}])}(Vs),Ni=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"find",value:function(i){return this.nodeMap.get(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof T){var i=arguments[0],t=this.nodeMap.get(i);return t===null&&(t=this.nodeFact.createNode(i),this.nodeMap.put(i,t)),t}if(arguments[0]instanceof on){var e=arguments[0],n=this.nodeMap.get(e.getCoordinate());return n===null?(this.nodeMap.put(e.getCoordinate(),e),e):(n.mergeLabel(e),n)}}},{key:"print",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(i){for(var t=new tt,e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(i)===_.BOUNDARY&&t.add(n)}return t}},{key:"add",value:function(i){var t=i.getCoordinate();this.addNode(t).add(i)}}],[{key:"constructor_",value:function(){this.nodeMap=new Xe,this.nodeFact=null;var i=arguments[0];this.nodeFact=i}}])}(),Rt=function(){function i(){l(this,i)}return f(i,null,[{key:"isNorthern",value:function(t){return t===i.NE||t===i.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&(t-e+4)%4===2}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if((t-e+4)%4===2)return-1;var n=t<e?t:e;return n===0&&(t>e?t:e)===3?3:n}},{key:"isInHalfPlane",value:function(t,e){return e===i.SE?t===i.SE||t===i.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new G("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?i.NE:i.SE:e>=0?i.NW:i.SW}if(arguments[0]instanceof T&&arguments[1]instanceof T){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new G("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?i.NE:i.SE:r.y>=n.y?i.NW:i.SW}}}])}();Rt.NE=0,Rt.NW=1,Rt.SW=2,Rt.SE=3;var Si=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:it.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),s=n.substring(r+1);t.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Rt.quadrant(this._dx,this._dy),st.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];i.constructor_.call(this,e,n,r,null)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],u=arguments[2],g=arguments[3];i.constructor_.call(this,s),this.init(a,u),this._label=g}}}])}(),qn=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new zt(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,n){if(this._depth[e]!==-999&&this._depth[e]!==n)throw new re("assigned depths do not match",this.getCoordinate());this._depth[e]=n}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,q.LEFT)===_.INTERIOR&&this._label.getLocation(n,q.RIGHT)===_.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){p(t,"print",this,1).call(this,e),e.print(" "+this._depth[q.LEFT]+"/"+this._depth[q.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),n=!this._label.isArea(0)||this._label.allPositionsEqual(0,_.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,_.EXTERIOR);return e&&n&&r}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,n){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var s=1;e===q.LEFT&&(s=-1);var a=q.opposite(e),u=n+r*s;this.setDepth(e,n),this.setDepth(a,u)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],n=arguments[1];if(Si.constructor_.call(this,e),this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,n){return e===_.EXTERIOR&&n===_.INTERIOR?1:e===_.INTERIOR&&n===_.EXTERIOR?-1:0}}])}(Si),wi=function(){return f(function i(){l(this,i)},[{key:"createNode",value:function(i){return new on(i,null)}}])}(),Ti=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(i){i.println("Edges:");for(var t=0;t<this._edges.size();t++){i.println("edge "+t+":");var e=this._edges.get(t);e.print(i),e.eiList.print(i)}}},{key:"find",value:function(i){return this._nodes.find(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof on){var i=arguments[0];return this._nodes.addNode(i)}if(arguments[0]instanceof T){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(i){qt.out.println(i)}},{key:"isBoundaryNode",value:function(i,t){var e=this._nodes.find(t);if(e===null)return!1;var n=e.getLabel();return n!==null&&n.getLocation(i)===_.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(i,t,e,n){return!!i.equals(e)&&it.index(i,t,n)===it.COLLINEAR&&Rt.quadrant(i,t)===Rt.quadrant(e,n)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(i){qt.out.print(i)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),r=n.getCoordinates();if(this.matchInSameDirection(i,t,r[0],r[1])||this.matchInSameDirection(i,t,r[r.length-1],r[r.length-2]))return n}return null}},{key:"insertEdge",value:function(i){this._edges.add(i)}},{key:"findEdgeEnd",value:function(i){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var e=t.next();if(e.getEdge()===i)return e}return null}},{key:"addEdges",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next();this._edges.add(e);var n=new qn(e,!0),r=new qn(e,!1);n.setSym(r),r.setSym(n),this.add(n),this.add(r)}}},{key:"add",value:function(i){this._nodes.add(i),this._edgeEndList.add(i)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(i,t){for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e),r=n.getCoordinates();if(i.equals(r[0])&&t.equals(r[1]))return n}return null}}],[{key:"constructor_",value:function(){if(this._edges=new tt,this._nodes=null,this._edgeEndList=new tt,arguments.length===0)this._nodes=new Ni(new wi);else if(arguments.length===1){var i=arguments[0];this._nodes=new Ni(i)}}},{key:"linkResultDirectedEdges",value:function(i){for(var t=i.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}])}(),Hs=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isHole()?n.add(s):e.add(s)}}},{key:"computePolygons",value:function(t){for(var e=new tt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(r.getShell()===null){var s=i.findEdgeRingContaining(r,t);if(s===null)throw new re("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(s)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var r=new tt,s=t.iterator();s.hasNext();){var a=s.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var u=a.buildMinimalRings(),g=this.findShell(u);g!==null?(this.placePolygonHoles(g,u),e.add(g)):n.addAll(u)}else r.add(a)}return r}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new tt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&r.getEdgeRing()===null){var s=new Xs(r,this._geometryFactory);e.add(s),s.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var s=r.next();s.isHole()||(n=s,e++)}return st.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Ti.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),s=new tt,a=this.buildMinimalEdgeRings(r,this._shellList,s);this.sortShellsAndHoles(a,this._shellList,s),this.placeFreeHoles(this._shellList,s)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new tt;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),a=null,u=null,g=e.iterator();g.hasNext();){var m=g.next(),N=m.getLinearRing(),w=N.getEnvelopeInternal();if(!w.equals(r)&&w.contains(r)){s=It.ptNotInList(n.getCoordinates(),N.getCoordinates());var R=!1;Fn.isInRing(s,N.getCoordinates())&&(R=!0),R&&(a===null||u.contains(w))&&(u=(a=m).getLinearRing().getEnvelopeInternal())}}return a}}])}(),Ci=function(){return f(function i(){l(this,i)},[{key:"getBounds",value:function(){}}])}(),ae=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Ci,F]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var i=arguments[0],t=arguments[1];this._bounds=i,this._item=t}}])}(),ln=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var i=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),i}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(i){for(var t=null,e=this._items.get(i);2*i<=this._size&&((t=2*i)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(e)<0);i=t)this._items.set(i,this._items.get(t));this._items.set(i,e)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(i){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,i);i.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,i)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new tt,this._items.add(null)}}])}(),Zs=function(){return f(function i(){l(this,i)},[{key:"insert",value:function(i,t){}},{key:"remove",value:function(i,t){}},{key:"query",value:function(){}}])}(),Bt=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(i){st.isTrue(this._bounds===null),this._childBoundables.add(i)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Ci,F]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new tt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._level=i}}}}])}(),Se={reverseOrder:function(){return{compare:function(i,t){return t.compareTo(i)}}},min:function(i){return Se.sort(i),i.get(0)},sort:function(i,t){var e=i.toArray();t?ve.sort(e,t):ve.sort(e);for(var n=i.iterator(),r=0,s=e.length;r<s;r++)n.next(),n.set(e[r])},singletonList:function(i){var t=new tt;return t.add(i),t}},Ws=function(){function i(){l(this,i)}return f(i,null,[{key:"maxDistance",value:function(t,e,n,r,s,a,u,g){var m=i.distance(t,e,s,a);return m=Math.max(m,i.distance(t,e,u,g)),m=Math.max(m,i.distance(n,r,s,a)),m=Math.max(m,i.distance(n,r,u,g))}},{key:"distance",value:function(t,e,n,r){var s=n-t,a=r-e;return Math.sqrt(s*s+a*a)}},{key:"maximumDistance",value:function(t,e){var n=Math.min(t.getMinX(),e.getMinX()),r=Math.min(t.getMinY(),e.getMinY()),s=Math.max(t.getMaxX(),e.getMaxX()),a=Math.max(t.getMaxY(),e.getMaxY());return i.distance(n,r,s,a)}},{key:"minMaxDistance",value:function(t,e){var n=t.getMinX(),r=t.getMinY(),s=t.getMaxX(),a=t.getMaxY(),u=e.getMinX(),g=e.getMinY(),m=e.getMaxX(),N=e.getMaxY(),w=i.maxDistance(n,r,n,a,u,g,u,N);return w=Math.min(w,i.maxDistance(n,r,n,a,u,g,m,g)),w=Math.min(w,i.maxDistance(n,r,n,a,m,N,u,N)),w=Math.min(w,i.maxDistance(n,r,n,a,m,N,m,g)),w=Math.min(w,i.maxDistance(n,r,s,r,u,g,u,N)),w=Math.min(w,i.maxDistance(n,r,s,r,u,g,m,g)),w=Math.min(w,i.maxDistance(n,r,s,r,m,N,u,N)),w=Math.min(w,i.maxDistance(n,r,s,r,m,N,m,g)),w=Math.min(w,i.maxDistance(s,a,n,a,u,g,u,N)),w=Math.min(w,i.maxDistance(s,a,n,a,u,g,m,g)),w=Math.min(w,i.maxDistance(s,a,n,a,m,N,u,N)),w=Math.min(w,i.maxDistance(s,a,n,a,m,N,m,g)),w=Math.min(w,i.maxDistance(s,a,s,r,u,g,u,N)),w=Math.min(w,i.maxDistance(s,a,s,r,u,g,m,g)),w=Math.min(w,i.maxDistance(s,a,s,r,m,N,u,N)),w=Math.min(w,i.maxDistance(s,a,s,r,m,N,m,g))}}])}(),we=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"maximumDistance",value:function(){return Ws.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var n=i.isComposite(this._boundable1),r=i.isComposite(this._boundable2);if(n&&r)return i.area(this._boundable1)>i.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new G("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(i.isComposite(this._boundable1)||i.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,e,n,r,s){for(var a=t.getChildBoundables().iterator();a.hasNext();){var u=a.next(),g=null;(g=n?new i(e,u,this._itemDistance):new i(u,e,this._itemDistance)).getDistance()<s&&r.add(g)}}},{key:"getBoundable",value:function(t){return t===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Bt}}])}(),Li=function(){return f(function i(){l(this,i)},[{key:"visitItem",value:function(i){}}])}(),Te=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"queryInternal",value:function(){if(rt(arguments[2],Li)&&arguments[0]instanceof Object&&arguments[1]instanceof Bt)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),r=0;r<n.size();r++){var s=n.get(r);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof Bt?this.queryInternal(t,s,e):s instanceof ae?e.visitItem(s.getItem()):st.shouldNeverReachHere())}else if(rt(arguments[2],fe)&&arguments[0]instanceof Object&&arguments[1]instanceof Bt)for(var a=arguments[0],u=arguments[2],g=arguments[1].getChildBoundables(),m=0;m<g.size();m++){var N=g.get(m);this.getIntersectsOp().intersects(N.getBounds(),a)&&(N instanceof Bt?this.queryInternal(a,N,u):N instanceof ae?u.add(N.getItem()):st.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Bt?t+=this.size(n):n instanceof ae&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof ae&&s.getItem()===e&&(n=s)}return n!==null&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this._root);return t===null?new tt:t}if(arguments.length===1){for(var e=arguments[0],n=new tt,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();if(s instanceof Bt){var a=this.itemsTree(s);a!==null&&n.add(a)}else s instanceof ae?n.add(s.getItem()):st.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){st.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ae(t,e))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var t=arguments[0],e=new tt;return this.boundablesAtLevel(t,this._root,e),e}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(st.isTrue(n>-2),r.getLevel()===n)return s.add(r),null;for(var a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();u instanceof Bt?this.boundablesAtLevel(n,u,s):(st.isTrue(u instanceof ae),n===-1&&s.add(u))}return null}}},{key:"query",value:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new tt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,r)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],a=this.removeItem(r,s);if(a)return!0;for(var u=null,g=r.getChildBoundables().iterator();g.hasNext();){var m=g.next();if(this.getIntersectsOp().intersects(m.getBounds(),n)&&m instanceof Bt&&(a=this.remove(n,m,s))){u=m;break}}return u!==null&&u.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(u),a}}},{key:"createHigherLevels",value:function(t,e){st.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Bt){var r=this.depth(n);r>t&&(t=r)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){st.isTrue(!t.isEmpty());var n=new tt;n.add(this.createNode(e));var r=new tt(t);Se.sort(r,this.getComparator());for(var s=r.iterator();s.hasNext();){var a=s.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(a)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[F]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new tt,this._nodeCapacity=null,arguments.length===0)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];st.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}])}();Te.IntersectsOp=function(){},Te.DEFAULT_NODE_CAPACITY=10;var js=function(){return f(function i(){l(this,i)},[{key:"distance",value:function(i,t){}}])}(),Jt=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,n){st.isTrue(e.length>0);for(var r=new tt,s=0;s<e.length;s++)r.addAll(this.createParentBoundablesFromVerticalSlice(e[s],n));return r}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.nearestNeighbourK(e,V.POSITIVE_INFINITY,n)}if(arguments.length===3){var r=arguments[0],s=arguments[2],a=arguments[1],u=new ln;u.add(r);for(var g=new ln;!u.isEmpty()&&a>=0;){var m=u.poll(),N=m.getDistance();if(N>=a)break;m.isLeaves()?g.size()<s?g.add(m):(g.peek().getDistance()>N&&(g.poll(),g.add(m)),a=g.peek().getDistance()):m.expandToQueue(u,a)}return t.getItems(g)}}},{key:"createNode",value:function(e){return new Ri(e)}},{key:"size",value:function(){return arguments.length===0?p(t,"size",this,1).call(this):p(t,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof mt))return p(t,"insert",this,1).apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;p(t,"insert",this,1).call(this,e,n)}},{key:"getIntersectsOp",value:function(){return t.intersectsOp}},{key:"verticalSlices",value:function(e,n){for(var r=Math.trunc(Math.ceil(e.size()/n)),s=new Array(n).fill(null),a=e.iterator(),u=0;u<n;u++){s[u]=new tt;for(var g=0;a.hasNext()&&g<r;){var m=a.next();s[u].add(m),g++}}return s}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];return p(t,"query",this,1).call(this,e)}if(arguments.length===2){var n=arguments[0],r=arguments[1];p(t,"query",this,1).call(this,n,r)}}},{key:"getComparator",value:function(){return t.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,n){return p(t,"createParentBoundables",this,1).call(this,e,n)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof mt){var e=arguments[0],n=arguments[1];return p(t,"remove",this,1).call(this,e,n)}return p(t,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?p(t,"depth",this,1).call(this):p(t,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,n){st.isTrue(!e.isEmpty());var r=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),s=new tt(e);Se.sort(s,t.xComparator);var a=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(a,n)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(rt(arguments[0],js)){var e=arguments[0];if(this.isEmpty())return null;var n=new we(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(n)}if(arguments[0]instanceof we){var r=arguments[0],s=V.POSITIVE_INFINITY,a=null,u=new ln;for(u.add(r);!u.isEmpty()&&s>0;){var g=u.poll(),m=g.getDistance();if(m>=s)break;g.isLeaves()?(s=m,a=g):g.expandToQueue(u,s)}return a===null?null:[a.getBoundable(0).getItem(),a.getBoundable(1).getItem()]}}else{if(arguments.length===2){var N=arguments[0],w=arguments[1];if(this.isEmpty()||N.isEmpty())return null;var R=new we(this.getRoot(),N.getRoot(),w);return this.nearestNeighbour(R)}if(arguments.length===3){var X=arguments[2],H=new ae(arguments[0],arguments[1]),K=new we(this.getRoot(),H,X);return this.nearestNeighbour(K)[0]}if(arguments.length===4){var lt=arguments[2],ut=arguments[3],vt=new ae(arguments[0],arguments[1]),wt=new we(this.getRoot(),vt,lt);return this.nearestNeighbourK(wt,ut)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var e=arguments[0],n=arguments[1],r=V.POSITIVE_INFINITY,s=new ln;for(s.add(e);!s.isEmpty();){var a=s.poll(),u=a.getDistance();if(u>n)return!1;if(a.maximumDistance()<=n)return!0;if(a.isLeaves()){if((r=u)<=n)return!0}else a.expandToQueue(s,r)}return!1}if(arguments.length===3){var g=arguments[0],m=arguments[1],N=arguments[2],w=new we(this.getRoot(),g.getRoot(),m);return this.isWithinDistance(w,N)}}},{key:"interfaces_",get:function(){return[Zs,F]}}],[{key:"constructor_",value:function(){if(arguments.length===0)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];Te.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return t.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,n){return(e+n)/2}},{key:"getItems",value:function(e){for(var n=new Array(e.size()).fill(null),r=0;!e.isEmpty();){var s=e.poll();n[r]=s.getBoundable(0).getItem(),r++}return n}},{key:"centreY",value:function(e){return t.avg(e.getMinY(),e.getMaxY())}}])}(Te),Ri=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"computeBounds",value:function(){for(var e=null,n=this.getChildBoundables().iterator();n.hasNext();){var r=n.next();e===null?e=new mt(r.getBounds()):e.expandToInclude(r.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];Bt.constructor_.call(this,e)}}])}(Bt);Jt.STRtreeNode=Ri,Jt.xComparator=new(function(){return f(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[St]}},{key:"compare",value:function(i,t){return Te.compareDoubles(Jt.centreX(i.getBounds()),Jt.centreX(t.getBounds()))}}])}()),Jt.yComparator=new(function(){return f(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[St]}},{key:"compare",value:function(i,t){return Te.compareDoubles(Jt.centreY(i.getBounds()),Jt.centreY(t.getBounds()))}}])}()),Jt.intersectsOp=new(function(){return f(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(i,t){return i.intersects(t)}}])}()),Jt.DEFAULT_NODE_CAPACITY=10;var Js=function(){function i(){l(this,i)}return f(i,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,n){if(e.equals2D(n))return 0;var r=i.relativeSign(e.x,n.x),s=i.relativeSign(e.y,n.y);switch(t){case 0:return i.compareValue(r,s);case 1:return i.compareValue(s,r);case 2:return i.compareValue(s,-r);case 3:return i.compareValue(-r,s);case 4:return i.compareValue(-r,-s);case 5:return i.compareValue(-s,-r);case 6:return i.compareValue(-s,r);case 7:return i.compareValue(r,-s)}return st.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),Ks=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(i){var t=i;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?Js.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===i}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._segString=i,this.coord=new T(t),this.segmentIndex=e,this._segmentOctant=n,this._isInterior=!t.equals2D(i.getCoordinate(e))}}])}(),Qs=function(){return f(function i(){l(this,i)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),$s=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var i=new ze;this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next();this.addEdgeCoordinates(e,n,i),e=n}return i.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var i=new tt;this.findCollapsesFromInsertedNodes(i),this.findCollapsesFromExistingVertices(i);for(var t=i.iterator();t.hasNext();){var e=t.next().intValue();this.add(this._edge.getCoordinate(e),e)}}},{key:"createSplitEdgePts",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2;if(e===2)return[new T(i.coord),new T(t.coord)];var n=this._edge.getCoordinate(t.segmentIndex),r=t.isInterior()||!t.coord.equals2D(n);r||e--;var s=new Array(e).fill(null),a=0;s[a++]=new T(i.coord);for(var u=i.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=this._edge.getCoordinate(u);return r&&(s[a]=new T(t.coord)),s}},{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"findCollapsesFromExistingVertices",value:function(i){for(var t=0;t<this._edge.size()-2;t++){var e=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var n=this._edge.getCoordinate(t+2);e.equals2D(n)&&i.add(Qe.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(i,t,e){var n=this.createSplitEdgePts(i,t);e.add(n,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),r=this.createSplitEdge(e,n);i.add(r),e=n}}},{key:"findCollapseIndex",value:function(i,t,e){if(!i.coord.equals2D(t.coord))return!1;var n=t.segmentIndex-i.segmentIndex;return t.isInterior()||n--,n===1&&(e[0]=i.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(i){for(var t=new Array(1).fill(null),e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.findCollapseIndex(n,r,t)&&i.add(Qe.valueOf(t[0])),n=r}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var i=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(i),i)}},{key:"createSplitEdge",value:function(i,t){var e=this.createSplitEdgePts(i,t);return new _e(e,this._edge.getData())}},{key:"add",value:function(i,t){var e=new Ks(this._edge,i,t,this._edge.getSegmentOctant(t)),n=this._nodeMap.get(e);return n!==null?(st.isTrue(n.coord.equals2D(i),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(e,e),e)}},{key:"checkSplitEdgesCorrectness",value:function(i){var t=this._edge.getCoordinates(),e=i.get(0).getCoordinate(0);if(!e.equals2D(t[0]))throw new xt("bad split edge start point at "+e);var n=i.get(i.size()-1).getCoordinates(),r=n[n.length-1];if(!r.equals2D(t[t.length-1]))throw new xt("bad split edge end point at "+r)}}],[{key:"constructor_",value:function(){this._nodeMap=new Xe,this._edge=null;var i=arguments[0];this._edge=i}}])}(),ta=function(){function i(){l(this,i)}return f(i,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new G("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof T&&arguments[1]instanceof T){var s=arguments[0],a=arguments[1],u=a.x-s.x,g=a.y-s.y;if(u===0&&g===0)throw new G("Cannot compute the octant for two identical points "+s);return i.octant(u,g)}}}])}(),ea=function(){return f(function i(){l(this,i)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(i){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(i){}},{key:"getData",value:function(){}}])}(),na=function(){return f(function i(){l(this,i)},[{key:"addIntersection",value:function(i,t){}},{key:"interfaces_",get:function(){return[ea]}}])}(),_e=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:ta.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[1],r=arguments[3],s=new T(arguments[0].getIntersection(r));this.addIntersection(s,n)}}},{key:"toString",value:function(){return Dn.toLineString(new Be(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,r=n+1;if(r<this._pts.length){var s=this._pts[r];t.equals2D(s)&&(n=r)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}},{key:"interfaces_",get:function(){return[na]}}],[{key:"constructor_",value:function(){this._nodeList=new $s(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var t=arguments[0],e=new tt;return i.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)}}])}(),Dt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof i){var t=arguments[0],e=it.index(this.p0,this.p1,t.p0),n=it.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof T){var r=arguments[0];return it.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof i))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new de;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof T){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new T(t);var e=this.projectionFactor(t),n=new T;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof i){var r=arguments[0],s=this.projectionFactor(r.p0),a=this.projectionFactor(r.p1);if(s>=1&&a>=1||s<=0&&a<=0)return null;var u=this.project(r.p0);s<0&&(u=this.p0),s>1&&(u=this.p1);var g=this.project(r.p1);return a<0&&(g=this.p0),a>1&&(g=this.p1),new i(u,g)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return t===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return Wt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return i.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?V.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),r=V.MAX_VALUE,s=null,a=this.closestPoint(t.p0);r=a.distance(t.p0),n[0]=a,n[1]=t.p0;var u=this.closestPoint(t.p1);(s=u.distance(t.p1))<r&&(r=s,n[0]=u,n[1]=t.p1);var g=t.closestPoint(this.p0);(s=g.distance(this.p0))<r&&(r=s,n[0]=this.p0,n[1]=g);var m=t.closestPoint(this.p1);return(s=m.distance(this.p1))<r&&(r=s,n[0]=this.p1,n[1]=m),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return Cn.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,u=Math.sqrt(s*s+a*a),g=0,m=0;if(e!==0){if(u<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");g=e*s/u,m=e*a/u}return new T(n-m,r+g)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||V.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),s=e*e+n*n,a=e*e-n*n,u=t.getX(),g=t.getY();return new T((-a*u-2*e*n*g-2*e*r)/s,(a*g-2*e*n*u-2*n*r)/s)}},{key:"distance",value:function(){if(arguments[0]instanceof i){var t=arguments[0];return Wt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof T){var e=arguments[0];return Wt.pointToSegment(e,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new T;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=V.doubleToLongBits(this.p0.x);t^=31*V.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=V.doubleToLongBits(this.p1.x);return n^=31*V.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))}},{key:"interfaces_",get:function(){return[U,F]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)i.constructor_.call(this,new T,new T);else if(arguments.length===1){var t=arguments[0];i.constructor_.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];i.constructor_.call(this,new T(r,s),new T(a,u))}}},{key:"midPoint",value:function(t,e){return new T((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),ia=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var i=arguments[1],t=arguments[2],e=arguments[3];arguments[0].getLineSegment(i,this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Dt,this._overlapSeg2=new Dt}}])}(),Oi=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(i,t){t.p0=this._pts[i],t.p1=this._pts[i+1]}},{key:"computeSelect",value:function(i,t,e,n){var r=this._pts[t],s=this._pts[e];if(e-t==1)return n.select(this,t),null;if(!i.intersects(r,s))return null;var a=Math.trunc((t+e)/2);t<a&&this.computeSelect(i,t,a,n),a<e&&this.computeSelect(i,a,e,n)}},{key:"getCoordinates",value:function(){for(var i=new Array(this._end-this._start+1).fill(null),t=0,e=this._start;e<=this._end;e++)i[t++]=this._pts[e];return i}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var i=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,i,i._start,i._end,t)}else if(arguments.length===6){var e=arguments[0],n=arguments[1],r=arguments[2],s=arguments[3],a=arguments[4],u=arguments[5];if(n-e==1&&a-s==1)return u.overlap(this,e,r,s),null;if(!this.overlaps(e,n,r,s,a))return null;var g=Math.trunc((e+n)/2),m=Math.trunc((s+a)/2);e<g&&(s<m&&this.computeOverlaps(e,g,r,s,m,u),m<a&&this.computeOverlaps(e,g,r,m,a,u)),g<n&&(s<m&&this.computeOverlaps(g,n,r,s,m,u),m<a&&this.computeOverlaps(g,n,r,m,a,u))}}},{key:"setId",value:function(i){this._id=i}},{key:"select",value:function(i,t){this.computeSelect(i,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(this._env===null){var i=this._pts[this._start],t=this._pts[this._end];this._env=new mt(i,t)}return this._env}},{key:"overlaps",value:function(i,t,e,n,r){return mt.intersects(this._pts[i],this._pts[t],e._pts[n],e._pts[r])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this._pts=i,this._start=t,this._end=e,this._context=n}}])}(),ra=function(){function i(){l(this,i)}return f(i,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Rt.quadrant(t[n],t[n+1]),s=e+1;s<t.length&&!(!t[s-1].equals2D(t[s])&&Rt.quadrant(t[s-1],t[s])!==r);)s++;return s-1}},{key:"getChains",value:function(){if(arguments.length===1){var t=arguments[0];return i.getChains(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1],r=new tt,s=0;do{var a=i.findChainEnd(e,s),u=new Oi(e,s,a,n);r.add(u),s=a}while(s<e.length-1);return r}}}])}(),Yn=function(){return f(function i(){l(this,i)},[{key:"computeNodes",value:function(i){}},{key:"getNodedSubstrings",value:function(){}}])}(),bi=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(i){this._segInt=i}},{key:"interfaces_",get:function(){return[Yn]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this.setSegmentIntersector(i)}}}}])}(),zn=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return _e.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var n=ra.getChains(e.getCoordinates(),e).iterator();n.hasNext();){var r=n.next();r.setId(this._idCounter++),this._index.insert(r.getEnvelope(),r),this._monoChains.add(r)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var n=e.iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new Mi(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),s=this._index.query(r.getEnvelope()).iterator();s.hasNext();){var a=s.next();if(a.getId()>r.getId()&&(r.computeOverlaps(a,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new tt,this._index=new Jt,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var e=arguments[0];bi.constructor_.call(this,e)}}}}])}(bi),Mi=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"overlap",value:function(){if(arguments.length!==4)return p(t,"overlap",this,1).apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],s=arguments[0].getContext(),a=n.getContext();this._si.processIntersections(s,e,a,r)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}])}(ia);zn.SegmentOverlapAction=Mi;var Ht=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isDeletable",value:function(t,e,n,r){var s=this._inputLine[t],a=this._inputLine[e],u=this._inputLine[n];return!!this.isConcave(s,a,u)&&!!this.isShallow(s,a,u,r)&&this.isShallowSampled(s,a,t,n,r)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var s=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=i.DELETE,s=!0,r=!0),t=s?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r}},{key:"isShallowConcavity",value:function(t,e,n,r){return it.index(t,e,n)===this._angleOrientation&&Wt.pointToSegment(e,t,n)<r}},{key:"isShallowSampled",value:function(t,e,n,r,s){var a=Math.trunc((r-n)/i.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var u=n;u<r;u+=a)if(!this.isShallow(t,e,this._inputLine[u],s))return!1;return!0}},{key:"isConcave",value:function(t,e,n){var r=it.index(t,e,n)===this._angleOrientation;return r}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=it.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===i.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,n,r){return Wt.pointToSegment(e,t,n)<r}},{key:"collapseLine",value:function(){for(var t=new ze,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==i.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=it.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,e){return new i(t).simplify(e)}}])}();Ht.INIT=0,Ht.DELETE=1,Ht.KEEP=1,Ht.NUM_PTS_TO_CHECK=10;var Pi=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getCoordinates",value:function(){return this._ptList.toArray(i.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new T(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Ie().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new T(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new tt}}])}();Pi.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Ft=function(){function i(){l(this,i)}return f(i,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=i.PI_TIMES_2;for(;t<=-Math.PI;)t+=i.PI_TIMES_2;return t}},{key:"angle",value:function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],r=n.x-e.x,s=n.y-e.y;return Math.atan2(s,r)}}},{key:"isAcute",value:function(t,e,n){var r=t.x-e.x,s=t.y-e.y;return r*(n.x-e.x)+s*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var r=t.x-e.x,s=t.y-e.y;return r*(n.x-e.x)+s*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,n){var r=i.angle(e,t),s=i.angle(e,n);return Math.abs(s-r)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=i.PI_TIMES_2;t>=i.PI_TIMES_2&&(t=0)}else{for(;t>=i.PI_TIMES_2;)t-=i.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,n){var r=i.angle(e,t),s=i.angle(e,n);return i.diff(r,s)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var n=Math.sin(e-t);return n>0?i.COUNTERCLOCKWISE:n<0?i.CLOCKWISE:i.NONE}},{key:"angleBetweenOriented",value:function(t,e,n){var r=i.angle(e,t),s=i.angle(e,n)-r;return s<=-Math.PI?s+i.PI_TIMES_2:s>Math.PI?s-i.PI_TIMES_2:s}}])}();Ft.PI_TIMES_2=2*Math.PI,Ft.PI_OVER_2=Math.PI/2,Ft.PI_OVER_4=Math.PI/4,Ft.COUNTERCLOCKWISE=it.COUNTERCLOCKWISE,Ft.CLOCKWISE=it.CLOCKWISE,Ft.NONE=it.COLLINEAR;var Ve=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=it.index(this._s0,this._s1,this._s2),r=n===it.CLOCKWISE&&this._side===q.LEFT||n===it.COUNTERCLOCKWISE&&this._side===q.RIGHT;n===0?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new Dt(t,e),r=new Dt;this.computeOffsetSegment(n,q.LEFT,this._distance,r);var s=new Dt;this.computeOffsetSegment(n,q.RIGHT,this._distance,s);var a=e.x-t.x,u=e.y-t.y,g=Math.atan2(u,a);switch(this._bufParams.getEndCapStyle()){case M.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(e,g+Math.PI/2,g-Math.PI/2,it.CLOCKWISE,this._distance),this._segList.addPt(s.p1);break;case M.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(s.p1);break;case M.CAP_SQUARE:var m=new T;m.x=Math.abs(this._distance)*Math.cos(g),m.y=Math.abs(this._distance)*Math.sin(g);var N=new T(r.p1.x+m.x,r.p1.y+m.y),w=new T(s.p1.x+m.x,s.p1.y+m.y);this._segList.addPt(N),this._segList.addPt(w)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,r){var s=Cn.intersection(e.p0,e.p1,n.p0,n.p1);if(s!==null&&(r<=0?1:s.distance(t)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(s),null;this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===M.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===M.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new T(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new T(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new T(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new T(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,r,s){var a=e.x-t.x,u=e.y-t.y,g=Math.atan2(u,a),m=n.x-t.x,N=n.y-t.y,w=Math.atan2(N,m);r===it.CLOCKWISE?g<=w&&(g+=2*Math.PI):g>=w&&(g-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,g,w,r,s),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,r){var s=this._seg0.p1,a=Ft.angle(s,this._seg0.p0),u=Ft.angleBetweenOriented(this._seg0.p0,s,this._seg1.p1)/2,g=Ft.normalize(a+u),m=Ft.normalize(g+Math.PI),N=r*n,w=n-N*Math.abs(Math.sin(u)),R=s.x+N*Math.cos(m),X=s.y+N*Math.sin(m),H=new T(R,X),K=new Dt(s,H),lt=K.pointAlongOffset(1,w),ut=K.pointAlongOffset(1,-w);this._side===q.LEFT?(this._segList.addPt(lt),this._segList.addPt(ut)):(this._segList.addPt(ut),this._segList.addPt(lt))}},{key:"addDirectedFillet",value:function(t,e,n,r,s){var a=r===it.CLOCKWISE?-1:1,u=Math.abs(e-n),g=Math.trunc(u/this._filletAngleQuantum+.5);if(g<1)return null;for(var m=u/g,N=new T,w=0;w<g;w++){var R=e+a*w*m;N.x=t.x+s*Math.cos(R),N.y=t.y+s*Math.sin(R),this._segList.addPt(N)}}},{key:"computeOffsetSegment",value:function(t,e,n,r){var s=e===q.LEFT?1:-1,a=t.p1.x-t.p0.x,u=t.p1.y-t.p0.y,g=Math.sqrt(a*a+u*u),m=s*n*a/g,N=s*n*u/g;r.p0.x=t.p0.x-N,r.p0.y=t.p0.y+m,r.p1.x=t.p1.x-N,r.p1.y=t.p1.y+m}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new T((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new T((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new T(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pi,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===M.JOIN_BEVEL||this._bufParams.getJoinStyle()===M.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,it.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Dt,this._seg1=new Dt,this._offset0=new Dt,this._offset1=new Dt,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new de,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===M.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}])}();Ve.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ve.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ve.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ve.MAX_CLOSING_SEG_LEN_FACTOR=80;var sa=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,e===0)return null;var n=e<0,r=Math.abs(e),s=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,n,s);var a=s.getCoordinates();return n&&It.reverse(a),a}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var s=Ht.simplify(t,-r),a=s.length-1;n.initSideSegments(s[a],s[a-1],q.LEFT),n.addFirstSegment();for(var u=a-2;u>=0;u--)n.addNextSegment(s[u],!0)}else{n.addSegments(t,!1);var g=Ht.simplify(t,r),m=g.length-1;n.initSideSegments(g[0],g[1],q.LEFT),n.addFirstSegment();for(var N=2;N<=m;N++)n.addNextSegment(g[N],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);e===q.RIGHT&&(r=-r);var s=Ht.simplify(t,r),a=s.length-1;n.initSideSegments(s[a-1],s[0],e);for(var u=1;u<=a;u++){var g=u!==1;n.addNextSegment(s[u],g)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),r=Ht.simplify(t,n),s=r.length-1;e.initSideSegments(r[0],r[1],q.LEFT);for(var a=2;a<=s;a++)e.addNextSegment(r[a],!0);e.addLastSegment(),e.addLineEndCap(r[s-1],r[s]);var u=Ht.simplify(t,-n),g=u.length-1;e.initSideSegments(u[g],u[g-1],q.LEFT);for(var m=g-2;m>=0;m--)e.addNextSegment(u[m],!0);e.addLastSegment(),e.addLineEndCap(u[1],u[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case M.CAP_ROUND:e.createCircle(t);break;case M.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var s=e<0;this.computeSingleSidedBufferCurve(t,s,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return i.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var s=Ht.simplify(t,-r),a=s.length-1;n.initSideSegments(s[a],s[a-1],q.LEFT),n.addFirstSegment();for(var u=a-2;u>=0;u--)n.addNextSegment(s[u],!0)}else{var g=Ht.simplify(t,r),m=g.length-1;n.initSideSegments(g[0],g[1],q.LEFT),n.addFirstSegment();for(var N=2;N<=m;N++)n.addNextSegment(g[N],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return t===0||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new Ve(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new T(t[n]);return e}}])}(),Ai=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var i=arguments[0],t=new tt,e=this._subgraphs.iterator();e.hasNext();){var n=e.next(),r=n.getEnvelope();i.y<r.getMinY()||i.y>r.getMaxY()||this.findStabbedSegments(i,n.getDirectedEdges(),t)}return t}if(arguments.length===3){if(rt(arguments[2],fe)&&arguments[0]instanceof T&&arguments[1]instanceof qn){for(var s=arguments[0],a=arguments[1],u=arguments[2],g=a.getEdge().getCoordinates(),m=0;m<g.length-1;m++)if(this._seg.p0=g[m],this._seg.p1=g[m+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<s.x||this._seg.isHorizontal()||s.y<this._seg.p0.y||s.y>this._seg.p1.y||it.index(this._seg.p0,this._seg.p1,s)===it.RIGHT)){var N=a.getDepth(q.LEFT);this._seg.p0.equals(g[m])||(N=a.getDepth(q.RIGHT));var w=new Di(this._seg,N);u.add(w)}}else if(rt(arguments[2],fe)&&arguments[0]instanceof T&&rt(arguments[1],fe))for(var R=arguments[0],X=arguments[2],H=arguments[1].iterator();H.hasNext();){var K=H.next();K.isForward()&&this.findStabbedSegments(R,K,X)}}}},{key:"getDepth",value:function(i){var t=this.findStabbedSegments(i);return t.size()===0?0:Se.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Dt;var i=arguments[0];this._subgraphs=i}}])}(),Di=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(i){var t=i;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return e!==0||(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))!==0?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(i,t){var e=i.p0.compareTo(t.p0);return e!==0?e:i.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var i=arguments[0],t=arguments[1];this._upwardSeg=new Dt(i),this._leftDepth=t}}])}();Ai.DepthSegment=Di;var Fi=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,null,[{key:"constructor_",value:function(){Y.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(Y),Bn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getY",value:function(){var t=this.y/this.w;if(V.isNaN(t)||V.isInfinite(t))throw new Fi;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(V.isNaN(t)||V.isInfinite(t))throw new Fi;return t}},{key:"getCoordinate",value:function(){var t=new T;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof i&&arguments[1]instanceof i){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof T&&arguments[1]instanceof T){var a=arguments[0],u=arguments[1];this.x=a.y-u.y,this.y=u.x-a.x,this.w=a.x*u.y-u.x*a.y}}else if(arguments.length===3){var g=arguments[0],m=arguments[1],N=arguments[2];this.x=g,this.y=m,this.w=N}else if(arguments.length===4){var w=arguments[0],R=arguments[1],X=arguments[2],H=arguments[3],K=w.y-R.y,lt=R.x-w.x,ut=w.x*R.y-R.x*w.y,vt=X.y-H.y,wt=H.x-X.x,Tt=X.x*H.y-H.x*X.y;this.x=lt*Tt-wt*ut,this.y=vt*ut-K*Tt,this.w=K*wt-vt*lt}}}])}(),aa=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"area",value:function(){return i.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return i.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(t===null)throw new G("Supplied point is null.");return i.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return i.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return i.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return i.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return i.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return i.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return i.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,r){return t*r-e*n}},{key:"interpolateZ",value:function(t,e,n,r){var s=e.x,a=e.y,u=n.x-s,g=r.x-s,m=n.y-a,N=r.y-a,w=u*N-g*m,R=t.x-s,X=t.y-a,H=(N*R-g*X)/w,K=(-m*R+u*X)/w;return e.getZ()+H*(n.getZ()-e.getZ())+K*(r.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var r=t.distance(e),s=e.distance(n),a=n.distance(t),u=r;return s>u&&(u=s),a>u&&(u=a),u}},{key:"circumcentreDD",value:function(t,e,n){var r=nt.valueOf(t.x).subtract(n.x),s=nt.valueOf(t.y).subtract(n.y),a=nt.valueOf(e.x).subtract(n.x),u=nt.valueOf(e.y).subtract(n.y),g=nt.determinant(r,s,a,u).multiply(2),m=r.sqr().add(s.sqr()),N=a.sqr().add(u.sqr()),w=nt.determinant(s,m,u,N),R=nt.determinant(r,m,a,N),X=nt.valueOf(n.x).subtract(w.divide(g)).doubleValue(),H=nt.valueOf(n.y).add(R.divide(g)).doubleValue();return new T(X,H)}},{key:"isAcute",value:function(t,e,n){return!!Ft.isAcute(t,e,n)&&!!Ft.isAcute(e,n,t)&&!!Ft.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,e,n){var r=n.x,s=n.y,a=t.x-r,u=t.y-s,g=e.x-r,m=e.y-s,N=2*i.det(a,u,g,m),w=i.det(u,a*a+u*u,m,g*g+m*m),R=i.det(a,a*a+u*u,g,g*g+m*m);return new T(r-w/N,s+R/N)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,r=e.y-t.y,s=new Bn(t.x+n/2,t.y+r/2,1),a=new Bn(t.x-r+n/2,t.y+n+r/2,1);return new Bn(s,a)}},{key:"angleBisector",value:function(t,e,n){var r=e.distance(t),s=r/(r+e.distance(n)),a=n.x-t.x,u=n.y-t.y;return new T(t.x+s*a,t.y+s*u)}},{key:"area3D",value:function(t,e,n){var r=e.x-t.x,s=e.y-t.y,a=e.getZ()-t.getZ(),u=n.x-t.x,g=n.y-t.y,m=n.getZ()-t.getZ(),N=s*m-a*g,w=a*u-r*m,R=r*g-s*u,X=N*N+w*w+R*R,H=Math.sqrt(X)/2;return H}},{key:"centroid",value:function(t,e,n){var r=(t.x+e.x+n.x)/3,s=(t.y+e.y+n.y)/3;return new T(r,s)}},{key:"inCentre",value:function(t,e,n){var r=e.distance(n),s=t.distance(n),a=t.distance(e),u=r+s+a,g=(r*t.x+s*e.x+a*n.x)/u,m=(r*t.y+s*e.y+a*n.y)/u;return new T(g,m)}}])}(),ua=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(i,t,e,n,r){if(t===0&&i.length<Ye.MINIMUM_VALID_SIZE)return null;var s=n,a=r;i.length>=Ye.MINIMUM_VALID_SIZE&&it.isCCW(i)&&(s=r,a=n,e=q.opposite(e));var u=this._curveBuilder.getRingCurve(i,e,t);this.addCurve(u,s,a)}},{key:"addRingBothSides",value:function(i,t){this.addRingSide(i,t,q.LEFT,_.EXTERIOR,_.INTERIOR),this.addRingSide(i,t,q.RIGHT,_.INTERIOR,_.EXTERIOR)}},{key:"addPoint",value:function(i){if(this._distance<=0)return null;var t=i.getCoordinates(),e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,_.EXTERIOR,_.INTERIOR)}},{key:"addPolygon",value:function(i){var t=this._distance,e=q.LEFT;this._distance<0&&(t=-this._distance,e=q.RIGHT);var n=i.getExteriorRing(),r=It.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&r.length<3)return null;this.addRingSide(r,t,e,_.EXTERIOR,_.INTERIOR);for(var s=0;s<i.getNumInteriorRing();s++){var a=i.getInteriorRingN(s),u=It.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addRingSide(u,t,q.opposite(e),_.INTERIOR,_.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(i,t){var e=new aa(i[0],i[1],i[2]),n=e.inCentre();return Wt.pointToSegment(n,e.p0,e.p1)<Math.abs(t)}},{key:"addLineString",value:function(i){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=It.removeRepeatedPoints(i.getCoordinates());if(It.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var e=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(e,_.EXTERIOR,_.INTERIOR)}}},{key:"addCurve",value:function(i,t,e){if(i===null||i.length<2)return null;var n=new _e(i,new zt(0,_.BOUNDARY,t,e));this._curveList.add(n)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(i){if(i.isEmpty())return null;if(i instanceof nn)this.addPolygon(i);else if(i instanceof qe)this.addLineString(i);else if(i instanceof Ln)this.addPoint(i);else if(i instanceof Rn)this.addCollection(i);else if(i instanceof Pn)this.addCollection(i);else if(i instanceof Mn)this.addCollection(i);else{if(!(i instanceof At))throw new oe(i.getGeometryType());this.addCollection(i)}}},{key:"isErodedCompletely",value:function(i,t){var e=i.getCoordinates();if(e.length<4)return t<0;if(e.length===4)return this.isTriangleErodedCompletely(e,t);var n=i.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth());return t<0&&2*Math.abs(t)>r}},{key:"addCollection",value:function(i){for(var t=0;t<i.getNumGeometries();t++){var e=i.getGeometryN(t);this.add(e)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new tt;var i=arguments[0],t=arguments[1],e=arguments[2];this._inputGeom=i,this._distance=t,this._curveBuilder=e}}])}(),oa=function(){return f(function i(){l(this,i)},[{key:"locate",value:function(i){}}])}(),la=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,i.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ke;var t=this._parent.getGeometryN(this._index++);return t instanceof At?(this._subcollectionIterator=new i(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new oe(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Qs]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof At)}}])}(),ha=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"locate",value:function(t){return i.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[oa]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return _.EXTERIOR;var n=e.getExteriorRing(),r=i.locatePointInRing(t,n);if(r!==_.INTERIOR)return r;for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),u=i.locatePointInRing(t,a);if(u===_.BOUNDARY)return _.BOUNDARY;if(u===_.INTERIOR)return _.EXTERIOR}return _.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Fn.locateInRing(t,e.getCoordinates()):_.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return _.EXTERIOR!==i.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof nn)return i.locatePointInPolygon(t,e);if(e instanceof At)for(var n=new la(e);n.hasNext();){var r=n.next();if(r!==e){var s=i.locateInGeometry(t,r);if(s!==_.EXTERIOR)return s}}return _.EXTERIOR}},{key:"isContained",value:function(t,e){return _.EXTERIOR!==i.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?_.EXTERIOR:e.getEnvelopeInternal().intersects(t)?i.locateInGeometry(t,e):_.EXTERIOR}}])}(),ca=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(i){this.getEdges();var t=this._edgeList.indexOf(i),e=t-1;return t===0&&(e=this._edgeList.size()-1),this._edgeList.get(e)}},{key:"propagateSideLabels",value:function(i){for(var t=_.NONE,e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.isArea(i)&&n.getLocation(i,q.LEFT)!==_.NONE&&(t=n.getLocation(i,q.LEFT))}if(t===_.NONE)return null;for(var r=t,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();if(u.getLocation(i,q.ON)===_.NONE&&u.setLocation(i,q.ON,r),u.isArea(i)){var g=u.getLocation(i,q.LEFT),m=u.getLocation(i,q.RIGHT);if(m!==_.NONE){if(m!==r)throw new re("side location conflict",a.getCoordinate());g===_.NONE&&st.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=g}else st.isTrue(u.getLocation(i,q.LEFT)===_.NONE,"found single null side"),u.setLocation(i,q.RIGHT,r),u.setLocation(i,q.LEFT,r)}}}},{key:"getCoordinate",value:function(){var i=this.iterator();return i.hasNext()?i.next().getCoordinate():null}},{key:"print",value:function(i){qt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"isAreaLabelsConsistent",value:function(i){return this.computeEdgeEndLabels(i.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(i){var t=this.getEdges();if(t.size()<=0)return!0;var e=t.size()-1,n=t.get(e).getLabel().getLocation(i,q.LEFT);st.isTrue(n!==_.NONE,"Found unlabelled area edge");for(var r=n,s=this.iterator();s.hasNext();){var a=s.next().getLabel();st.isTrue(a.isArea(i),"Found non-area edge");var u=a.getLocation(i,q.LEFT),g=a.getLocation(i,q.RIGHT);if(u===g||g!==r)return!1;r=u}return!0}},{key:"findIndex",value:function(i){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===i)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new tt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(i,t,e){return this._ptInAreaLocation[i]===_.NONE&&(this._ptInAreaLocation[i]=ha.locate(t,e[i].getGeometry())),this._ptInAreaLocation[i]}},{key:"toString",value:function(){var i=new Fe;i.append("EdgeEndStar:   "+this.getCoordinate()),i.append(`
`);for(var t=this.iterator();t.hasNext();){var e=t.next();i.append(e),i.append(`
`)}return i.toString()}},{key:"computeEdgeEndLabels",value:function(i){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(i)}},{key:"computeLabelling",value:function(i){this.computeEdgeEndLabels(i[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],e=this.iterator();e.hasNext();)for(var n=e.next().getLabel(),r=0;r<2;r++)n.isLine(r)&&n.getLocation(r)===_.BOUNDARY&&(t[r]=!0);for(var s=this.iterator();s.hasNext();)for(var a=s.next(),u=a.getLabel(),g=0;g<2;g++)if(u.isAnyNull(g)){var m=_.NONE;if(t[g])m=_.EXTERIOR;else{var N=a.getCoordinate();m=this.getLocation(g,N,i)}u.setAllLocationsIfNull(g,m)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(i,t){this._edgeMap.put(i,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Xe,this._edgeList=null,this._ptInAreaLocation=[_.NONE,_.NONE]}}])}(),fa=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var a=this._resultAreaEdgeList.get(s),u=a.getSym();if(a.getLabel().isArea())switch(e===null&&a.isInResult()&&(e=a),r){case this._SCANNING_FOR_INCOMING:if(!u.isInResult())continue;n=u,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!a.isInResult())continue;n.setNext(a),r=this._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(e===null)throw new re("no outgoing dirEdge found",this.getCoordinate());st.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}}},{key:"insert",value:function(e){var n=e;this.insertEdgeEnd(n,n)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),n=e.size();if(n<1)return null;var r=e.get(0);if(n===1)return r;var s=e.get(n-1),a=r.getQuadrant(),u=s.getQuadrant();return Rt.isNorthern(a)&&Rt.isNorthern(u)?r:Rt.isNorthern(a)||Rt.isNorthern(u)?r.getDy()!==0?r:s.getDy()!==0?s:(st.shouldNeverReachHere("found two horizontal edges incident on node"),null):s}},{key:"print",value:function(e){qt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var r=n.next();e.print("out "),r.print(e),e.println(),e.print("in "),r.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new tt;for(var e=this.iterator();e.hasNext();){var n=e.next();(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.setAllLocationsIfNull(0,e.getLocation(0)),r.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,n=null,r=this._edgeList.size()-1;r>=0;r--){var s=this._edgeList.get(r),a=s.getSym();n===null&&(n=a),e!==null&&a.setNext(e),e=s}n.setNext(e)}},{key:"computeDepths",value:function(){if(arguments.length===1){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(q.LEFT),s=e.getDepth(q.RIGHT),a=this.computeDepths(n+1,this._edgeList.size(),r);if(this.computeDepths(0,n,a)!==s)throw new re("depth mismatch at "+e.getCoordinate())}else if(arguments.length===3){for(var u=arguments[1],g=arguments[2],m=arguments[0];m<u;m++){var N=this._edgeList.get(m);N.setEdgeDepths(q.RIGHT,g),g=N.getDepth(q.LEFT)}return g}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var n=e.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var n=null,r=null,s=this._SCANNING_FOR_INCOMING,a=this._resultAreaEdgeList.size()-1;a>=0;a--){var u=this._resultAreaEdgeList.get(a),g=u.getSym();switch(n===null&&u.getEdgeRing()===e&&(n=u),s){case this._SCANNING_FOR_INCOMING:if(g.getEdgeRing()!==e)continue;r=g,s=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(u.getEdgeRing()!==e)continue;r.setNextMin(u),s=this._SCANNING_FOR_INCOMING}}s===this._LINKING_TO_OUTGOING&&(st.isTrue(n!==null,"found null for first outgoing dirEdge"),st.isTrue(n.getEdgeRing()===e,"unable to link last incoming dirEdge"),r.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var e=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&e++;return e}if(arguments.length===1){for(var r=arguments[0],s=0,a=this.iterator();a.hasNext();)a.next().getEdgeRing()===r&&s++;return s}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=_.NONE,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){e=_.INTERIOR;break}if(s.isInResult()){e=_.EXTERIOR;break}}}if(e===_.NONE)return null;for(var a=e,u=this.iterator();u.hasNext();){var g=u.next(),m=g.getSym();g.isLineEdge()?g.getEdge().setCovered(a===_.INTERIOR):(g.isInResult()&&(a=_.EXTERIOR),m.isInResult()&&(a=_.INTERIOR))}}},{key:"computeLabelling",value:function(e){p(t,"computeLabelling",this,1).call(this,e),this._label=new zt(_.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),s=0;s<2;s++){var a=r.getLocation(s);a!==_.INTERIOR&&a!==_.BOUNDARY||this._label.setLocation(s,_.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(ca),ga=function(i){function t(){return l(this,t),c(this,t)}return d(t,i),f(t,[{key:"createNode",value:function(e){return new on(e,new fa)}}])}(wi),Gi=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"compareTo",value:function(t){var e=t;return i.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=i.orientation(t)}},{key:"orientation",value:function(t){return It.increasingDirection(t)===1}},{key:"compareOriented",value:function(t,e,n,r){for(var s=e?1:-1,a=r?1:-1,u=e?t.length:-1,g=r?n.length:-1,m=e?0:t.length-1,N=r?0:n.length-1;;){var w=t[m].compareTo(n[N]);if(w!==0)return w;var R=(m+=s)===u,X=(N+=a)===g;if(R&&!X)return-1;if(!R&&X)return 1;if(R&&X)return 0}}}])}(),va=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var e=this._edges.get(t);t>0&&i.print(","),i.print("(");for(var n=e.getCoordinates(),r=0;r<n.length;r++)r>0&&i.print(","),i.print(n[r].x+" "+n[r].y);i.println(")")}i.print(")  ")}},{key:"addAll",value:function(i){for(var t=i.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(i){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(i))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(i){return this._edges.get(i)}},{key:"findEqualEdge",value:function(i){var t=new Gi(i.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(i){this._edges.add(i);var t=new Gi(i.getCoordinates());this._ocaMap.put(t,i)}}],[{key:"constructor_",value:function(){this._edges=new tt,this._ocaMap=new Xe}}])}(),qi=function(){return f(function i(){l(this,i)},[{key:"processIntersections",value:function(i,t,e,n){}},{key:"isDone",value:function(){}}])}(),ma=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isTrivialIntersection",value:function(t,e,n,r){if(t===n&&this._li.getIntersectionNum()===1){if(i.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.size()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],a=t.getCoordinates()[e+1],u=n.getCoordinates()[r],g=n.getCoordinates()[r+1];this._li.computeIntersection(s,a,u,g),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[qi]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return Math.abs(t-e)===1}}])}(),ya=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex),i.println(" dist = "+this.dist)}},{key:"compareTo",value:function(i){var t=i;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===i}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(i,t){return this.segmentIndex<i?-1:this.segmentIndex>i?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[U]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var i=arguments[0],t=arguments[1],e=arguments[2];this.coord=new T(i),this.segmentIndex=t,this.dist=e}}])}(),da=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(i)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints();for(var t=this.iterator(),e=t.next();t.hasNext();){var n=t.next(),r=this.createSplitEdge(e,n);i.add(r),e=n}}},{key:"addEndpoints",value:function(){var i=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[i],i,0)}},{key:"createSplitEdge",value:function(i,t){var e=t.segmentIndex-i.segmentIndex+2,n=this.edge.pts[t.segmentIndex],r=t.dist>0||!t.coord.equals2D(n);r||e--;var s=new Array(e).fill(null),a=0;s[a++]=new T(i.coord);for(var u=i.segmentIndex+1;u<=t.segmentIndex;u++)s[a++]=this.edge.pts[u];return r&&(s[a]=t.coord),new zi(s,new zt(this.edge._label))}},{key:"add",value:function(i,t,e){var n=new ya(i,t,e),r=this._nodeMap.get(n);return r!==null?r:(this._nodeMap.put(n,n),n)}},{key:"isIntersection",value:function(i){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(i))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Xe,this.edge=null;var i=arguments[0];this.edge=i}}])}(),_a=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])||i.isTrue(this._matrix[_.INTERIOR][_.BOUNDARY])||i.isTrue(this._matrix[_.BOUNDARY][_.INTERIOR])||i.isTrue(this._matrix[_.BOUNDARY][_.BOUNDARY]))&&this._matrix[_.EXTERIOR][_.INTERIOR]===B.FALSE&&this._matrix[_.EXTERIOR][_.BOUNDARY]===B.FALSE}},{key:"isCoveredBy",value:function(){return(i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])||i.isTrue(this._matrix[_.INTERIOR][_.BOUNDARY])||i.isTrue(this._matrix[_.BOUNDARY][_.INTERIOR])||i.isTrue(this._matrix[_.BOUNDARY][_.BOUNDARY]))&&this._matrix[_.INTERIOR][_.EXTERIOR]===B.FALSE&&this._matrix[_.BOUNDARY][_.EXTERIOR]===B.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this._matrix[n][r]=B.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this._matrix[s][a]=u}}},{key:"isContains",value:function(){return i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])&&this._matrix[_.EXTERIOR][_.INTERIOR]===B.FALSE&&this._matrix[_.EXTERIOR][_.BOUNDARY]===B.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,B.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],u=arguments[2];this._matrix[s][a]<u&&(this._matrix[s][a]=u)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])&&this._matrix[_.INTERIOR][_.EXTERIOR]===B.FALSE&&this._matrix[_.BOUNDARY][_.EXTERIOR]===B.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===B.A&&e===B.A||t===B.L&&e===B.L||t===B.L&&e===B.A||t===B.P&&e===B.A||t===B.P&&e===B.L)&&this._matrix[_.INTERIOR][_.INTERIOR]===B.FALSE&&(i.isTrue(this._matrix[_.INTERIOR][_.BOUNDARY])||i.isTrue(this._matrix[_.BOUNDARY][_.INTERIOR])||i.isTrue(this._matrix[_.BOUNDARY][_.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===B.P&&e===B.P||t===B.A&&e===B.A?i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])&&i.isTrue(this._matrix[_.INTERIOR][_.EXTERIOR])&&i.isTrue(this._matrix[_.EXTERIOR][_.INTERIOR]):t===B.L&&e===B.L&&this._matrix[_.INTERIOR][_.INTERIOR]===1&&i.isTrue(this._matrix[_.INTERIOR][_.EXTERIOR])&&i.isTrue(this._matrix[_.EXTERIOR][_.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])&&this._matrix[_.INTERIOR][_.EXTERIOR]===B.FALSE&&this._matrix[_.BOUNDARY][_.EXTERIOR]===B.FALSE&&this._matrix[_.EXTERIOR][_.INTERIOR]===B.FALSE&&this._matrix[_.EXTERIOR][_.BOUNDARY]===B.FALSE}},{key:"toString",value:function(){for(var t=new sn("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,B.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(t.length!==9)throw new G("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!i.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[_.INTERIOR][_.INTERIOR]===B.FALSE&&this._matrix[_.INTERIOR][_.BOUNDARY]===B.FALSE&&this._matrix[_.BOUNDARY][_.INTERIOR]===B.FALSE&&this._matrix[_.BOUNDARY][_.BOUNDARY]===B.FALSE}},{key:"isCrosses",value:function(t,e){return t===B.P&&e===B.L||t===B.P&&e===B.A||t===B.L&&e===B.A?i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])&&i.isTrue(this._matrix[_.INTERIOR][_.EXTERIOR]):t===B.L&&e===B.P||t===B.A&&e===B.P||t===B.A&&e===B.L?i.isTrue(this._matrix[_.INTERIOR][_.INTERIOR])&&i.isTrue(this._matrix[_.EXTERIOR][_.INTERIOR]):t===B.L&&e===B.L&&this._matrix[_.INTERIOR][_.INTERIOR]===0}},{key:"interfaces_",get:function(){return[z]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(B.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];i.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof i){var e=arguments[0];i.constructor_.call(this),this._matrix[_.INTERIOR][_.INTERIOR]=e._matrix[_.INTERIOR][_.INTERIOR],this._matrix[_.INTERIOR][_.BOUNDARY]=e._matrix[_.INTERIOR][_.BOUNDARY],this._matrix[_.INTERIOR][_.EXTERIOR]=e._matrix[_.INTERIOR][_.EXTERIOR],this._matrix[_.BOUNDARY][_.INTERIOR]=e._matrix[_.BOUNDARY][_.INTERIOR],this._matrix[_.BOUNDARY][_.BOUNDARY]=e._matrix[_.BOUNDARY][_.BOUNDARY],this._matrix[_.BOUNDARY][_.EXTERIOR]=e._matrix[_.BOUNDARY][_.EXTERIOR],this._matrix[_.EXTERIOR][_.INTERIOR]=e._matrix[_.EXTERIOR][_.INTERIOR],this._matrix[_.EXTERIOR][_.BOUNDARY]=e._matrix[_.EXTERIOR][_.BOUNDARY],this._matrix[_.EXTERIOR][_.EXTERIOR]=e._matrix[_.EXTERIOR][_.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===B.SYM_DONTCARE||e===B.SYM_TRUE&&(t>=0||t===B.TRUE)||e===B.SYM_FALSE&&t===B.FALSE||e===B.SYM_P&&t===B.P||e===B.SYM_L&&t===B.L||e===B.SYM_A&&t===B.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[1];return new i(arguments[0]).matches(n)}}},{key:"isTrue",value:function(t){return t>=0||t===B.TRUE}}])}(),pa=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return t===null||t.length===0?null:(this.ensureCapacity(this._size+t.length),qt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=ve.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return qt.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)i.constructor_.call(this,10);else if(arguments.length===1){var t=arguments[0];this._data=new Array(t).fill(null)}}}])}(),ka=function(){function i(){l(this,i)}return f(i,[{key:"getChainStartIndices",value:function(t){var e=0,n=new pa(Math.trunc(t.length/2));n.add(e);do{var r=this.findChainEnd(t,e);n.add(r),e=r}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=Rt.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Rt.quadrant(t[r-1],t[r])===n;)r++;return r-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,n=new tt;n.add(e);do{var r=this.findChainEnd(t,e);n.add(r),e=r}while(e<t.length-1);return i.toIntArray(n)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}])}(),Ea=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t>e?t:e}},{key:"getMinX",value:function(i){var t=this.pts[this.startIndex[i]].x,e=this.pts[this.startIndex[i+1]].x;return t<e?t:e}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var i=arguments[0],t=arguments[1],e=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[i],this.startIndex[i+1],t,t.startIndex[e],t.startIndex[e+1],n)}else if(arguments.length===6){var r=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],g=arguments[4],m=arguments[5];if(s-r==1&&g-u==1)return m.addIntersections(this.e,r,a.e,u),null;if(!this.overlaps(r,s,a,u,g))return null;var N=Math.trunc((r+s)/2),w=Math.trunc((u+g)/2);r<N&&(u<w&&this.computeIntersectsForChain(r,N,a,u,w,m),w<g&&this.computeIntersectsForChain(r,N,a,w,g,m)),N<s&&(u<w&&this.computeIntersectsForChain(N,s,a,u,w,m),w<g&&this.computeIntersectsForChain(N,s,a,w,g,m))}}},{key:"overlaps",value:function(i,t,e,n,r){return mt.intersects(this.pts[i],this.pts[t],e.pts[n],e.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(i,t){for(var e=0;e<this.startIndex.length-1;e++)for(var n=0;n<i.startIndex.length-1;n++)this.computeIntersectsForChain(e,i,n,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var i=arguments[0];this.e=i,this.pts=i.getCoordinates();var t=new ka;this.startIndex=t.getChainStartIndices(this.pts)}}])}(),Yi=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==i.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this._depth[n][1]===i.NULL_VALUE}if(arguments.length===2){var r=arguments[0],s=arguments[1];return this._depth[r][s]===i.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}}},{key:"getDelta",value:function(t){return this._depth[t][q.RIGHT]-this._depth[t][q.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?_.EXTERIOR:_.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==_.EXTERIOR&&r!==_.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=i.depthAtLocation(r):this._depth[e][n]+=i.depthAtLocation(r))}else if(arguments.length===3){var s=arguments[0],a=arguments[1];arguments[2]===_.INTERIOR&&this._depth[s][a]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=i.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===_.EXTERIOR?0:t===_.INTERIOR?1:i.NULL_VALUE}}])}();Yi.NULL_VALUE=-1;var zi=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,zt.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof t))return!1;var n=e;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,s=!0,a=this.pts.length,u=0;u<this.pts.length;u++)if(this.pts[u].equals2D(n.pts[u])||(r=!1),this.pts[u].equals2D(n.pts[--a])||(s=!1),!r&&!s)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.print(","),e.print(this.pts[n].x+" "+this.pts[n].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){t.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)e.print(this.pts[n]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Ea(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new mt;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,n,r,s){var a=new T(e.getIntersection(s)),u=n,g=e.getEdgeDistance(r,s),m=u+1;if(m<this.pts.length){var N=this.pts[m];a.equals2D(N)&&(u=m,g=0)}this.eiList.add(a,u,g)}},{key:"toString",value:function(){var e=new sn;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.append(","),e.append(this.pts[n].x+" "+this.pts[n].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(e.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,n,r){for(var s=0;s<e.getIntersectionNum();s++)this.addIntersection(e,n,r,s)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new da(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Yi,this._depthDelta=0,arguments.length===1){var e=arguments[0];t.constructor_.call(this,e,null)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.pts=n,this._label=r}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof _a&&arguments[0]instanceof zt))return p(t,"updateIM",this).apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,q.ON),e.getLocation(1,q.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,q.LEFT),e.getLocation(1,q.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,q.RIGHT),e.getLocation(1,q.RIGHT),2))}}])}(Ei),Bi=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new zt(t.getLabel())).flip(),n.merge(r);var s=i.depthDelta(r),a=e.getDepthDelta()+s;e.setDepthDelta(a)}else this._edgeList.add(t),t.setDepthDelta(i.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new tt,r=t.iterator();r.hasNext();){var s=r.next(),a=s.getRightmostCoordinate(),u=new Ai(n).getDepth(a);s.computeDepth(u),s.findResultEdges(),n.add(s),e.add(s.getDirectedEdges(),s.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new tt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var s=new ws;s.create(r),e.add(s)}}return Se.sort(e,Se.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(this._workingNoder!==null)return this._workingNoder;var e=new zn,n=new de;return n.setPrecisionModel(t),e.setSegmentIntersector(new ma(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new sa(n,this._bufParams),s=new ua(t,e,r).getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this._graph=new Ti(new ga),this._graph.addEdges(this._edgeList.getEdges());var a=this.createSubgraphs(this._graph),u=new Hs(this._geomFact);this.buildSubgraphs(a,u);var g=u.getPolygons();return g.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(g)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var s=r.next(),a=s.getCoordinates();if(a.length!==2||!a[0].equals2D(a[1])){var u=s.getData(),g=new zi(s.getCoordinates(),new zt(u));this.insertUniqueEdge(g)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new va;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,q.LEFT),n=t.getLocation(0,q.RIGHT);return e===_.INTERIOR&&n===_.EXTERIOR?1:e===_.EXTERIOR&&n===_.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new Ie,n=new tt;t.hasNext();){var r=t.next(),s=e.createLineString(r.getCoordinates());n.add(s)}return e.buildGeometry(n)}}])}(),xa=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"rescale",value:function(){if(rt(arguments[0],Zt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;n.length===2&&n[0].equals2D(n[1])&&qt.out.println(n)}}},{key:"scale",value:function(){if(rt(arguments[0],Zt)){for(var t=arguments[0],e=new tt(t.size()),n=t.iterator();n.hasNext();){var r=n.next();e.add(new _e(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var s=arguments[0],a=new Array(s.length).fill(null),u=0;u<s.length;u++)a[u]=new T(Math.round((s[u].x-this._offsetX)*this._scaleFactor),Math.round((s[u].y-this._offsetY)*this._scaleFactor),s[u].getZ());return It.removeRepeatedPoints(a)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[Yn]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];i.constructor_.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],r=arguments[1];this._noder=n,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}])}(),Ui=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(arguments.length===2){for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var s=r.next().getCoordinates(),a=1;a<s.length-1;a++)if(s[a].equals(n))throw new xt("found endpt/interior pt intersection at index "+a+" :pt "+n)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],u=s.getCoordinates(),g=a.getCoordinates(),m=0;m<u.length-1;m++)for(var N=0;N<g.length-1;N++)this.checkInteriorIntersections(s,m,a,N);else if(arguments.length===4){var w=arguments[0],R=arguments[1],X=arguments[2],H=arguments[3];if(w===X&&R===H)return null;var K=w.getCoordinates()[R],lt=w.getCoordinates()[R+1],ut=X.getCoordinates()[H],vt=X.getCoordinates()[H+1];if(this._li.computeIntersection(K,lt,ut,vt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,K,lt)||this.hasInteriorIntersection(this._li,ut,vt)))throw new xt("found non-noded intersection at "+K+"-"+lt+" and "+ut+"-"+vt)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var s=t.getIntersection(r);if(!s.equals(e)&&!s.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,e,n){if(t.equals(n))throw new xt("found non-noded collapse at "+i.fact.createLineString([t,e,n]))}}],[{key:"constructor_",value:function(){this._li=new de,this._segStrings=null;var t=arguments[0];this._segStrings=t}}])}();Ui.fact=new Ie;var Un=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),u=this._maxx<n||this._minx>r||this._maxy<s||this._miny>a;if(u)return!1;var g=this.intersectsToleranceSquare(t,e);return st.isTrue(!(u&&g),"Found bad envelope test"),g}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new T(this._maxx,this._maxy),this._corner[1]=new T(this._minx,this._maxy),this._corner[2]=new T(this._minx,this._miny),this._corner[3]=new T(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return this._scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var t=i.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new mt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new G("Scale factor must be non-zero");e!==1&&(this._pt=new T(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new T,this._p1Scaled=new T),this.initCorners(this._pt)}}])}();Un.SAFE_ENV_EXPANSION_FACTOR=.75;var Ia=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var i=arguments[1];arguments[0].getLineSegment(i,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Dt}}])}(),Xi=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var i=arguments[0];return this.snap(i,null,-1)}if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getSafeEnvelope(),s=new Vi(t,e,n);return this._index.query(r,new(function(){return f(function a(){l(this,a)},[{key:"interfaces_",get:function(){return[Li]}},{key:"visitItem",value:function(a){a.select(r,s)}}])}())),s.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var i=arguments[0];this._index=i}}])}(),Vi=function(i){function t(){var e;return l(this,t),e=c(this,t),t.constructor_.apply(e,arguments),e}return d(t,i),f(t,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Oi))return p(t,"select",this,1).apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}}])}(Ia);Xi.HotPixelSnapAction=Vi;var Na=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(i,t,e,n){if(i===e&&t===n)return null;var r=i.getCoordinates()[t],s=i.getCoordinates()[t+1],a=e.getCoordinates()[n],u=e.getCoordinates()[n+1];if(this._li.computeIntersection(r,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var g=0;g<this._li.getIntersectionNum();g++)this._interiorIntersections.add(this._li.getIntersection(g));i.addIntersections(this._li,t,0),e.addIntersections(this._li,n,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[qi]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var i=arguments[0];this._li=i,this._interiorIntersections=new tt}}])}(),Sa=function(){return f(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(i){var t=_e.getNodedSubstrings(i),e=new Ui(t);try{e.checkValid()}catch(n){if(!(n instanceof Y))throw n;n.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return _e.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(i,t){var e=this.findInteriorIntersections(i,t);this.computeIntersectionSnaps(e),this.computeVertexSnaps(i)}},{key:"findInteriorIntersections",value:function(i,t){var e=new Na(t);return this._noder.setSegmentIntersector(e),this._noder.computeNodes(i),e.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(rt(arguments[0],Zt))for(var i=arguments[0].iterator();i.hasNext();){var t=i.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof _e)for(var e=arguments[0],n=e.getCoordinates(),r=0;r<n.length;r++){var s=new Un(n[r],this._scaleFactor,this._li);this._pointSnapper.snap(s,e,r)&&e.addIntersection(n[r],r)}}},{key:"computeNodes",value:function(i){this._nodedSegStrings=i,this._noder=new zn,this._pointSnapper=new Xi(this._noder.getIndex()),this.snapRound(i,this._li)}},{key:"computeIntersectionSnaps",value:function(i){for(var t=i.iterator();t.hasNext();){var e=t.next(),n=new Un(e,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[Yn]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var i=arguments[0];this._pm=i,this._li=new de,this._li.setPrecisionModel(i),this._scaleFactor=i.getScale()}}])}(),Ce=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return f(i,[{key:"bufferFixedPrecision",value:function(t){var e=new xa(new Sa(new Vt(1)),t.getScale()),n=new Bi(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var t=i.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(s){if(!(s instanceof re))throw s;this._saveException=s}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var e=arguments[0],n=i.precisionScaleFactor(this._argGeom,this._distance,e),r=new Vt(n);this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Vt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new Bi(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof xt))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new M,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(arguments.length===2){var t=arguments[1];return new i(arguments[0]).getResultGeometry(t)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof j&&typeof arguments[1]=="number"){var e=arguments[1],n=arguments[2],r=new i(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof M&&arguments[0]instanceof j&&typeof arguments[1]=="number"){var s=arguments[1];return new i(arguments[0],arguments[2]).getResultGeometry(s)}}else if(arguments.length===4){var a=arguments[1],u=arguments[2],g=arguments[3],m=new i(arguments[0]);return m.setQuadrantSegments(u),m.setEndCapStyle(g),m.getResultGeometry(a)}}},{key:"precisionScaleFactor",value:function(t,e,n){var r=t.getEnvelopeInternal(),s=Ge.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),a=n-Math.trunc(Math.log(s)/Math.log(10)+1);return Math.pow(10,a)}}])}();Ce.CAP_ROUND=M.CAP_ROUND,Ce.CAP_BUTT=M.CAP_FLAT,Ce.CAP_FLAT=M.CAP_FLAT,Ce.CAP_SQUARE=M.CAP_SQUARE,Ce.MAX_PRECISION_DIGITS=12;var wa=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Hi=function(){return f(function i(t){l(this,i),this.geometryFactory=t||new Ie},[{key:"read",value:function(i){var t,e=(t=typeof i=="string"?JSON.parse(i):i).type;if(!Ut[e])throw new Error("Unknown GeoJSON type: "+t.type);return wa.indexOf(e)!==-1?Ut[e].call(this,t.coordinates):e==="GeometryCollection"?Ut[e].call(this,t.geometries):Ut[e].call(this,t)}},{key:"write",value:function(i){var t=i.getGeometryType();if(!Kt[t])throw new Error("Geometry is not supported");return Kt[t].call(this,i)}}])}(),Ut={Feature:function(i){var t={};for(var e in i)t[e]=i[e];if(i.geometry){var n=i.geometry.type;if(!Ut[n])throw new Error("Unknown GeoJSON type: "+i.type);t.geometry=this.read(i.geometry)}return i.bbox&&(t.bbox=Ut.bbox.call(this,i.bbox)),t},FeatureCollection:function(i){var t={};if(i.features){t.features=[];for(var e=0;e<i.features.length;++e)t.features.push(this.read(i.features[e]))}return i.bbox&&(t.bbox=this.parse.bbox.call(this,i.bbox)),t},coordinates:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(y(T,L(n)))}return t},bbox:function(i){return this.geometryFactory.createLinearRing([new T(i[0],i[1]),new T(i[2],i[1]),new T(i[2],i[3]),new T(i[0],i[3]),new T(i[0],i[1])])},Point:function(i){var t=y(T,L(i));return this.geometryFactory.createPoint(t)},MultiPoint:function(i){for(var t=[],e=0;e<i.length;++e)t.push(Ut.Point.call(this,i[e]));return this.geometryFactory.createMultiPoint(t)},LineString:function(i){var t=Ut.coordinates.call(this,i);return this.geometryFactory.createLineString(t)},MultiLineString:function(i){for(var t=[],e=0;e<i.length;++e)t.push(Ut.LineString.call(this,i[e]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(i){for(var t=Ut.coordinates.call(this,i[0]),e=this.geometryFactory.createLinearRing(t),n=[],r=1;r<i.length;++r){var s=i[r],a=Ut.coordinates.call(this,s),u=this.geometryFactory.createLinearRing(a);n.push(u)}return this.geometryFactory.createPolygon(e,n)},MultiPolygon:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(Ut.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(i){for(var t=[],e=0;e<i.length;++e){var n=i[e];t.push(this.read(n))}return this.geometryFactory.createGeometryCollection(t)}},Kt={coordinate:function(i){var t=[i.x,i.y];return i.z&&t.push(i.z),i.m&&t.push(i.m),t},Point:function(i){return{type:"Point",coordinates:Kt.coordinate.call(this,i.getCoordinate())}},MultiPoint:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],r=Kt.Point.call(this,n);t.push(r.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(i){for(var t=[],e=i.getCoordinates(),n=0;n<e.length;++n){var r=e[n];t.push(Kt.coordinate.call(this,r))}return{type:"LineString",coordinates:t}},MultiLineString:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],r=Kt.LineString.call(this,n);t.push(r.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(i){var t=[],e=Kt.LineString.call(this,i._shell);t.push(e.coordinates);for(var n=0;n<i._holes.length;++n){var r=i._holes[n],s=Kt.LineString.call(this,r);t.push(s.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],r=Kt.Polygon.call(this,n);t.push(r.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(i){for(var t=[],e=0;e<i._geometries.length;++e){var n=i._geometries[e],r=n.getGeometryType();t.push(Kt[r].call(this,n))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:Ce,GeoJSONReader:function(){return f(function i(t){l(this,i),this.parser=new Hi(t||new Ie)},[{key:"read",value:function(i){return this.parser.read(i)}}])}(),GeoJSONWriter:function(){return f(function i(){l(this,i),this.parser=new Hi(this.geometryFactory)},[{key:"write",value:function(i){return this.parser.write(i)}}])}()}})})(is);var $a=is.exports;const tu=Ka($a);function ce(){return new kn}function kn(){this.reset()}kn.prototype={constructor:kn,reset:function(){this.s=this.t=0},add:function(o){gr(hn,o,this.t),gr(this,hn.s,this.s),this.s?this.t+=hn.t:this.s=hn.t},valueOf:function(){return this.s}};var hn=new kn;function gr(o,h,v){var c=o.s=h+v,l=c-h,y=c-l;o.t=h-y+(v-l)}var dt=1e-6,ht=Math.PI,te=ht/2,vr=ht/4,ne=ht*2,he=180/ht,Xt=ht/180,Nt=Math.abs,eu=Math.atan,Me=Math.atan2,_t=Math.cos,pt=Math.sin,De=Math.sqrt;function rs(o){return o>1?0:o<-1?ht:Math.acos(o)}function Ee(o){return o>1?te:o<-1?-te:Math.asin(o)}function Ze(){}function En(o,h){o&&yr.hasOwnProperty(o.type)&&yr[o.type](o,h)}var mr={Feature:function(o,h){En(o.geometry,h)},FeatureCollection:function(o,h){for(var v=o.features,c=-1,l=v.length;++c<l;)En(v[c].geometry,h)}},yr={Sphere:function(o,h){h.sphere()},Point:function(o,h){o=o.coordinates,h.point(o[0],o[1],o[2])},MultiPoint:function(o,h){for(var v=o.coordinates,c=-1,l=v.length;++c<l;)o=v[c],h.point(o[0],o[1],o[2])},LineString:function(o,h){$n(o.coordinates,h,0)},MultiLineString:function(o,h){for(var v=o.coordinates,c=-1,l=v.length;++c<l;)$n(v[c],h,0)},Polygon:function(o,h){dr(o.coordinates,h)},MultiPolygon:function(o,h){for(var v=o.coordinates,c=-1,l=v.length;++c<l;)dr(v[c],h)},GeometryCollection:function(o,h){for(var v=o.geometries,c=-1,l=v.length;++c<l;)En(v[c],h)}};function $n(o,h,v){var c=-1,l=o.length-v,y;for(h.lineStart();++c<l;)y=o[c],h.point(y[0],y[1],y[2]);h.lineEnd()}function dr(o,h){var v=-1,c=o.length;for(h.polygonStart();++v<c;)$n(o[v],h,1);h.polygonEnd()}function nu(o,h){o&&mr.hasOwnProperty(o.type)?mr[o.type](o,h):En(o,h)}ce();ce();function ti(o){return[Me(o[1],o[0]),Ee(o[2])]}function Pe(o){var h=o[0],v=o[1],c=_t(v);return[c*_t(h),c*pt(h),pt(v)]}function cn(o,h){return o[0]*h[0]+o[1]*h[1]+o[2]*h[2]}function xn(o,h){return[o[1]*h[2]-o[2]*h[1],o[2]*h[0]-o[0]*h[2],o[0]*h[1]-o[1]*h[0]]}function Zn(o,h){o[0]+=h[0],o[1]+=h[1],o[2]+=h[2]}function fn(o,h){return[o[0]*h,o[1]*h,o[2]*h]}function ei(o){var h=De(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);o[0]/=h,o[1]/=h,o[2]/=h}ce();function ss(o,h){function v(c,l){return c=o(c,l),h(c[0],c[1])}return o.invert&&h.invert&&(v.invert=function(c,l){return c=h.invert(c,l),c&&o.invert(c[0],c[1])}),v}function ni(o,h){return[o>ht?o-ne:o<-ht?o+ne:o,h]}ni.invert=ni;function iu(o,h,v){return(o%=ne)?h||v?ss(pr(o),kr(h,v)):pr(o):h||v?kr(h,v):ni}function _r(o){return function(h,v){return h+=o,[h>ht?h-ne:h<-ht?h+ne:h,v]}}function pr(o){var h=_r(o);return h.invert=_r(-o),h}function kr(o,h){var v=_t(o),c=pt(o),l=_t(h),y=pt(h);function k(f,C){var S=_t(C),E=_t(f)*S,d=pt(f)*S,I=pt(C),x=I*v+E*c;return[Me(d*l-x*y,E*v-I*c),Ee(x*l+d*y)]}return k.invert=function(f,C){var S=_t(C),E=_t(f)*S,d=pt(f)*S,I=pt(C),x=I*l-d*y;return[Me(d*l+I*y,E*v+x*c),Ee(x*v-E*c)]},k}function ru(o,h,v,c,l,y){if(v){var k=_t(h),f=pt(h),C=c*v;l==null?(l=h+c*ne,y=h-C/2):(l=Er(k,l),y=Er(k,y),(c>0?l<y:l>y)&&(l+=c*ne));for(var S,E=l;c>0?E>y:E<y;E-=C)S=ti([k,-f*_t(E),-f*pt(E)]),o.point(S[0],S[1])}}function Er(o,h){h=Pe(h),h[0]-=o,ei(h);var v=rs(-h[1]);return((-h[2]<0?-v:v)+ne-dt)%ne}function as(){var o=[],h;return{point:function(v,c){h.push([v,c])},lineStart:function(){o.push(h=[])},lineEnd:Ze,rejoin:function(){o.length>1&&o.push(o.pop().concat(o.shift()))},result:function(){var v=o;return o=[],h=null,v}}}function su(o,h,v,c,l,y){var k=o[0],f=o[1],C=h[0],S=h[1],E=0,d=1,I=C-k,x=S-f,p;if(p=v-k,!(!I&&p>0)){if(p/=I,I<0){if(p<E)return;p<d&&(d=p)}else if(I>0){if(p>d)return;p>E&&(E=p)}if(p=l-k,!(!I&&p<0)){if(p/=I,I<0){if(p>d)return;p>E&&(E=p)}else if(I>0){if(p<E)return;p<d&&(d=p)}if(p=c-f,!(!x&&p>0)){if(p/=x,x<0){if(p<E)return;p<d&&(d=p)}else if(x>0){if(p>d)return;p>E&&(E=p)}if(p=y-f,!(!x&&p<0)){if(p/=x,x<0){if(p>d)return;p>E&&(E=p)}else if(x>0){if(p<E)return;p<d&&(d=p)}return E>0&&(o[0]=k+E*I,o[1]=f+E*x),d<1&&(h[0]=k+d*I,h[1]=f+d*x),!0}}}}}function yn(o,h){return Nt(o[0]-h[0])<dt&&Nt(o[1]-h[1])<dt}function gn(o,h,v,c){this.x=o,this.z=h,this.o=v,this.e=c,this.v=!1,this.n=this.p=null}function us(o,h,v,c,l){var y=[],k=[],f,C;if(o.forEach(function(p){if(!((L=p.length-1)<=0)){var L,P=p[0],b=p[L],A;if(yn(P,b)){for(l.lineStart(),f=0;f<L;++f)l.point((P=p[f])[0],P[1]);l.lineEnd();return}y.push(A=new gn(P,p,null,!0)),k.push(A.o=new gn(P,null,A,!1)),y.push(A=new gn(b,p,null,!1)),k.push(A.o=new gn(b,null,A,!0))}}),!!y.length){for(k.sort(h),xr(y),xr(k),f=0,C=k.length;f<C;++f)k[f].e=v=!v;for(var S=y[0],E,d;;){for(var I=S,x=!0;I.v;)if((I=I.n)===S)return;E=I.z,l.lineStart();do{if(I.v=I.o.v=!0,I.e){if(x)for(f=0,C=E.length;f<C;++f)l.point((d=E[f])[0],d[1]);else c(I.x,I.n.x,1,l);I=I.n}else{if(x)for(E=I.p.z,f=E.length-1;f>=0;--f)l.point((d=E[f])[0],d[1]);else c(I.x,I.p.x,-1,l);I=I.p}I=I.o,E=I.z,x=!x}while(!I.v);l.lineEnd()}}}function xr(o){if(h=o.length){for(var h,v=0,c=o[0],l;++v<h;)c.n=l=o[v],l.p=c,c=l;c.n=l=o[0],l.p=c}}function os(o,h){return o<h?-1:o>h?1:o>=h?0:NaN}function au(o){return o.length===1&&(o=uu(o)),{left:function(h,v,c,l){for(c==null&&(c=0),l==null&&(l=h.length);c<l;){var y=c+l>>>1;o(h[y],v)<0?c=y+1:l=y}return c},right:function(h,v,c,l){for(c==null&&(c=0),l==null&&(l=h.length);c<l;){var y=c+l>>>1;o(h[y],v)>0?l=y:c=y+1}return c}}}function uu(o){return function(h,v){return os(o(h),v)}}au(os);function ls(o){for(var h=o.length,v,c=-1,l=0,y,k;++c<h;)l+=o[c].length;for(y=new Array(l);--h>=0;)for(k=o[h],v=k.length;--v>=0;)y[--l]=k[v];return y}var vn=1e9,mn=-1e9;function ou(o,h,v,c){function l(S,E){return o<=S&&S<=v&&h<=E&&E<=c}function y(S,E,d,I){var x=0,p=0;if(S==null||(x=k(S,d))!==(p=k(E,d))||C(S,E)<0^d>0)do I.point(x===0||x===3?o:v,x>1?c:h);while((x=(x+d+4)%4)!==p);else I.point(E[0],E[1])}function k(S,E){return Nt(S[0]-o)<dt?E>0?0:3:Nt(S[0]-v)<dt?E>0?2:1:Nt(S[1]-h)<dt?E>0?1:0:E>0?3:2}function f(S,E){return C(S.x,E.x)}function C(S,E){var d=k(S,1),I=k(E,1);return d!==I?d-I:d===0?E[1]-S[1]:d===1?S[0]-E[0]:d===2?S[1]-E[1]:E[0]-S[0]}return function(S){var E=S,d=as(),I,x,p,L,P,b,A,M,Y,G,D,U={point:z,lineStart:$,lineEnd:Q,polygonStart:Z,polygonEnd:W};function z(J,et){l(J,et)&&E.point(J,et)}function F(){for(var J=0,et=0,ct=x.length;et<ct;++et)for(var Et=x[et],kt=1,V=Et.length,St=Et[0],xt,Mt,st=St[0],ie=St[1];kt<V;++kt)xt=st,Mt=ie,St=Et[kt],st=St[0],ie=St[1],Mt<=c?ie>c&&(st-xt)*(c-Mt)>(ie-Mt)*(o-xt)&&++J:ie<=c&&(st-xt)*(c-Mt)<(ie-Mt)*(o-xt)&&--J;return J}function Z(){E=d,I=[],x=[],D=!0}function W(){var J=F(),et=D&&J,ct=(I=ls(I)).length;(et||ct)&&(S.polygonStart(),et&&(S.lineStart(),y(null,null,1,S),S.lineEnd()),ct&&us(I,f,J,y,S),S.polygonEnd()),E=S,I=x=p=null}function $(){U.point=O,x&&x.push(p=[]),G=!0,Y=!1,A=M=NaN}function Q(){I&&(O(L,P),b&&Y&&d.rejoin(),I.push(d.result())),U.point=z,Y&&E.lineEnd()}function O(J,et){var ct=l(J,et);if(x&&p.push([J,et]),G)L=J,P=et,b=ct,G=!1,ct&&(E.lineStart(),E.point(J,et));else if(ct&&Y)E.point(J,et);else{var Et=[A=Math.max(mn,Math.min(vn,A)),M=Math.max(mn,Math.min(vn,M))],kt=[J=Math.max(mn,Math.min(vn,J)),et=Math.max(mn,Math.min(vn,et))];su(Et,kt,o,h,v,c)?(Y||(E.lineStart(),E.point(Et[0],Et[1])),E.point(kt[0],kt[1]),ct||E.lineEnd(),D=!1):ct&&(E.lineStart(),E.point(J,et),D=!1)}A=J,M=et,Y=ct}return U}}var Wn=ce();function lu(o,h){var v=h[0],c=h[1],l=[pt(v),-_t(v),0],y=0,k=0;Wn.reset();for(var f=0,C=o.length;f<C;++f)if(E=(S=o[f]).length)for(var S,E,d=S[E-1],I=d[0],x=d[1]/2+vr,p=pt(x),L=_t(x),P=0;P<E;++P,I=A,p=Y,L=G,d=b){var b=S[P],A=b[0],M=b[1]/2+vr,Y=pt(M),G=_t(M),D=A-I,U=D>=0?1:-1,z=U*D,F=z>ht,Z=p*Y;if(Wn.add(Me(Z*U*pt(z),L*G+Z*_t(z))),y+=F?D+U*ne:D,F^I>=v^A>=v){var W=xn(Pe(d),Pe(b));ei(W);var $=xn(l,W);ei($);var Q=(F^D>=0?-1:1)*Ee($[2]);(c>Q||c===Q&&(W[0]||W[1]))&&(k+=F^D>=0?1:-1)}}return(y<-1e-6||y<dt&&Wn<-1e-6)^k&1}ce();function Ir(o){return o}ce();ce();var Ae=1/0,In=Ae,je=-Ae,Nn=je,Nr={point:hu,lineStart:Ze,lineEnd:Ze,polygonStart:Ze,polygonEnd:Ze,result:function(){var o=[[Ae,In],[je,Nn]];return je=Nn=-(In=Ae=1/0),o}};function hu(o,h){o<Ae&&(Ae=o),o>je&&(je=o),h<In&&(In=h),h>Nn&&(Nn=h)}ce();function hs(o,h,v,c){return function(l,y){var k=h(y),f=l.invert(c[0],c[1]),C=as(),S=h(C),E=!1,d,I,x,p={point:L,lineStart:b,lineEnd:A,polygonStart:function(){p.point=M,p.lineStart=Y,p.lineEnd=G,I=[],d=[]},polygonEnd:function(){p.point=L,p.lineStart=b,p.lineEnd=A,I=ls(I);var D=lu(d,f);I.length?(E||(y.polygonStart(),E=!0),us(I,fu,D,v,y)):D&&(E||(y.polygonStart(),E=!0),y.lineStart(),v(null,null,1,y),y.lineEnd()),E&&(y.polygonEnd(),E=!1),I=d=null},sphere:function(){y.polygonStart(),y.lineStart(),v(null,null,1,y),y.lineEnd(),y.polygonEnd()}};function L(D,U){var z=l(D,U);o(D=z[0],U=z[1])&&y.point(D,U)}function P(D,U){var z=l(D,U);k.point(z[0],z[1])}function b(){p.point=P,k.lineStart()}function A(){p.point=L,k.lineEnd()}function M(D,U){x.push([D,U]);var z=l(D,U);S.point(z[0],z[1])}function Y(){S.lineStart(),x=[]}function G(){M(x[0][0],x[0][1]),S.lineEnd();var D=S.clean(),U=C.result(),z,F=U.length,Z,W,$;if(x.pop(),d.push(x),x=null,!!F){if(D&1){if(W=U[0],(Z=W.length-1)>0){for(E||(y.polygonStart(),E=!0),y.lineStart(),z=0;z<Z;++z)y.point(($=W[z])[0],$[1]);y.lineEnd()}return}F>1&&D&2&&U.push(U.pop().concat(U.shift())),I.push(U.filter(cu))}}return p}}function cu(o){return o.length>1}function fu(o,h){return((o=o.x)[0]<0?o[1]-te-dt:te-o[1])-((h=h.x)[0]<0?h[1]-te-dt:te-h[1])}const Sr=hs(function(){return!0},gu,mu,[-ht,-te]);function gu(o){var h=NaN,v=NaN,c=NaN,l;return{lineStart:function(){o.lineStart(),l=1},point:function(y,k){var f=y>0?ht:-ht,C=Nt(y-h);Nt(C-ht)<dt?(o.point(h,v=(v+k)/2>0?te:-te),o.point(c,v),o.lineEnd(),o.lineStart(),o.point(f,v),o.point(y,v),l=0):c!==f&&C>=ht&&(Nt(h-c)<dt&&(h-=c*dt),Nt(y-f)<dt&&(y-=f*dt),v=vu(h,v,y,k),o.point(c,v),o.lineEnd(),o.lineStart(),o.point(f,v),l=0),o.point(h=y,v=k),c=f},lineEnd:function(){o.lineEnd(),h=v=NaN},clean:function(){return 2-l}}}function vu(o,h,v,c){var l,y,k=pt(o-v);return Nt(k)>dt?eu((pt(h)*(y=_t(c))*pt(v)-pt(c)*(l=_t(h))*pt(o))/(l*y*k)):(h+c)/2}function mu(o,h,v,c){var l;if(o==null)l=v*te,c.point(-ht,l),c.point(0,l),c.point(ht,l),c.point(ht,0),c.point(ht,-l),c.point(0,-l),c.point(-ht,-l),c.point(-ht,0),c.point(-ht,l);else if(Nt(o[0]-h[0])>dt){var y=o[0]<h[0]?ht:-ht;l=v*y/2,c.point(-y,l),c.point(0,l),c.point(y,l)}else c.point(h[0],h[1])}function yu(o,h){var v=_t(o),c=v>0,l=Nt(v)>dt;function y(E,d,I,x){ru(x,o,h,I,E,d)}function k(E,d){return _t(E)*_t(d)>v}function f(E){var d,I,x,p,L;return{lineStart:function(){p=x=!1,L=1},point:function(P,b){var A=[P,b],M,Y=k(P,b),G=c?Y?0:S(P,b):Y?S(P+(P<0?ht:-ht),b):0;if(!d&&(p=x=Y)&&E.lineStart(),Y!==x&&(M=C(d,A),(!M||yn(d,M)||yn(A,M))&&(A[0]+=dt,A[1]+=dt,Y=k(A[0],A[1]))),Y!==x)L=0,Y?(E.lineStart(),M=C(A,d),E.point(M[0],M[1])):(M=C(d,A),E.point(M[0],M[1]),E.lineEnd()),d=M;else if(l&&d&&c^Y){var D;!(G&I)&&(D=C(A,d,!0))&&(L=0,c?(E.lineStart(),E.point(D[0][0],D[0][1]),E.point(D[1][0],D[1][1]),E.lineEnd()):(E.point(D[1][0],D[1][1]),E.lineEnd(),E.lineStart(),E.point(D[0][0],D[0][1])))}Y&&(!d||!yn(d,A))&&E.point(A[0],A[1]),d=A,x=Y,I=G},lineEnd:function(){x&&E.lineEnd(),d=null},clean:function(){return L|(p&&x)<<1}}}function C(E,d,I){var x=Pe(E),p=Pe(d),L=[1,0,0],P=xn(x,p),b=cn(P,P),A=P[0],M=b-A*A;if(!M)return!I&&E;var Y=v*b/M,G=-v*A/M,D=xn(L,P),U=fn(L,Y),z=fn(P,G);Zn(U,z);var F=D,Z=cn(U,F),W=cn(F,F),$=Z*Z-W*(cn(U,U)-1);if(!($<0)){var Q=De($),O=fn(F,(-Z-Q)/W);if(Zn(O,U),O=ti(O),!I)return O;var J=E[0],et=d[0],ct=E[1],Et=d[1],kt;et<J&&(kt=J,J=et,et=kt);var V=et-J,St=Nt(V-ht)<dt,xt=St||V<dt;if(!St&&Et<ct&&(kt=ct,ct=Et,Et=kt),xt?St?ct+Et>0^O[1]<(Nt(O[0]-J)<dt?ct:Et):ct<=O[1]&&O[1]<=Et:V>ht^(J<=O[0]&&O[0]<=et)){var Mt=fn(F,(-Z+Q)/W);return Zn(Mt,U),[O,ti(Mt)]}}}function S(E,d){var I=c?o:ht-o,x=0;return E<-I?x|=1:E>I&&(x|=2),d<-I?x|=4:d>I&&(x|=8),x}return hs(k,f,y,c?[0,-o]:[-ht,o-ht])}function cs(o){return function(h){var v=new ii;for(var c in o)v[c]=o[c];return v.stream=h,v}}function ii(){}ii.prototype={constructor:ii,point:function(o,h){this.stream.point(o,h)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fs(o,h,v){var c=h[1][0]-h[0][0],l=h[1][1]-h[0][1],y=o.clipExtent&&o.clipExtent();o.scale(150).translate([0,0]),y!=null&&o.clipExtent(null),nu(v,o.stream(Nr));var k=Nr.result(),f=Math.min(c/(k[1][0]-k[0][0]),l/(k[1][1]-k[0][1])),C=+h[0][0]+(c-f*(k[1][0]+k[0][0]))/2,S=+h[0][1]+(l-f*(k[1][1]+k[0][1]))/2;return y!=null&&o.clipExtent(y),o.scale(f*150).translate([C,S])}function du(o,h,v){return fs(o,[[0,0],h],v)}var wr=16,_u=_t(30*Xt);function Tr(o,h){return+h?ku(o,h):pu(o)}function pu(o){return cs({point:function(h,v){h=o(h,v),this.stream.point(h[0],h[1])}})}function ku(o,h){function v(c,l,y,k,f,C,S,E,d,I,x,p,L,P){var b=S-c,A=E-l,M=b*b+A*A;if(M>4*h&&L--){var Y=k+I,G=f+x,D=C+p,U=De(Y*Y+G*G+D*D),z=Ee(D/=U),F=Nt(Nt(D)-1)<dt||Nt(y-d)<dt?(y+d)/2:Me(G,Y),Z=o(F,z),W=Z[0],$=Z[1],Q=W-c,O=$-l,J=A*Q-b*O;(J*J/M>h||Nt((b*Q+A*O)/M-.5)>.3||k*I+f*x+C*p<_u)&&(v(c,l,y,k,f,C,W,$,F,Y/=U,G/=U,D,L,P),P.point(W,$),v(W,$,F,Y,G,D,S,E,d,I,x,p,L,P))}}return function(c){var l,y,k,f,C,S,E,d,I,x,p,L,P={point:b,lineStart:A,lineEnd:Y,polygonStart:function(){c.polygonStart(),P.lineStart=G},polygonEnd:function(){c.polygonEnd(),P.lineStart=A}};function b(z,F){z=o(z,F),c.point(z[0],z[1])}function A(){d=NaN,P.point=M,c.lineStart()}function M(z,F){var Z=Pe([z,F]),W=o(z,F);v(d,I,E,x,p,L,d=W[0],I=W[1],E=z,x=Z[0],p=Z[1],L=Z[2],wr,c),c.point(d,I)}function Y(){P.point=b,c.lineEnd()}function G(){A(),P.point=D,P.lineEnd=U}function D(z,F){M(l=z,F),y=d,k=I,f=x,C=p,S=L,P.point=M}function U(){v(d,I,E,x,p,L,y,k,l,f,C,S,wr,c),P.lineEnd=Y,Y()}return P}}var Eu=cs({point:function(o,h){this.stream.point(o*Xt,h*Xt)}});function xu(o){return Iu(function(){return o})()}function Iu(o){var h,v=150,c=480,l=250,y,k,f=0,C=0,S=0,E=0,d=0,I,x,p=null,L=Sr,P=null,b,A,M,Y=Ir,G=.5,D=Tr(W,G),U,z;function F(O){return O=x(O[0]*Xt,O[1]*Xt),[O[0]*v+y,k-O[1]*v]}function Z(O){return O=x.invert((O[0]-y)/v,(k-O[1])/v),O&&[O[0]*he,O[1]*he]}function W(O,J){return O=h(O,J),[O[0]*v+y,k-O[1]*v]}F.stream=function(O){return U&&z===O?U:U=Eu(L(I,D(Y(z=O))))},F.clipAngle=function(O){return arguments.length?(L=+O?yu(p=O*Xt,6*Xt):(p=null,Sr),Q()):p*he},F.clipExtent=function(O){return arguments.length?(Y=O==null?(P=b=A=M=null,Ir):ou(P=+O[0][0],b=+O[0][1],A=+O[1][0],M=+O[1][1]),Q()):P==null?null:[[P,b],[A,M]]},F.scale=function(O){return arguments.length?(v=+O,$()):v},F.translate=function(O){return arguments.length?(c=+O[0],l=+O[1],$()):[c,l]},F.center=function(O){return arguments.length?(f=O[0]%360*Xt,C=O[1]%360*Xt,$()):[f*he,C*he]},F.rotate=function(O){return arguments.length?(S=O[0]%360*Xt,E=O[1]%360*Xt,d=O.length>2?O[2]%360*Xt:0,$()):[S*he,E*he,d*he]},F.precision=function(O){return arguments.length?(D=Tr(W,G=O*O),Q()):De(G)},F.fitExtent=function(O,J){return fs(F,O,J)},F.fitSize=function(O,J){return du(F,O,J)};function $(){x=ss(I=iu(S,E,d),h);var O=h(f,C);return y=c-O[0]*v,k=l+O[1]*v,Q()}function Q(){return U=z=null,F}return function(){return h=o.apply(this,arguments),F.invert=h.invert&&Z,$()}}function gs(o){return function(h,v){var c=_t(h),l=_t(v),y=o(c*l);return[y*l*pt(h),y*pt(v)]}}function vs(o){return function(h,v){var c=De(h*h+v*v),l=o(c),y=pt(l),k=_t(l);return[Me(h*y,c*k),Ee(c&&v*y/c)]}}var Nu=gs(function(o){return De(2/(1+o))});Nu.invert=vs(function(o){return 2*Ee(o/2)});var ms=gs(function(o){return(o=rs(o))&&o/pt(o)});ms.invert=vs(function(o){return o});function Su(){return xu(ms).scale(79.4188).clipAngle(180-.001)}function Cr(o,h){return[o,h]}Cr.invert=Cr;var{BufferOp:wu,GeoJSONReader:Tu,GeoJSONWriter:Cu}=tu;function Lu(o,h,v){v=v||{};var c=v.units||"kilometers",l=v.steps||8;if(!o)throw new Error("geojson is required");if(typeof v!="object")throw new Error("options must be an object");if(typeof l!="number")throw new Error("steps must be an number");if(h===void 0)throw new Error("radius is required");if(l<=0)throw new Error("steps must be greater than 0");var y=[];switch(o.type){case"GeometryCollection":return ns(o,function(k){var f=dn(k,h,c,l);f&&y.push(f)}),Qn(y);case"FeatureCollection":return cr(o,function(k){var f=dn(k,h,c,l);f&&cr(f,function(C){C&&y.push(C)})}),Qn(y)}return dn(o,h,c,l)}function dn(o,h,v,c){var l=o.properties||{},y=o.type==="Feature"?o.geometry:o;if(y.type==="GeometryCollection"){var k=[];return ns(o,function(L){var P=dn(L,h,v,c);P&&k.push(P)}),Qn(k)}var f=Ru(y),C={type:y.type,coordinates:ds(y.coordinates,f)},S=new Tu,E=S.read(C),d=Ua(Xa(h,v),"meters"),I=wu.bufferOp(E,d,c),x=new Cu;if(I=x.write(I),!ys(I.coordinates)){var p={type:I.type,coordinates:_s(I.coordinates,f)};return $r(p,l)}}function ys(o){return Array.isArray(o[0])?ys(o[0]):isNaN(o[0])}function ds(o,h){return typeof o[0]!="object"?h(o):o.map(function(v){return ds(v,h)})}function _s(o,h){return typeof o[0]!="object"?h.invert(o):o.map(function(v){return _s(v,h)})}function Ru(o){var h=Qa(o).geometry.coordinates,v=[-h[0],-h[1]];return Su().rotate(v).scale(Pt)}function Lr(o){let h,v=o[0].length+"",c,l;return{c(){h=Oe("p"),c=pn(v),l=pn(" cells generated. Ready to export!"),this.h()},l(y){h=Re(y,"P",{class:!0});var k=Lt(h);c=_n(k,v),l=_n(k," cells generated. Ready to export!"),k.forEach(gt),this.h()},h(){at(h,"class","svelte-blfr7n")},m(y,k){bt(y,h,k),Gt(h,c),Gt(h,l)},p(y,k){k&1&&v!==(v=y[0].length+"")&&Hr(c,v)},d(y){y&&gt(h)}}}function Ou(o){let h,v,c=o[1]?"Processing...":"Generate Grid",l,y,k,f,C,S,E,d,I,x=o[0].length>0&&Lr(o);return{c(){h=Oe("div"),v=Oe("button"),l=pn(c),y=Jn(),k=Oe("button"),f=pn("Export GeoJSON"),S=Jn(),x&&x.c(),E=ee(),this.h()},l(p){h=Re(p,"DIV",{class:!0});var L=Lt(h);v=Re(L,"BUTTON",{class:!0});var P=Lt(v);l=_n(P,c),P.forEach(gt),y=jn(L),k=Re(L,"BUTTON",{class:!0});var b=Lt(k);f=_n(b,"Export GeoJSON"),b.forEach(gt),L.forEach(gt),S=jn(p),x&&x.l(p),E=ee(),this.h()},h(){v.disabled=o[1],at(v,"class","svelte-blfr7n"),k.disabled=C=!o[0].length||o[1],at(k,"class","svelte-blfr7n"),at(h,"class","controls svelte-blfr7n")},m(p,L){bt(p,h,L),Gt(h,v),Gt(v,l),Gt(h,y),Gt(h,k),Gt(k,f),bt(p,S,L),x&&x.m(p,L),bt(p,E,L),d||(I=[tr(v,"click",o[2]),tr(k,"click",o[3])],d=!0)},p(p,[L]){L&2&&c!==(c=p[1]?"Processing...":"Generate Grid")&&Hr(l,c),L&2&&(v.disabled=p[1]),L&3&&C!==(C=!p[0].length||p[1])&&(k.disabled=C),p[0].length>0?x?x.p(p,L):(x=Lr(p),x.c(),x.m(E.parentNode,E)):x&&(x.d(1),x=null)},i:$i,o:$i,d(p){p&&(gt(h),gt(S),gt(E)),x&&x.d(p),d=!1,Ta(I)}}}function bu(o,h,v){let{xScale:c}=h,{yScale:l}=h,{width:y=window.innerWidth}=h,{height:k=window.innerHeight}=h,{gridSize:f=5}=h,{streetBufferDistance:C=5}=h,S=null,E=[],d=!1;Kn(async()=>{try{S=await(await fetch("/map.geojson")).json(),console.log("GeoJSON loaded! Ready to process.")}catch(p){console.error("Error loading map.geojson",p)}});async function I(){var M,Y,G;if(!S||!c||!l){console.warn("Missing xScale/yScale/geoData");return}v(0,E=[]),v(1,d=!0);const p=Math.ceil(y/f),L=Math.ceil(k/f),P=S.features.filter(D=>D.geometry.type==="Polygon"||D.geometry.type==="MultiPolygon"),A=S.features.filter(D=>{var U;return(D.geometry.type==="LineString"||D.geometry.type==="MultiLineString")&&((U=D.properties)==null?void 0:U.highway)}).map((D,U)=>{try{const z=Lu(D,C,{units:"meters"});return z.id=D.id||U,z}catch(z){return console.error("Buffer error",z),null}}).filter(D=>D);console.log("Starting grid generation...");for(let D=0;D<p;D++)for(let U=0;U<L;U++){const z=D*f,F=U*f,Z=c.invert(z+f/2),W=l.invert(F+f/2),$=ts([Z,W]);let Q=null;for(let O of A)if(fr($,O)){Q="street";break}if(!Q){for(let O of P)if(fr($,O)){((M=O.properties)==null?void 0:M.leisure)==="park"?Q="park":((Y=O.properties)==null?void 0:Y.natural)==="water"||(G=O.properties)!=null&&G.waterway?Q="water":Q="other";break}}if(Q){const O=c.invert(z),J=c.invert(z+f),et=l.invert(F+f),ct=l.invert(F),kt={type:"Feature",geometry:{type:"Polygon",coordinates:[[[O,et],[O,ct],[J,ct],[J,et],[O,et]]]},properties:{type:Q}};E.push(kt)}}v(1,d=!1),console.log(`Grid generated! ${E.length} cells.`)}function x(){if(!E.length){console.warn("No grid cells to export!");return}const L=JSON.stringify({type:"FeatureCollection",features:E}),P=new Blob([L],{type:"application/json"}),b=URL.createObjectURL(P),A=document.createElement("a");A.href=b,A.download=`pixelated_grid_${f}grid_${C}buffer.geojson`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(b),console.log("Export complete!")}return o.$$set=p=>{"xScale"in p&&v(4,c=p.xScale),"yScale"in p&&v(5,l=p.yScale),"width"in p&&v(6,y=p.width),"height"in p&&v(7,k=p.height),"gridSize"in p&&v(8,f=p.gridSize),"streetBufferDistance"in p&&v(9,C=p.streetBufferDistance)},[E,d,I,x,c,l,y,k,f,C]}class Mu extends Wr{constructor(h){super(),jr(this,h,bu,Ou,Vr,{xScale:4,yScale:5,width:6,height:7,gridSize:8,streetBufferDistance:9})}}function Rr(o,h,v){const c=o.slice();return c[25]=h[v],c[27]=v,c}function Or(o,h,v){const c=o.slice();return c[25]=h[v],c}function br(o,h,v){const c=o.slice();return c[30]=h[v],c[27]=v,c}function Mr(o){let h,v,c,l=o[0].length>0&&Pr(o);return{c(){h=Oe("div"),v=Oe("div"),l&&l.c(),this.h()},l(y){h=Re(y,"DIV",{class:!0});var k=Lt(h);v=Re(k,"DIV",{class:!0});var f=Lt(v);l&&l.l(f),f.forEach(gt),k.forEach(gt),this.h()},h(){at(v,"class","main svelte-164r9yn"),at(h,"class","container svelte-164r9yn")},m(y,k){bt(y,h,k),Gt(h,v),l&&l.m(v,null),c=!0},p(y,k){y[0].length>0?l?(l.p(y,k),k[0]&1&&ke(l,1)):(l=Pr(y),l.c(),ke(l,1),l.m(v,null)):l&&(Kr(),We(l,1,1,()=>{l=null}),Jr())},i(y){c||(ke(l),c=!0)},o(y){We(l),c=!1},d(y){y&&gt(h),l&&l.d()}}}function Pr(o){let h,v,c,l,y=[],k=new Map,f,C,S;h=new Mu({props:{transform:o[7],xScale:o[5],yScale:o[6]}});let E=be(o[3]);const d=x=>x[25].id;for(let x=0;x<E.length;x+=1){let p=Or(o,E,x),L=d(p);k.set(L,y[x]=Dr(L,p))}let I=o[4].length>1&&Fr(o);return{c(){ba(h.$$.fragment),v=Jn(),c=$t("svg"),l=$t("g");for(let x=0;x<y.length;x+=1)y[x].c();f=ee(),I&&I.c(),this.h()},l(x){Oa(h.$$.fragment,x),v=jn(x),c=Qt(x,"svg",{style:!0,class:!0});var p=Lt(c);l=Qt(p,"g",{transform:!0});var L=Lt(l);for(let P=0;P<y.length;P+=1)y[P].l(L);f=ee(),I&&I.l(L),L.forEach(gt),p.forEach(gt),this.h()},h(){at(l,"transform",C="translate("+o[7].x+", "+o[7].y+") scale("+o[7].k+")"),er(c,"width","100%"),er(c,"height","100vh"),at(c,"class","svelte-164r9yn")},m(x,p){Ra(h,x,p),bt(x,v,p),bt(x,c,p),Gt(c,l);for(let L=0;L<y.length;L+=1)y[L]&&y[L].m(l,null);Gt(l,f),I&&I.m(l,null),o[12](c),S=!0},p(x,p){const L={};p[0]&128&&(L.transform=x[7]),p[0]&32&&(L.xScale=x[5]),p[0]&64&&(L.yScale=x[6]),h.$set(L),p[0]&776&&(E=be(x[3]),y=Pa(y,p,d,1,x,E,k,l,Aa,Dr,f,Or)),x[4].length>1?I?I.p(x,p):(I=Fr(x),I.c(),I.m(l,null)):I&&(I.d(1),I=null),(!S||p[0]&128&&C!==(C="translate("+x[7].x+", "+x[7].y+") scale("+x[7].k+")"))&&at(l,"transform",C)},i(x){S||(ke(h.$$.fragment,x),S=!0)},o(x){We(h.$$.fragment,x),S=!1},d(x){x&&(gt(v),gt(c)),La(h,x);for(let p=0;p<y.length;p+=1)y[p].d();I&&I.d(),o[12](null)}}}function Pu(o){let h,v;return{c(){h=$t("circle"),this.h()},l(c){h=Qt(c,"circle",{r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),Lt(h).forEach(gt),this.h()},h(){at(h,"r",o[8]),at(h,"fill","none"),at(h,"stroke",v=o[25].color),at(h,"stroke-width","0.1"),at(h,"class","svelte-164r9yn")},m(c,l){bt(c,h,l)},p(c,l){l[0]&8&&v!==(v=c[25].color)&&at(h,"stroke",v)},d(c){c&&gt(h)}}}function Au(o){let h,v=be(Array(o[25].numRings)),c=[];for(let l=0;l<v.length;l+=1)c[l]=Ar(br(o,v,l));return{c(){for(let l=0;l<c.length;l+=1)c[l].c();h=ee()},l(l){for(let y=0;y<c.length;y+=1)c[y].l(l);h=ee()},m(l,y){for(let k=0;k<c.length;k+=1)c[k]&&c[k].m(l,y);bt(l,h,y)},p(l,y){if(y[0]&776){v=be(Array(l[25].numRings));let k;for(k=0;k<v.length;k+=1){const f=br(l,v,k);c[k]?c[k].p(f,y):(c[k]=Ar(f),c[k].c(),c[k].m(h.parentNode,h))}for(;k<c.length;k+=1)c[k].d(1);c.length=v.length}},d(l){l&&gt(h),Zr(c,l)}}}function Ar(o){let h,v;return{c(){h=$t("circle"),this.h()},l(c){h=Qt(c,"circle",{r:!0,fill:!0,stroke:!0,"stroke-width":!0,class:!0}),Lt(h).forEach(gt),this.h()},h(){at(h,"r",o[8]+o[27]*o[9]),at(h,"fill","none"),at(h,"stroke",v=o[25].color),at(h,"stroke-width","0.1"),at(h,"class","svelte-164r9yn")},m(c,l){bt(c,h,l)},p(c,l){l[0]&8&&v!==(v=c[25].color)&&at(h,"stroke",v)},d(c){c&&gt(h)}}}function Dr(o,h){let v,c;function l(f,C){return f[25].numRings>0?Au:Pu}let y=l(h),k=y(h);return{key:o,first:null,c(){v=$t("g"),k.c(),this.h()},l(f){v=Qt(f,"g",{class:!0,transform:!0});var C=Lt(v);k.l(C),C.forEach(gt),this.h()},h(){at(v,"class","node svelte-164r9yn"),at(v,"transform",c="translate("+h[25].x+", "+h[25].y+")"),this.first=v},m(f,C){bt(f,v,C),k.m(v,null)},p(f,C){h=f,y===(y=l(h))&&k?k.p(h,C):(k.d(1),k=y(h),k&&(k.c(),k.m(v,null))),C[0]&8&&c!==(c="translate("+h[25].x+", "+h[25].y+")")&&at(v,"transform",c)},d(f){f&&gt(v),k.d()}}}function Fr(o){let h,v,c,l,y=be(o[4].slice(0,o[4].length-1)),k=[];for(let f=0;f<y.length;f+=1)k[f]=qr(Rr(o,y,f));return{c(){h=$t("g"),v=$t("defs"),c=$t("marker"),l=$t("polygon");for(let f=0;f<k.length;f+=1)k[f].c();this.h()},l(f){h=Qt(f,"g",{class:!0});var C=Lt(h);v=Qt(C,"defs",{});var S=Lt(v);c=Qt(S,"marker",{id:!0,markerWidth:!0,markerHeight:!0,refX:!0,refY:!0,orient:!0});var E=Lt(c);l=Qt(E,"polygon",{points:!0,fill:!0}),Lt(l).forEach(gt),E.forEach(gt),S.forEach(gt);for(let d=0;d<k.length;d+=1)k[d].l(C);C.forEach(gt),this.h()},h(){at(l,"points","0 0, 6 2, 0 4"),at(l,"fill","blue"),at(c,"id","arrowhead"),at(c,"markerWidth","6"),at(c,"markerHeight","4"),at(c,"refX","3"),at(c,"refY","2"),at(c,"orient","auto"),at(h,"class","curator-path svelte-164r9yn")},m(f,C){bt(f,h,C),Gt(h,v),Gt(v,c),Gt(c,l);for(let S=0;S<k.length;S+=1)k[S]&&k[S].m(h,null)},p(f,C){if(C[0]&16){y=be(f[4].slice(0,f[4].length-1));let S;for(S=0;S<y.length;S+=1){const E=Rr(f,y,S);k[S]?k[S].p(E,C):(k[S]=qr(E),k[S].c(),k[S].m(h,null))}for(;S<k.length;S+=1)k[S].d(1);k.length=y.length}},d(f){f&&gt(h),Zr(k,f)}}}function Gr(o){let h,v;return{c(){h=$t("path"),this.h()},l(c){h=Qt(c,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"marker-end":!0,class:!0}),Lt(h).forEach(gt),this.h()},h(){at(h,"d",v=Xr(o[25],o[4][o[27]+1])),at(h,"fill","none"),at(h,"stroke","blue"),at(h,"stroke-width",".5"),at(h,"marker-end","url(#arrowhead)"),at(h,"class","svelte-164r9yn")},m(c,l){bt(c,h,l)},p(c,l){l[0]&16&&v!==(v=Xr(c[25],c[4][c[27]+1]))&&at(h,"d",v)},d(c){c&&gt(h)}}}function qr(o){let h,v=o[4][o[27]+1]&&Gr(o);return{c(){v&&v.c(),h=ee()},l(c){v&&v.l(c),h=ee()},m(c,l){v&&v.m(c,l),bt(c,h,l)},p(c,l){c[4][c[27]+1]?v?v.p(c,l):(v=Gr(c),v.c(),v.m(h.parentNode,h)):v&&(v.d(1),v=null)},d(c){c&&gt(h),v&&v.d(c)}}}function Du(o){let h,v,c=o[0].length>0&&o[1].length>0&&Mr(o);return{c(){c&&c.c(),h=ee()},l(l){c&&c.l(l),h=ee()},m(l,y){c&&c.m(l,y),bt(l,h,y),v=!0},p(l,y){l[0].length>0&&l[1].length>0?c?(c.p(l,y),y[0]&3&&ke(c,1)):(c=Mr(l),c.c(),ke(c,1),c.m(h.parentNode,h)):c&&(Kr(),We(c,1,1,()=>{c=null}),Jr())},i(l){v||(ke(c),v=!0)},o(l){We(c),v=!1},d(l){l&&gt(h),c&&c.d(l)}}}const Yr=1,zr=1,Br=10,Ur=5;function Fu(o){return"DarkSeaGreen"}function Xr(o,h,v=20){const c=h.x-o.x,l=h.y-o.y,y=(o.x+h.x)/2,k=(o.y+h.y)/2,f=Math.sqrt(c*c+l*l)||1,C=-l/f,S=c/f,E=y+C*v,d=k+S*v;return`M ${o.x} ${o.y} Q ${E} ${d} ${h.x} ${h.y}`}function Gu(o,h,v){let c,l=[],y=[],k=2011,f,C=null;Kn(async()=>{const z=await fetch("data/ArnArbPlantsGEO.json");v(0,l=await z.json()),Math.min(...l.map(Z=>parseInt(Z.ACC_YR))),f=Math.max(...l.map(Z=>parseInt(Z.ACC_YR))),v(10,k=f);const F=await fetch("data/Curator_Plants_Dates.json");v(1,y=await F.json()),y.length>0&&v(11,C=y[0])});let S,E=[],d,I,x=ir,p;const L=Yr+(Br-1)*zr,P=Ur/2/L,b=Yr*P,A=zr*P,M=L*P,Y=Ur;function G(){S.clientWidth,S.clientHeight;const z=l.map(et=>parseFloat(et.LONGITUDE)).filter(et=>!isNaN(et)),F=l.map(et=>parseFloat(et.LATITUDE)).filter(et=>!isNaN(et));let Z=rr(z),W=sr(z),$=rr(F),Q=sr(F);const O=(W-Z)*.2,J=(Q-$)*.2;Z-=O,W+=O,$-=J,Q+=J,v(5,d=ar().domain([Z,W]).range([0,S.clientWidth])),v(6,I=ar().domain([$,Q]).range([S.clientHeight,0]))}function D(){return!l||!S||k===void 0?[]:(G(),l.map((F,Z)=>{const W=parseFloat(F.LONGITUDE),$=parseFloat(F.LATITUDE),Q=parseInt(F.ACC_YR),O=parseInt(F.last_date);if(isNaN(W)||isNaN($)||isNaN(Q)||isNaN(O))return null;let J=0;k>=Q&&(J=Math.floor((k-Q)/10),J=Math.min(J,Br));let et=J>0?b+(J-1)*A:b;et=Math.min(et,M);const ct=d(W),Et=I($),kt=Math.floor(ct/Y),V=Math.floor(Et/Y),St=kt*Y+Y/2,xt=V*Y+Y/2;return{id:F.PLANTID?F.PLANTID:Z,x:St,y:xt,accYear:Q,lastDate:O,numRings:J,outerRadius:et,color:Fu()}}).filter(Boolean))}Kn(()=>{p=Ma().scaleExtent([2,14]).on("zoom",O=>{v(7,x=O.transform)}),nr(S).call(p);const z=S.clientWidth,F=S.clientHeight,Z=2,W=z/2-Z*(z/1.8),$=F/2-Z*(F/2.5),Q=ir.translate(W,$).scale(Z);nr(S).call(p.transform,Q),v(7,x=Q)});function U(z){Ca[z?"unshift":"push"](()=>{S=z,v(2,S)})}return o.$$.update=()=>{if(o.$$.dirty[0]&2&&console.log(y),o.$$.dirty[0]&1029&&l&&S&&k!==void 0&&v(3,E=D()),o.$$.dirty[0]&2072&&C&&C.PlantDates){const F=[...C.PlantDates].sort((Z,W)=>Z.Date-W.Date).map(Z=>String(Z.PlantID).toLowerCase());v(4,c=E.filter(Z=>F.includes(String(Z.id).toLowerCase()))),c.sort((Z,W)=>F.indexOf(String(Z.id).toLowerCase())-F.indexOf(String(W.id).toLowerCase()))}},v(4,c=[]),[l,y,S,E,c,d,I,x,b,A,k,C,U]}class Bu extends Wr{constructor(h){super(),jr(this,h,Gu,Du,Vr,{},null,[-1,-1])}}export{Bu as component};
